{% extends "base.html" %}

{% block title %}Documents - The Combine{% endblock %}

{% block page_title %}Documents{% endblock %}

{% block header_actions %}
<form method="get" action="/admin/documents" class="flex items-center gap-2">
    <input type="text" name="scope_type" placeholder="Scope Type" 
           value="{{ filters.scope_type or '' }}" 
           class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-accent dark:focus:ring-accent-dark focus:outline-none">
    <input type="text" name="scope_id" placeholder="Scope ID"
           value="{{ filters.scope_id or '' }}"
           class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-accent dark:focus:ring-accent-dark focus:outline-none">
    <input type="text" name="document_type" placeholder="Document Type"
           value="{{ filters.document_type or '' }}"
           class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-accent dark:focus:ring-accent-dark focus:outline-none">
    <button type="submit" class="px-4 py-2 text-sm bg-accent dark:bg-accent-dark text-white rounded-md hover:opacity-90 transition-opacity">Filter</button>
</form>
{% endblock %}

{% block content %}
{% if documents %}
<div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
    <table class="w-full text-sm">
        <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
                <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Title</th>
                <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Type</th>
                <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Version</th>
                <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Status</th>
                <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Updated</th>
                <th class="px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Actions</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
            {% for doc in documents %}
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                <td class="px-4 py-3">
                    <a href="/admin/documents/{{ doc.document_id }}" class="text-accent dark:text-accent-dark hover:underline">{{ doc.title }}</a>
                    {% if doc.is_latest %}
                    <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300">Latest</span>
                    {% endif %}
                </td>
                <td class="px-4 py-3"><code class="text-xs bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded">{{ doc.document_type }}</code></td>
                <td class="px-4 py-3">v{{ doc.version }}</td>
                <td class="px-4 py-3">
                    {% set status = doc.status %}
                    {% include "components/status_badge.html" %}
                </td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">{{ doc.updated_at or '-' }}</td>
                <td class="px-4 py-3 space-x-2">
                    <a href="/admin/documents/{{ doc.document_id }}" class="text-accent dark:text-accent-dark hover:underline">View</a>
                    <a href="/admin/documents/{{ doc.document_id }}/versions" class="text-gray-500 dark:text-gray-400 hover:text-accent dark:hover:text-accent-dark">History</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
    <p class="text-gray-500 dark:text-gray-400 mb-2">No documents found.</p>
    {% if not filters.scope_type or not filters.scope_id %}
    <p class="text-sm text-gray-400 dark:text-gray-500">Enter a scope type and scope ID to search for documents.</p>
    {% endif %}
</div>
{% endif %}
{% endblock %}