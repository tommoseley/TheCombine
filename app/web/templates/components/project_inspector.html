<!-- components/project_inspector.html -->
<!-- Stage 2: Pinned Inspector - Document list with status details -->
<!-- Loaded into #inspector-content when a project is selected -->

{% set blocking_docs = [] %}
{% set normal_docs = [] %}

{% for doc in documents %}
    {% if doc.readiness == 'blocked' %}
        {% set _ = blocking_docs.append(doc) %}
    {% else %}
        {% set _ = normal_docs.append(doc) %}
    {% endif %}
{% endfor %}

<!-- Normal Documents -->
<div class="inspector-docs-list">
    {% for doc in normal_docs %}
    <div 
        class="inspector-doc-row"
        data-doc-type-id="{{ doc.doc_type_id }}"
        onclick="navigateToDocument('{{ project_id }}', '{{ doc.doc_type_id }}')"
        role="button"
        tabindex="0">
        
        <!-- Document Icon with Status Overlay -->
        <div class="doc-icon-wrapper">
            <i data-lucide="{{ doc.icon }}" class="w-6 h-6 text-gray-500 dark:text-gray-400"></i>
            <div class="doc-status-overlay">
                {% if doc.acceptance_state == 'needs_acceptance' %}
                    <i data-lucide="alert-triangle" class="w-3 h-3 text-amber-500"></i>
                {% elif doc.acceptance_state == 'rejected' %}
                    <i data-lucide="x" class="w-3 h-3 text-red-500"></i>
                {% elif doc.readiness == 'ready' %}
                    <i data-lucide="check" class="w-3 h-3 text-emerald-500"></i>
                {% elif doc.readiness == 'stale' %}
                    <i data-lucide="alert-triangle" class="w-3 h-3 text-amber-500"></i>
                {% elif doc.readiness == 'waiting' %}
                    <i data-lucide="clock" class="w-3 h-3 text-gray-400"></i>
                {% endif %}
            </div>
        </div>
        
        <!-- Document Info -->
        <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate">
                {{ doc.title }}
            </p>
            {% if doc.subtitle %}
            <p class="text-xs text-gray-500 dark:text-gray-400 truncate">
                {{ doc.subtitle }}
            </p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<!-- Blocking Section - Grouped at bottom with red tint -->
{% if blocking_docs|length > 0 %}
<div class="inspector-blocking-section">
    <div class="inspector-blocking-header">
        <i data-lucide="alert-circle" class="w-3 h-3 inline mr-1"></i>
        Blocking ({{ blocking_docs|length }})
    </div>
    
    {% for doc in blocking_docs %}
    <div 
        class="inspector-doc-row"
        data-doc-type-id="{{ doc.doc_type_id }}"
        onclick="navigateToDocument('{{ project_id }}', '{{ doc.doc_type_id }}')"
        role="button"
        tabindex="0">
        
        <!-- Document Icon with Blocked Overlay -->
        <div class="doc-icon-wrapper">
            <i data-lucide="{{ doc.icon }}" class="w-6 h-6 text-gray-400 dark:text-gray-500"></i>
            <div class="doc-status-overlay">
                <i data-lucide="x" class="w-3 h-3 text-red-500"></i>
            </div>
        </div>
        
        <!-- Document Info -->
        <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-gray-700 dark:text-gray-300 truncate">
                {{ doc.title }}
            </p>
            {% if doc.subtitle %}
            <p class="text-xs text-red-600 dark:text-red-400 truncate">
                {{ doc.subtitle }}
            </p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Empty State -->
{% if not documents or documents|length == 0 %}
<div class="flex flex-col items-center justify-center py-12 px-4">
    <i data-lucide="file-question" class="w-8 h-8 text-gray-300 dark:text-gray-600 mb-2"></i>
    <p class="text-sm text-gray-500 dark:text-gray-400 text-center">No documents configured</p>
</div>
{% endif %}