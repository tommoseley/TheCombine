<!-- components/project_rail.html -->
<!-- Stage 1: Project icons with status badges -->

{% if projects and projects|length > 0 %}
<div class="flex flex-col items-center gap-2 px-2">
    {% for project in projects %}
    <button 
        type="button"
        onclick="selectProject('{{ project.id }}', '{{ project.name }}')"
        class="project-icon-btn {% if project.is_active %}active{% endif %}"
        data-project-id="{{ project.id }}"
        title="{{ project.name }}">
        
        <!-- Project Icon -->
        <i data-lucide="{{ project.icon | default('folder') }}" class="w-6 h-6 text-gray-600 dark:text-gray-300"></i>
        
        <!-- Status Badge - Shows worst status -->
        {% if project.status_summary %}
            {% if project.status_summary.blocked > 0 %}
            <span class="project-status-badge has-blocked">{{ project.status_summary.blocked }}</span>
            {% elif project.status_summary.needs_acceptance > 0 %}
            <span class="project-status-badge has-pending">{{ project.status_summary.needs_acceptance }}</span>
            {% elif project.status_summary.stale > 0 %}
            <span class="project-status-badge has-pending">{{ project.status_summary.stale }}</span>
            {% elif project.status_summary.waiting > 0 %}
            <!-- No badge for waiting - neutral state -->
            {% elif project.status_summary.ready > 0 %}
            <span class="project-status-badge all-ready">âœ“</span>
            {% endif %}
        {% endif %}
    </button>
    {% endfor %}
</div>
{% else %}
<div class="flex flex-col items-center justify-center py-8 px-2">
    <i data-lucide="folder-open" class="w-6 h-6 text-gray-300 dark:text-gray-600 mb-2"></i>
    <p class="text-xs text-gray-400 dark:text-gray-500 text-center">No projects</p>
</div>
{% endif %}