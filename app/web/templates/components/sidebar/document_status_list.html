{# 
  Document Status List Component (ADR-007)
  
  Displays document types with derived status for project sidebar.
  
  Required context:
    - project: Project object with id
    - document_statuses: List[DocumentStatus] from DocumentStatusService
  
  Status icons use Lucide icons (not emoji) per Design Constitution.
  Colors follow "Status Color Meaning" token.
#}

<div class="space-y-1" id="document-status-list">
  {% for doc_status in document_statuses %}
  
  {# Document Row #}
  <div class="group flex items-center justify-between py-2 px-3 rounded-lg cursor-pointer
              hover:bg-gray-50 transition-colors duration-150
              {% if active_doc_type == doc_status.doc_type_id %}bg-blue-50 border-l-2 border-blue-500{% endif %}"
       hx-get="/ui/projects/{{ project.id }}/documents/{{ doc_status.doc_type_id }}"
       hx-target="#main-content"
       hx-push-url="true"
       hx-indicator="#loading-indicator">
      
      {# Left: Icon + Title #}
      <div class="flex items-center gap-2 min-w-0">
        <i data-lucide="{{ doc_status.icon }}" 
           class="w-4 h-4 flex-shrink-0
                  {% if doc_status.readiness == 'blocked' %}text-gray-300
                  {% elif doc_status.readiness == 'waiting' %}text-gray-400
                  {% else %}text-gray-500{% endif %}">
        </i>
        <span class="text-sm truncate
                     {% if doc_status.readiness == 'blocked' %}text-gray-400
                     {% else %}text-gray-700{% endif %}">
          {{ doc_status.title }}
        </span>
      </div>
      
      {# Right: Status Indicators #}
      <div class="flex items-center gap-1.5 flex-shrink-0 ml-2">
        
        {# Readiness Status Icon #}
        {% if doc_status.readiness == 'ready' %}
          <i data-lucide="check-circle" 
             class="w-4 h-4 text-green-500" 
             title="Ready - safe to use"></i>
             
        {% elif doc_status.readiness == 'stale' %}
          <i data-lucide="alert-triangle" 
             class="w-4 h-4 text-amber-500" 
             title="Stale - inputs changed, rebuild recommended"></i>
             
        {% elif doc_status.readiness == 'blocked' %}
          <i data-lucide="x-circle" 
             class="w-4 h-4 text-red-400" 
             title="Blocked - missing: {{ doc_status.missing_inputs | join(', ') }}"></i>
             
        {% elif doc_status.readiness == 'waiting' %}
          <i data-lucide="clock" 
             class="w-4 h-4 text-gray-400" 
             title="Waiting - ready to build"></i>
        {% endif %}
        
        {# Acceptance State Icon (only shown when acceptance_required) #}
        {% if doc_status.acceptance_state %}
          {% if doc_status.acceptance_state == 'accepted' %}
            <i data-lucide="badge-check" 
               class="w-4 h-4 text-green-600" 
               title="Accepted"></i>
               
          {% elif doc_status.acceptance_state == 'needs_acceptance' %}
            <i data-lucide="circle-dot" 
               class="w-4 h-4 text-yellow-500" 
               title="Needs acceptance"></i>
               
          {% elif doc_status.acceptance_state == 'rejected' %}
            <i data-lucide="x-octagon" 
               class="w-4 h-4 text-red-600" 
               title="Rejected - changes requested"></i>
          {% endif %}
        {% endif %}
        
      </div>
  </div>
  
  {# Subtitle Row (contextual hint) #}
  {% if doc_status.subtitle %}
  <div class="pl-9 pr-3 -mt-0.5 mb-1">
    <span class="text-xs text-gray-500">{{ doc_status.subtitle }}</span>
  </div>
  {% endif %}
  
  {% endfor %}
</div>

{# Refresh button for sidebar status #}
<div class="mt-4 pt-4 border-t border-gray-100">
  <button type="button"
          class="w-full text-xs text-gray-400 hover:text-gray-600 
                 flex items-center justify-center gap-1 py-1"
          hx-get="/ui/projects/{{ project.id }}/document-statuses"
          hx-target="#document-status-list"
          hx-swap="outerHTML"
          hx-indicator="#refresh-indicator">
    <i data-lucide="refresh-cw" class="w-3 h-3" id="refresh-indicator"></i>
    <span>Refresh status</span>
  </button>
</div>