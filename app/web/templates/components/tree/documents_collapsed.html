<!-- components/tree/documents_collapsed.html -->
<!-- Shows documents section collapsed with summary status indicators -->
<!-- All icons have title attributes for hover tooltips -->

<li class="tree-node list-none" data-node-id="docs-{{ project.id }}" role="treeitem" aria-expanded="false">
    <div class="flex items-center gap-1 group">
        <!-- Expand Button -->
        <button 
            class="p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
            hx-get="/ui/projects/{{ project.id }}/documents/expand"
            hx-target="closest .tree-node"
            hx-swap="outerHTML"
            aria-label="Expand documents section"
            title="Expand">
            <i data-lucide="chevron-right" class="w-4 h-4" aria-hidden="true"></i>
        </button>
        
        <!-- Documents Link -->
        <a 
            href="/ui/projects/{{ project.id }}/documents"
            hx-get="/ui/projects/{{ project.id }}/documents"
            hx-target="#main-content"
            hx-push-url="true"
            class="tree-link flex-1 flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
            aria-label="View all documents">
            <i data-lucide="file-stack" class="w-4 h-4 text-gray-500 flex-shrink-0" aria-hidden="true" title="Documents"></i>
            <span class="text-sm text-gray-700">Documents</span>
            
            <!-- Summary Status Indicators -->
            {% if document_summary %}
            <span class="ml-auto flex items-center gap-1.5" role="group" aria-label="Document status summary">
                {% if document_summary.ready_count > 0 %}
                <span class="flex items-center gap-0.5" title="{{ document_summary.ready_count }} ready">
                    <i data-lucide="check-circle" class="w-3 h-3 text-green-500" aria-hidden="true"></i>
                    <span class="text-xs text-gray-500">{{ document_summary.ready_count }}</span>
                    <span class="sr-only">{{ document_summary.ready_count }} documents ready</span>
                </span>
                {% endif %}
                {% if document_summary.stale_count > 0 %}
                <span class="flex items-center gap-0.5" title="{{ document_summary.stale_count }} stale — review recommended">
                    <i data-lucide="alert-triangle" class="w-3 h-3 text-amber-500" aria-hidden="true"></i>
                    <span class="text-xs text-gray-500">{{ document_summary.stale_count }}</span>
                    <span class="sr-only">{{ document_summary.stale_count }} documents stale, review recommended</span>
                </span>
                {% endif %}
                {% if document_summary.blocked_count > 0 %}
                <span class="flex items-center gap-0.5" title="{{ document_summary.blocked_count }} blocked — missing prerequisites">
                    <i data-lucide="x-circle" class="w-3 h-3 text-red-500" aria-hidden="true"></i>
                    <span class="text-xs text-gray-500">{{ document_summary.blocked_count }}</span>
                    <span class="sr-only">{{ document_summary.blocked_count }} documents blocked</span>
                </span>
                {% endif %}
                {% if document_summary.waiting_count > 0 %}
                <span class="flex items-center gap-0.5" title="{{ document_summary.waiting_count }} waiting — ready to build">
                    <i data-lucide="clock" class="w-3 h-3 text-gray-400" aria-hidden="true"></i>
                    <span class="text-xs text-gray-500">{{ document_summary.waiting_count }}</span>
                    <span class="sr-only">{{ document_summary.waiting_count }} documents waiting to be built</span>
                </span>
                {% endif %}
            </span>
            {% endif %}
        </a>
    </div>
</li>