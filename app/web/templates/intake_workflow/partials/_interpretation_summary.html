<!-- Interpretation Summary Sidebar (Hardened Record Style) - WS-INTAKE-001 -->
<div id="interpretation-summary" class="border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 overflow-hidden">
    
    <!-- Header with Lock -->
    <div class="px-4 py-3 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 flex items-center gap-2">
        <i data-lucide="lock" class="w-4 h-4 text-slate-400 dark:text-slate-500"></i>
        <h3 class="text-[10px] font-mono font-bold text-slate-600 dark:text-slate-400 uppercase tracking-widest">
            // Project Interpretation
        </h3>
    </div>
    
    <div class="p-4 space-y-4">
        {% for key, field in interpretation.items() %}
        <div>
            <span class="text-[10px] font-mono text-slate-400 dark:text-slate-500 uppercase tracking-wider">{{ key | replace('_', ' ') | title }}</span>
            {% if key == 'problem_statement' %}
            <p class="mt-1 text-sm text-slate-900 dark:text-slate-100 whitespace-pre-wrap leading-relaxed">{{ field.value or '-' }}</p>
            {% else %}
            <p class="mt-1 text-sm text-slate-900 dark:text-slate-100">
                {{ field.value or '-' }}
                {% if field.locked %}
                <span class="ml-1 text-emerald-600 dark:text-emerald-400 text-xs">&#10003;</span>
                {% endif %}
            </p>
            {% endif %}
            {% if field.source %}
            <span class="text-[8px] font-mono text-slate-400 dark:text-slate-500 uppercase">
                {% if field.source == 'user' %}
                <span class="text-emerald-600 dark:text-emerald-500">User Confirmed</span>
                {% else %}
                <span class="text-violet-600 dark:text-violet-500">System Inferred</span>
                {% endif %}
            </span>
            {% endif %}
        </div>
        {% endfor %}
        
        <!-- Project Type Badge -->
        {% if interpretation.get('project_type', {}).get('value') %}
        <div class="pt-3 border-t border-slate-100 dark:border-slate-700">
            <span class="inline-flex items-center gap-1.5 px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-[10px] text-slate-600 dark:text-slate-400">
                <i data-lucide="tag" class="w-3 h-3"></i>
                {{ interpretation.project_type.value | title }}
            </span>
        </div>
        {% endif %}
        
        <!-- Intent Canon reference (collapsed) -->
        {% if intent_canon %}
        <details class="pt-3 border-t border-slate-100 dark:border-slate-700">
            <summary class="text-[9px] font-mono text-slate-400 dark:text-slate-500 cursor-pointer uppercase tracking-wider hover:text-slate-600 dark:hover:text-slate-300">
                Original Statement (immutable)
            </summary>
            <div class="mt-2 text-xs text-slate-500 dark:text-slate-400 whitespace-pre-wrap max-h-32 overflow-y-auto bg-slate-50 dark:bg-slate-900 p-2 rounded border border-slate-100 dark:border-slate-700">{{ intent_canon }}</div>
        </details>
        {% endif %}
    </div>
</div>

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>