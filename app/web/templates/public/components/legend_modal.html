<!-- components/legend_modal.html -->
<!-- Status icon legend popup - triggered from sidebar footer -->

<div id="legend-modal" 
     class="fixed inset-0 z-50 hidden" 
     role="dialog" 
     aria-modal="true" 
     aria-labelledby="legend-title">
    
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity" 
         onclick="closeLegendModal()"></div>
    
    <!-- Modal -->
    <div class="fixed inset-0 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden">
            
            <!-- Header -->
            <div class="flex items-center justify-between px-5 py-4 border-b border-gray-200">
                <h2 id="legend-title" class="text-lg font-semibold text-gray-900">Status Legend</h2>
                <button onclick="closeLegendModal()" 
                        class="p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors"
                        aria-label="Close legend">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <!-- Content -->
            <div class="px-5 py-4 overflow-y-auto max-h-[60vh] space-y-6">
                
                <!-- Readiness Status -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider mb-3">Readiness</h3>
                    <div class="space-y-3">
                        <div class="flex items-start gap-3">
                            <i data-lucide="check-circle" class="w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <p class="text-sm font-medium text-gray-900">Ready</p>
                                <p class="text-sm text-gray-500">Document exists and is current. Safe to use.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <i data-lucide="alert-triangle" class="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <p class="text-sm font-medium text-gray-900">Stale</p>
                                <p class="text-sm text-gray-500">Document exists but inputs have changed. Review or rebuild recommended.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <i data-lucide="x-circle" class="w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <p class="text-sm font-medium text-gray-900">Blocked</p>
                                <p class="text-sm text-gray-500">Cannot be built yet. Required input documents are missing.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <i data-lucide="clock" class="w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <p class="text-sm font-medium text-gray-900">Waiting</p>
                                <p class="text-sm text-gray-500">Ready to build. Prerequisites are met, awaiting your action.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                
            </div>
            
            <!-- Footer -->
            <div class="px-5 py-3 bg-gray-50 border-t border-gray-200">
                <button onclick="closeLegendModal()" 
                        class="w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<script>
function openLegendModal() {
    const modal = document.getElementById('legend-modal');
    modal.classList.remove('hidden');
    document.body.classList.add('overflow-hidden');
    // Initialize Lucide icons in modal
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
}

function closeLegendModal() {
    const modal = document.getElementById('legend-modal');
    modal.classList.add('hidden');
    document.body.classList.remove('overflow-hidden');
}

// Close on Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeLegendModal();
    }
});
</script>

