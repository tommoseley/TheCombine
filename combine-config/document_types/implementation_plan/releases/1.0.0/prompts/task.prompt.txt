# Task: Implementation Plan

Triggering Instruction

You are operating under a certified role prompt.
This task prompt defines only the current task.
Do not modify role identity, authority, or internal reasoning structures.

## Task Objective

Produce the Implementation Plan by decomposing Project Discovery findings into
candidate Work Packages (WPC-###), cross-cutting concerns, risk analysis, and
architecture recommendations.

This document is produced BEFORE Technical Architecture. It contains advisory
candidates only. Candidates are promoted to governed Work Packages later in the
Work Binder after TA review. This document does NOT create committed WPs.

## Inputs Provided

You will receive the following input document:

* Project Discovery - contains problem space, constraints, risks, MVP guardrails, and candidate directions

These are the ONLY sources of requirements. No other context may be assumed.

## Candidate Work Packages (WPC-###)

Each candidate Work Package represents a distinct body of work identified from
discovery findings. Candidates are advisory and will be refined after Technical
Architecture is produced.

### Candidate Rules

1. Each candidate MUST have a unique candidate_id in WPC-### format (e.g., WPC-001, WPC-002).
2. Candidates must decompose intent into distinct value/capability areas.
3. Candidates must have clear scope boundaries (scope_in and scope_out).
4. Dependencies between candidates use depends_on_candidate_id (WPC-### references) or depends_on_external for external prerequisites.
5. Each candidate must have measurable definition_of_done criteria.
6. sequencing_hint is optional but recommended when ordering matters.
7. notes_for_work_binder is optional - use to flag items the Work Binder should consider during promotion.

### Candidate Requirements

Each work_package_candidate must include:
* candidate_id - unique WPC-### format (e.g., "WPC-001")
* title - human-readable
* rationale - why this candidate is needed
* scope_in - what is explicitly in scope
* scope_out - what is explicitly excluded
* dependencies - references to other WPC-### candidates or external prerequisites
* definition_of_done - measurable completion criteria

## Plan Summary

The plan_summary must include:
* overall_intent - what this plan aims to achieve
* mvp_definition - what constitutes MVP
* key_constraints - constraints shaping the plan
* sequencing_rationale - why candidates are ordered this way

Optional:
* assumptions - planning assumptions
* out_of_scope - items explicitly excluded from the entire plan

The plan_summary must remain architecture-agnostic. No component IDs, no
technology choices, no implementation detail.

## Risk Summary

Each risk_summary item must include:
* risk - description of the risk
* affected_candidates - WPC-### IDs affected
* overall_impact - low, medium, high, or critical
* mitigation_strategy - how to address it

Risks must reference candidates by WPC-### ID, not by committed WP IDs
(those do not exist yet).

## Additional Sections

* cross_cutting_concerns - concerns spanning multiple candidates (e.g., security posture, audit, data retention, rollout strategy)
* recommendations_for_architecture - questions, areas of focus, or investigation topics for the TA phase (not decisions)
* open_questions - questions that must be answered to reduce planning risk
* meta - provenance block (schema_version: "3.0", artifact_id, created_at, source: "combine_generated")

System will overwrite meta.created_at and meta.artifact_id with system values.

## Scope Rules

You MUST:
* Start from Project Discovery findings as the baseline
* Decompose intent into distinct, non-overlapping candidate Work Packages
* Surface scope boundaries and exclusions for each candidate
* Identify cross-cutting concerns that span multiple candidates
* Characterize risks at the candidate level
* Provide recommendations for the Technical Architecture phase

You MUST NOT:
* Create committed Work Packages (that happens in the Work Binder after TA)
* Define technical architecture or implementation decisions
* Reference TA component IDs or technology choices (TA has not been produced yet)
* Decompose candidates into features, stories, tasks, or implementation detail
* Assign estimates, timelines, or ownership
* Imply delivery commitment beyond scope definition
* Include governance_pins or transformation fields (those are Work Binder concerns)

## Output Rules

* Output valid JSON only
* Follow the Implementation Plan schema exactly (schema_version: "3.0")
* All arrays must be present even if empty
* Never output null
* No commentary, markdown, or explanation outside JSON
* additionalProperties is false at every level - do not add extra fields

## Governance & Audit Constraints

* All candidates must be traceable to Discovery findings
* No implicit decisions or silent interpretations
* Any uncertainty must be explicitly stated (use open_questions)
* Output must be fully loggable and replayable per ADR-010
* No bypassing of audit, QA, or traceability mechanisms per ADR-009

## Determinism & Replay Readiness

Given identical inputs, the task should:
* Produce equivalent candidates with equivalent scope and intent
* Preserve semantic meaning across runs
* Maintain stable candidate_ids when discovery findings are unchanged
* Avoid stylistic variance that alters interpretation
* Contain no references to time, prior executions, or external state

## Final Self-Check Before Output

1. JSON parses correctly
2. All required fields present at every level
3. meta block present with schema_version "3.0"
4. All candidate_ids are unique and match WPC-### format
5. All dependency references resolve to valid WPC-### IDs or use depends_on_external
6. risk_summary affected_candidates reference valid WPC-### IDs
7. plan_summary is architecture-agnostic (no component IDs, no tech choices)
8. No committed WP fields (no wp_id, no governance_pins, no transformation, no source_candidate_ids)
9. No additional properties at any level
10. cross_cutting_concerns and risk_summary arrays present

## Failure Conditions (Automatic Reject)

This task fails if:
* Committed WP fields appear (wp_id, governance_pins, transformation, source_candidate_ids)
* candidate_reconciliation appears (that is a Work Binder concern, not IP)
* TA component IDs or technology decisions appear
* Role identity or authority is restated or altered
* Stories, tasks, features, or implementation detail appear
* Estimation, scheduling, or ownership is introduced
* Output depends on unstated context or prior runs
* Epic candidates or Epics appear (output must use Work Package candidates only)
