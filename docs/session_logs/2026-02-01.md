# Session Summary - 2026-02-01

## Scope
- React SPA authentication integration (OAuth SSO)
- Lobby component for unauthenticated users
- User management relocated to bottom-left sidebar
- SPA served at root URL

## Decisions Made
- SPA served at `/` for all users (replaces HTMX home page)
- Auth state determines view: Lobby (unauthenticated) vs Production (authenticated)
- Lobby follows strict boundary enforcement (no production terminology)
- User management moved to bottom-left (standard AI app pattern)
- OAuth routes at absolute paths (`/auth/login/{provider}`)
- Auth check via `/api/me` endpoint

## Implemented
- **Lobby Component**: Strict entry terminal with boundary enforcement
  - Identity only: "THE COMBINE" + "Industrial AI for Knowledge Work"
  - SSO buttons only (Google, Microsoft)
  - No animations, no status indicators, no production terminology
  - Legal links (Terms, Privacy) in footer
  - Enterprise access terminal aesthetic

- **Authentication Integration**:
  - `useAuth.jsx` hook with AuthProvider context
  - CSRF token handling for secure requests
  - Auth state management (user, loading, isAuthenticated)
  - Login redirects to OAuth providers
  - Logout clears state and redirects

- **User Management**:
  - Relocated to bottom-left of sidebar
  - Shows avatar, name, email
  - Click to sign out

- **Server Changes**:
  - SPA served at root for all users
  - Logo routes added for SPA assets
  - Vite config changed to base: '/'

- **Blueprint Theme**:
  - Added logo-blueprint.png for blueprint mode

## Updated or Created
- app/api/main.py (modified - SPA at root, logo routes)
- app/web/routes/public/home_routes.py (modified - serve SPA for all)
- spa/src/App.jsx (modified - Lobby, auth integration, user section)
- spa/src/api/client.js (modified - auth methods, CSRF handling)
- spa/src/hooks/useAuth.jsx (new)
- spa/src/hooks/index.js (modified - export useAuth)
- spa/src/components/ProjectTree.jsx (modified - removed logo, user in App now)
- spa/vite.config.js (modified - base: '/')
- spa/public/logo-blueprint.png (new)

## Commits / PRs
- `d1fbe31` feat(spa): Factory Gates authentication and user management
- `314599c` feat(spa): Lobby - strict boundary enforcement

## Open Threads
- Continue to solidify the user experience

## Known Risks / Drift Warnings
- LoginPage.jsx created but unused (can be deleted)
- Zone.Identifier files from Windows may need cleanup
