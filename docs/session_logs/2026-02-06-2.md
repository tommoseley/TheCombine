# Session Summary - 2026-02-06 (Session 2)

## Scope
- WS-ADR-044-003 execution (Composition-First Workbench Redesign)
- BuildingBlocksTray behavior fixes
- concierge_intake workflow migration from seed to combine-config refs
- Future architecture discussion (Mechanical Operations, Interaction Template genericization)

## Decisions Made
- BuildingBlocksTray closes only via X button, not on item selection or outside click
- PGC Gate Internals use single-expansion (Pass A/B mutually exclusive)
- Task refs in workflows use combine-config format: `prompt:task:{name}:{version}`
- Future direction: Mechanical Operations as new Building Block type (Extractors, Mergers, Validators, Transformers, Selectors)
- Future direction: Genericize Intake Gate to use Interaction Template pattern

## Implemented
- **Phase 1**: Removed Building Blocks from DocTypeBrowser.jsx left rail
- **Phase 2**: Created BuildingBlocksTray.jsx as slide-out drawer with Prompt Fragments, Templates, Schemas tabs
- **Phase 3**: Verified single editing surface (already satisfied)
- **Phase 4**: Added single-expansion behavior for PGC Gate Internals
- Fixed tray auto-close behavior through multiple iterations (removed onClose on selection, removed click-outside handler, changed backdrop to pointerEvents: 'none')
- Updated concierge_intake workflow task_refs to combine-config format in both seed/ and combine-config/

## Updated or Created
- `spa/src/components/admin/BuildingBlocksTray.jsx` (NEW)
- `spa/src/components/admin/DocTypeBrowser.jsx` (removed Building Blocks section)
- `spa/src/components/admin/AdminWorkbench.jsx` (integrated tray, added toggle button)
- `spa/src/components/admin/workflow/NodePropertiesPanel.jsx` (single-expansion for PGC)
- `combine-config/workflows/concierge_intake/releases/1.3.0/definition.json` (task_ref format)
- `seed/workflows/concierge_intake.v1.json` (task_ref format)
- `docs/work-statements/WS-ADR-044-003.md` (status to Accepted then execution)
- `docs/PROJECT_STATE.md`

## Commits / PRs
- Commit for WS-ADR-044-003 execution (BuildingBlocksTray, composition-first left rail)
- Commit for tray behavior fixes
- Commit for concierge_intake workflow migration

## Open Threads
- Draft ADR-047 for Mechanical Operations (Extractors, Mergers, Validators, Transformers, Selectors)
- Genericize Intake Gate to use Interaction Template pattern instead of hardcoded intake_gate node type
- Migrate remaining seed/ workflows and prompts to combine-config/

## Known Risks / Drift Warnings
- None
