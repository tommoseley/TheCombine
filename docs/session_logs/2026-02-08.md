# Session Summary - 2026-02-08

## Scope
- Fix intake conversation message ordering (top-to-bottom flow)
- Fix missing user fields on project creation
- Add authentication to intake endpoints
- Auto-assign default workflow on project creation
- Streamline Concierge intake UX for Gate Profile flow
- Add externalized intro content for Concierge

## Decisions Made
- Return full `IntakeStateResponse` from `/start` endpoint instead of minimal `StartIntakeResponse`
- All intake endpoints require authentication via `require_auth` dependency
- Auto-assign `software_product_development` workflow when no workflow exists
- Filter `intake_and_route` from workflow picker (system-internal, not user-selectable)
- Simplify Concierge phases to Describe → Confirm → Done (remove Review/Generate)
- Derive confidence mechanically (future) rather than asking LLM for self-confidence
- Externalize Concierge intro content to YAML file for maintainability

## Implemented
- Message ordering fix: include all messages, prevent duplicates
- Auth: Added `require_auth` to all intake endpoints, pass user_id to project creation
- Auto-assign workflow: `ProjectWorkflow` component auto-assigns on load
- Concierge UX overhaul:
  - Intro content loaded from `/content/concierge-intro.yaml`
  - Added `/content` static mount in backend
  - Renamed "Project Type" to "Intent Classification"
  - Added "Confirmation requested" notice
  - Simplified phase indicator (removed Review/Generate)
  - Removed unused InterpretationEditor and GeneratingIndicator
  - Fixed `useConciergeIntake` to use `updateFromState` on start

## Updated or Created
- `app/api/v1/routers/intake.py` - Message ordering and auth
- `app/api/main.py` - Mount `/content` static files
- `spa/src/components/ConciergeIntakeSidecar.jsx` - Streamlined UX
- `spa/src/components/admin/entry/ConciergeEntryForm.jsx` - UI refinements
- `spa/src/components/concierge/MessageList.jsx` - Added introContent prop
- `spa/src/components/ProjectWorkflow.jsx` - Auto-assign workflow
- `spa/src/hooks/useConciergeIntake.js` - Use updateFromState on start
- `spa/public/content/concierge-intro.yaml` - Externalized intro content

## Commits / PRs
- `8b2d643` - fix(intake): Message ordering and user fields on project creation
- `7ebb1b8` - feat(spa): Auto-assign default workflow on project creation
- `f4ee290` - feat(spa): Streamline Concierge intake UX with Gate Profile

## Open Threads
- Mechanical confidence derivation (future): derive `requires_confirmation` from ambiguous intent, multiple candidates, missing fields

## Known Risks / Drift Warnings
- None
