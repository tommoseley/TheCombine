# Session Summary - 2026-02-09

## Scope
- Fix 25 failing tests by migrating workflow loading from seed/ to combine-config/

## Decisions Made
- Workflow loaders/registries now use combine-config/workflows/ as authoritative source
- active_releases.json provides version resolution for versioned structure
- workflow.v1.json schema extended to support v2 fields (pow_class, derived_from, source_version, tags)
- Tests updated to use snake_case task/role IDs for active version resolution
- seed/workflows/ retained for PromptAssemblyService backward compatibility

## Implemented
- Updated `WorkflowRegistry` to support versioned structure (`{id}/releases/{version}/definition.json`)
- Updated `WorkflowLoader` docstring references
- Updated `workflow_definition.py` default path to combine-config
- Extended `workflow.v1.json` schema to allow workflow.v2 format
- Fixed naming inconsistency in software_product_development workflow (`primary_implementation_plan` vs `implementation_plan_primary`)
- Updated 16 files total (8 production, 8 test)

## Updated or Created
- `app/domain/workflow/registry.py` - Versioned structure support
- `app/domain/workflow/loader.py` - Docstring update
- `app/domain/workflow/plan_loader.py` - Already updated
- `app/domain/workflow/plan_registry.py` - Already updated
- `app/execution/workflow_definition.py` - Default path
- `app/api/services/production_service.py` - Path reference
- `seed/schemas/workflow.v1.json` - v2 field support
- `combine-config/workflows/software_product_development/releases/1.0.0/definition.json` - Naming fix
- `tests/domain/workflow/test_concierge_intake_plan.py` - v1.4.0 structure
- `tests/domain/workflow/test_loader.py` - combine-config path
- `tests/domain/workflow/test_plan_loader.py` - combine-config path
- `tests/domain/workflow/test_prompt_loader.py` - snake_case IDs
- `tests/domain/workflow/test_registry.py` - combine-config path
- `tests/domain/workflow/test_step_executor.py` - snake_case task refs
- `tests/domain/workflow/test_validator.py` - combine-config path
- `tests/tier1/prompt/test_prompt_assembly_service.py` - v1.1 prompts

## Commits / PRs
- `19ad038` - refactor: Migrate workflow loading from seed/ to combine-config/

## Open Threads
- Consider deleting seed/workflows/ after full migration verification
- PromptAssemblyService still uses seed/ paths for includes (workflow parsing)

## Known Risks / Drift Warnings
- None
