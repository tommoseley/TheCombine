# WS-ADR-049-002: DCW Decomposition -- Technical Architecture

**Status:** Complete
**Created:** 2026-02-09
**Scope:** Single-commit (workflow definition update)
**ADR:** ADR-049 (Accepted)

---

## Purpose

Decompose the `technical_architecture` DCW to expose explicit gate internals, following the pattern established in WS-ADR-049-001 (project_discovery). This applies the No Black Boxes principle to the second DCW.

---

## Governing References

- **ADR-049**: No Black Boxes -- Explicit DCW Composition
- **WS-ADR-049-001**: Pattern established for project_discovery decomposition
- **POL-WS-001**: Standard Work Statements

---

## Scope

### In Scope

- Upgrade `technical_architecture` DCW to v2.0.0 with explicit gate internals:
  - PGC Gate with internals (pass_a/LLM, entry/UI, merge/MECH)
  - QA Gate with internals (evaluate/LLM)
  - Generation and remediation nodes with internal_type: LLM
- Update active_releases.json to point to v2.0.0
- Verify definition loads correctly

### Out of Scope

- UI rendering verification (covered in WS-ADR-049-001 Phase 4)
- Creating new prompts or schemas (all exist)
- Workflow execution engine changes

---

## Current State Analysis

**Current `technical_architecture` v1.0.0 structure:**

- `pgc` node (type: pgc) - no explicit internals
- `generation` node (type: task) - no internal_type
- `qa` node (type: qa) - no explicit internals
- `remediation` node (type: task) - no internal_type
- Two end nodes (stabilized, blocked)

**Target structure (v2.0.0):**

- `pgc_gate` node with internals: pass_a (LLM), entry (UI), merge (MECH)
- `generation` node with internal_type: LLM
- `qa_gate` node with internals: evaluate (LLM)
- `remediation` node with internal_type: LLM
- Two end nodes (stabilized, blocked)

---

## Procedure

### Step 1: Create v2.0.0 Definition

Create `combine-config/workflows/technical_architecture/releases/2.0.0/definition.json` following the project_discovery v2.0.0 pattern.

### Step 2: Update active_releases.json

Update `combine-config/_active/active_releases.json` to point technical_architecture to 2.0.0.

### Step 3: Verify Loading

Verify the definition loads correctly via PlanRegistry.

---

## Verification Checklist

- [x] v2.0.0 definition created with explicit gate internals
- [x] PGC Gate has pass_a, entry, merge internals
- [x] QA Gate has evaluate internal
- [x] active_releases.json updated
- [x] Definition loads correctly (PlanRegistry verified)
- [x] All 1955 tests pass

---

## Definition of Done

- `technical_architecture` v2.0.0 exists with explicit gate internals
- All references resolve correctly
- No regressions in workflow tests

---

*End of WS-ADR-049-002*
