(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aj={exports:{}},Vl={},lj={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),d4=Symbol.for("react.portal"),f4=Symbol.for("react.fragment"),p4=Symbol.for("react.strict_mode"),h4=Symbol.for("react.profiler"),m4=Symbol.for("react.provider"),g4=Symbol.for("react.context"),v4=Symbol.for("react.forward_ref"),x4=Symbol.for("react.suspense"),y4=Symbol.for("react.memo"),b4=Symbol.for("react.lazy"),Mx=Symbol.iterator;function w4(e){return e===null||typeof e!="object"?null:(e=Mx&&e[Mx]||e["@@iterator"],typeof e=="function"?e:null)}var cj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uj=Object.assign,dj={};function ui(e,t,r){this.props=e,this.context=t,this.refs=dj,this.updater=r||cj}ui.prototype.isReactComponent={};ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fj(){}fj.prototype=ui.prototype;function Vg(e,t,r){this.props=e,this.context=t,this.refs=dj,this.updater=r||cj}var Ug=Vg.prototype=new fj;Ug.constructor=Vg;uj(Ug,ui.prototype);Ug.isPureReactComponent=!0;var Ax=Array.isArray,pj=Object.prototype.hasOwnProperty,Gg={current:null},hj={key:!0,ref:!0,__self:!0,__source:!0};function mj(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)pj.call(t,n)&&!hj.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:$o,type:e,key:i,ref:o,props:s,_owner:Gg.current}}function _4(e,t){return{$$typeof:$o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kg(e){return typeof e=="object"&&e!==null&&e.$$typeof===$o}function j4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Px=/\/+/g;function Wc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?j4(""+e.key):t.toString(36)}function za(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $o:case d4:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Wc(o,0):n,Ax(s)?(r="",e!=null&&(r=e.replace(Px,"$&/")+"/"),za(s,t,r,"",function(u){return u})):s!=null&&(Kg(s)&&(s=_4(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Px,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Ax(e))for(var a=0;a<e.length;a++){i=e[a];var c=n+Wc(i,a);o+=za(i,t,r,c,s)}else if(c=w4(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=n+Wc(i,a++),o+=za(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function na(e,t,r){if(e==null)return e;var n=[],s=0;return za(e,n,"","",function(i){return t.call(r,i,s++)}),n}function S4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},qa={transition:null},k4={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:qa,ReactCurrentOwner:Gg};function gj(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:na,forEach:function(e,t,r){na(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return na(e,function(){t++}),t},toArray:function(e){return na(e,function(t){return t})||[]},only:function(e){if(!Kg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=ui;fe.Fragment=f4;fe.Profiler=h4;fe.PureComponent=Vg;fe.StrictMode=p4;fe.Suspense=x4;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k4;fe.act=gj;fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=uj({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Gg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)pj.call(t,c)&&!hj.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:$o,type:e.type,key:s,ref:i,props:n,_owner:o}};fe.createContext=function(e){return e={$$typeof:g4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:m4,_context:e},e.Consumer=e};fe.createElement=mj;fe.createFactory=function(e){var t=mj.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:v4,render:e}};fe.isValidElement=Kg;fe.lazy=function(e){return{$$typeof:b4,_payload:{_status:-1,_result:e},_init:S4}};fe.memo=function(e,t){return{$$typeof:y4,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=qa.transition;qa.transition={};try{e()}finally{qa.transition=t}};fe.unstable_act=gj;fe.useCallback=function(e,t){return yt.current.useCallback(e,t)};fe.useContext=function(e){return yt.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};fe.useEffect=function(e,t){return yt.current.useEffect(e,t)};fe.useId=function(){return yt.current.useId()};fe.useImperativeHandle=function(e,t,r){return yt.current.useImperativeHandle(e,t,r)};fe.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return yt.current.useMemo(e,t)};fe.useReducer=function(e,t,r){return yt.current.useReducer(e,t,r)};fe.useRef=function(e){return yt.current.useRef(e)};fe.useState=function(e){return yt.current.useState(e)};fe.useSyncExternalStore=function(e,t,r){return yt.current.useSyncExternalStore(e,t,r)};fe.useTransition=function(){return yt.current.useTransition()};fe.version="18.3.1";lj.exports=fe;var m=lj.exports;const H=Wg(m);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4=m,E4=Symbol.for("react.element"),C4=Symbol.for("react.fragment"),R4=Object.prototype.hasOwnProperty,T4=N4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I4={key:!0,ref:!0,__self:!0,__source:!0};function vj(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)R4.call(t,n)&&!I4.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:E4,type:e,key:i,ref:o,props:s,_owner:T4.current}}Vl.Fragment=C4;Vl.jsx=vj;Vl.jsxs=vj;aj.exports=Vl;var l=aj.exports,Em={},xj={exports:{}},zt={},yj={exports:{}},bj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,I){var z=D.length;D.push(I);e:for(;0<z;){var M=z-1>>>1,q=D[M];if(0<s(q,I))D[M]=I,D[z]=q,z=M;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var I=D[0],z=D.pop();if(z!==I){D[0]=z;e:for(var M=0,q=D.length,A=q>>>1;M<A;){var B=2*(M+1)-1,V=D[B],Y=B+1,te=D[Y];if(0>s(V,z))Y<q&&0>s(te,V)?(D[M]=te,D[Y]=z,M=Y):(D[M]=V,D[B]=z,M=B);else if(Y<q&&0>s(te,z))D[M]=te,D[Y]=z,M=Y;else break e}}return I}function s(D,I){var z=D.sortIndex-I.sortIndex;return z!==0?z:D.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,p=3,h=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=D)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function _(D){if(g=!1,y(D),!b)if(r(c)!==null)b=!0,P(j);else{var I=r(u);I!==null&&F(_,I.startTime-D)}}function j(D,I){b=!1,g&&(g=!1,v(k),k=-1),h=!0;var z=p;try{for(y(I),f=r(c);f!==null&&(!(f.expirationTime>I)||D&&!T());){var M=f.callback;if(typeof M=="function"){f.callback=null,p=f.priorityLevel;var q=M(f.expirationTime<=I);I=e.unstable_now(),typeof q=="function"?f.callback=q:f===r(c)&&n(c),y(I)}else n(c);f=r(c)}if(f!==null)var A=!0;else{var B=r(u);B!==null&&F(_,B.startTime-I),A=!1}return A}finally{f=null,p=z,h=!1}}var S=!1,N=null,k=-1,C=5,R=-1;function T(){return!(e.unstable_now()-R<C)}function L(){if(N!==null){var D=e.unstable_now();R=D;var I=!0;try{I=N(!0,D)}finally{I?$():(S=!1,N=null)}}else S=!1}var $;if(typeof x=="function")$=function(){x(L)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,O=E.port2;E.port1.onmessage=L,$=function(){O.postMessage(null)}}else $=function(){w(L,0)};function P(D){N=D,S||(S=!0,$())}function F(D,I){k=w(function(){D(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||h||(b=!0,P(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var z=p;p=I;try{return D()}finally{p=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=p;p=D;try{return I()}finally{p=z}},e.unstable_scheduleCallback=function(D,I,z){var M=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?M+z:M):z=M,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,D={id:d++,callback:I,priorityLevel:D,startTime:z,expirationTime:q,sortIndex:-1},z>M?(D.sortIndex=z,t(u,D),r(c)===null&&D===r(u)&&(g?(v(k),k=-1):g=!0,F(_,z-M))):(D.sortIndex=q,t(c,D),b||h||(b=!0,P(j))),D},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(D){var I=p;return function(){var z=p;p=I;try{return D.apply(this,arguments)}finally{p=z}}}})(bj);yj.exports=bj;var M4=yj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4=m,Ot=M4;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wj=new Set,fo={};function gs(e,t){Zs(e,t),Zs(e+"Capture",t)}function Zs(e,t){for(fo[e]=t,e=0;e<t.length;e++)wj.add(t[e])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=Object.prototype.hasOwnProperty,P4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dx={},Ox={};function D4(e){return Cm.call(Ox,e)?!0:Cm.call(Dx,e)?!1:P4.test(e)?Ox[e]=!0:(Dx[e]=!0,!1)}function O4(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L4(e,t,r,n){if(t===null||typeof t>"u"||O4(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){at[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];at[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){at[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){at[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){at[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){at[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){at[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){at[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){at[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yg=/[\-:]([a-z])/g;function Xg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yg,Xg);at[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yg,Xg);at[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yg,Xg);at[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){at[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});at.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){at[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qg(e,t,r,n){var s=at.hasOwnProperty(t)?at[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L4(t,r,s,n)&&(r=null),n||s===null?D4(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var tn=A4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),_j=Symbol.for("react.provider"),jj=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Im=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),Sj=Symbol.for("react.offscreen"),Lx=Symbol.iterator;function ki(e){return e===null||typeof e!="object"?null:(e=Lx&&e[Lx]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Vc;function $i(e){if(Vc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Vc=t&&t[1]||""}return`
`+Vc+e}var Uc=!1;function Gc(e,t){if(!e||Uc)return"";Uc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Uc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$i(e):""}function z4(e){switch(e.tag){case 5:return $i(e.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return e=Gc(e.type,!1),e;case 11:return e=Gc(e.type.render,!1),e;case 1:return e=Gc(e.type,!0),e;default:return""}}function Mm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rs:return"Fragment";case Cs:return"Portal";case Rm:return"Profiler";case Zg:return"StrictMode";case Tm:return"Suspense";case Im:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jj:return(e.displayName||"Context")+".Consumer";case _j:return(e._context.displayName||"Context")+".Provider";case Jg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ev:return t=e.displayName||null,t!==null?t:Mm(e.type)||"Memo";case fn:t=e._payload,e=e._init;try{return Mm(e(t))}catch{}}return null}function q4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mm(t);case 8:return t===Zg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $4(e){var t=kj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ia(e){e._valueTracker||(e._valueTracker=$4(e))}function Nj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=kj(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function tl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Am(e,t){var r=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Dn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ej(e,t){t=t.checked,t!=null&&Qg(e,"checked",t,!1)}function Pm(e,t){Ej(e,t);var r=Dn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Dm(e,t.type,Dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Dm(e,t,r){(t!=="number"||tl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fi=Array.isArray;function Bs(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Dn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Om(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $x(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(Fi(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Dn(r)}}function Cj(e,t){var r=Dn(t.value),n=Dn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Fx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oa,Tj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function po(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F4=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(e){F4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zi[t]=Zi[e]})});function Ij(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zi.hasOwnProperty(e)&&Zi[e]?(""+t).trim():t+"px"}function Mj(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ij(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var B4=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(e,t){if(t){if(B4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function qm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $m=null;function tv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fm=null,Hs=null,Ws=null;function Bx(e){if(e=Ho(e)){if(typeof Fm!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Xl(t),Fm(e.stateNode,e.type,t))}}function Aj(e){Hs?Ws?Ws.push(e):Ws=[e]:Hs=e}function Pj(){if(Hs){var e=Hs,t=Ws;if(Ws=Hs=null,Bx(e),t)for(e=0;e<t.length;e++)Bx(t[e])}}function Dj(e,t){return e(t)}function Oj(){}var Kc=!1;function Lj(e,t,r){if(Kc)return e(t,r);Kc=!0;try{return Dj(e,t,r)}finally{Kc=!1,(Hs!==null||Ws!==null)&&(Oj(),Pj())}}function ho(e,t){var r=e.stateNode;if(r===null)return null;var n=Xl(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Bm=!1;if(Kr)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Bm=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Bm=!1}function H4(e,t,r,n,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ji=!1,rl=null,nl=!1,Hm=null,W4={onError:function(e){Ji=!0,rl=e}};function V4(e,t,r,n,s,i,o,a,c){Ji=!1,rl=null,H4.apply(W4,arguments)}function U4(e,t,r,n,s,i,o,a,c){if(V4.apply(this,arguments),Ji){if(Ji){var u=rl;Ji=!1,rl=null}else throw Error(G(198));nl||(nl=!0,Hm=u)}}function vs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hx(e){if(vs(e)!==e)throw Error(G(188))}function G4(e){var t=e.alternate;if(!t){if(t=vs(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Hx(s),e;if(i===n)return Hx(s),t;i=i.sibling}throw Error(G(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(r.alternate!==n)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function qj(e){return e=G4(e),e!==null?$j(e):null}function $j(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$j(e);if(t!==null)return t;e=e.sibling}return null}var Fj=Ot.unstable_scheduleCallback,Wx=Ot.unstable_cancelCallback,K4=Ot.unstable_shouldYield,Y4=Ot.unstable_requestPaint,$e=Ot.unstable_now,X4=Ot.unstable_getCurrentPriorityLevel,rv=Ot.unstable_ImmediatePriority,Bj=Ot.unstable_UserBlockingPriority,sl=Ot.unstable_NormalPriority,Q4=Ot.unstable_LowPriority,Hj=Ot.unstable_IdlePriority,Ul=null,Cr=null;function Z4(e){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Ul,e,void 0,(e.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:tR,J4=Math.log,eR=Math.LN2;function tR(e){return e>>>=0,e===0?32:31-(J4(e)/eR|0)|0}var aa=64,la=4194304;function Bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function il(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Bi(a):(i&=o,i!==0&&(n=Bi(i)))}else o=r&~s,o!==0?n=Bi(o):i!==0&&(n=Bi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-fr(t),s=1<<r,n|=e[r],t&=~s;return n}function rR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nR(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-fr(i),a=1<<o,c=s[o];c===-1?(!(a&r)||a&n)&&(s[o]=rR(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Wm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wj(){var e=aa;return aa<<=1,!(aa&4194240)&&(aa=64),e}function Yc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Fo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fr(t),e[t]=r}function sR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-fr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function nv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-fr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var be=0;function Vj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uj,sv,Gj,Kj,Yj,Vm=!1,ca=[],Sn=null,kn=null,Nn=null,mo=new Map,go=new Map,vn=[],iR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vx(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":mo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(t.pointerId)}}function Ei(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ho(t),t!==null&&sv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oR(e,t,r,n,s){switch(t){case"focusin":return Sn=Ei(Sn,e,t,r,n,s),!0;case"dragenter":return kn=Ei(kn,e,t,r,n,s),!0;case"mouseover":return Nn=Ei(Nn,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return mo.set(i,Ei(mo.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,go.set(i,Ei(go.get(i)||null,e,t,r,n,s)),!0}return!1}function Xj(e){var t=Jn(e.target);if(t!==null){var r=vs(t);if(r!==null){if(t=r.tag,t===13){if(t=zj(r),t!==null){e.blockedOn=t,Yj(e.priority,function(){Gj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $a(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Um(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$m=n,r.target.dispatchEvent(n),$m=null}else return t=Ho(r),t!==null&&sv(t),e.blockedOn=r,!1;t.shift()}return!0}function Ux(e,t,r){$a(e)&&r.delete(t)}function aR(){Vm=!1,Sn!==null&&$a(Sn)&&(Sn=null),kn!==null&&$a(kn)&&(kn=null),Nn!==null&&$a(Nn)&&(Nn=null),mo.forEach(Ux),go.forEach(Ux)}function Ci(e,t){e.blockedOn===t&&(e.blockedOn=null,Vm||(Vm=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,aR)))}function vo(e){function t(s){return Ci(s,e)}if(0<ca.length){Ci(ca[0],e);for(var r=1;r<ca.length;r++){var n=ca[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Sn!==null&&Ci(Sn,e),kn!==null&&Ci(kn,e),Nn!==null&&Ci(Nn,e),mo.forEach(t),go.forEach(t),r=0;r<vn.length;r++)n=vn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<vn.length&&(r=vn[0],r.blockedOn===null);)Xj(r),r.blockedOn===null&&vn.shift()}var Vs=tn.ReactCurrentBatchConfig,ol=!0;function lR(e,t,r,n){var s=be,i=Vs.transition;Vs.transition=null;try{be=1,iv(e,t,r,n)}finally{be=s,Vs.transition=i}}function cR(e,t,r,n){var s=be,i=Vs.transition;Vs.transition=null;try{be=4,iv(e,t,r,n)}finally{be=s,Vs.transition=i}}function iv(e,t,r,n){if(ol){var s=Um(e,t,r,n);if(s===null)iu(e,t,n,al,r),Vx(e,n);else if(oR(s,e,t,r,n))n.stopPropagation();else if(Vx(e,n),t&4&&-1<iR.indexOf(e)){for(;s!==null;){var i=Ho(s);if(i!==null&&Uj(i),i=Um(e,t,r,n),i===null&&iu(e,t,n,al,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else iu(e,t,n,null,r)}}var al=null;function Um(e,t,r,n){if(al=null,e=tv(n),e=Jn(e),e!==null)if(t=vs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zj(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return al=e,null}function Qj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X4()){case rv:return 1;case Bj:return 4;case sl:case Q4:return 16;case Hj:return 536870912;default:return 16}default:return 16}}var _n=null,ov=null,Fa=null;function Zj(){if(Fa)return Fa;var e,t=ov,r=t.length,n,s="value"in _n?_n.value:_n.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Fa=s.slice(e,1<n?1-n:void 0)}function Ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ua(){return!0}function Gx(){return!1}function qt(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ua:Gx,this.isPropagationStopped=Gx,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),t}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=qt(di),Bo=Oe({},di,{view:0,detail:0}),uR=qt(Bo),Xc,Qc,Ri,Gl=Oe({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(Xc=e.screenX-Ri.screenX,Qc=e.screenY-Ri.screenY):Qc=Xc=0,Ri=e),Xc)},movementY:function(e){return"movementY"in e?e.movementY:Qc}}),Kx=qt(Gl),dR=Oe({},Gl,{dataTransfer:0}),fR=qt(dR),pR=Oe({},Bo,{relatedTarget:0}),Zc=qt(pR),hR=Oe({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),mR=qt(hR),gR=Oe({},di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vR=qt(gR),xR=Oe({},di,{data:0}),Yx=qt(xR),yR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _R(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wR[e])?!!t[e]:!1}function lv(){return _R}var jR=Oe({},Bo,{key:function(e){if(e.key){var t=yR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SR=qt(jR),kR=Oe({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=qt(kR),NR=Oe({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),ER=qt(NR),CR=Oe({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),RR=qt(CR),TR=Oe({},Gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IR=qt(TR),MR=[9,13,27,32],cv=Kr&&"CompositionEvent"in window,eo=null;Kr&&"documentMode"in document&&(eo=document.documentMode);var AR=Kr&&"TextEvent"in window&&!eo,Jj=Kr&&(!cv||eo&&8<eo&&11>=eo),Qx=" ",Zx=!1;function eS(e,t){switch(e){case"keyup":return MR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ts=!1;function PR(e,t){switch(e){case"compositionend":return tS(t);case"keypress":return t.which!==32?null:(Zx=!0,Qx);case"textInput":return e=t.data,e===Qx&&Zx?null:e;default:return null}}function DR(e,t){if(Ts)return e==="compositionend"||!cv&&eS(e,t)?(e=Zj(),Fa=ov=_n=null,Ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jj&&t.locale!=="ko"?null:t.data;default:return null}}var OR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OR[e.type]:t==="textarea"}function rS(e,t,r,n){Aj(n),t=ll(t,"onChange"),0<t.length&&(r=new av("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var to=null,xo=null;function LR(e){pS(e,0)}function Kl(e){var t=As(e);if(Nj(t))return e}function zR(e,t){if(e==="change")return t}var nS=!1;if(Kr){var Jc;if(Kr){var eu="oninput"in document;if(!eu){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),eu=typeof ey.oninput=="function"}Jc=eu}else Jc=!1;nS=Jc&&(!document.documentMode||9<document.documentMode)}function ty(){to&&(to.detachEvent("onpropertychange",sS),xo=to=null)}function sS(e){if(e.propertyName==="value"&&Kl(xo)){var t=[];rS(t,xo,e,tv(e)),Lj(LR,t)}}function qR(e,t,r){e==="focusin"?(ty(),to=t,xo=r,to.attachEvent("onpropertychange",sS)):e==="focusout"&&ty()}function $R(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kl(xo)}function FR(e,t){if(e==="click")return Kl(t)}function BR(e,t){if(e==="input"||e==="change")return Kl(t)}function HR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hr=typeof Object.is=="function"?Object.is:HR;function yo(e,t){if(hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Cm.call(t,s)||!hr(e[s],t[s]))return!1}return!0}function ry(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ny(e,t){var r=ry(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ry(r)}}function iS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oS(){for(var e=window,t=tl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=tl(e.document)}return t}function uv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WR(e){var t=oS(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&iS(r.ownerDocument.documentElement,r)){if(n!==null&&uv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=ny(r,i);var o=ny(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VR=Kr&&"documentMode"in document&&11>=document.documentMode,Is=null,Gm=null,ro=null,Km=!1;function sy(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Km||Is==null||Is!==tl(n)||(n=Is,"selectionStart"in n&&uv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ro&&yo(ro,n)||(ro=n,n=ll(Gm,"onSelect"),0<n.length&&(t=new av("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Is)))}function da(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ms={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionend:da("Transition","TransitionEnd")},tu={},aS={};Kr&&(aS=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Yl(e){if(tu[e])return tu[e];if(!Ms[e])return e;var t=Ms[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in aS)return tu[e]=t[r];return e}var lS=Yl("animationend"),cS=Yl("animationiteration"),uS=Yl("animationstart"),dS=Yl("transitionend"),fS=new Map,iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(e,t){fS.set(e,t),gs(t,[e])}for(var ru=0;ru<iy.length;ru++){var nu=iy[ru],UR=nu.toLowerCase(),GR=nu[0].toUpperCase()+nu.slice(1);zn(UR,"on"+GR)}zn(lS,"onAnimationEnd");zn(cS,"onAnimationIteration");zn(uS,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(dS,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function oy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,U4(n,t,void 0,e),e.currentTarget=null}function pS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;oy(s,a,u),i=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;oy(s,a,u),i=c}}}if(nl)throw e=Hm,nl=!1,Hm=null,e}function Ee(e,t){var r=t[Jm];r===void 0&&(r=t[Jm]=new Set);var n=e+"__bubble";r.has(n)||(hS(t,e,2,!1),r.add(n))}function su(e,t,r){var n=0;t&&(n|=4),hS(r,e,n,t)}var fa="_reactListening"+Math.random().toString(36).slice(2);function bo(e){if(!e[fa]){e[fa]=!0,wj.forEach(function(r){r!=="selectionchange"&&(KR.has(r)||su(r,!1,e),su(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fa]||(t[fa]=!0,su("selectionchange",!1,t))}}function hS(e,t,r,n){switch(Qj(t)){case 1:var s=lR;break;case 4:s=cR;break;default:s=iv}r=s.bind(null,t,r,e),s=void 0,!Bm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function iu(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Jn(a),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Lj(function(){var u=i,d=tv(r),f=[];e:{var p=fS.get(e);if(p!==void 0){var h=av,b=e;switch(e){case"keypress":if(Ba(r)===0)break e;case"keydown":case"keyup":h=SR;break;case"focusin":b="focus",h=Zc;break;case"focusout":b="blur",h=Zc;break;case"beforeblur":case"afterblur":h=Zc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=fR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ER;break;case lS:case cS:case uS:h=mR;break;case dS:h=RR;break;case"scroll":h=uR;break;case"wheel":h=IR;break;case"copy":case"cut":case"paste":h=vR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Xx}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var x=u,y;x!==null;){y=x;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,v!==null&&(_=ho(x,v),_!=null&&g.push(wo(x,_,y)))),w)break;x=x.return}0<g.length&&(p=new h(p,b,null,r,d),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==$m&&(b=r.relatedTarget||r.fromElement)&&(Jn(b)||b[Yr]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(b=r.relatedTarget||r.toElement,h=u,b=b?Jn(b):null,b!==null&&(w=vs(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(h=null,b=u),h!==b)){if(g=Kx,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=Xx,_="onPointerLeave",v="onPointerEnter",x="pointer"),w=h==null?p:As(h),y=b==null?p:As(b),p=new g(_,x+"leave",h,r,d),p.target=w,p.relatedTarget=y,_=null,Jn(d)===u&&(g=new g(v,x+"enter",b,r,d),g.target=y,g.relatedTarget=w,_=g),w=_,h&&b)t:{for(g=h,v=b,x=0,y=g;y;y=js(y))x++;for(y=0,_=v;_;_=js(_))y++;for(;0<x-y;)g=js(g),x--;for(;0<y-x;)v=js(v),y--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=js(g),v=js(v)}g=null}else g=null;h!==null&&ay(f,p,h,g,!1),b!==null&&w!==null&&ay(f,w,b,g,!0)}}e:{if(p=u?As(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var j=zR;else if(Jx(p))if(nS)j=BR;else{j=$R;var S=qR}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=FR);if(j&&(j=j(e,u))){rS(f,j,r,d);break e}S&&S(e,p,u),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Dm(p,"number",p.value)}switch(S=u?As(u):window,e){case"focusin":(Jx(S)||S.contentEditable==="true")&&(Is=S,Gm=u,ro=null);break;case"focusout":ro=Gm=Is=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,sy(f,r,d);break;case"selectionchange":if(VR)break;case"keydown":case"keyup":sy(f,r,d)}var N;if(cv)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ts?eS(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Jj&&r.locale!=="ko"&&(Ts||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ts&&(N=Zj()):(_n=d,ov="value"in _n?_n.value:_n.textContent,Ts=!0)),S=ll(u,k),0<S.length&&(k=new Yx(k,e,null,r,d),f.push({event:k,listeners:S}),N?k.data=N:(N=tS(r),N!==null&&(k.data=N)))),(N=AR?PR(e,r):DR(e,r))&&(u=ll(u,"onBeforeInput"),0<u.length&&(d=new Yx("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}pS(f,t)})}function wo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ll(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(e,r),i!=null&&n.unshift(wo(e,i,s)),i=ho(e,t),i!=null&&n.push(wo(e,i,s))),e=e.return}return n}function js(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ay(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,s?(c=ho(r,i),c!=null&&o.unshift(wo(r,c,a))):s||(c=ho(r,i),c!=null&&o.push(wo(r,c,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var YR=/\r\n?/g,XR=/\u0000|\uFFFD/g;function ly(e){return(typeof e=="string"?e:""+e).replace(YR,`
`).replace(XR,"")}function pa(e,t,r){if(t=ly(t),ly(e)!==t&&r)throw Error(G(425))}function cl(){}var Ym=null,Xm=null;function Qm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zm=typeof setTimeout=="function"?setTimeout:void 0,QR=typeof clearTimeout=="function"?clearTimeout:void 0,cy=typeof Promise=="function"?Promise:void 0,ZR=typeof queueMicrotask=="function"?queueMicrotask:typeof cy<"u"?function(e){return cy.resolve(null).then(e).catch(JR)}:Zm;function JR(e){setTimeout(function(){throw e})}function ou(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),vo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);vo(t)}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),Nr="__reactFiber$"+fi,_o="__reactProps$"+fi,Yr="__reactContainer$"+fi,Jm="__reactEvents$"+fi,e5="__reactListeners$"+fi,t5="__reactHandles$"+fi;function Jn(e){var t=e[Nr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Yr]||r[Nr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=uy(e);e!==null;){if(r=e[Nr])return r;e=uy(e)}return t}e=r,r=e.parentNode}return null}function Ho(e){return e=e[Nr]||e[Yr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function As(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Xl(e){return e[_o]||null}var eg=[],Ps=-1;function qn(e){return{current:e}}function Ce(e){0>Ps||(e.current=eg[Ps],eg[Ps]=null,Ps--)}function ke(e,t){Ps++,eg[Ps]=e.current,e.current=t}var On={},ft=qn(On),kt=qn(!1),cs=On;function Js(e,t){var r=e.type.contextTypes;if(!r)return On;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(e){return e=e.childContextTypes,e!=null}function ul(){Ce(kt),Ce(ft)}function dy(e,t,r){if(ft.current!==On)throw Error(G(168));ke(ft,t),ke(kt,r)}function mS(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(G(108,q4(e)||"Unknown",s));return Oe({},r,n)}function dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,cs=ft.current,ke(ft,e),ke(kt,kt.current),!0}function fy(e,t,r){var n=e.stateNode;if(!n)throw Error(G(169));r?(e=mS(e,t,cs),n.__reactInternalMemoizedMergedChildContext=e,Ce(kt),Ce(ft),ke(ft,e)):Ce(kt),ke(kt,r)}var $r=null,Ql=!1,au=!1;function gS(e){$r===null?$r=[e]:$r.push(e)}function r5(e){Ql=!0,gS(e)}function $n(){if(!au&&$r!==null){au=!0;var e=0,t=be;try{var r=$r;for(be=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}$r=null,Ql=!1}catch(s){throw $r!==null&&($r=$r.slice(e+1)),Fj(rv,$n),s}finally{be=t,au=!1}}return null}var Ds=[],Os=0,fl=null,pl=0,Ut=[],Gt=0,us=null,Fr=1,Br="";function Yn(e,t){Ds[Os++]=pl,Ds[Os++]=fl,fl=e,pl=t}function vS(e,t,r){Ut[Gt++]=Fr,Ut[Gt++]=Br,Ut[Gt++]=us,us=e;var n=Fr;e=Br;var s=32-fr(n)-1;n&=~(1<<s),r+=1;var i=32-fr(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Fr=1<<32-fr(t)+s|r<<s|n,Br=i+e}else Fr=1<<i|r<<s|n,Br=e}function dv(e){e.return!==null&&(Yn(e,1),vS(e,1,0))}function fv(e){for(;e===fl;)fl=Ds[--Os],Ds[Os]=null,pl=Ds[--Os],Ds[Os]=null;for(;e===us;)us=Ut[--Gt],Ut[Gt]=null,Br=Ut[--Gt],Ut[Gt]=null,Fr=Ut[--Gt],Ut[Gt]=null}var Dt=null,Pt=null,Te=!1,ur=null;function xS(e,t){var r=Yt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function py(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Pt=En(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=us!==null?{id:Fr,overflow:Br}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Yt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Dt=e,Pt=null,!0):!1;default:return!1}}function tg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rg(e){if(Te){var t=Pt;if(t){var r=t;if(!py(e,t)){if(tg(e))throw Error(G(418));t=En(r.nextSibling);var n=Dt;t&&py(e,t)?xS(n,r):(e.flags=e.flags&-4097|2,Te=!1,Dt=e)}}else{if(tg(e))throw Error(G(418));e.flags=e.flags&-4097|2,Te=!1,Dt=e}}}function hy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function ha(e){if(e!==Dt)return!1;if(!Te)return hy(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qm(e.type,e.memoizedProps)),t&&(t=Pt)){if(tg(e))throw yS(),Error(G(418));for(;t;)xS(e,t),t=En(t.nextSibling)}if(hy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pt=En(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=Dt?En(e.stateNode.nextSibling):null;return!0}function yS(){for(var e=Pt;e;)e=En(e.nextSibling)}function ei(){Pt=Dt=null,Te=!1}function pv(e){ur===null?ur=[e]:ur.push(e)}var n5=tn.ReactCurrentBatchConfig;function Ti(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var n=r.stateNode}if(!n)throw Error(G(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function ma(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function my(e){var t=e._init;return t(e._payload)}function bS(e){function t(v,x){if(e){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=In(v,x),v.index=0,v.sibling=null,v}function i(v,x,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,x,y,_){return x===null||x.tag!==6?(x=hu(y,v.mode,_),x.return=v,x):(x=s(x,y),x.return=v,x)}function c(v,x,y,_){var j=y.type;return j===Rs?d(v,x,y.props.children,_,y.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===fn&&my(j)===x.type)?(_=s(x,y.props),_.ref=Ti(v,x,y),_.return=v,_):(_=Ya(y.type,y.key,y.props,null,v.mode,_),_.ref=Ti(v,x,y),_.return=v,_)}function u(v,x,y,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=mu(y,v.mode,_),x.return=v,x):(x=s(x,y.children||[]),x.return=v,x)}function d(v,x,y,_,j){return x===null||x.tag!==7?(x=os(y,v.mode,_,j),x.return=v,x):(x=s(x,y),x.return=v,x)}function f(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=hu(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sa:return y=Ya(x.type,x.key,x.props,null,v.mode,y),y.ref=Ti(v,null,x),y.return=v,y;case Cs:return x=mu(x,v.mode,y),x.return=v,x;case fn:var _=x._init;return f(v,_(x._payload),y)}if(Fi(x)||ki(x))return x=os(x,v.mode,y,null),x.return=v,x;ma(v,x)}return null}function p(v,x,y,_){var j=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:a(v,x,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case sa:return y.key===j?c(v,x,y,_):null;case Cs:return y.key===j?u(v,x,y,_):null;case fn:return j=y._init,p(v,x,j(y._payload),_)}if(Fi(y)||ki(y))return j!==null?null:d(v,x,y,_,null);ma(v,y)}return null}function h(v,x,y,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(y)||null,a(x,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case sa:return v=v.get(_.key===null?y:_.key)||null,c(x,v,_,j);case Cs:return v=v.get(_.key===null?y:_.key)||null,u(x,v,_,j);case fn:var S=_._init;return h(v,x,y,S(_._payload),j)}if(Fi(_)||ki(_))return v=v.get(y)||null,d(x,v,_,j,null);ma(x,_)}return null}function b(v,x,y,_){for(var j=null,S=null,N=x,k=x=0,C=null;N!==null&&k<y.length;k++){N.index>k?(C=N,N=null):C=N.sibling;var R=p(v,N,y[k],_);if(R===null){N===null&&(N=C);break}e&&N&&R.alternate===null&&t(v,N),x=i(R,x,k),S===null?j=R:S.sibling=R,S=R,N=C}if(k===y.length)return r(v,N),Te&&Yn(v,k),j;if(N===null){for(;k<y.length;k++)N=f(v,y[k],_),N!==null&&(x=i(N,x,k),S===null?j=N:S.sibling=N,S=N);return Te&&Yn(v,k),j}for(N=n(v,N);k<y.length;k++)C=h(N,v,k,y[k],_),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?k:C.key),x=i(C,x,k),S===null?j=C:S.sibling=C,S=C);return e&&N.forEach(function(T){return t(v,T)}),Te&&Yn(v,k),j}function g(v,x,y,_){var j=ki(y);if(typeof j!="function")throw Error(G(150));if(y=j.call(y),y==null)throw Error(G(151));for(var S=j=null,N=x,k=x=0,C=null,R=y.next();N!==null&&!R.done;k++,R=y.next()){N.index>k?(C=N,N=null):C=N.sibling;var T=p(v,N,R.value,_);if(T===null){N===null&&(N=C);break}e&&N&&T.alternate===null&&t(v,N),x=i(T,x,k),S===null?j=T:S.sibling=T,S=T,N=C}if(R.done)return r(v,N),Te&&Yn(v,k),j;if(N===null){for(;!R.done;k++,R=y.next())R=f(v,R.value,_),R!==null&&(x=i(R,x,k),S===null?j=R:S.sibling=R,S=R);return Te&&Yn(v,k),j}for(N=n(v,N);!R.done;k++,R=y.next())R=h(N,v,k,R.value,_),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?k:R.key),x=i(R,x,k),S===null?j=R:S.sibling=R,S=R);return e&&N.forEach(function(L){return t(v,L)}),Te&&Yn(v,k),j}function w(v,x,y,_){if(typeof y=="object"&&y!==null&&y.type===Rs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case sa:e:{for(var j=y.key,S=x;S!==null;){if(S.key===j){if(j=y.type,j===Rs){if(S.tag===7){r(v,S.sibling),x=s(S,y.props.children),x.return=v,v=x;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===fn&&my(j)===S.type){r(v,S.sibling),x=s(S,y.props),x.ref=Ti(v,S,y),x.return=v,v=x;break e}r(v,S);break}else t(v,S);S=S.sibling}y.type===Rs?(x=os(y.props.children,v.mode,_,y.key),x.return=v,v=x):(_=Ya(y.type,y.key,y.props,null,v.mode,_),_.ref=Ti(v,x,y),_.return=v,v=_)}return o(v);case Cs:e:{for(S=y.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){r(v,x.sibling),x=s(x,y.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=mu(y,v.mode,_),x.return=v,v=x}return o(v);case fn:return S=y._init,w(v,x,S(y._payload),_)}if(Fi(y))return b(v,x,y,_);if(ki(y))return g(v,x,y,_);ma(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(r(v,x.sibling),x=s(x,y),x.return=v,v=x):(r(v,x),x=hu(y,v.mode,_),x.return=v,v=x),o(v)):r(v,x)}return w}var ti=bS(!0),wS=bS(!1),hl=qn(null),ml=null,Ls=null,hv=null;function mv(){hv=Ls=ml=null}function gv(e){var t=hl.current;Ce(hl),e._currentValue=t}function ng(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Us(e,t){ml=e,hv=Ls=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jt=!0),e.firstContext=null)}function Zt(e){var t=e._currentValue;if(hv!==e)if(e={context:e,memoizedValue:t,next:null},Ls===null){if(ml===null)throw Error(G(308));Ls=e,ml.dependencies={lanes:0,firstContext:e}}else Ls=Ls.next=e;return t}var es=null;function vv(e){es===null?es=[e]:es.push(e)}function _S(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,vv(t)):(r.next=s.next,s.next=r),t.interleaved=r,Xr(e,n)}function Xr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pn=!1;function xv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ur(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Xr(e,r)}return s=n.interleaved,s===null?(t.next=t,vv(n)):(t.next=s.next,s.next=t),n.interleaved=t,Xr(e,r)}function Ha(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nv(e,r)}}function gy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function gl(e,t,r,n){var s=e.updateQueue;pn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,a=i;do{var p=a.lane,h=a.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,g=a;switch(p=t,h=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){f=b.call(h,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,p=typeof b=="function"?b.call(h,f,p):b,p==null)break e;f=Oe({},f,p);break e;case 2:pn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);fs|=o,e.lanes=o,e.memoizedState=f}}function vy(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(G(191,s));s.call(n)}}}var Wo={},Rr=qn(Wo),jo=qn(Wo),So=qn(Wo);function ts(e){if(e===Wo)throw Error(G(174));return e}function yv(e,t){switch(ke(So,t),ke(jo,e),ke(Rr,Wo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lm(t,e)}Ce(Rr),ke(Rr,t)}function ri(){Ce(Rr),Ce(jo),Ce(So)}function SS(e){ts(So.current);var t=ts(Rr.current),r=Lm(t,e.type);t!==r&&(ke(jo,e),ke(Rr,r))}function bv(e){jo.current===e&&(Ce(Rr),Ce(jo))}var Pe=qn(0);function vl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lu=[];function wv(){for(var e=0;e<lu.length;e++)lu[e]._workInProgressVersionPrimary=null;lu.length=0}var Wa=tn.ReactCurrentDispatcher,cu=tn.ReactCurrentBatchConfig,ds=0,De=null,Ge=null,Ze=null,xl=!1,no=!1,ko=0,s5=0;function ct(){throw Error(G(321))}function _v(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!hr(e[r],t[r]))return!1;return!0}function jv(e,t,r,n,s,i){if(ds=i,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wa.current=e===null||e.memoizedState===null?l5:c5,e=r(n,s),no){i=0;do{if(no=!1,ko=0,25<=i)throw Error(G(301));i+=1,Ze=Ge=null,t.updateQueue=null,Wa.current=u5,e=r(n,s)}while(no)}if(Wa.current=yl,t=Ge!==null&&Ge.next!==null,ds=0,Ze=Ge=De=null,xl=!1,t)throw Error(G(300));return e}function Sv(){var e=ko!==0;return ko=0,e}function kr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?De.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Jt(){if(Ge===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=Ze===null?De.memoizedState:Ze.next;if(t!==null)Ze=t,Ge=e;else{if(e===null)throw Error(G(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ze===null?De.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function No(e,t){return typeof t=="function"?t(e):t}function uu(e){var t=Jt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var n=Ge,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((ds&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=n):c=c.next=f,De.lanes|=d,fs|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=a,hr(n,t.memoizedState)||(jt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,De.lanes|=i,fs|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function du(e){var t=Jt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);hr(i,t.memoizedState)||(jt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function kS(){}function NS(e,t){var r=De,n=Jt(),s=t(),i=!hr(n.memoizedState,s);if(i&&(n.memoizedState=s,jt=!0),n=n.queue,kv(RS.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ze!==null&&Ze.memoizedState.tag&1){if(r.flags|=2048,Eo(9,CS.bind(null,r,n,s,t),void 0,null),et===null)throw Error(G(349));ds&30||ES(r,t,s)}return s}function ES(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function CS(e,t,r,n){t.value=r,t.getSnapshot=n,TS(t)&&IS(e)}function RS(e,t,r){return r(function(){TS(t)&&IS(e)})}function TS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hr(e,r)}catch{return!0}}function IS(e){var t=Xr(e,1);t!==null&&pr(t,e,1,-1)}function xy(e){var t=kr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=a5.bind(null,De,e),[t.memoizedState,e]}function Eo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function MS(){return Jt().memoizedState}function Va(e,t,r,n){var s=kr();De.flags|=e,s.memoizedState=Eo(1|t,r,void 0,n===void 0?null:n)}function Zl(e,t,r,n){var s=Jt();n=n===void 0?null:n;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,n!==null&&_v(n,o.deps)){s.memoizedState=Eo(t,r,i,n);return}}De.flags|=e,s.memoizedState=Eo(1|t,r,i,n)}function yy(e,t){return Va(8390656,8,e,t)}function kv(e,t){return Zl(2048,8,e,t)}function AS(e,t){return Zl(4,2,e,t)}function PS(e,t){return Zl(4,4,e,t)}function DS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OS(e,t,r){return r=r!=null?r.concat([e]):null,Zl(4,4,DS.bind(null,t,e),r)}function Nv(){}function LS(e,t){var r=Jt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_v(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function zS(e,t){var r=Jt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_v(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function qS(e,t,r){return ds&21?(hr(r,t)||(r=Wj(),De.lanes|=r,fs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=r)}function i5(e,t){var r=be;be=r!==0&&4>r?r:4,e(!0);var n=cu.transition;cu.transition={};try{e(!1),t()}finally{be=r,cu.transition=n}}function $S(){return Jt().memoizedState}function o5(e,t,r){var n=Tn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},FS(e))BS(t,r);else if(r=_S(e,t,r,n),r!==null){var s=xt();pr(r,e,n,s),HS(r,t,n)}}function a5(e,t,r){var n=Tn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(FS(e))BS(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,hr(a,o)){var c=t.interleaved;c===null?(s.next=s,vv(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=_S(e,t,s,n),r!==null&&(s=xt(),pr(r,e,n,s),HS(r,t,n))}}function FS(e){var t=e.alternate;return e===De||t!==null&&t===De}function BS(e,t){no=xl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function HS(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nv(e,r)}}var yl={readContext:Zt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},l5={readContext:Zt,useCallback:function(e,t){return kr().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:yy,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Va(4194308,4,DS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var r=kr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=kr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=o5.bind(null,De,e),[n.memoizedState,e]},useRef:function(e){var t=kr();return e={current:e},t.memoizedState=e},useState:xy,useDebugValue:Nv,useDeferredValue:function(e){return kr().memoizedState=e},useTransition:function(){var e=xy(!1),t=e[0];return e=i5.bind(null,e[1]),kr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=De,s=kr();if(Te){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),et===null)throw Error(G(349));ds&30||ES(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,yy(RS.bind(null,n,i,e),[e]),n.flags|=2048,Eo(9,CS.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=kr(),t=et.identifierPrefix;if(Te){var r=Br,n=Fr;r=(n&~(1<<32-fr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ko++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=s5++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c5={readContext:Zt,useCallback:LS,useContext:Zt,useEffect:kv,useImperativeHandle:OS,useInsertionEffect:AS,useLayoutEffect:PS,useMemo:zS,useReducer:uu,useRef:MS,useState:function(){return uu(No)},useDebugValue:Nv,useDeferredValue:function(e){var t=Jt();return qS(t,Ge.memoizedState,e)},useTransition:function(){var e=uu(No)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:kS,useSyncExternalStore:NS,useId:$S,unstable_isNewReconciler:!1},u5={readContext:Zt,useCallback:LS,useContext:Zt,useEffect:kv,useImperativeHandle:OS,useInsertionEffect:AS,useLayoutEffect:PS,useMemo:zS,useReducer:du,useRef:MS,useState:function(){return du(No)},useDebugValue:Nv,useDeferredValue:function(e){var t=Jt();return Ge===null?t.memoizedState=e:qS(t,Ge.memoizedState,e)},useTransition:function(){var e=du(No)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:kS,useSyncExternalStore:NS,useId:$S,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Jl={isMounted:function(e){return(e=e._reactInternals)?vs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xt(),s=Tn(e),i=Ur(n,s);i.payload=t,r!=null&&(i.callback=r),t=Cn(e,i,s),t!==null&&(pr(t,e,s,n),Ha(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xt(),s=Tn(e),i=Ur(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Cn(e,i,s),t!==null&&(pr(t,e,s,n),Ha(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xt(),n=Tn(e),s=Ur(r,n);s.tag=2,t!=null&&(s.callback=t),t=Cn(e,s,n),t!==null&&(pr(t,e,n,r),Ha(t,e,n))}};function by(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!yo(r,n)||!yo(s,i):!0}function WS(e,t,r){var n=!1,s=On,i=t.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Nt(t)?cs:ft.current,n=t.contextTypes,i=(n=n!=null)?Js(e,s):On),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function wy(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Jl.enqueueReplaceState(t,t.state,null)}function ig(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},xv(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Nt(t)?cs:ft.current,s.context=Js(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(sg(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Jl.enqueueReplaceState(s,s.state,null),gl(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ni(e,t){try{var r="",n=t;do r+=z4(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function fu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function og(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var d5=typeof WeakMap=="function"?WeakMap:Map;function VS(e,t,r){r=Ur(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){wl||(wl=!0,gg=n),og(e,t)},r}function US(e,t,r){r=Ur(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){og(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){og(e,t),typeof n!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function _y(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new d5;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=k5.bind(null,e,t,r),t.then(e,e))}function jy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sy(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ur(-1,1),t.tag=2,Cn(r,t,1))),r.lanes|=1),e)}var f5=tn.ReactCurrentOwner,jt=!1;function vt(e,t,r,n){t.child=e===null?wS(t,null,r,n):ti(t,e.child,r,n)}function ky(e,t,r,n,s){r=r.render;var i=t.ref;return Us(t,s),n=jv(e,t,r,n,i,s),r=Sv(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qr(e,t,s)):(Te&&r&&dv(t),t.flags|=1,vt(e,t,n,s),t.child)}function Ny(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Pv(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,GS(e,t,i,n,s)):(e=Ya(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:yo,r(o,n)&&e.ref===t.ref)return Qr(e,t,s)}return t.flags|=1,e=In(i,n),e.ref=t.ref,e.return=t,t.child=e}function GS(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(yo(i,n)&&e.ref===t.ref)if(jt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(jt=!0);else return t.lanes=e.lanes,Qr(e,t,s)}return ag(e,t,r,n,s)}function KS(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(qs,Mt),Mt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(qs,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ke(qs,Mt),Mt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ke(qs,Mt),Mt|=n;return vt(e,t,s,r),t.child}function YS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ag(e,t,r,n,s){var i=Nt(r)?cs:ft.current;return i=Js(t,i),Us(t,s),r=jv(e,t,r,n,i,s),n=Sv(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qr(e,t,s)):(Te&&n&&dv(t),t.flags|=1,vt(e,t,r,s),t.child)}function Ey(e,t,r,n,s){if(Nt(r)){var i=!0;dl(t)}else i=!1;if(Us(t,s),t.stateNode===null)Ua(e,t),WS(t,r,n),ig(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zt(u):(u=Nt(r)?cs:ft.current,u=Js(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==u)&&wy(t,o,n,u),pn=!1;var p=t.memoizedState;o.state=p,gl(t,n,o,s),c=t.memoizedState,a!==n||p!==c||kt.current||pn?(typeof d=="function"&&(sg(t,r,d,n),c=t.memoizedState),(a=pn||by(t,r,a,n,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,jS(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ar(t.type,a),o.props=u,f=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Nt(r)?cs:ft.current,c=Js(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&wy(t,o,n,c),pn=!1,p=t.memoizedState,o.state=p,gl(t,n,o,s);var b=t.memoizedState;a!==f||p!==b||kt.current||pn?(typeof h=="function"&&(sg(t,r,h,n),b=t.memoizedState),(u=pn||by(t,r,u,n,p,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return lg(e,t,r,n,i,s)}function lg(e,t,r,n,s,i){YS(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&fy(t,r,!1),Qr(e,t,i);n=t.stateNode,f5.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ti(t,e.child,null,i),t.child=ti(t,null,a,i)):vt(e,t,a,i),t.memoizedState=n.state,s&&fy(t,r,!0),t.child}function XS(e){var t=e.stateNode;t.pendingContext?dy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dy(e,t.context,!1),yv(e,t.containerInfo)}function Cy(e,t,r,n,s){return ei(),pv(s),t.flags|=256,vt(e,t,r,n),t.child}var cg={dehydrated:null,treeContext:null,retryLane:0};function ug(e){return{baseLanes:e,cachePool:null,transitions:null}}function QS(e,t,r){var n=t.pendingProps,s=Pe.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ke(Pe,s&1),e===null)return rg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rc(o,n,0,null),e=os(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ug(r),t.memoizedState=cg,e):Ev(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return p5(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=In(s,c),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=In(a,i):(i=os(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?ug(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=cg,n}return i=e.child,e=i.sibling,n=In(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ev(e,t){return t=rc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ga(e,t,r,n){return n!==null&&pv(n),ti(t,e.child,null,r),e=Ev(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function p5(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=fu(Error(G(422))),ga(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=rc({mode:"visible",children:n.children},s,0,null),i=os(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ti(t,e.child,null,o),t.child.memoizedState=ug(o),t.memoizedState=cg,i);if(!(t.mode&1))return ga(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(G(419)),n=fu(i,n,void 0),ga(e,t,o,n)}if(a=(o&e.childLanes)!==0,jt||a){if(n=et,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xr(e,s),pr(n,e,s,-1))}return Av(),n=fu(Error(G(421))),ga(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=N5.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Pt=En(s.nextSibling),Dt=t,Te=!0,ur=null,e!==null&&(Ut[Gt++]=Fr,Ut[Gt++]=Br,Ut[Gt++]=us,Fr=e.id,Br=e.overflow,us=t),t=Ev(t,n.children),t.flags|=4096,t)}function Ry(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ng(e.return,t,r)}function pu(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ZS(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(vt(e,t,n.children,r),n=Pe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ry(e,r,t);else if(e.tag===19)Ry(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ke(Pe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&vl(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),pu(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&vl(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}pu(t,!0,r,null,i);break;case"together":pu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=In(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=In(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function h5(e,t,r){switch(t.tag){case 3:XS(t),ei();break;case 5:SS(t);break;case 1:Nt(t.type)&&dl(t);break;case 4:yv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ke(hl,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ke(Pe,Pe.current&1),t.flags|=128,null):r&t.child.childLanes?QS(e,t,r):(ke(Pe,Pe.current&1),e=Qr(e,t,r),e!==null?e.sibling:null);ke(Pe,Pe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ZS(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Pe,Pe.current),n)break;return null;case 22:case 23:return t.lanes=0,KS(e,t,r)}return Qr(e,t,r)}var JS,dg,ek,tk;JS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dg=function(){};ek=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ts(Rr.current);var i=null;switch(r){case"input":s=Am(e,s),n=Am(e,n),i=[];break;case"select":s=Oe({},s,{value:void 0}),n=Oe({},n,{value:void 0}),i=[];break;case"textarea":s=Om(e,s),n=Om(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=cl)}zm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};tk=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ii(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function m5(e,t,r){var n=t.pendingProps;switch(fv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Nt(t.type)&&ul(),ut(t),null;case 3:return n=t.stateNode,ri(),Ce(kt),Ce(ft),wv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ha(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ur!==null&&(yg(ur),ur=null))),dg(e,t),ut(t),null;case 5:bv(t);var s=ts(So.current);if(r=t.type,e!==null&&t.stateNode!=null)ek(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(G(166));return ut(t),null}if(e=ts(Rr.current),ha(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Nr]=t,n[_o]=i,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":case"embed":Ee("load",n);break;case"video":case"audio":for(s=0;s<Hi.length;s++)Ee(Hi[s],n);break;case"source":Ee("error",n);break;case"img":case"image":case"link":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"input":zx(n,i),Ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",n);break;case"textarea":$x(n,i),Ee("invalid",n)}zm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&pa(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&pa(n.textContent,a,e),s=["children",""+a]):fo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",n)}switch(r){case"input":ia(n),qx(n,i,!0);break;case"textarea":ia(n),Fx(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=cl)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rj(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Nr]=t,e[_o]=n,JS(e,t,!1,!1),t.stateNode=e;e:{switch(o=qm(r,n),r){case"dialog":Ee("cancel",e),Ee("close",e),s=n;break;case"iframe":case"object":case"embed":Ee("load",e),s=n;break;case"video":case"audio":for(s=0;s<Hi.length;s++)Ee(Hi[s],e);s=n;break;case"source":Ee("error",e),s=n;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),s=n;break;case"details":Ee("toggle",e),s=n;break;case"input":zx(e,n),s=Am(e,n),Ee("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Oe({},n,{value:void 0}),Ee("invalid",e);break;case"textarea":$x(e,n),s=Om(e,n),Ee("invalid",e);break;default:s=n}zm(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Mj(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tj(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&po(e,c):typeof c=="number"&&po(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",e):c!=null&&Qg(e,i,c,o))}switch(r){case"input":ia(e),qx(e,n,!1);break;case"textarea":ia(e),Fx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Dn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Bs(e,!!n.multiple,i,!1):n.defaultValue!=null&&Bs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=cl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)tk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(G(166));if(r=ts(So.current),ts(Rr.current),ha(t)){if(n=t.stateNode,r=t.memoizedProps,n[Nr]=t,(i=n.nodeValue!==r)&&(e=Dt,e!==null))switch(e.tag){case 3:pa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Nr]=t,t.stateNode=n}return ut(t),null;case 13:if(Ce(Pe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&Pt!==null&&t.mode&1&&!(t.flags&128))yS(),ei(),t.flags|=98560,i=!1;else if(i=ha(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Nr]=t}else ei(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else ur!==null&&(yg(ur),ur=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?Ye===0&&(Ye=3):Av())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return ri(),dg(e,t),e===null&&bo(t.stateNode.containerInfo),ut(t),null;case 10:return gv(t.type._context),ut(t),null;case 17:return Nt(t.type)&&ul(),ut(t),null;case 19:if(Ce(Pe),i=t.memoizedState,i===null)return ut(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ii(i,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=vl(e),o!==null){for(t.flags|=128,Ii(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ke(Pe,Pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>si&&(t.flags|=128,n=!0,Ii(i,!1),t.lanes=4194304)}else{if(!n)if(e=vl(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ii(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return ut(t),null}else 2*$e()-i.renderingStartTime>si&&r!==1073741824&&(t.flags|=128,n=!0,Ii(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,r=Pe.current,ke(Pe,n?r&1|2:r&1),t):(ut(t),null);case 22:case 23:return Mv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Mt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function g5(e,t){switch(fv(t),t.tag){case 1:return Nt(t.type)&&ul(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ri(),Ce(kt),Ce(ft),wv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bv(t),null;case 13:if(Ce(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Pe),null;case 4:return ri(),null;case 10:return gv(t.type._context),null;case 22:case 23:return Mv(),null;case 24:return null;default:return null}}var va=!1,dt=!1,v5=typeof WeakSet=="function"?WeakSet:Set,Q=null;function zs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Le(e,t,n)}else r.current=null}function fg(e,t,r){try{r()}catch(n){Le(e,t,n)}}var Ty=!1;function x5(e,t){if(Ym=ol,e=oS(),uv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||s!==0&&f.nodeType!==3||(a=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===s&&(a=o),p===i&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xm={focusedElem:e,selectionRange:r},ol=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ar(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(_){Le(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return b=Ty,Ty=!1,b}function so(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&fg(t,r,i)}s=s.next}while(s!==n)}}function ec(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function pg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rk(e){var t=e.alternate;t!==null&&(e.alternate=null,rk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nr],delete t[_o],delete t[Jm],delete t[e5],delete t[t5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nk(e){return e.tag===5||e.tag===3||e.tag===4}function Iy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=cl));else if(n!==4&&(e=e.child,e!==null))for(hg(e,t,r),e=e.sibling;e!==null;)hg(e,t,r),e=e.sibling}function mg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(mg(e,t,r),e=e.sibling;e!==null;)mg(e,t,r),e=e.sibling}var it=null,lr=!1;function an(e,t,r){for(r=r.child;r!==null;)sk(e,t,r),r=r.sibling}function sk(e,t,r){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Ul,r)}catch{}switch(r.tag){case 5:dt||zs(r,t);case 6:var n=it,s=lr;it=null,an(e,t,r),it=n,lr=s,it!==null&&(lr?(e=it,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(lr?(e=it,r=r.stateNode,e.nodeType===8?ou(e.parentNode,r):e.nodeType===1&&ou(e,r),vo(e)):ou(it,r.stateNode));break;case 4:n=it,s=lr,it=r.stateNode.containerInfo,lr=!0,an(e,t,r),it=n,lr=s;break;case 0:case 11:case 14:case 15:if(!dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fg(r,t,o),s=s.next}while(s!==n)}an(e,t,r);break;case 1:if(!dt&&(zs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Le(r,t,a)}an(e,t,r);break;case 21:an(e,t,r);break;case 22:r.mode&1?(dt=(n=dt)||r.memoizedState!==null,an(e,t,r),dt=n):an(e,t,r);break;default:an(e,t,r)}}function My(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new v5),t.forEach(function(n){var s=E5.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ir(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,lr=!1;break e;case 3:it=a.stateNode.containerInfo,lr=!0;break e;case 4:it=a.stateNode.containerInfo,lr=!0;break e}a=a.return}if(it===null)throw Error(G(160));sk(i,o,s),it=null,lr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ik(t,e),t=t.sibling}function ik(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ir(t,e),_r(e),n&4){try{so(3,e,e.return),ec(3,e)}catch(g){Le(e,e.return,g)}try{so(5,e,e.return)}catch(g){Le(e,e.return,g)}}break;case 1:ir(t,e),_r(e),n&512&&r!==null&&zs(r,r.return);break;case 5:if(ir(t,e),_r(e),n&512&&r!==null&&zs(r,r.return),e.flags&32){var s=e.stateNode;try{po(s,"")}catch(g){Le(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ej(s,i),qm(a,o);var u=qm(a,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Mj(s,f):d==="dangerouslySetInnerHTML"?Tj(s,f):d==="children"?po(s,f):Qg(s,d,f,u)}switch(a){case"input":Pm(s,i);break;case"textarea":Cj(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Bs(s,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?Bs(s,!!i.multiple,i.defaultValue,!0):Bs(s,!!i.multiple,i.multiple?[]:"",!1))}s[_o]=i}catch(g){Le(e,e.return,g)}}break;case 6:if(ir(t,e),_r(e),n&4){if(e.stateNode===null)throw Error(G(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){Le(e,e.return,g)}}break;case 3:if(ir(t,e),_r(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vo(t.containerInfo)}catch(g){Le(e,e.return,g)}break;case 4:ir(t,e),_r(e);break;case 13:ir(t,e),_r(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Tv=$e())),n&4&&My(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(u=dt)||d,ir(t,e),dt=u):ir(t,e),_r(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Q=e,d=e.child;d!==null;){for(f=Q=d;Q!==null;){switch(p=Q,h=p.child,p.tag){case 0:case 11:case 14:case 15:so(4,p,p.return);break;case 1:zs(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){Le(n,r,g)}}break;case 5:zs(p,p.return);break;case 22:if(p.memoizedState!==null){Py(f);continue}}h!==null?(h.return=p,Q=h):Py(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Ij("display",o))}catch(g){Le(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Le(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ir(t,e),_r(e),n&4&&My(e);break;case 21:break;default:ir(t,e),_r(e)}}function _r(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nk(r)){var n=r;break e}r=r.return}throw Error(G(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(po(s,""),n.flags&=-33);var i=Iy(e);mg(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Iy(e);hg(e,a,o);break;default:throw Error(G(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function y5(e,t,r){Q=e,ok(e)}function ok(e,t,r){for(var n=(e.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||va;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||dt;a=va;var u=dt;if(va=o,(dt=c)&&!u)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?Dy(s):c!==null?(c.return=o,Q=c):Dy(s);for(;i!==null;)Q=i,ok(i),i=i.sibling;Q=s,va=a,dt=u}Ay(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Ay(e)}}function Ay(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||ec(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ar(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vy(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vy(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&vo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}dt||t.flags&512&&pg(t)}catch(p){Le(t,t.return,p)}}if(t===e){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function Py(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function Dy(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ec(4,t)}catch(c){Le(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Le(t,s,c)}}var i=t.return;try{pg(t)}catch(c){Le(t,i,c)}break;case 5:var o=t.return;try{pg(t)}catch(c){Le(t,o,c)}}}catch(c){Le(t,t.return,c)}if(t===e){Q=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Q=a;break}Q=t.return}}var b5=Math.ceil,bl=tn.ReactCurrentDispatcher,Cv=tn.ReactCurrentOwner,Qt=tn.ReactCurrentBatchConfig,ge=0,et=null,Be=null,ot=0,Mt=0,qs=qn(0),Ye=0,Co=null,fs=0,tc=0,Rv=0,io=null,_t=null,Tv=0,si=1/0,qr=null,wl=!1,gg=null,Rn=null,xa=!1,jn=null,_l=0,oo=0,vg=null,Ga=-1,Ka=0;function xt(){return ge&6?$e():Ga!==-1?Ga:Ga=$e()}function Tn(e){return e.mode&1?ge&2&&ot!==0?ot&-ot:n5.transition!==null?(Ka===0&&(Ka=Wj()),Ka):(e=be,e!==0||(e=window.event,e=e===void 0?16:Qj(e.type)),e):1}function pr(e,t,r,n){if(50<oo)throw oo=0,vg=null,Error(G(185));Fo(e,r,n),(!(ge&2)||e!==et)&&(e===et&&(!(ge&2)&&(tc|=r),Ye===4&&xn(e,ot)),Et(e,n),r===1&&ge===0&&!(t.mode&1)&&(si=$e()+500,Ql&&$n()))}function Et(e,t){var r=e.callbackNode;nR(e,t);var n=il(e,e===et?ot:0);if(n===0)r!==null&&Wx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Wx(r),t===1)e.tag===0?r5(Oy.bind(null,e)):gS(Oy.bind(null,e)),ZR(function(){!(ge&6)&&$n()}),r=null;else{switch(Vj(n)){case 1:r=rv;break;case 4:r=Bj;break;case 16:r=sl;break;case 536870912:r=Hj;break;default:r=sl}r=hk(r,ak.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ak(e,t){if(Ga=-1,Ka=0,ge&6)throw Error(G(327));var r=e.callbackNode;if(Gs()&&e.callbackNode!==r)return null;var n=il(e,e===et?ot:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=jl(e,n);else{t=n;var s=ge;ge|=2;var i=ck();(et!==e||ot!==t)&&(qr=null,si=$e()+500,is(e,t));do try{j5();break}catch(a){lk(e,a)}while(!0);mv(),bl.current=i,ge=s,Be!==null?t=0:(et=null,ot=0,t=Ye)}if(t!==0){if(t===2&&(s=Wm(e),s!==0&&(n=s,t=xg(e,s))),t===1)throw r=Co,is(e,0),xn(e,n),Et(e,$e()),r;if(t===6)xn(e,n);else{if(s=e.current.alternate,!(n&30)&&!w5(s)&&(t=jl(e,n),t===2&&(i=Wm(e),i!==0&&(n=i,t=xg(e,i))),t===1))throw r=Co,is(e,0),xn(e,n),Et(e,$e()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(G(345));case 2:Xn(e,_t,qr);break;case 3:if(xn(e,n),(n&130023424)===n&&(t=Tv+500-$e(),10<t)){if(il(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){xt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Zm(Xn.bind(null,e,_t,qr),t);break}Xn(e,_t,qr);break;case 4:if(xn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-fr(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=$e()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*b5(n/1960))-n,10<n){e.timeoutHandle=Zm(Xn.bind(null,e,_t,qr),n);break}Xn(e,_t,qr);break;case 5:Xn(e,_t,qr);break;default:throw Error(G(329))}}}return Et(e,$e()),e.callbackNode===r?ak.bind(null,e):null}function xg(e,t){var r=io;return e.current.memoizedState.isDehydrated&&(is(e,t).flags|=256),e=jl(e,t),e!==2&&(t=_t,_t=r,t!==null&&yg(t)),e}function yg(e){_t===null?_t=e:_t.push.apply(_t,e)}function w5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!hr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xn(e,t){for(t&=~Rv,t&=~tc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-fr(t),n=1<<r;e[r]=-1,t&=~n}}function Oy(e){if(ge&6)throw Error(G(327));Gs();var t=il(e,0);if(!(t&1))return Et(e,$e()),null;var r=jl(e,t);if(e.tag!==0&&r===2){var n=Wm(e);n!==0&&(t=n,r=xg(e,n))}if(r===1)throw r=Co,is(e,0),xn(e,t),Et(e,$e()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,_t,qr),Et(e,$e()),null}function Iv(e,t){var r=ge;ge|=1;try{return e(t)}finally{ge=r,ge===0&&(si=$e()+500,Ql&&$n())}}function ps(e){jn!==null&&jn.tag===0&&!(ge&6)&&Gs();var t=ge;ge|=1;var r=Qt.transition,n=be;try{if(Qt.transition=null,be=1,e)return e()}finally{be=n,Qt.transition=r,ge=t,!(ge&6)&&$n()}}function Mv(){Mt=qs.current,Ce(qs)}function is(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,QR(r)),Be!==null)for(r=Be.return;r!==null;){var n=r;switch(fv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ul();break;case 3:ri(),Ce(kt),Ce(ft),wv();break;case 5:bv(n);break;case 4:ri();break;case 13:Ce(Pe);break;case 19:Ce(Pe);break;case 10:gv(n.type._context);break;case 22:case 23:Mv()}r=r.return}if(et=e,Be=e=In(e.current,null),ot=Mt=t,Ye=0,Co=null,Rv=tc=fs=0,_t=io=null,es!==null){for(t=0;t<es.length;t++)if(r=es[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}es=null}return e}function lk(e,t){do{var r=Be;try{if(mv(),Wa.current=yl,xl){for(var n=De.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}xl=!1}if(ds=0,Ze=Ge=De=null,no=!1,ko=0,Cv.current=null,r===null||r.return===null){Ye=1,Co=t,Be=null;break}e:{var i=e,o=r.return,a=r,c=t;if(t=ot,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=jy(o);if(h!==null){h.flags&=-257,Sy(h,o,a,i,t),h.mode&1&&_y(i,u,t),t=h,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){_y(i,u,t),Av();break e}c=Error(G(426))}}else if(Te&&a.mode&1){var w=jy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Sy(w,o,a,i,t),pv(ni(c,a));break e}}i=c=ni(c,a),Ye!==4&&(Ye=2),io===null?io=[i]:io.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=VS(i,c,t);gy(i,v);break e;case 1:a=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Rn===null||!Rn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=US(i,a,t);gy(i,_);break e}}i=i.return}while(i!==null)}dk(r)}catch(j){t=j,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(!0)}function ck(){var e=bl.current;return bl.current=yl,e===null?yl:e}function Av(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),et===null||!(fs&268435455)&&!(tc&268435455)||xn(et,ot)}function jl(e,t){var r=ge;ge|=2;var n=ck();(et!==e||ot!==t)&&(qr=null,is(e,t));do try{_5();break}catch(s){lk(e,s)}while(!0);if(mv(),ge=r,bl.current=n,Be!==null)throw Error(G(261));return et=null,ot=0,Ye}function _5(){for(;Be!==null;)uk(Be)}function j5(){for(;Be!==null&&!K4();)uk(Be)}function uk(e){var t=pk(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?dk(e):Be=t,Cv.current=null}function dk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=g5(r,t),r!==null){r.flags&=32767,Be=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Be=null;return}}else if(r=m5(r,t,Mt),r!==null){Be=r;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);Ye===0&&(Ye=5)}function Xn(e,t,r){var n=be,s=Qt.transition;try{Qt.transition=null,be=1,S5(e,t,r,n)}finally{Qt.transition=s,be=n}return null}function S5(e,t,r,n){do Gs();while(jn!==null);if(ge&6)throw Error(G(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(sR(e,i),e===et&&(Be=et=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xa||(xa=!0,hk(sl,function(){return Gs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=be;be=1;var a=ge;ge|=4,Cv.current=null,x5(e,r),ik(r,e),WR(Xm),ol=!!Ym,Xm=Ym=null,e.current=r,y5(r),Y4(),ge=a,be=o,Qt.transition=i}else e.current=r;if(xa&&(xa=!1,jn=e,_l=s),i=e.pendingLanes,i===0&&(Rn=null),Z4(r.stateNode),Et(e,$e()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(wl)throw wl=!1,e=gg,gg=null,e;return _l&1&&e.tag!==0&&Gs(),i=e.pendingLanes,i&1?e===vg?oo++:(oo=0,vg=e):oo=0,$n(),null}function Gs(){if(jn!==null){var e=Vj(_l),t=Qt.transition,r=be;try{if(Qt.transition=null,be=16>e?16:e,jn===null)var n=!1;else{if(e=jn,jn=null,_l=0,ge&6)throw Error(G(331));var s=ge;for(ge|=4,Q=e.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:so(8,d,i)}var f=d.child;if(f!==null)f.return=d,Q=f;else for(;Q!==null;){d=Q;var p=d.sibling,h=d.return;if(rk(d),d===u){Q=null;break}if(p!==null){p.return=h,Q=p;break}Q=h}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:so(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Q=v;break e}Q=i.return}}var x=e.current;for(Q=x;Q!==null;){o=Q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Q=y;else e:for(o=x;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ec(9,a)}}catch(j){Le(a,a.return,j)}if(a===o){Q=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Q=_;break e}Q=a.return}}if(ge=s,$n(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Ul,e)}catch{}n=!0}return n}finally{be=r,Qt.transition=t}}return!1}function Ly(e,t,r){t=ni(r,t),t=VS(e,t,1),e=Cn(e,t,1),t=xt(),e!==null&&(Fo(e,1,t),Et(e,t))}function Le(e,t,r){if(e.tag===3)Ly(e,e,r);else for(;t!==null;){if(t.tag===3){Ly(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rn===null||!Rn.has(n))){e=ni(r,e),e=US(t,e,1),t=Cn(t,e,1),e=xt(),t!==null&&(Fo(t,1,e),Et(t,e));break}}t=t.return}}function k5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&r,et===e&&(ot&r)===r&&(Ye===4||Ye===3&&(ot&130023424)===ot&&500>$e()-Tv?is(e,0):Rv|=r),Et(e,t)}function fk(e,t){t===0&&(e.mode&1?(t=la,la<<=1,!(la&130023424)&&(la=4194304)):t=1);var r=xt();e=Xr(e,t),e!==null&&(Fo(e,t,r),Et(e,r))}function N5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fk(e,r)}function E5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(G(314))}n!==null&&n.delete(t),fk(e,r)}var pk;pk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)jt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return jt=!1,h5(e,t,r);jt=!!(e.flags&131072)}else jt=!1,Te&&t.flags&1048576&&vS(t,pl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ua(e,t),e=t.pendingProps;var s=Js(t,ft.current);Us(t,r),s=jv(null,t,n,e,s,r);var i=Sv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(n)?(i=!0,dl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xv(t),s.updater=Jl,t.stateNode=s,s._reactInternals=t,ig(t,n,e,r),t=lg(null,t,n,!0,i,r)):(t.tag=0,Te&&i&&dv(t),vt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ua(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=R5(n),e=ar(n,e),s){case 0:t=ag(null,t,n,e,r);break e;case 1:t=Ey(null,t,n,e,r);break e;case 11:t=ky(null,t,n,e,r);break e;case 14:t=Ny(null,t,n,ar(n.type,e),r);break e}throw Error(G(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),ag(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),Ey(e,t,n,s,r);case 3:e:{if(XS(t),e===null)throw Error(G(387));n=t.pendingProps,i=t.memoizedState,s=i.element,jS(e,t),gl(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ni(Error(G(423)),t),t=Cy(e,t,n,r,s);break e}else if(n!==s){s=ni(Error(G(424)),t),t=Cy(e,t,n,r,s);break e}else for(Pt=En(t.stateNode.containerInfo.firstChild),Dt=t,Te=!0,ur=null,r=wS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ei(),n===s){t=Qr(e,t,r);break e}vt(e,t,n,r)}t=t.child}return t;case 5:return SS(t),e===null&&rg(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Qm(n,s)?o=null:i!==null&&Qm(n,i)&&(t.flags|=32),YS(e,t),vt(e,t,o,r),t.child;case 6:return e===null&&rg(t),null;case 13:return QS(e,t,r);case 4:return yv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ti(t,null,n,r):vt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),ky(e,t,n,s,r);case 7:return vt(e,t,t.pendingProps,r),t.child;case 8:return vt(e,t,t.pendingProps.children,r),t.child;case 12:return vt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ke(hl,n._currentValue),n._currentValue=o,i!==null)if(hr(i.value,o)){if(i.children===s.children&&!kt.current){t=Qr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ur(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ng(i.return,r,t),a.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ng(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Us(t,r),s=Zt(s),n=n(s),t.flags|=1,vt(e,t,n,r),t.child;case 14:return n=t.type,s=ar(n,t.pendingProps),s=ar(n.type,s),Ny(e,t,n,s,r);case 15:return GS(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),Ua(e,t),t.tag=1,Nt(n)?(e=!0,dl(t)):e=!1,Us(t,r),WS(t,n,s),ig(t,n,s,r),lg(null,t,n,!0,e,r);case 19:return ZS(e,t,r);case 22:return KS(e,t,r)}throw Error(G(156,t.tag))};function hk(e,t){return Fj(e,t)}function C5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,r,n){return new C5(e,t,r,n)}function Pv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function R5(e){if(typeof e=="function")return Pv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jg)return 11;if(e===ev)return 14}return 2}function In(e,t){var r=e.alternate;return r===null?(r=Yt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ya(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Pv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rs:return os(r.children,s,i,t);case Zg:o=8,s|=8;break;case Rm:return e=Yt(12,r,t,s|2),e.elementType=Rm,e.lanes=i,e;case Tm:return e=Yt(13,r,t,s),e.elementType=Tm,e.lanes=i,e;case Im:return e=Yt(19,r,t,s),e.elementType=Im,e.lanes=i,e;case Sj:return rc(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _j:o=10;break e;case jj:o=9;break e;case Jg:o=11;break e;case ev:o=14;break e;case fn:o=16,n=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Yt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function os(e,t,r,n){return e=Yt(7,e,n,t),e.lanes=r,e}function rc(e,t,r,n){return e=Yt(22,e,n,t),e.elementType=Sj,e.lanes=r,e.stateNode={isHidden:!1},e}function hu(e,t,r){return e=Yt(6,e,null,t),e.lanes=r,e}function mu(e,t,r){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function T5(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yc(0),this.expirationTimes=Yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dv(e,t,r,n,s,i,o,a,c){return e=new T5(e,t,r,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Yt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xv(i),e}function I5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mk(e){if(!e)return On;e=e._reactInternals;e:{if(vs(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(Nt(r))return mS(e,r,t)}return t}function gk(e,t,r,n,s,i,o,a,c){return e=Dv(r,n,!0,e,s,i,o,a,c),e.context=mk(null),r=e.current,n=xt(),s=Tn(r),i=Ur(n,s),i.callback=t??null,Cn(r,i,s),e.current.lanes=s,Fo(e,s,n),Et(e,n),e}function nc(e,t,r,n){var s=t.current,i=xt(),o=Tn(s);return r=mk(r),t.context===null?t.context=r:t.pendingContext=r,t=Ur(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cn(s,t,o),e!==null&&(pr(e,s,o,i),Ha(e,s,o)),o}function Sl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ov(e,t){zy(e,t),(e=e.alternate)&&zy(e,t)}function M5(){return null}var vk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lv(e){this._internalRoot=e}sc.prototype.render=Lv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));nc(e,t,null,null)};sc.prototype.unmount=Lv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ps(function(){nc(null,e,null,null)}),t[Yr]=null}};function sc(e){this._internalRoot=e}sc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kj();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vn.length&&t!==0&&t<vn[r].priority;r++);vn.splice(r,0,e),r===0&&Xj(e)}};function zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ic(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qy(){}function A5(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Sl(o);i.call(u)}}var o=gk(t,n,e,0,null,!1,!1,"",qy);return e._reactRootContainer=o,e[Yr]=o.current,bo(e.nodeType===8?e.parentNode:e),ps(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=Sl(c);a.call(u)}}var c=Dv(e,0,!1,null,null,!1,!1,"",qy);return e._reactRootContainer=c,e[Yr]=c.current,bo(e.nodeType===8?e.parentNode:e),ps(function(){nc(t,c,r,n)}),c}function oc(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Sl(o);a.call(c)}}nc(t,o,e,s)}else o=A5(r,t,e,s,n);return Sl(o)}Uj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bi(t.pendingLanes);r!==0&&(nv(t,r|1),Et(t,$e()),!(ge&6)&&(si=$e()+500,$n()))}break;case 13:ps(function(){var n=Xr(e,1);if(n!==null){var s=xt();pr(n,e,1,s)}}),Ov(e,1)}};sv=function(e){if(e.tag===13){var t=Xr(e,134217728);if(t!==null){var r=xt();pr(t,e,134217728,r)}Ov(e,134217728)}};Gj=function(e){if(e.tag===13){var t=Tn(e),r=Xr(e,t);if(r!==null){var n=xt();pr(r,e,t,n)}Ov(e,t)}};Kj=function(){return be};Yj=function(e,t){var r=be;try{return be=e,t()}finally{be=r}};Fm=function(e,t,r){switch(t){case"input":if(Pm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Xl(n);if(!s)throw Error(G(90));Nj(n),Pm(n,s)}}}break;case"textarea":Cj(e,r);break;case"select":t=r.value,t!=null&&Bs(e,!!r.multiple,t,!1)}};Dj=Iv;Oj=ps;var P5={usingClientEntryPoint:!1,Events:[Ho,As,Xl,Aj,Pj,Iv]},Mi={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D5={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qj(e),e===null?null:e.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||M5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Ul=ya.inject(D5),Cr=ya}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P5;zt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(t))throw Error(G(200));return I5(e,t,null,r)};zt.createRoot=function(e,t){if(!zv(e))throw Error(G(299));var r=!1,n="",s=vk;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dv(e,1,!1,null,null,r,!1,n,s),e[Yr]=t.current,bo(e.nodeType===8?e.parentNode:e),new Lv(t)};zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=qj(t),e=e===null?null:e.stateNode,e};zt.flushSync=function(e){return ps(e)};zt.hydrate=function(e,t,r){if(!ic(t))throw Error(G(200));return oc(null,e,t,!0,r)};zt.hydrateRoot=function(e,t,r){if(!zv(e))throw Error(G(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=vk;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=gk(t,null,e,1,r??null,s,!1,i,o),e[Yr]=t.current,bo(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sc(t)};zt.render=function(e,t,r){if(!ic(t))throw Error(G(200));return oc(null,e,t,!1,r)};zt.unmountComponentAtNode=function(e){if(!ic(e))throw Error(G(40));return e._reactRootContainer?(ps(function(){oc(null,null,e,!1,function(){e._reactRootContainer=null,e[Yr]=null})}),!0):!1};zt.unstable_batchedUpdates=Iv;zt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ic(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return oc(e,t,r,!1,n)};zt.version="18.3.1-next-f1338f8080-20240426";function xk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xk)}catch(e){console.error(e)}}xk(),xj.exports=zt;var $s=xj.exports,$y=$s;Em.createRoot=$y.createRoot,Em.hydrateRoot=$y.hydrateRoot;function Rt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Rt(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var yk={exports:{}},bk={},wk={exports:{}},_k={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=m;function O5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var L5=typeof Object.is=="function"?Object.is:O5,z5=ii.useState,q5=ii.useEffect,$5=ii.useLayoutEffect,F5=ii.useDebugValue;function B5(e,t){var r=t(),n=z5({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return $5(function(){s.value=r,s.getSnapshot=t,gu(s)&&i({inst:s})},[e,r,t]),q5(function(){return gu(s)&&i({inst:s}),e(function(){gu(s)&&i({inst:s})})},[e]),F5(r),r}function gu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!L5(e,r)}catch{return!0}}function H5(e,t){return t()}var W5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?H5:B5;_k.useSyncExternalStore=ii.useSyncExternalStore!==void 0?ii.useSyncExternalStore:W5;wk.exports=_k;var V5=wk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ac=m,U5=V5;function G5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var K5=typeof Object.is=="function"?Object.is:G5,Y5=U5.useSyncExternalStore,X5=ac.useRef,Q5=ac.useEffect,Z5=ac.useMemo,J5=ac.useDebugValue;bk.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=X5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Z5(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var b=o.value;if(s(b,h))return f=b}return f=h}if(b=f,K5(d,h))return b;var g=n(h);return s!==void 0&&s(b,g)?(d=h,b):(d=h,f=g)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,s]);var a=Y5(e,i[0],i[1]);return Q5(function(){o.hasValue=!0,o.value=a},[a]),J5(a),a};yk.exports=bk;var e3=yk.exports;const t3=Wg(e3),r3={},Fy=e=>{let t;const r=new Set,n=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(b=>b(t,h))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(r3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,s,c);return c},n3=e=>e?Fy(e):Fy,{useDebugValue:s3}=H,{useSyncExternalStoreWithSelector:i3}=t3,o3=e=>e;function jk(e,t=o3,r){const n=i3(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return s3(n),n}const By=(e,t)=>{const r=n3(e),n=(s,i=t)=>jk(r,s,i);return Object.assign(n,r),n},a3=(e,t)=>e?By(e,t):By;function pt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var l3={value:()=>{}};function lc(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Xa(r)}function Xa(e){this._=e}function c3(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Xa.prototype=lc.prototype={constructor:Xa,on:function(e,t){var r=this._,n=c3(e+"",r),s,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((s=(e=n[i]).type)&&(s=u3(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=n[i]).type)r[s]=Hy(r[s],e.name,t);else if(t==null)for(s in r)r[s]=Hy(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Xa(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,i;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,s=i.length;n<s;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],s=0,i=n.length;s<i;++s)n[s].value.apply(t,r)}};function u3(e,t){for(var r=0,n=e.length,s;r<n;++r)if((s=e[r]).name===t)return s.value}function Hy(e,t,r){for(var n=0,s=e.length;n<s;++n)if(e[n].name===t){e[n]=l3,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var bg="http://www.w3.org/1999/xhtml";const Wy={svg:"http://www.w3.org/2000/svg",xhtml:bg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cc(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Wy.hasOwnProperty(t)?{space:Wy[t],local:e}:e}function d3(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===bg&&t.documentElement.namespaceURI===bg?t.createElement(e):t.createElementNS(r,e)}}function f3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sk(e){var t=cc(e);return(t.local?f3:d3)(t)}function p3(){}function qv(e){return e==null?p3:function(){return this.querySelector(e)}}function h3(e){typeof e!="function"&&(e=qv(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,a=n[s]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Lt(n,this._parents)}function m3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function g3(){return[]}function kk(e){return e==null?g3:function(){return this.querySelectorAll(e)}}function v3(e){return function(){return m3(e.apply(this,arguments))}}function x3(e){typeof e=="function"?e=v3(e):e=kk(e);for(var t=this._groups,r=t.length,n=[],s=[],i=0;i<r;++i)for(var o=t[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),s.push(c));return new Lt(n,s)}function Nk(e){return function(){return this.matches(e)}}function Ek(e){return function(t){return t.matches(e)}}var y3=Array.prototype.find;function b3(e){return function(){return y3.call(this.children,e)}}function w3(){return this.firstElementChild}function _3(e){return this.select(e==null?w3:b3(typeof e=="function"?e:Ek(e)))}var j3=Array.prototype.filter;function S3(){return Array.from(this.children)}function k3(e){return function(){return j3.call(this.children,e)}}function N3(e){return this.selectAll(e==null?S3:k3(typeof e=="function"?e:Ek(e)))}function E3(e){typeof e!="function"&&(e=Nk(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,a=n[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Lt(n,this._parents)}function Ck(e){return new Array(e.length)}function C3(){return new Lt(this._enter||this._groups.map(Ck),this._parents)}function kl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}kl.prototype={constructor:kl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function R3(e){return function(){return e}}function T3(e,t,r,n,s,i){for(var o=0,a,c=t.length,u=i.length;o<u;++o)(a=t[o])?(a.__data__=i[o],n[o]=a):r[o]=new kl(e,i[o]);for(;o<c;++o)(a=t[o])&&(s[o]=a)}function I3(e,t,r,n,s,i,o){var a,c,u=new Map,d=t.length,f=i.length,p=new Array(d),h;for(a=0;a<d;++a)(c=t[a])&&(p[a]=h=o.call(c,c.__data__,a,t)+"",u.has(h)?s[a]=c:u.set(h,c));for(a=0;a<f;++a)h=o.call(e,i[a],a,i)+"",(c=u.get(h))?(n[a]=c,c.__data__=i[a],u.delete(h)):r[a]=new kl(e,i[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(p[a])===c&&(s[a]=c)}function M3(e){return e.__data__}function A3(e,t){if(!arguments.length)return Array.from(this,M3);var r=t?I3:T3,n=this._parents,s=this._groups;typeof e!="function"&&(e=R3(e));for(var i=s.length,o=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var d=n[u],f=s[u],p=f.length,h=P3(e.call(d,d&&d.__data__,u,n)),b=h.length,g=a[u]=new Array(b),w=o[u]=new Array(b),v=c[u]=new Array(p);r(d,f,g,w,v,h,t);for(var x=0,y=0,_,j;x<b;++x)if(_=g[x]){for(x>=y&&(y=x+1);!(j=w[y])&&++y<b;);_._next=j||null}}return o=new Lt(o,n),o._enter=a,o._exit=c,o}function P3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function D3(){return new Lt(this._exit||this._groups.map(Ck),this._parents)}function O3(e,t,r){var n=this.enter(),s=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?i.remove():r(i),n&&s?n.merge(s).order():s}function L3(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,s=r.length,i=n.length,o=Math.min(s,i),a=new Array(s),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,p=a[c]=new Array(f),h,b=0;b<f;++b)(h=u[b]||d[b])&&(p[b]=h);for(;c<s;++c)a[c]=r[c];return new Lt(a,this._parents)}function z3(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],s=n.length-1,i=n[s],o;--s>=0;)(o=n[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function q3(e){e||(e=$3);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i){for(var o=r[i],a=o.length,c=s[i]=new Array(a),u,d=0;d<a;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Lt(s,this._parents).order()}function $3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function F3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function B3(){return Array.from(this)}function H3(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length;s<i;++s){var o=n[s];if(o)return o}return null}function W3(){let e=0;for(const t of this)++e;return e}function V3(){return!this.node()}function U3(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var s=t[r],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function G3(e){return function(){this.removeAttribute(e)}}function K3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Y3(e,t){return function(){this.setAttribute(e,t)}}function X3(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Q3(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Z3(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function J3(e,t){var r=cc(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?K3:G3:typeof t=="function"?r.local?Z3:Q3:r.local?X3:Y3)(r,t))}function Rk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eT(e){return function(){this.style.removeProperty(e)}}function tT(e,t,r){return function(){this.style.setProperty(e,t,r)}}function rT(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function nT(e,t,r){return arguments.length>1?this.each((t==null?eT:typeof t=="function"?rT:tT)(e,t,r??"")):oi(this.node(),e)}function oi(e,t){return e.style.getPropertyValue(t)||Rk(e).getComputedStyle(e,null).getPropertyValue(t)}function sT(e){return function(){delete this[e]}}function iT(e,t){return function(){this[e]=t}}function oT(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function aT(e,t){return arguments.length>1?this.each((t==null?sT:typeof t=="function"?oT:iT)(e,t)):this.node()[e]}function Tk(e){return e.trim().split(/^|\s+/)}function $v(e){return e.classList||new Ik(e)}function Ik(e){this._node=e,this._names=Tk(e.getAttribute("class")||"")}Ik.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mk(e,t){for(var r=$v(e),n=-1,s=t.length;++n<s;)r.add(t[n])}function Ak(e,t){for(var r=$v(e),n=-1,s=t.length;++n<s;)r.remove(t[n])}function lT(e){return function(){Mk(this,e)}}function cT(e){return function(){Ak(this,e)}}function uT(e,t){return function(){(t.apply(this,arguments)?Mk:Ak)(this,e)}}function dT(e,t){var r=Tk(e+"");if(arguments.length<2){for(var n=$v(this.node()),s=-1,i=r.length;++s<i;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?uT:t?lT:cT)(r,t))}function fT(){this.textContent=""}function pT(e){return function(){this.textContent=e}}function hT(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mT(e){return arguments.length?this.each(e==null?fT:(typeof e=="function"?hT:pT)(e)):this.node().textContent}function gT(){this.innerHTML=""}function vT(e){return function(){this.innerHTML=e}}function xT(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function yT(e){return arguments.length?this.each(e==null?gT:(typeof e=="function"?xT:vT)(e)):this.node().innerHTML}function bT(){this.nextSibling&&this.parentNode.appendChild(this)}function wT(){return this.each(bT)}function _T(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jT(){return this.each(_T)}function ST(e){var t=typeof e=="function"?e:Sk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kT(){return null}function NT(e,t){var r=typeof e=="function"?e:Sk(e),n=t==null?kT:typeof t=="function"?t:qv(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function ET(){var e=this.parentNode;e&&e.removeChild(this)}function CT(){return this.each(ET)}function RT(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function IT(e){return this.select(e?TT:RT)}function MT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function AT(e){return function(t){e.call(this,t,this.__data__)}}function PT(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function DT(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,s=t.length,i;r<s;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function OT(e,t,r){return function(){var n=this.__on,s,i=AT(t);if(n){for(var o=0,a=n.length;o<a;++o)if((s=n[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=r),s.value=t;return}}this.addEventListener(e.type,i,r),s={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(s):this.__on=[s]}}function LT(e,t,r){var n=PT(e+""),s,i=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(s=0,d=a[c];s<i;++s)if((o=n[s]).type===d.type&&o.name===d.name)return d.value}return}for(a=t?OT:DT,s=0;s<i;++s)this.each(a(n[s],t,r));return this}function Pk(e,t,r){var n=Rk(e),s=n.CustomEvent;typeof s=="function"?s=new s(t,r):(s=n.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function zT(e,t){return function(){return Pk(this,e,t)}}function qT(e,t){return function(){return Pk(this,e,t.apply(this,arguments))}}function $T(e,t){return this.each((typeof t=="function"?qT:zT)(e,t))}function*FT(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length,o;s<i;++s)(o=n[s])&&(yield o)}var Dk=[null];function Lt(e,t){this._groups=e,this._parents=t}function Vo(){return new Lt([[document.documentElement]],Dk)}function BT(){return this}Lt.prototype=Vo.prototype={constructor:Lt,select:h3,selectAll:x3,selectChild:_3,selectChildren:N3,filter:E3,data:A3,enter:C3,exit:D3,join:O3,merge:L3,selection:BT,order:z3,sort:q3,call:F3,nodes:B3,node:H3,size:W3,empty:V3,each:U3,attr:J3,style:nT,property:aT,classed:dT,text:mT,html:yT,raise:wT,lower:jT,append:ST,insert:NT,remove:CT,clone:IT,datum:MT,on:LT,dispatch:$T,[Symbol.iterator]:FT};function Kt(e){return typeof e=="string"?new Lt([[document.querySelector(e)]],[document.documentElement]):new Lt([[e]],Dk)}function HT(e){let t;for(;t=e.sourceEvent;)e=t;return e}function cr(e,t){if(e=HT(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const WT={passive:!1},Ro={capture:!0,passive:!1};function vu(e){e.stopImmediatePropagation()}function Ks(e){e.preventDefault(),e.stopImmediatePropagation()}function Ok(e){var t=e.document.documentElement,r=Kt(e).on("dragstart.drag",Ks,Ro);"onselectstart"in t?r.on("selectstart.drag",Ks,Ro):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Lk(e,t){var r=e.document.documentElement,n=Kt(e).on("dragstart.drag",null);t&&(n.on("click.drag",Ks,Ro),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const ba=e=>()=>e;function wg(e,{sourceEvent:t,subject:r,target:n,identifier:s,active:i,x:o,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}wg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function VT(e){return!e.ctrlKey&&!e.button}function UT(){return this.parentNode}function GT(e,t){return t??{x:e.x,y:e.y}}function KT(){return navigator.maxTouchPoints||"ontouchstart"in this}function YT(){var e=VT,t=UT,r=GT,n=KT,s={},i=lc("start","drag","end"),o=0,a,c,u,d,f=0;function p(_){_.on("mousedown.drag",h).filter(n).on("touchstart.drag",w).on("touchmove.drag",v,WT).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(_,j){if(!(d||!e.call(this,_,j))){var S=y(this,t.call(this,_,j),_,j,"mouse");S&&(Kt(_.view).on("mousemove.drag",b,Ro).on("mouseup.drag",g,Ro),Ok(_.view),vu(_),u=!1,a=_.clientX,c=_.clientY,S("start",_))}}function b(_){if(Ks(_),!u){var j=_.clientX-a,S=_.clientY-c;u=j*j+S*S>f}s.mouse("drag",_)}function g(_){Kt(_.view).on("mousemove.drag mouseup.drag",null),Lk(_.view,u),Ks(_),s.mouse("end",_)}function w(_,j){if(e.call(this,_,j)){var S=_.changedTouches,N=t.call(this,_,j),k=S.length,C,R;for(C=0;C<k;++C)(R=y(this,N,_,j,S[C].identifier,S[C]))&&(vu(_),R("start",_,S[C]))}}function v(_){var j=_.changedTouches,S=j.length,N,k;for(N=0;N<S;++N)(k=s[j[N].identifier])&&(Ks(_),k("drag",_,j[N]))}function x(_){var j=_.changedTouches,S=j.length,N,k;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),N=0;N<S;++N)(k=s[j[N].identifier])&&(vu(_),k("end",_,j[N]))}function y(_,j,S,N,k,C){var R=i.copy(),T=cr(C||S,j),L,$,E;if((E=r.call(_,new wg("beforestart",{sourceEvent:S,target:p,identifier:k,active:o,x:T[0],y:T[1],dx:0,dy:0,dispatch:R}),N))!=null)return L=E.x-T[0]||0,$=E.y-T[1]||0,function O(P,F,D){var I=T,z;switch(P){case"start":s[k]=O,z=o++;break;case"end":delete s[k],--o;case"drag":T=cr(D||F,j),z=o;break}R.call(P,_,new wg(P,{sourceEvent:F,subject:E,target:p,identifier:k,active:z,x:T[0]+L,y:T[1]+$,dx:T[0]-I[0],dy:T[1]-I[1],dispatch:R}),N)}}return p.filter=function(_){return arguments.length?(e=typeof _=="function"?_:ba(!!_),p):e},p.container=function(_){return arguments.length?(t=typeof _=="function"?_:ba(_),p):t},p.subject=function(_){return arguments.length?(r=typeof _=="function"?_:ba(_),p):r},p.touchable=function(_){return arguments.length?(n=typeof _=="function"?_:ba(!!_),p):n},p.on=function(){var _=i.on.apply(i,arguments);return _===i?p:_},p.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,p):Math.sqrt(f)},p}function Fv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function zk(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Uo(){}var To=.7,Nl=1/To,Ys="\\s*([+-]?\\d+)\\s*",Io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XT=/^#([0-9a-f]{3,8})$/,QT=new RegExp(`^rgb\\(${Ys},${Ys},${Ys}\\)$`),ZT=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),JT=new RegExp(`^rgba\\(${Ys},${Ys},${Ys},${Io}\\)$`),eI=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${Io}\\)$`),tI=new RegExp(`^hsl\\(${Io},${Tr},${Tr}\\)$`),rI=new RegExp(`^hsla\\(${Io},${Tr},${Tr},${Io}\\)$`),Vy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fv(Uo,Mo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uy,formatHex:Uy,formatHex8:nI,formatHsl:sI,formatRgb:Gy,toString:Gy});function Uy(){return this.rgb().formatHex()}function nI(){return this.rgb().formatHex8()}function sI(){return qk(this).formatHsl()}function Gy(){return this.rgb().formatRgb()}function Mo(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=XT.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Ky(t):r===3?new St(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=QT.exec(e))?new St(t[1],t[2],t[3],1):(t=ZT.exec(e))?new St(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=JT.exec(e))?wa(t[1],t[2],t[3],t[4]):(t=eI.exec(e))?wa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tI.exec(e))?Qy(t[1],t[2]/100,t[3]/100,1):(t=rI.exec(e))?Qy(t[1],t[2]/100,t[3]/100,t[4]):Vy.hasOwnProperty(e)?Ky(Vy[e]):e==="transparent"?new St(NaN,NaN,NaN,0):null}function Ky(e){return new St(e>>16&255,e>>8&255,e&255,1)}function wa(e,t,r,n){return n<=0&&(e=t=r=NaN),new St(e,t,r,n)}function iI(e){return e instanceof Uo||(e=Mo(e)),e?(e=e.rgb(),new St(e.r,e.g,e.b,e.opacity)):new St}function _g(e,t,r,n){return arguments.length===1?iI(e):new St(e,t,r,n??1)}function St(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Fv(St,_g,zk(Uo,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?To:Math.pow(To,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new St(as(this.r),as(this.g),as(this.b),El(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yy,formatHex:Yy,formatHex8:oI,formatRgb:Xy,toString:Xy}));function Yy(){return`#${rs(this.r)}${rs(this.g)}${rs(this.b)}`}function oI(){return`#${rs(this.r)}${rs(this.g)}${rs(this.b)}${rs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xy(){const e=El(this.opacity);return`${e===1?"rgb(":"rgba("}${as(this.r)}, ${as(this.g)}, ${as(this.b)}${e===1?")":`, ${e})`}`}function El(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function as(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rs(e){return e=as(e),(e<16?"0":"")+e.toString(16)}function Qy(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new dr(e,t,r,n)}function qk(e){if(e instanceof dr)return new dr(e.h,e.s,e.l,e.opacity);if(e instanceof Uo||(e=Mo(e)),!e)return new dr;if(e instanceof dr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,c=(i+s)/2;return a?(t===i?o=(r-n)/a+(r<n)*6:r===i?o=(n-t)/a+2:o=(t-r)/a+4,a/=c<.5?i+s:2-i-s,o*=60):a=c>0&&c<1?0:o,new dr(o,a,c,e.opacity)}function aI(e,t,r,n){return arguments.length===1?qk(e):new dr(e,t,r,n??1)}function dr(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Fv(dr,aI,zk(Uo,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new dr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?To:Math.pow(To,e),new dr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new St(xu(e>=240?e-240:e+120,s,n),xu(e,s,n),xu(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new dr(Zy(this.h),_a(this.s),_a(this.l),El(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=El(this.opacity);return`${e===1?"hsl(":"hsla("}${Zy(this.h)}, ${_a(this.s)*100}%, ${_a(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zy(e){return e=(e||0)%360,e<0?e+360:e}function _a(e){return Math.max(0,Math.min(1,e||0))}function xu(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const $k=e=>()=>e;function lI(e,t){return function(r){return e+r*t}}function cI(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function uI(e){return(e=+e)==1?Fk:function(t,r){return r-t?cI(t,r,e):$k(isNaN(t)?r:t)}}function Fk(e,t){var r=t-e;return r?lI(e,r):$k(isNaN(e)?t:e)}const Jy=function e(t){var r=uI(t);function n(s,i){var o=r((s=_g(s)).r,(i=_g(i)).r),a=r(s.g,i.g),c=r(s.b,i.b),u=Fk(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=a(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function hn(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var jg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yu=new RegExp(jg.source,"g");function dI(e){return function(){return e}}function fI(e){return function(t){return e(t)+""}}function pI(e,t){var r=jg.lastIndex=yu.lastIndex=0,n,s,i,o=-1,a=[],c=[];for(e=e+"",t=t+"";(n=jg.exec(e))&&(s=yu.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:hn(n,s)})),r=yu.lastIndex;return r<t.length&&(i=t.slice(r),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?fI(c[0].x):dI(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)a[(f=c[d]).i]=f.x(u);return a.join("")})}var e0=180/Math.PI,Sg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bk(e,t,r,n,s,i){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,c/=a),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*e0,skewX:Math.atan(c)*e0,scaleX:o,scaleY:a}}var ja;function hI(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Sg:Bk(t.a,t.b,t.c,t.d,t.e,t.f)}function mI(e){return e==null||(ja||(ja=document.createElementNS("http://www.w3.org/2000/svg","g")),ja.setAttribute("transform",e),!(e=ja.transform.baseVal.consolidate()))?Sg:(e=e.matrix,Bk(e.a,e.b,e.c,e.d,e.e,e.f))}function Hk(e,t,r,n){function s(u){return u.length?u.pop()+" ":""}function i(u,d,f,p,h,b){if(u!==f||d!==p){var g=h.push("translate(",null,t,null,r);b.push({i:g-4,x:hn(u,f)},{i:g-2,x:hn(d,p)})}else(f||p)&&h.push("translate("+f+t+p+r)}function o(u,d,f,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:f.push(s(f)+"rotate(",null,n)-2,x:hn(u,d)})):d&&f.push(s(f)+"rotate("+d+n)}function a(u,d,f,p){u!==d?p.push({i:f.push(s(f)+"skewX(",null,n)-2,x:hn(u,d)}):d&&f.push(s(f)+"skewX("+d+n)}function c(u,d,f,p,h,b){if(u!==f||d!==p){var g=h.push(s(h)+"scale(",null,",",null,")");b.push({i:g-4,x:hn(u,f)},{i:g-2,x:hn(d,p)})}else(f!==1||p!==1)&&h.push(s(h)+"scale("+f+","+p+")")}return function(u,d){var f=[],p=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,p),o(u.rotate,d.rotate,f,p),a(u.skewX,d.skewX,f,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,p),u=d=null,function(h){for(var b=-1,g=p.length,w;++b<g;)f[(w=p[b]).i]=w.x(h);return f.join("")}}}var gI=Hk(hI,"px, ","px)","deg)"),vI=Hk(mI,", ",")",")"),xI=1e-12;function t0(e){return((e=Math.exp(e))+1/e)/2}function yI(e){return((e=Math.exp(e))-1/e)/2}function bI(e){return((e=Math.exp(2*e))-1)/(e+1)}const wI=function e(t,r,n){function s(i,o){var a=i[0],c=i[1],u=i[2],d=o[0],f=o[1],p=o[2],h=d-a,b=f-c,g=h*h+b*b,w,v;if(g<xI)v=Math.log(p/u)/t,w=function(N){return[a+N*h,c+N*b,u*Math.exp(t*N*v)]};else{var x=Math.sqrt(g),y=(p*p-u*u+n*g)/(2*u*r*x),_=(p*p-u*u-n*g)/(2*p*r*x),j=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(_*_+1)-_);v=(S-j)/t,w=function(N){var k=N*v,C=t0(j),R=u/(r*x)*(C*bI(t*k+j)-yI(j));return[a+R*h,c+R*b,u*C/t0(t*k+j)]}}return w.duration=v*1e3*t/Math.SQRT2,w}return s.rho=function(i){var o=Math.max(.001,+i),a=o*o,c=a*a;return e(o,a,c)},s}(Math.SQRT2,2,4);var ai=0,Wi=0,Ai=0,Wk=1e3,Cl,Vi,Rl=0,hs=0,uc=0,Ao=typeof performance=="object"&&performance.now?performance:Date,Vk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bv(){return hs||(Vk(_I),hs=Ao.now()+uc)}function _I(){hs=0}function Tl(){this._call=this._time=this._next=null}Tl.prototype=Uk.prototype={constructor:Tl,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Bv():+r)+(t==null?0:+t),!this._next&&Vi!==this&&(Vi?Vi._next=this:Cl=this,Vi=this),this._call=e,this._time=r,kg()},stop:function(){this._call&&(this._call=null,this._time=1/0,kg())}};function Uk(e,t,r){var n=new Tl;return n.restart(e,t,r),n}function jI(){Bv(),++ai;for(var e=Cl,t;e;)(t=hs-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ai}function r0(){hs=(Rl=Ao.now())+uc,ai=Wi=0;try{jI()}finally{ai=0,kI(),hs=0}}function SI(){var e=Ao.now(),t=e-Rl;t>Wk&&(uc-=t,Rl=e)}function kI(){for(var e,t=Cl,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Cl=r);Vi=e,kg(n)}function kg(e){if(!ai){Wi&&(Wi=clearTimeout(Wi));var t=e-hs;t>24?(e<1/0&&(Wi=setTimeout(r0,e-Ao.now()-uc)),Ai&&(Ai=clearInterval(Ai))):(Ai||(Rl=Ao.now(),Ai=setInterval(SI,Wk)),ai=1,Vk(r0))}}function n0(e,t,r){var n=new Tl;return t=t==null?0:+t,n.restart(s=>{n.stop(),e(s+t)},t,r),n}var NI=lc("start","end","cancel","interrupt"),EI=[],Gk=0,s0=1,Ng=2,Qa=3,i0=4,Eg=5,Za=6;function dc(e,t,r,n,s,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;CI(e,r,{name:t,index:n,group:s,on:NI,tween:EI,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Gk})}function Hv(e,t){var r=gr(e,t);if(r.state>Gk)throw new Error("too late; already scheduled");return r}function Ar(e,t){var r=gr(e,t);if(r.state>Qa)throw new Error("too late; already running");return r}function gr(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function CI(e,t,r){var n=e.__transition,s;n[t]=r,r.timer=Uk(i,0,r.time);function i(u){r.state=s0,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,p,h;if(r.state!==s0)return c();for(d in n)if(h=n[d],h.name===r.name){if(h.state===Qa)return n0(o);h.state===i0?(h.state=Za,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[d]):+d<t&&(h.state=Za,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[d])}if(n0(function(){r.state===Qa&&(r.state=i0,r.timer.restart(a,r.delay,r.time),a(u))}),r.state=Ng,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Ng){for(r.state=Qa,s=new Array(p=r.tween.length),d=0,f=-1;d<p;++d)(h=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(s[++f]=h);s.length=f+1}}function a(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=Eg,1),f=-1,p=s.length;++f<p;)s[f].call(e,d);r.state===Eg&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Za,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function Ja(e,t){var r=e.__transition,n,s,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){i=!1;continue}s=n.state>Ng&&n.state<Eg,n.state=Za,n.timer.stop(),n.on.call(s?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}i&&delete e.__transition}}function RI(e){return this.each(function(){Ja(this,e)})}function TI(e,t){var r,n;return function(){var s=Ar(this,e),i=s.tween;if(i!==r){n=r=i;for(var o=0,a=n.length;o<a;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}s.tween=n}}function II(e,t,r){var n,s;if(typeof r!="function")throw new Error;return function(){var i=Ar(this,e),o=i.tween;if(o!==n){s=(n=o).slice();for(var a={name:t,value:r},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=a;break}c===u&&s.push(a)}i.tween=s}}function MI(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=gr(this.node(),r).tween,s=0,i=n.length,o;s<i;++s)if((o=n[s]).name===e)return o.value;return null}return this.each((t==null?TI:II)(r,e,t))}function Wv(e,t,r){var n=e._id;return e.each(function(){var s=Ar(this,n);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return gr(s,n).value[t]}}function Kk(e,t){var r;return(typeof t=="number"?hn:t instanceof Mo?Jy:(r=Mo(t))?(t=r,Jy):pI)(e,t)}function AI(e){return function(){this.removeAttribute(e)}}function PI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DI(e,t,r){var n,s=r+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===n?i:i=t(n=o,r)}}function OI(e,t,r){var n,s=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===n?i:i=t(n=o,r)}}function LI(e,t,r){var n,s,i;return function(){var o,a=r(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===n&&c===s?i:(s=c,i=t(n=o,a)))}}function zI(e,t,r){var n,s,i;return function(){var o,a=r(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===n&&c===s?i:(s=c,i=t(n=o,a)))}}function qI(e,t){var r=cc(e),n=r==="transform"?vI:Kk;return this.attrTween(e,typeof t=="function"?(r.local?zI:LI)(r,n,Wv(this,"attr."+e,t)):t==null?(r.local?PI:AI)(r):(r.local?OI:DI)(r,n,t))}function $I(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function FI(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function BI(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&FI(e,i)),r}return s._value=t,s}function HI(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&$I(e,i)),r}return s._value=t,s}function WI(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=cc(e);return this.tween(r,(n.local?BI:HI)(n,t))}function VI(e,t){return function(){Hv(this,e).delay=+t.apply(this,arguments)}}function UI(e,t){return t=+t,function(){Hv(this,e).delay=t}}function GI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VI:UI)(t,e)):gr(this.node(),t).delay}function KI(e,t){return function(){Ar(this,e).duration=+t.apply(this,arguments)}}function YI(e,t){return t=+t,function(){Ar(this,e).duration=t}}function XI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?KI:YI)(t,e)):gr(this.node(),t).duration}function QI(e,t){if(typeof t!="function")throw new Error;return function(){Ar(this,e).ease=t}}function ZI(e){var t=this._id;return arguments.length?this.each(QI(t,e)):gr(this.node(),t).ease}function JI(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Ar(this,e).ease=r}}function eM(e){if(typeof e!="function")throw new Error;return this.each(JI(this._id,e))}function tM(e){typeof e!="function"&&(e=Nk(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,a=n[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Zr(n,this._parents,this._name,this._id)}function rM(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,s=r.length,i=Math.min(n,s),o=new Array(n),a=0;a<i;++a)for(var c=t[a],u=r[a],d=c.length,f=o[a]=new Array(d),p,h=0;h<d;++h)(p=c[h]||u[h])&&(f[h]=p);for(;a<n;++a)o[a]=t[a];return new Zr(o,this._parents,this._name,this._id)}function nM(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function sM(e,t,r){var n,s,i=nM(t)?Hv:Ar;return function(){var o=i(this,e),a=o.on;a!==n&&(s=(n=a).copy()).on(t,r),o.on=s}}function iM(e,t){var r=this._id;return arguments.length<2?gr(this.node(),r).on.on(e):this.each(sM(r,e,t))}function oM(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function aM(){return this.on("end.remove",oM(this._id))}function lM(e){var t=this._name,r=this._id;typeof e!="function"&&(e=qv(e));for(var n=this._groups,s=n.length,i=new Array(s),o=0;o<s;++o)for(var a=n[o],c=a.length,u=i[o]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=e.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f,dc(u[p],t,r,p,u,gr(d,r)));return new Zr(i,this._parents,t,r)}function cM(e){var t=this._name,r=this._id;typeof e!="function"&&(e=kk(e));for(var n=this._groups,s=n.length,i=[],o=[],a=0;a<s;++a)for(var c=n[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var p=e.call(d,d.__data__,f,c),h,b=gr(d,r),g=0,w=p.length;g<w;++g)(h=p[g])&&dc(h,t,r,g,p,b);i.push(p),o.push(d)}return new Zr(i,o,t,r)}var uM=Vo.prototype.constructor;function dM(){return new uM(this._groups,this._parents)}function fM(e,t){var r,n,s;return function(){var i=oi(this,e),o=(this.style.removeProperty(e),oi(this,e));return i===o?null:i===r&&o===n?s:s=t(r=i,n=o)}}function Yk(e){return function(){this.style.removeProperty(e)}}function pM(e,t,r){var n,s=r+"",i;return function(){var o=oi(this,e);return o===s?null:o===n?i:i=t(n=o,r)}}function hM(e,t,r){var n,s,i;return function(){var o=oi(this,e),a=r(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),oi(this,e))),o===c?null:o===n&&c===s?i:(s=c,i=t(n=o,a))}}function mM(e,t){var r,n,s,i="style."+t,o="end."+i,a;return function(){var c=Ar(this,e),u=c.on,d=c.value[i]==null?a||(a=Yk(t)):void 0;(u!==r||s!==d)&&(n=(r=u).copy()).on(o,s=d),c.on=n}}function gM(e,t,r){var n=(e+="")=="transform"?gI:Kk;return t==null?this.styleTween(e,fM(e,n)).on("end.style."+e,Yk(e)):typeof t=="function"?this.styleTween(e,hM(e,n,Wv(this,"style."+e,t))).each(mM(this._id,e)):this.styleTween(e,pM(e,n,t),r).on("end.style."+e,null)}function vM(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function xM(e,t,r){var n,s;function i(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&vM(e,o,r)),n}return i._value=t,i}function yM(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,xM(e,t,r??""))}function bM(e){return function(){this.textContent=e}}function wM(e){return function(){var t=e(this);this.textContent=t??""}}function _M(e){return this.tween("text",typeof e=="function"?wM(Wv(this,"text",e)):bM(e==null?"":e+""))}function jM(e){return function(t){this.textContent=e.call(this,t)}}function SM(e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&jM(s)),t}return n._value=e,n}function kM(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,SM(e))}function NM(){for(var e=this._name,t=this._id,r=Xk(),n=this._groups,s=n.length,i=0;i<s;++i)for(var o=n[i],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var d=gr(c,t);dc(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Zr(n,this._parents,e,r)}function EM(){var e,t,r=this,n=r._id,s=r.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--s===0&&i()}};r.each(function(){var u=Ar(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),s===0&&i()})}var CM=0;function Zr(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Xk(){return++CM}var Dr=Vo.prototype;Zr.prototype={constructor:Zr,select:lM,selectAll:cM,selectChild:Dr.selectChild,selectChildren:Dr.selectChildren,filter:tM,merge:rM,selection:dM,transition:NM,call:Dr.call,nodes:Dr.nodes,node:Dr.node,size:Dr.size,empty:Dr.empty,each:Dr.each,on:iM,attr:qI,attrTween:WI,style:gM,styleTween:yM,text:_M,textTween:kM,remove:aM,tween:MI,delay:GI,duration:XI,ease:ZI,easeVarying:eM,end:EM,[Symbol.iterator]:Dr[Symbol.iterator]};function RM(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var TM={time:null,delay:0,duration:250,ease:RM};function IM(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function MM(e){var t,r;e instanceof Zr?(t=e._id,e=e._name):(t=Xk(),(r=TM).time=Bv(),e=e==null?null:e+"");for(var n=this._groups,s=n.length,i=0;i<s;++i)for(var o=n[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&dc(c,e,t,u,o,r||IM(c,t));return new Zr(n,this._parents,e,t)}Vo.prototype.interrupt=RI;Vo.prototype.transition=MM;const Sa=e=>()=>e;function AM(e,{sourceEvent:t,target:r,transform:n,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:s}})}function Hr(e,t,r){this.k=e,this.x=t,this.y=r}Hr.prototype={constructor:Hr,scale:function(e){return e===1?this:new Hr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Hr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gr=new Hr(1,0,0);Hr.prototype;function bu(e){e.stopImmediatePropagation()}function Pi(e){e.preventDefault(),e.stopImmediatePropagation()}function PM(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function DM(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function o0(){return this.__zoom||Gr}function OM(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function LM(){return navigator.maxTouchPoints||"ontouchstart"in this}function zM(e,t,r){var n=e.invertX(t[0][0])-r[0][0],s=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(s>n?(n+s)/2:Math.min(0,n)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Qk(){var e=PM,t=DM,r=zM,n=OM,s=LM,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=wI,u=lc("start","zoom","end"),d,f,p,h=500,b=150,g=0,w=10;function v(E){E.property("__zoom",o0).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",R).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(E,O,P,F){var D=E.selection?E.selection():E;D.property("__zoom",o0),E!==D?j(E,O,P,F):D.interrupt().each(function(){S(this,arguments).event(F).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},v.scaleBy=function(E,O,P,F){v.scaleTo(E,function(){var D=this.__zoom.k,I=typeof O=="function"?O.apply(this,arguments):O;return D*I},P,F)},v.scaleTo=function(E,O,P,F){v.transform(E,function(){var D=t.apply(this,arguments),I=this.__zoom,z=P==null?_(D):typeof P=="function"?P.apply(this,arguments):P,M=I.invert(z),q=typeof O=="function"?O.apply(this,arguments):O;return r(y(x(I,q),z,M),D,o)},P,F)},v.translateBy=function(E,O,P,F){v.transform(E,function(){return r(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),o)},null,F)},v.translateTo=function(E,O,P,F,D){v.transform(E,function(){var I=t.apply(this,arguments),z=this.__zoom,M=F==null?_(I):typeof F=="function"?F.apply(this,arguments):F;return r(Gr.translate(M[0],M[1]).scale(z.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof P=="function"?-P.apply(this,arguments):-P),I,o)},F,D)};function x(E,O){return O=Math.max(i[0],Math.min(i[1],O)),O===E.k?E:new Hr(O,E.x,E.y)}function y(E,O,P){var F=O[0]-P[0]*E.k,D=O[1]-P[1]*E.k;return F===E.x&&D===E.y?E:new Hr(E.k,F,D)}function _(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function j(E,O,P,F){E.on("start.zoom",function(){S(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(F).end()}).tween("zoom",function(){var D=this,I=arguments,z=S(D,I).event(F),M=t.apply(D,I),q=P==null?_(M):typeof P=="function"?P.apply(D,I):P,A=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),B=D.__zoom,V=typeof O=="function"?O.apply(D,I):O,Y=c(B.invert(q).concat(A/B.k),V.invert(q).concat(A/V.k));return function(te){if(te===1)te=V;else{var ne=Y(te),re=A/ne[2];te=new Hr(re,q[0]-ne[0]*re,q[1]-ne[1]*re)}z.zoom(null,te)}})}function S(E,O,P){return!P&&E.__zooming||new N(E,O)}function N(E,O){this.that=E,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,O),this.taps=0}N.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,O){return this.mouse&&E!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var O=Kt(this.that).datum();u.call(E,this.that,new AM(E,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),O)}};function k(E,...O){if(!e.apply(this,arguments))return;var P=S(this,O).event(E),F=this.__zoom,D=Math.max(i[0],Math.min(i[1],F.k*Math.pow(2,n.apply(this,arguments)))),I=cr(E);if(P.wheel)(P.mouse[0][0]!==I[0]||P.mouse[0][1]!==I[1])&&(P.mouse[1]=F.invert(P.mouse[0]=I)),clearTimeout(P.wheel);else{if(F.k===D)return;P.mouse=[I,F.invert(I)],Ja(this),P.start()}Pi(E),P.wheel=setTimeout(z,b),P.zoom("mouse",r(y(x(F,D),P.mouse[0],P.mouse[1]),P.extent,o));function z(){P.wheel=null,P.end()}}function C(E,...O){if(p||!e.apply(this,arguments))return;var P=E.currentTarget,F=S(this,O,!0).event(E),D=Kt(E.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",A,!0),I=cr(E,P),z=E.clientX,M=E.clientY;Ok(E.view),bu(E),F.mouse=[I,this.__zoom.invert(I)],Ja(this),F.start();function q(B){if(Pi(B),!F.moved){var V=B.clientX-z,Y=B.clientY-M;F.moved=V*V+Y*Y>g}F.event(B).zoom("mouse",r(y(F.that.__zoom,F.mouse[0]=cr(B,P),F.mouse[1]),F.extent,o))}function A(B){D.on("mousemove.zoom mouseup.zoom",null),Lk(B.view,F.moved),Pi(B),F.event(B).end()}}function R(E,...O){if(e.apply(this,arguments)){var P=this.__zoom,F=cr(E.changedTouches?E.changedTouches[0]:E,this),D=P.invert(F),I=P.k*(E.shiftKey?.5:2),z=r(y(x(P,I),F,D),t.apply(this,O),o);Pi(E),a>0?Kt(this).transition().duration(a).call(j,z,F,E):Kt(this).call(v.transform,z,F,E)}}function T(E,...O){if(e.apply(this,arguments)){var P=E.touches,F=P.length,D=S(this,O,E.changedTouches.length===F).event(E),I,z,M,q;for(bu(E),z=0;z<F;++z)M=P[z],q=cr(M,this),q=[q,this.__zoom.invert(q),M.identifier],D.touch0?!D.touch1&&D.touch0[2]!==q[2]&&(D.touch1=q,D.taps=0):(D.touch0=q,I=!0,D.taps=1+!!d);d&&(d=clearTimeout(d)),I&&(D.taps<2&&(f=q[0],d=setTimeout(function(){d=null},h)),Ja(this),D.start())}}function L(E,...O){if(this.__zooming){var P=S(this,O).event(E),F=E.changedTouches,D=F.length,I,z,M,q;for(Pi(E),I=0;I<D;++I)z=F[I],M=cr(z,this),P.touch0&&P.touch0[2]===z.identifier?P.touch0[0]=M:P.touch1&&P.touch1[2]===z.identifier&&(P.touch1[0]=M);if(z=P.that.__zoom,P.touch1){var A=P.touch0[0],B=P.touch0[1],V=P.touch1[0],Y=P.touch1[1],te=(te=V[0]-A[0])*te+(te=V[1]-A[1])*te,ne=(ne=Y[0]-B[0])*ne+(ne=Y[1]-B[1])*ne;z=x(z,Math.sqrt(te/ne)),M=[(A[0]+V[0])/2,(A[1]+V[1])/2],q=[(B[0]+Y[0])/2,(B[1]+Y[1])/2]}else if(P.touch0)M=P.touch0[0],q=P.touch0[1];else return;P.zoom("touch",r(y(z,M,q),P.extent,o))}}function $(E,...O){if(this.__zooming){var P=S(this,O).event(E),F=E.changedTouches,D=F.length,I,z;for(bu(E),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),I=0;I<D;++I)z=F[I],P.touch0&&P.touch0[2]===z.identifier?delete P.touch0:P.touch1&&P.touch1[2]===z.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(z=cr(z,this),Math.hypot(f[0]-z[0],f[1]-z[1])<w)){var M=Kt(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return v.wheelDelta=function(E){return arguments.length?(n=typeof E=="function"?E:Sa(+E),v):n},v.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Sa(!!E),v):e},v.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:Sa(!!E),v):s},v.extent=function(E){return arguments.length?(t=typeof E=="function"?E:Sa([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),v):t},v.scaleExtent=function(E){return arguments.length?(i[0]=+E[0],i[1]=+E[1],v):[i[0],i[1]]},v.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(E){return arguments.length?(r=E,v):r},v.duration=function(E){return arguments.length?(a=+E,v):a},v.interpolate=function(E){return arguments.length?(c=E,v):c},v.on=function(){var E=u.on.apply(u,arguments);return E===u?v:E},v.clickDistance=function(E){return arguments.length?(g=(E=+E)*E,v):Math.sqrt(g)},v.tapDistance=function(E){return arguments.length?(w=+E,v):w},v}const fc=m.createContext(null),qM=fc.Provider,Jr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Zk=Jr.error001();function Me(e,t){const r=m.useContext(fc);if(r===null)throw new Error(Zk);return jk(r,e,t)}const tt=()=>{const e=m.useContext(fc);if(e===null)throw new Error(Zk);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},$M=e=>e.userSelectionActive?"none":"all";function Mn({position:e,children:t,className:r,style:n,...s}){const i=Me($M),o=`${e}`.split("-");return H.createElement("div",{className:Rt(["react-flow__panel",r,...o]),style:{...n,pointerEvents:i},...s},t)}function FM({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:H.createElement(Mn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},H.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const BM=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d})=>{const f=m.useRef(null),[p,h]=m.useState({x:0,y:0,width:0,height:0}),b=Rt(["react-flow__edge-textwrapper",u]);return m.useEffect(()=>{if(f.current){const g=f.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[r]),typeof r>"u"||!r?null:H.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...d},s&&H.createElement("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),H.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:n},r),c)};var HM=m.memo(BM);const Vv=e=>({width:e.offsetWidth,height:e.offsetHeight}),li=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),Uv=(e={x:0,y:0},t)=>({x:li(e.x,t[0][0],t[1][0]),y:li(e.y,t[0][1],t[1][1])}),a0=(e,t,r)=>e<t?li(Math.abs(e-t),1,50)/50:e>r?-li(Math.abs(e-r),1,50)/50:0,Jk=(e,t)=>{const r=a0(e.x,35,t.width-35)*20,n=a0(e.y,35,t.height-35)*20;return[r,n]},eN=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},tN=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Po=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),rN=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),l0=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),WM=(e,t)=>rN(tN(Po(e),Po(t))),Cg=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},VM=e=>Xt(e.width)&&Xt(e.height)&&Xt(e.x)&&Xt(e.y),Xt=e=>!isNaN(e)&&isFinite(e),ze=Symbol.for("internals"),nN=["Enter"," ","Escape"],UM=(e,t)=>{},GM=e=>"nativeEvent"in e;function Rg(e){var s,i;const t=GM(e)?e.nativeEvent:e,r=((i=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const sN=e=>"clientX"in e,An=(e,t)=>{var i,o;const r=sN(e),n=r?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},Il=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Go=({id:e,path:t,labelX:r,labelY:n,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h=20})=>H.createElement(H.Fragment,null,H.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),h&&H.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),s&&Xt(r)&&Xt(n)?H.createElement(HM,{x:r,y:n,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Go.displayName="BaseEdge";function Di(e,t,r){return r===void 0?r:n=>{const s=t().edges.find(i=>i.id===e);s&&r(n,{...s})}}function iN({sourceX:e,sourceY:t,targetX:r,targetY:n}){const s=Math.abs(r-e)/2,i=r<e?r+s:r-s,o=Math.abs(n-t)/2,a=n<t?n+o:n-o;return[i,a,s,o]}function oN({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:a}){const c=e*.125+s*.375+o*.375+r*.125,u=t*.125+i*.375+a*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var ms;(function(e){e.Strict="strict",e.Loose="loose"})(ms||(ms={}));var ns;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ns||(ns={}));var Do;(function(e){e.Partial="partial",e.Full="full"})(Do||(Do={}));var yn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(yn||(yn={}));var Ml;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ml||(Ml={}));var Z;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Z||(Z={}));function c0({pos:e,x1:t,y1:r,x2:n,y2:s}){return e===Z.Left||e===Z.Right?[.5*(t+n),r]:[t,.5*(r+s)]}function aN({sourceX:e,sourceY:t,sourcePosition:r=Z.Bottom,targetX:n,targetY:s,targetPosition:i=Z.Top}){const[o,a]=c0({pos:r,x1:e,y1:t,x2:n,y2:s}),[c,u]=c0({pos:i,x1:n,y1:s,x2:e,y2:t}),[d,f,p,h]=oN({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${n},${s}`,d,f,p,h]}const Gv=m.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:s=Z.Bottom,targetPosition:i=Z.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:b,interactionWidth:g})=>{const[w,v,x]=aN({sourceX:e,sourceY:t,sourcePosition:s,targetX:r,targetY:n,targetPosition:i});return H.createElement(Go,{path:w,labelX:v,labelY:x,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:b,interactionWidth:g})});Gv.displayName="SimpleBezierEdge";const u0={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}},KM=({source:e,sourcePosition:t=Z.Bottom,target:r})=>t===Z.Left||t===Z.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},d0=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function YM({source:e,sourcePosition:t=Z.Bottom,target:r,targetPosition:n=Z.Top,center:s,offset:i}){const o=u0[t],a=u0[n],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:r.x+a.x*i,y:r.y+a.y*i},d=KM({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",p=d[f];let h=[],b,g;const w={x:0,y:0},v={x:0,y:0},[x,y,_,j]=iN({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*a[f]===-1){b=s.x??x,g=s.y??y;const N=[{x:b,y:c.y},{x:b,y:u.y}],k=[{x:c.x,y:g},{x:u.x,y:g}];o[f]===p?h=f==="x"?N:k:h=f==="x"?k:N}else{const N=[{x:c.x,y:u.y}],k=[{x:u.x,y:c.y}];if(f==="x"?h=o.x===p?k:N:h=o.y===p?N:k,t===n){const $=Math.abs(e[f]-r[f]);if($<=i){const E=Math.min(i-1,i-$);o[f]===p?w[f]=(c[f]>e[f]?-1:1)*E:v[f]=(u[f]>r[f]?-1:1)*E}}if(t!==n){const $=f==="x"?"y":"x",E=o[f]===a[$],O=c[$]>u[$],P=c[$]<u[$];(o[f]===1&&(!E&&O||E&&P)||o[f]!==1&&(!E&&P||E&&O))&&(h=f==="x"?N:k)}const C={x:c.x+w.x,y:c.y+w.y},R={x:u.x+v.x,y:u.y+v.y},T=Math.max(Math.abs(C.x-h[0].x),Math.abs(R.x-h[0].x)),L=Math.max(Math.abs(C.y-h[0].y),Math.abs(R.y-h[0].y));T>=L?(b=(C.x+R.x)/2,g=h[0].y):(b=h[0].x,g=(C.y+R.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:u.x+v.x,y:u.y+v.y},r],b,g,_,j]}function XM(e,t,r,n){const s=Math.min(d0(e,t)/2,d0(t,r)/2,n),{x:i,y:o}=t;if(e.x===i&&i===r.x||e.y===o&&o===r.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${i+s*u},${o}Q ${i},${o} ${i},${o+s*d}`}const a=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${i},${o+s*c}Q ${i},${o} ${i+s*a},${o}`}function Tg({sourceX:e,sourceY:t,sourcePosition:r=Z.Bottom,targetX:n,targetY:s,targetPosition:i=Z.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[d,f,p,h,b]=YM({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:s},targetPosition:i,center:{x:a,y:c},offset:u});return[d.reduce((w,v,x)=>{let y="";return x>0&&x<d.length-1?y=XM(d[x-1],v,d[x+1],o):y=`${x===0?"M":"L"}${v.x} ${v.y}`,w+=y,w},""),f,p,h,b]}const pc=m.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Z.Bottom,targetPosition:p=Z.Top,markerEnd:h,markerStart:b,pathOptions:g,interactionWidth:w})=>{const[v,x,y]=Tg({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:p,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return H.createElement(Go,{path:v,labelX:x,labelY:y,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:b,interactionWidth:w})});pc.displayName="SmoothStepEdge";const Kv=m.memo(e=>{var t;return H.createElement(pc,{...e,pathOptions:m.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Kv.displayName="StepEdge";function QM({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[s,i,o,a]=iN({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,s,i,o,a]}const Yv=m.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h})=>{const[b,g,w]=QM({sourceX:e,sourceY:t,targetX:r,targetY:n});return H.createElement(Go,{path:b,labelX:g,labelY:w,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h})});Yv.displayName="StraightEdge";function ka(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function f0({pos:e,x1:t,y1:r,x2:n,y2:s,c:i}){switch(e){case Z.Left:return[t-ka(t-n,i),r];case Z.Right:return[t+ka(n-t,i),r];case Z.Top:return[t,r-ka(r-s,i)];case Z.Bottom:return[t,r+ka(s-r,i)]}}function lN({sourceX:e,sourceY:t,sourcePosition:r=Z.Bottom,targetX:n,targetY:s,targetPosition:i=Z.Top,curvature:o=.25}){const[a,c]=f0({pos:r,x1:e,y1:t,x2:n,y2:s,c:o}),[u,d]=f0({pos:i,x1:n,y1:s,x2:e,y2:t,c:o}),[f,p,h,b]=oN({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${n},${s}`,f,p,h,b]}const Al=m.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:s=Z.Bottom,targetPosition:i=Z.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:b,pathOptions:g,interactionWidth:w})=>{const[v,x,y]=lN({sourceX:e,sourceY:t,sourcePosition:s,targetX:r,targetY:n,targetPosition:i,curvature:g==null?void 0:g.curvature});return H.createElement(Go,{path:v,labelX:x,labelY:y,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:b,interactionWidth:w})});Al.displayName="BezierEdge";const Xv=m.createContext(null),ZM=Xv.Provider;Xv.Consumer;const JM=()=>m.useContext(Xv),eA=e=>"id"in e&&"source"in e&&"target"in e,tA=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,Ig=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,rA=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),nA=(e,t)=>{if(!e.source||!e.target)return t;let r;return eA(e)?r={...e}:r={...e,id:tA(e)},rA(r,t)?t:t.concat(r)},Mg=({x:e,y:t},[r,n,s],i,[o,a])=>{const c={x:(e-r)/s,y:(t-n)/s};return i?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},cN=({x:e,y:t},[r,n,s])=>({x:e*s+r,y:t*s+n}),ls=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],s={x:e.position.x-r,y:e.position.y-n};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:s}},hc=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,s)=>{const{x:i,y:o}=ls(s,t).positionAbsolute;return tN(n,Po({x:i,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rN(r)},uN=(e,t,[r,n,s]=[0,0,1],i=!1,o=!1,a=[0,0])=>{const c={x:(t.x-r)/s,y:(t.y-n)/s,width:t.width/s,height:t.height/s},u=[];return e.forEach(d=>{const{width:f,height:p,selectable:h=!0,hidden:b=!1}=d;if(o&&!h||b)return!1;const{positionAbsolute:g}=ls(d,a),w={x:g.x,y:g.y,width:f||0,height:p||0},v=Cg(c,w),x=typeof f>"u"||typeof p>"u"||f===null||p===null,y=i&&v>0,_=(f||0)*(p||0);(x||y||v>=_||d.dragging)&&u.push(d)}),u},dN=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},fN=(e,t,r,n,s,i=.1)=>{const o=t/(e.width*(1+i)),a=r/(e.height*(1+i)),c=Math.min(o,a),u=li(c,n,s),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*u,h=r/2-f*u;return{x:p,y:h,zoom:u}},Qn=(e,t=0)=>e.transition().duration(t);function p0(e,t,r,n){return(t[r]||[]).reduce((s,i)=>{var o,a;return`${e.id}-${i.id}-${r}`!==n&&s.push({id:i.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+i.y+i.height/2}),s},[])}function sA(e,t,r,n,s,i){const{x:o,y:a}=An(e),u=t.elementsFromPoint(o,a).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const g=Qv(void 0,u),w=u.getAttribute("data-handleid"),v=i({nodeId:b,id:w,type:g});if(v){const x=s.find(y=>y.nodeId===b&&y.type===g&&y.id===w);return{handle:{id:w,type:g,nodeId:b,x:(x==null?void 0:x.x)||r.x,y:(x==null?void 0:x.y)||r.y},validHandleResult:v}}}}let d=[],f=1/0;if(s.forEach(b=>{const g=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(g<=n){const w=i(b);g<=f&&(g<f?d=[{handle:b,validHandleResult:w}]:g===f&&d.push({handle:b,validHandleResult:w}),f=g)}}),!d.length)return{handle:null,validHandleResult:pN()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:b})=>b.isValid),h=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:g})=>h?b.type==="target":p?g.isValid:!0)||d[0]}const iA={source:null,target:null,sourceHandle:null,targetHandle:null},pN=()=>({handleDomNode:null,isValid:!1,connection:iA,endHandle:null});function hN(e,t,r,n,s,i,o){const a=s==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...pN(),handleDomNode:c};if(c){const d=Qv(void 0,c),f=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),b=c.classList.contains("connectableend"),g={source:a?f:r,sourceHandle:a?p:n,target:a?r:f,targetHandle:a?n:p};u.connection=g,h&&b&&(t===ms.Strict?a&&d==="source"||!a&&d==="target":f!==r||p!==n)&&(u.endHandle={nodeId:f,handleId:p,type:d},u.isValid=i(g))}return u}function oA({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((s,i)=>{if(i[ze]){const{handleBounds:o}=i[ze];let a=[],c=[];o&&(a=p0(i,o,"source",`${t}-${r}-${n}`),c=p0(i,o,"target",`${t}-${r}-${n}`)),s.push(...a,...c)}return s},[])}function Qv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function wu(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function aA(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function mN({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:s,getState:i,setState:o,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const d=eN(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:h,connectionRadius:b,onConnectStart:g,panBy:w,getNodes:v,cancelConnection:x}=i();let y=0,_;const{x:j,y:S}=An(e),N=d==null?void 0:d.elementFromPoint(j,S),k=Qv(c,N),C=p==null?void 0:p.getBoundingClientRect();if(!C||!k)return;let R,T=An(e,C),L=!1,$=null,E=!1,O=null;const P=oA({nodes:v(),nodeId:r,handleId:t,handleType:k}),F=()=>{if(!h)return;const[z,M]=Jk(T,C);w({x:z,y:M}),y=requestAnimationFrame(F)};o({connectionPosition:T,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:r,handleId:t,type:k},connectionEndHandle:null}),g==null||g(e,{nodeId:r,handleId:t,handleType:k});function D(z){const{transform:M}=i();T=An(z,C);const{handle:q,validHandleResult:A}=sA(z,d,Mg(T,M,!1,[1,1]),b,P,B=>hN(B,f,r,t,s?"target":"source",a,d));if(_=q,L||(F(),L=!0),O=A.handleDomNode,$=A.connection,E=A.isValid,o({connectionPosition:_&&E?cN({x:_.x,y:_.y},M):T,connectionStatus:aA(!!_,E),connectionEndHandle:A.endHandle}),!_&&!E&&!O)return wu(R);$.source!==$.target&&O&&(wu(R),R=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",E),O.classList.toggle("react-flow__handle-valid",E))}function I(z){var M,q;(_||O)&&$&&E&&(n==null||n($)),(q=(M=i()).onConnectEnd)==null||q.call(M,z),c&&(u==null||u(z)),wu(R),x(),cancelAnimationFrame(y),L=!1,E=!1,$=null,O=null,d.removeEventListener("mousemove",D),d.removeEventListener("mouseup",I),d.removeEventListener("touchmove",D),d.removeEventListener("touchend",I)}d.addEventListener("mousemove",D),d.addEventListener("mouseup",I),d.addEventListener("touchmove",D),d.addEventListener("touchend",I)}const h0=()=>!0,lA=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),cA=(e,t,r)=>n=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:o}=n;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},gN=m.forwardRef(({type:e="source",position:t=Z.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:f,...p},h)=>{var C,R;const b=o||null,g=e==="target",w=tt(),v=JM(),{connectOnClick:x,noPanClassName:y}=Me(lA,pt),{connecting:_,clickConnecting:j}=Me(cA(v,b,e),pt);v||(R=(C=w.getState()).onError)==null||R.call(C,"010",Jr.error010());const S=T=>{const{defaultEdgeOptions:L,onConnect:$,hasDefaultEdges:E}=w.getState(),O={...L,...T};if(E){const{edges:P,setEdges:F}=w.getState();F(nA(O,P))}$==null||$(O),a==null||a(O)},N=T=>{if(!v)return;const L=sN(T);s&&(L&&T.button===0||!L)&&mN({event:T,handleId:b,nodeId:v,onConnect:S,isTarget:g,getState:w.getState,setState:w.setState,isValidConnection:r||w.getState().isValidConnection||h0}),L?d==null||d(T):f==null||f(T)},k=T=>{const{onClickConnectStart:L,onClickConnectEnd:$,connectionClickStartHandle:E,connectionMode:O,isValidConnection:P}=w.getState();if(!v||!E&&!s)return;if(!E){L==null||L(T,{nodeId:v,handleId:b,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:b}});return}const F=eN(T.target),D=r||P||h0,{connection:I,isValid:z}=hN({nodeId:v,id:b,type:e},O,E.nodeId,E.handleId||null,E.type,D,F);z&&S(I),$==null||$(T),w.setState({connectionClickStartHandle:null})};return H.createElement("div",{"data-handleid":b,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${b}-${e}`,className:Rt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,u,{source:!g,target:g,connectable:n,connectablestart:s,connectableend:i,connecting:j,connectionindicator:n&&(s&&!_||i&&_)}]),onMouseDown:N,onTouchStart:N,onClick:x?k:void 0,ref:h,...p},c)});gN.displayName="Handle";var Ir=m.memo(gN);const vN=({data:e,isConnectable:t,targetPosition:r=Z.Top,sourcePosition:n=Z.Bottom})=>H.createElement(H.Fragment,null,H.createElement(Ir,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,H.createElement(Ir,{type:"source",position:n,isConnectable:t}));vN.displayName="DefaultNode";var Ag=m.memo(vN);const xN=({data:e,isConnectable:t,sourcePosition:r=Z.Bottom})=>H.createElement(H.Fragment,null,e==null?void 0:e.label,H.createElement(Ir,{type:"source",position:r,isConnectable:t}));xN.displayName="InputNode";var yN=m.memo(xN);const bN=({data:e,isConnectable:t,targetPosition:r=Z.Top})=>H.createElement(H.Fragment,null,H.createElement(Ir,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);bN.displayName="OutputNode";var wN=m.memo(bN);const Zv=()=>null;Zv.displayName="GroupNode";const uA=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Na=e=>e.id;function dA(e,t){return pt(e.selectedNodes.map(Na),t.selectedNodes.map(Na))&&pt(e.selectedEdges.map(Na),t.selectedEdges.map(Na))}const _N=m.memo(({onSelectionChange:e})=>{const t=tt(),{selectedNodes:r,selectedEdges:n}=Me(uA,dA);return m.useEffect(()=>{const s={nodes:r,edges:n};e==null||e(s),t.getState().onSelectionChange.forEach(i=>i(s))},[r,n,e]),null});_N.displayName="SelectionListener";const fA=e=>!!e.onSelectionChange;function pA({onSelectionChange:e}){const t=Me(fA);return e||t?H.createElement(_N,{onSelectionChange:e}):null}const hA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ss(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ce(e,t,r){m.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const mA=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:s,onConnectStart:i,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:h,elevateNodesOnSelect:b,minZoom:g,maxZoom:w,nodeExtent:v,onNodesChange:x,onEdgesChange:y,elementsSelectable:_,connectionMode:j,snapGrid:S,snapToGrid:N,translateExtent:k,connectOnClick:C,defaultEdgeOptions:R,fitView:T,fitViewOptions:L,onNodesDelete:$,onEdgesDelete:E,onNodeDrag:O,onNodeDragStart:P,onNodeDragStop:F,onSelectionDrag:D,onSelectionDragStart:I,onSelectionDragStop:z,noPanClassName:M,nodeOrigin:q,rfId:A,autoPanOnConnect:B,autoPanOnNodeDrag:V,onError:Y,connectionRadius:te,isValidConnection:ne,nodeDragThreshold:re})=>{const{setNodes:X,setEdges:ue,setDefaultNodesAndEdges:J,setMinZoom:se,setMaxZoom:ie,setTranslateExtent:ee,setNodeExtent:xe,reset:U}=Me(hA,pt),K=tt();return m.useEffect(()=>{const ae=n==null?void 0:n.map(W=>({...W,...R}));return J(r,ae),()=>{U()}},[]),ce("defaultEdgeOptions",R,K.setState),ce("connectionMode",j,K.setState),ce("onConnect",s,K.setState),ce("onConnectStart",i,K.setState),ce("onConnectEnd",o,K.setState),ce("onClickConnectStart",a,K.setState),ce("onClickConnectEnd",c,K.setState),ce("nodesDraggable",u,K.setState),ce("nodesConnectable",d,K.setState),ce("nodesFocusable",f,K.setState),ce("edgesFocusable",p,K.setState),ce("edgesUpdatable",h,K.setState),ce("elementsSelectable",_,K.setState),ce("elevateNodesOnSelect",b,K.setState),ce("snapToGrid",N,K.setState),ce("snapGrid",S,K.setState),ce("onNodesChange",x,K.setState),ce("onEdgesChange",y,K.setState),ce("connectOnClick",C,K.setState),ce("fitViewOnInit",T,K.setState),ce("fitViewOnInitOptions",L,K.setState),ce("onNodesDelete",$,K.setState),ce("onEdgesDelete",E,K.setState),ce("onNodeDrag",O,K.setState),ce("onNodeDragStart",P,K.setState),ce("onNodeDragStop",F,K.setState),ce("onSelectionDrag",D,K.setState),ce("onSelectionDragStart",I,K.setState),ce("onSelectionDragStop",z,K.setState),ce("noPanClassName",M,K.setState),ce("nodeOrigin",q,K.setState),ce("rfId",A,K.setState),ce("autoPanOnConnect",B,K.setState),ce("autoPanOnNodeDrag",V,K.setState),ce("onError",Y,K.setState),ce("connectionRadius",te,K.setState),ce("isValidConnection",ne,K.setState),ce("nodeDragThreshold",re,K.setState),Ss(e,X),Ss(t,ue),Ss(g,se),Ss(w,ie),Ss(k,ee),Ss(v,xe),null},m0={display:"none"},gA={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jN="react-flow__node-desc",SN="react-flow__edge-desc",vA="react-flow__aria-live",xA=e=>e.ariaLiveMessage;function yA({rfId:e}){const t=Me(xA);return H.createElement("div",{id:`${vA}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:gA},t)}function bA({rfId:e,disableKeyboardA11y:t}){return H.createElement(H.Fragment,null,H.createElement("div",{id:`${jN}-${e}`,style:m0},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),H.createElement("div",{id:`${SN}-${e}`,style:m0},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&H.createElement(yA,{rfId:e}))}var Oo=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=m.useState(!1),s=m.useRef(!1),i=m.useRef(new Set([])),[o,a]=m.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,p)=>f.concat(...p),[]);return[u,d]}return[[],[]]},[e]);return m.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(s.current=h.ctrlKey||h.metaKey||h.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Rg(h))return!1;const g=v0(h.code,a);i.current.add(h[g]),g0(o,i.current,!1)&&(h.preventDefault(),n(!0))},f=h=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Rg(h))return!1;const g=v0(h.code,a);g0(o,i.current,!0)?(n(!1),i.current.clear()):i.current.delete(h[g]),h.key==="Meta"&&i.current.clear(),s.current=!1},p=()=>{i.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,n]),r};function g0(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(s=>t.has(s)))}function v0(e,t){return t.includes(e)?"code":"key"}function kN(e,t,r,n){var a,c;const s=e.parentNode||e.parentId;if(!s)return r;const i=t.get(s),o=ls(i,n);return kN(i,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((a=i[ze])==null?void 0:a.z)??0)>(r.z??0)?((c=i[ze])==null?void 0:c.z)??0:r.z??0},n)}function NN(e,t,r){e.forEach(n=>{var i;const s=n.parentNode||n.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[n.id]){const{x:o,y:a,z:c}=kN(n,e,{...n.position,z:((i=n[ze])==null?void 0:i.z)??0},t);n.positionAbsolute={x:o,y:a},n[ze].z=c,r!=null&&r[n.id]&&(n[ze].isParent=!0)}})}function _u(e,t,r,n){const s=new Map,i={},o=n?1e3:0;return e.forEach(a=>{var h;const c=(Xt(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(i[f]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,ze,{enumerable:!1,value:{handleBounds:p||(h=u==null?void 0:u[ze])==null?void 0:h.handleBounds,z:c}}),s.set(a.id,d)}),NN(s,r,i),s}function EN(e,t={}){const{getNodes:r,width:n,height:s,minZoom:i,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),p=t.initial&&!u&&d;if(a&&c&&(p||!t.initial)){const b=r().filter(w=>{var x;const v=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(x=t.nodes)!=null&&x.length?v&&t.nodes.some(y=>y.id===w.id):v}),g=b.every(w=>w.width&&w.height);if(b.length>0&&g){const w=hc(b,f),{x:v,y:x,zoom:y}=fN(w,n,s,t.minZoom??i,t.maxZoom??o,t.padding??.1),_=Gr.translate(v,x).scale(y);return typeof t.duration=="number"&&t.duration>0?a.transform(Qn(c,t.duration),_):a.transform(c,_),!0}}return!1}function wA(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[ze]:n[ze],selected:r.selected})}),new Map(t)}function _A(e,t){return t.map(r=>{const n=e.find(s=>s.id===r.id);return n&&(r.selected=n.selected),r})}function Ea({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:s,edges:i,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:wA(e,s)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:_A(t,i)}),a==null||a(t))}const ks=()=>{},jA={zoomIn:ks,zoomOut:ks,zoomTo:ks,getZoom:()=>1,setViewport:ks,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ks,fitBounds:ks,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},SA=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),kA=()=>{const e=tt(),{d3Zoom:t,d3Selection:r}=Me(SA,pt);return m.useMemo(()=>r&&t?{zoomIn:s=>t.scaleBy(Qn(r,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(Qn(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,i)=>t.scaleTo(Qn(r,i==null?void 0:i.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,i)=>{const[o,a,c]=e.getState().transform,u=Gr.translate(s.x??o,s.y??a).scale(s.zoom??c);t.transform(Qn(r,i==null?void 0:i.duration),u)},getViewport:()=>{const[s,i,o]=e.getState().transform;return{x:s,y:i,zoom:o}},fitView:s=>EN(e.getState,s),setCenter:(s,i,o)=>{const{width:a,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=a/2-s*d,p=c/2-i*d,h=Gr.translate(f,p).scale(d);t.transform(Qn(r,o==null?void 0:o.duration),h)},fitBounds:(s,i)=>{const{width:o,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:p}=fN(s,o,a,c,u,(i==null?void 0:i.padding)??.1),h=Gr.translate(d,f).scale(p);t.transform(Qn(r,i==null?void 0:i.duration),h)},project:s=>{const{transform:i,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Mg(s,i,o,a)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return s;const{x:u,y:d}=c.getBoundingClientRect(),f={x:s.x-u,y:s.y-d};return Mg(f,i,o,a)},flowToScreenPosition:s=>{const{transform:i,domNode:o}=e.getState();if(!o)return s;const{x:a,y:c}=o.getBoundingClientRect(),u=cN(s,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:jA,[t,r])};function mc(){const e=kA(),t=tt(),r=m.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),n=m.useCallback(g=>t.getState().nodeInternals.get(g),[]),s=m.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(w=>({...w}))},[]),i=m.useCallback(g=>{const{edges:w=[]}=t.getState();return w.find(v=>v.id===g)},[]),o=m.useCallback(g=>{const{getNodes:w,setNodes:v,hasDefaultNodes:x,onNodesChange:y}=t.getState(),_=w(),j=typeof g=="function"?g(_):g;if(x)v(j);else if(y){const S=j.length===0?_.map(N=>({type:"remove",id:N.id})):j.map(N=>({item:N,type:"reset"}));y(S)}},[]),a=m.useCallback(g=>{const{edges:w=[],setEdges:v,hasDefaultEdges:x,onEdgesChange:y}=t.getState(),_=typeof g=="function"?g(w):g;if(x)v(_);else if(y){const j=_.length===0?w.map(S=>({type:"remove",id:S.id})):_.map(S=>({item:S,type:"reset"}));y(j)}},[]),c=m.useCallback(g=>{const w=Array.isArray(g)?g:[g],{getNodes:v,setNodes:x,hasDefaultNodes:y,onNodesChange:_}=t.getState();if(y){const S=[...v(),...w];x(S)}else if(_){const j=w.map(S=>({item:S,type:"add"}));_(j)}},[]),u=m.useCallback(g=>{const w=Array.isArray(g)?g:[g],{edges:v=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:_}=t.getState();if(y)x([...v,...w]);else if(_){const j=w.map(S=>({item:S,type:"add"}));_(j)}},[]),d=m.useCallback(()=>{const{getNodes:g,edges:w=[],transform:v}=t.getState(),[x,y,_]=v;return{nodes:g().map(j=>({...j})),edges:w.map(j=>({...j})),viewport:{x,y,zoom:_}}},[]),f=m.useCallback(({nodes:g,edges:w})=>{const{nodeInternals:v,getNodes:x,edges:y,hasDefaultNodes:_,hasDefaultEdges:j,onNodesDelete:S,onEdgesDelete:N,onNodesChange:k,onEdgesChange:C}=t.getState(),R=(g||[]).map(O=>O.id),T=(w||[]).map(O=>O.id),L=x().reduce((O,P)=>{const F=P.parentNode||P.parentId,D=!R.includes(P.id)&&F&&O.find(z=>z.id===F);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(R.includes(P.id)||D)&&O.push(P),O},[]),$=y.filter(O=>typeof O.deletable=="boolean"?O.deletable:!0),E=$.filter(O=>T.includes(O.id));if(L||E){const O=dN(L,$),P=[...E,...O],F=P.reduce((D,I)=>(D.includes(I.id)||D.push(I.id),D),[]);if((j||_)&&(j&&t.setState({edges:y.filter(D=>!F.includes(D.id))}),_&&(L.forEach(D=>{v.delete(D.id)}),t.setState({nodeInternals:new Map(v)}))),F.length>0&&(N==null||N(P),C&&C(F.map(D=>({id:D,type:"remove"})))),L.length>0&&(S==null||S(L),k)){const D=L.map(I=>({id:I.id,type:"remove"}));k(D)}}},[]),p=m.useCallback(g=>{const w=VM(g),v=w?null:t.getState().nodeInternals.get(g.id);return!w&&!v?[null,null,w]:[w?g:l0(v),v,w]},[]),h=m.useCallback((g,w=!0,v)=>{const[x,y,_]=p(g);return x?(v||t.getState().getNodes()).filter(j=>{if(!_&&(j.id===y.id||!j.positionAbsolute))return!1;const S=l0(j),N=Cg(S,x);return w&&N>0||N>=x.width*x.height}):[]},[]),b=m.useCallback((g,w,v=!0)=>{const[x]=p(g);if(!x)return!1;const y=Cg(x,w);return v&&y>0||y>=x.width*x.height},[]);return m.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:s,getEdge:i,setNodes:o,setEdges:a,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:b}),[e,r,n,s,i,o,a,c,u,d,f,h,b])}const NA={actInsideInputWithModifier:!1};var EA=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=tt(),{deleteElements:n}=mc(),s=Oo(e,NA),i=Oo(t);m.useEffect(()=>{if(s){const{edges:o,getNodes:a}=r.getState(),c=a().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[s]),m.useEffect(()=>{r.setState({multiSelectionActive:i})},[i])};function CA(e){const t=tt();m.useEffect(()=>{let r;const n=()=>{var i,o;if(!e.current)return;const s=Vv(e.current);(s.height===0||s.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Jr.error004())),t.setState({width:s.width||500,height:s.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const Jv={position:"absolute",width:"100%",height:"100%",top:0,left:0},RA=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ca=e=>({x:e.x,y:e.y,zoom:e.k}),Ns=(e,t)=>e.target.closest(`.${t}`),x0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),y0=e=>{const t=e.ctrlKey&&Il()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},TA=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),IA=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=ns.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:p,translateExtent:h,minZoom:b,maxZoom:g,zoomActivationKeyCode:w,preventScrolling:v=!0,children:x,noWheelClassName:y,noPanClassName:_})=>{const j=m.useRef(),S=tt(),N=m.useRef(!1),k=m.useRef(!1),C=m.useRef(null),R=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:T,d3Selection:L,d3ZoomHandler:$,userSelectionActive:E}=Me(TA,pt),O=Oo(w),P=m.useRef(0),F=m.useRef(!1),D=m.useRef();return CA(C),m.useEffect(()=>{if(C.current){const I=C.current.getBoundingClientRect(),z=Qk().scaleExtent([b,g]).translateExtent(h),M=Kt(C.current).call(z),q=Gr.translate(p.x,p.y).scale(li(p.zoom,b,g)),A=[[0,0],[I.width,I.height]],B=z.constrain()(q,A,h);z.transform(M,B),z.wheelDelta(y0),S.setState({d3Zoom:z,d3Selection:M,d3ZoomHandler:M.on("wheel.zoom"),transform:[B.x,B.y,B.k],domNode:C.current.closest(".react-flow")})}},[]),m.useEffect(()=>{L&&T&&(o&&!O&&!E?L.on("wheel.zoom",I=>{if(Ns(I,y))return!1;I.preventDefault(),I.stopImmediatePropagation();const z=L.property("__zoom").k||1;if(I.ctrlKey&&i){const ne=cr(I),re=y0(I),X=z*Math.pow(2,re);T.scaleTo(L,X,ne,I);return}const M=I.deltaMode===1?20:1;let q=c===ns.Vertical?0:I.deltaX*M,A=c===ns.Horizontal?0:I.deltaY*M;!Il()&&I.shiftKey&&c!==ns.Vertical&&(q=I.deltaY*M,A=0),T.translateBy(L,-(q/z)*a,-(A/z)*a,{internal:!0});const B=Ca(L.property("__zoom")),{onViewportChangeStart:V,onViewportChange:Y,onViewportChangeEnd:te}=S.getState();clearTimeout(D.current),F.current||(F.current=!0,t==null||t(I,B),V==null||V(B)),F.current&&(e==null||e(I,B),Y==null||Y(B),D.current=setTimeout(()=>{r==null||r(I,B),te==null||te(B),F.current=!1},150))},{passive:!1}):typeof $<"u"&&L.on("wheel.zoom",function(I,z){if(!v&&I.type==="wheel"&&!I.ctrlKey||Ns(I,y))return null;I.preventDefault(),$.call(this,I,z)},{passive:!1}))},[E,o,c,L,T,$,O,i,v,y,t,e,r]),m.useEffect(()=>{T&&T.on("start",I=>{var q,A;if(!I.sourceEvent||I.sourceEvent.internal)return null;P.current=(q=I.sourceEvent)==null?void 0:q.button;const{onViewportChangeStart:z}=S.getState(),M=Ca(I.transform);N.current=!0,R.current=M,((A=I.sourceEvent)==null?void 0:A.type)==="mousedown"&&S.setState({paneDragging:!0}),z==null||z(M),t==null||t(I.sourceEvent,M)})},[T,t]),m.useEffect(()=>{T&&(E&&!N.current?T.on("zoom",null):E||T.on("zoom",I=>{var M;const{onViewportChange:z}=S.getState();if(S.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),k.current=!!(n&&x0(f,P.current??0)),(e||z)&&!((M=I.sourceEvent)!=null&&M.internal)){const q=Ca(I.transform);z==null||z(q),e==null||e(I.sourceEvent,q)}}))},[E,T,e,f,n]),m.useEffect(()=>{T&&T.on("end",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=S.getState();if(N.current=!1,S.setState({paneDragging:!1}),n&&x0(f,P.current??0)&&!k.current&&n(I.sourceEvent),k.current=!1,(r||z)&&RA(R.current,I.transform)){const M=Ca(I.transform);R.current=M,clearTimeout(j.current),j.current=setTimeout(()=>{z==null||z(M),r==null||r(I.sourceEvent,M)},o?150:0)}})},[T,o,f,r,n]),m.useEffect(()=>{T&&T.filter(I=>{const z=O||s,M=i&&I.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&I.button===1&&I.type==="mousedown"&&(Ns(I,"react-flow__node")||Ns(I,"react-flow__edge")))return!0;if(!f&&!z&&!o&&!u&&!i||E||!u&&I.type==="dblclick"||Ns(I,y)&&I.type==="wheel"||Ns(I,_)&&(I.type!=="wheel"||o&&I.type==="wheel"&&!O)||!i&&I.ctrlKey&&I.type==="wheel"||!z&&!o&&!M&&I.type==="wheel"||!f&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(f)&&!f.includes(I.button)&&I.type==="mousedown")return!1;const q=Array.isArray(f)&&f.includes(I.button)||!I.button||I.button<=1;return(!I.ctrlKey||I.type==="wheel")&&q})},[E,T,s,i,o,u,f,d,O]),H.createElement("div",{className:"react-flow__renderer",ref:C,style:Jv},x)},MA=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function AA(){const{userSelectionActive:e,userSelectionRect:t}=Me(MA,pt);return e&&t?H.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function b0(e,t){const r=t.parentNode||t.parentId,n=e.find(s=>s.id===r);if(n){const s=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(s>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,s>0&&(n.style.width+=s),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function CN(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,s)=>{const i=e.filter(a=>a.id===s.id);if(i.length===0)return n.push(s),n;const o={...s};for(const a of i)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&b0(n,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&b0(n,o);break}case"remove":return n}return n.push(o),n},r)}function RN(e,t){return CN(e,t)}function PA(e,t){return CN(e,t)}const mn=(e,t)=>({id:e,type:"select",selected:t});function Fs(e,t){return e.reduce((r,n)=>{const s=t.includes(n.id);return!n.selected&&s?(n.selected=!0,r.push(mn(n.id,!0))):n.selected&&!s&&(n.selected=!1,r.push(mn(n.id,!1))),r},[])}const ju=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},DA=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),TN=m.memo(({isSelecting:e,selectionMode:t=Do.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const p=m.useRef(null),h=tt(),b=m.useRef(0),g=m.useRef(0),w=m.useRef(),{userSelectionActive:v,elementsSelectable:x,dragging:y}=Me(DA,pt),_=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,g.current=0},j=$=>{i==null||i($),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},S=$=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){$.preventDefault();return}o==null||o($)},N=a?$=>a($):void 0,k=$=>{const{resetSelectedElements:E,domNode:O}=h.getState();if(w.current=O==null?void 0:O.getBoundingClientRect(),!x||!e||$.button!==0||$.target!==p.current||!w.current)return;const{x:P,y:F}=An($,w.current);E(),h.setState({userSelectionRect:{width:0,height:0,startX:P,startY:F,x:P,y:F}}),n==null||n($)},C=$=>{const{userSelectionRect:E,nodeInternals:O,edges:P,transform:F,onNodesChange:D,onEdgesChange:I,nodeOrigin:z,getNodes:M}=h.getState();if(!e||!w.current||!E)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const q=An($,w.current),A=E.startX??0,B=E.startY??0,V={...E,x:q.x<A?q.x:A,y:q.y<B?q.y:B,width:Math.abs(q.x-A),height:Math.abs(q.y-B)},Y=M(),te=uN(O,V,F,t===Do.Partial,!0,z),ne=dN(te,P).map(X=>X.id),re=te.map(X=>X.id);if(b.current!==re.length){b.current=re.length;const X=Fs(Y,re);X.length&&(D==null||D(X))}if(g.current!==ne.length){g.current=ne.length;const X=Fs(P,ne);X.length&&(I==null||I(X))}h.setState({userSelectionRect:V})},R=$=>{if($.button!==0)return;const{userSelectionRect:E}=h.getState();!v&&E&&$.target===p.current&&(j==null||j($)),h.setState({nodesSelectionActive:b.current>0}),_(),s==null||s($)},T=$=>{v&&(h.setState({nodesSelectionActive:b.current>0}),s==null||s($)),_()},L=x&&(e||v);return H.createElement("div",{className:Rt(["react-flow__pane",{dragging:y,selection:e}]),onClick:L?void 0:ju(j,p),onContextMenu:ju(S,p),onWheel:ju(N,p),onMouseEnter:L?void 0:c,onMouseDown:L?k:void 0,onMouseMove:L?C:u,onMouseUp:L?R:void 0,onMouseLeave:L?T:d,ref:p,style:Jv},f,H.createElement(AA,null))});TN.displayName="Pane";function IN(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:IN(n,t):!1}function w0(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function OA(e,t,r,n){return Array.from(e.values()).filter(s=>(s.selected||s.id===n)&&(!s.parentNode||s.parentId||!IN(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var i,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((i=s.positionAbsolute)==null?void 0:i.x)??0),y:r.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function LA(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function MN(e,t,r,n,s=[0,0],i){const o=LA(e,e.extent||n);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:p,y:h}=ls(f,s).positionAbsolute;a=f&&Xt(p)&&Xt(h)&&Xt(f.width)&&Xt(f.height)?[[p+e.width*s[0],h+e.height*s[1]],[p+f.width-e.width+e.width*s[0],h+f.height-e.height+e.height*s[1]]]:a}else i==null||i("005",Jr.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:p,y:h}=ls(f,s).positionAbsolute;a=[[e.extent[0][0]+p,e.extent[0][1]+h],[e.extent[1][0]+p,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=r.get(c);u=ls(f,s).positionAbsolute}const d=a&&a!=="parent"?Uv(t,a):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function Su({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?n.find(s=>s.id===e):n[0],n]}const _0=(e,t,r,n)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const i=Array.from(s),o=t.getBoundingClientRect(),a={x:o.width*n[0],y:o.height*n[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/r,y:(u.top-o.top-a.y)/r,...Vv(c)}})};function Oi(e,t,r){return r===void 0?r:n=>{const s=t().nodeInternals.get(e);s&&r(n,{...s})}}function Pg({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Jr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):s([e])}function zA(){const e=tt();return m.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:s,snapToGrid:i}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,a=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-n[0])/n[2],y:(a-n[1])/n[2]};return{xSnapped:i?s[0]*Math.round(c.x/s[0]):c.x,ySnapped:i?s[1]*Math.round(c.y/s[1]):c.y,...c}},[])}function ku(e){return(t,r,n)=>e==null?void 0:e(t,n)}function AN({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:s,isSelectable:i,selectNodesOnDrag:o}){const a=tt(),[c,u]=m.useState(!1),d=m.useRef([]),f=m.useRef({x:null,y:null}),p=m.useRef(0),h=m.useRef(null),b=m.useRef({x:0,y:0}),g=m.useRef(null),w=m.useRef(!1),v=m.useRef(!1),x=m.useRef(!1),y=zA();return m.useEffect(()=>{if(e!=null&&e.current){const _=Kt(e.current),j=({x:k,y:C})=>{const{nodeInternals:R,onNodeDrag:T,onSelectionDrag:L,updateNodePositions:$,nodeExtent:E,snapGrid:O,snapToGrid:P,nodeOrigin:F,onError:D}=a.getState();f.current={x:k,y:C};let I=!1,z={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&E){const q=hc(d.current,F);z=Po(q)}if(d.current=d.current.map(q=>{const A={x:k-q.distance.x,y:C-q.distance.y};P&&(A.x=O[0]*Math.round(A.x/O[0]),A.y=O[1]*Math.round(A.y/O[1]));const B=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];d.current.length>1&&E&&!q.extent&&(B[0][0]=q.positionAbsolute.x-z.x+E[0][0],B[1][0]=q.positionAbsolute.x+(q.width??0)-z.x2+E[1][0],B[0][1]=q.positionAbsolute.y-z.y+E[0][1],B[1][1]=q.positionAbsolute.y+(q.height??0)-z.y2+E[1][1]);const V=MN(q,A,R,B,F,D);return I=I||q.position.x!==V.position.x||q.position.y!==V.position.y,q.position=V.position,q.positionAbsolute=V.positionAbsolute,q}),!I)return;$(d.current,!0,!0),u(!0);const M=s?T:ku(L);if(M&&g.current){const[q,A]=Su({nodeId:s,dragItems:d.current,nodeInternals:R});M(g.current,q,A)}},S=()=>{if(!h.current)return;const[k,C]=Jk(b.current,h.current);if(k!==0||C!==0){const{transform:R,panBy:T}=a.getState();f.current.x=(f.current.x??0)-k/R[2],f.current.y=(f.current.y??0)-C/R[2],T({x:k,y:C})&&j(f.current)}p.current=requestAnimationFrame(S)},N=k=>{var F;const{nodeInternals:C,multiSelectionActive:R,nodesDraggable:T,unselectNodesAndEdges:L,onNodeDragStart:$,onSelectionDragStart:E}=a.getState();v.current=!0;const O=s?$:ku(E);(!o||!i)&&!R&&s&&((F=C.get(s))!=null&&F.selected||L()),s&&i&&o&&Pg({id:s,store:a,nodeRef:e});const P=y(k);if(f.current=P,d.current=OA(C,T,P,s),O&&d.current){const[D,I]=Su({nodeId:s,dragItems:d.current,nodeInternals:C});O(k.sourceEvent,D,I)}};if(t)_.on(".drag",null);else{const k=YT().on("start",C=>{const{domNode:R,nodeDragThreshold:T}=a.getState();T===0&&N(C),x.current=!1;const L=y(C);f.current=L,h.current=(R==null?void 0:R.getBoundingClientRect())||null,b.current=An(C.sourceEvent,h.current)}).on("drag",C=>{var $,E;const R=y(C),{autoPanOnNodeDrag:T,nodeDragThreshold:L}=a.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!w.current&&v.current&&T&&(w.current=!0,S()),!v.current){const O=R.xSnapped-((($=f==null?void 0:f.current)==null?void 0:$.x)??0),P=R.ySnapped-(((E=f==null?void 0:f.current)==null?void 0:E.y)??0);Math.sqrt(O*O+P*P)>L&&N(C)}(f.current.x!==R.xSnapped||f.current.y!==R.ySnapped)&&d.current&&v.current&&(g.current=C.sourceEvent,b.current=An(C.sourceEvent,h.current),j(R))}}).on("end",C=>{if(!(!v.current||x.current)&&(u(!1),w.current=!1,v.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:R,nodeInternals:T,onNodeDragStop:L,onSelectionDragStop:$}=a.getState(),E=s?L:ku($);if(R(d.current,!1,!1),E){const[O,P]=Su({nodeId:s,dragItems:d.current,nodeInternals:T});E(C.sourceEvent,O,P)}}}).filter(C=>{const R=C.target;return!C.button&&(!r||!w0(R,`.${r}`,e))&&(!n||w0(R,n,e))});return _.call(k),()=>{_.on(".drag",null)}}}},[e,t,r,n,i,a,s,o,y]),c}function PN(){const e=tt();return m.useCallback(r=>{const{nodeInternals:n,nodeExtent:s,updateNodePositions:i,getNodes:o,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(x=>x.selected&&(x.draggable||d&&typeof x.draggable>"u")),p=a?c[0]:5,h=a?c[1]:5,b=r.isShiftPressed?4:1,g=r.x*p*b,w=r.y*h*b,v=f.map(x=>{if(x.positionAbsolute){const y={x:x.positionAbsolute.x+g,y:x.positionAbsolute.y+w};a&&(y.x=c[0]*Math.round(y.x/c[0]),y.y=c[1]*Math.round(y.y/c[1]));const{positionAbsolute:_,position:j}=MN(x,y,n,s,void 0,u);x.position=j,x.positionAbsolute=_}return x});i(v,!0,!1)},[])}const Xs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Li=e=>{const t=({id:r,type:n,data:s,xPos:i,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:p,onMouseLeave:h,onContextMenu:b,onDoubleClick:g,style:w,className:v,isDraggable:x,isSelectable:y,isConnectable:_,isFocusable:j,selectNodesOnDrag:S,sourcePosition:N,targetPosition:k,hidden:C,resizeObserver:R,dragHandle:T,zIndex:L,isParent:$,noDragClassName:E,noPanClassName:O,initialized:P,disableKeyboardA11y:F,ariaLabel:D,rfId:I,hasHandleBounds:z})=>{const M=tt(),q=m.useRef(null),A=m.useRef(null),B=m.useRef(N),V=m.useRef(k),Y=m.useRef(n),te=y||x||d||f||p||h,ne=PN(),re=Oi(r,M.getState,f),X=Oi(r,M.getState,p),ue=Oi(r,M.getState,h),J=Oi(r,M.getState,b),se=Oi(r,M.getState,g),ie=U=>{const{nodeDragThreshold:K}=M.getState();if(y&&(!S||!x||K>0)&&Pg({id:r,store:M,nodeRef:q}),d){const ae=M.getState().nodeInternals.get(r);ae&&d(U,{...ae})}},ee=U=>{if(!Rg(U)&&!F)if(nN.includes(U.key)&&y){const K=U.key==="Escape";Pg({id:r,store:M,unselect:K,nodeRef:q})}else x&&u&&Object.prototype.hasOwnProperty.call(Xs,U.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${U.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),ne({x:Xs[U.key].x,y:Xs[U.key].y,isShiftPressed:U.shiftKey}))};m.useEffect(()=>()=>{A.current&&(R==null||R.unobserve(A.current),A.current=null)},[]),m.useEffect(()=>{if(q.current&&!C){const U=q.current;(!P||!z||A.current!==U)&&(A.current&&(R==null||R.unobserve(A.current)),R==null||R.observe(U),A.current=U)}},[C,P,z]),m.useEffect(()=>{const U=Y.current!==n,K=B.current!==N,ae=V.current!==k;q.current&&(U||K||ae)&&(U&&(Y.current=n),K&&(B.current=N),ae&&(V.current=k),M.getState().updateNodeDimensions([{id:r,nodeElement:q.current,forceUpdate:!0}]))},[r,n,N,k]);const xe=AN({nodeRef:q,disabled:C||!x,noDragClassName:E,handleSelector:T,nodeId:r,isSelectable:y,selectNodesOnDrag:S});return C?null:H.createElement("div",{className:Rt(["react-flow__node",`react-flow__node-${n}`,{[O]:x},v,{selected:u,selectable:y,parent:$,dragging:xe}]),ref:q,style:{zIndex:L,transform:`translate(${a}px,${c}px)`,pointerEvents:te?"all":"none",visibility:P?"visible":"hidden",...w},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:re,onMouseMove:X,onMouseLeave:ue,onContextMenu:J,onClick:ie,onDoubleClick:se,onKeyDown:j?ee:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":F?void 0:`${jN}-${I}`,"aria-label":D},H.createElement(ZM,{value:r},H.createElement(e,{id:r,data:s,type:n,xPos:i,yPos:o,selected:u,isConnectable:_,sourcePosition:N,targetPosition:k,dragging:xe,dragHandle:T,zIndex:L})))};return t.displayName="NodeWrapper",m.memo(t)};const qA=e=>{const t=e.getNodes().filter(r=>r.selected);return{...hc(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function $A({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=tt(),{width:s,height:i,x:o,y:a,transformString:c,userSelectionActive:u}=Me(qA,pt),d=PN(),f=m.useRef(null);if(m.useEffect(()=>{var b;r||(b=f.current)==null||b.focus({preventScroll:!0})},[r]),AN({nodeRef:f}),u||!s||!i)return null;const p=e?b=>{const g=n.getState().getNodes().filter(w=>w.selected);e(b,g)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(Xs,b.key)&&d({x:Xs[b.key].x,y:Xs[b.key].y,isShiftPressed:b.shiftKey})};return H.createElement("div",{className:Rt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},H.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:r?void 0:-1,onKeyDown:r?void 0:h,style:{width:s,height:i,top:a,left:o}}))}var FA=m.memo($A);const BA=e=>e.nodesSelectionActive,DN=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:v,zoomActivationKeyCode:x,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:j,panOnScroll:S,panOnScrollSpeed:N,panOnScrollMode:k,zoomOnDoubleClick:C,panOnDrag:R,defaultViewport:T,translateExtent:L,minZoom:$,maxZoom:E,preventScrolling:O,onSelectionContextMenu:P,noWheelClassName:F,noPanClassName:D,disableKeyboardA11y:I})=>{const z=Me(BA),M=Oo(f),q=Oo(v),A=q||R,B=q||S,V=M||p&&A!==!0;return EA({deleteKeyCode:a,multiSelectionKeyCode:w}),H.createElement(IA,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:j,panOnScroll:B,panOnScrollSpeed:N,panOnScrollMode:k,zoomOnDoubleClick:C,panOnDrag:!M&&A,defaultViewport:T,translateExtent:L,minZoom:$,maxZoom:E,zoomActivationKeyCode:x,preventScrolling:O,noWheelClassName:F,noPanClassName:D},H.createElement(TN,{onSelectionStart:b,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:A,isSelecting:!!V,selectionMode:h},e,z&&H.createElement(FA,{onSelectionContextMenu:P,noPanClassName:D,disableKeyboardA11y:I})))};DN.displayName="FlowRenderer";var HA=m.memo(DN);function WA(e){return Me(m.useCallback(r=>e?uN(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function VA(e){const t={input:Li(e.input||yN),default:Li(e.default||Ag),output:Li(e.output||wN),group:Li(e.group||Zv)},r={},n=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=Li(e[i]||Ag),s),r);return{...t,...n}}const UA=({x:e,y:t,width:r,height:n,origin:s})=>!r||!n?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-r*s[0],y:t-n*s[1]},GA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ON=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:s,updateNodeDimensions:i,onError:o}=Me(GA,pt),a=WA(e.onlyRenderVisibleElements),c=m.useRef(),u=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const p=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(p)});return c.current=d,d},[]);return m.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),H.createElement("div",{className:"react-flow__nodes",style:Jv},a.map(d=>{var j,S,N;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Jr.error003(f)),f="default");const p=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),b=!!(d.selectable||s&&typeof d.selectable>"u"),g=!!(d.connectable||r&&typeof d.connectable>"u"),w=!!(d.focusable||n&&typeof d.focusable>"u"),v=e.nodeExtent?Uv(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,x=(v==null?void 0:v.x)??0,y=(v==null?void 0:v.y)??0,_=UA({x,y,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return H.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Z.Bottom,targetPosition:d.targetPosition||Z.Top,hidden:d.hidden,xPos:x,yPos:y,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:b,isConnectable:g,isFocusable:w,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[ze])==null?void 0:j.z)??0,isParent:!!((S=d[ze])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((N=d[ze])!=null&&N.handleBounds)})}))};ON.displayName="NodeRenderer";var KA=m.memo(ON);const YA=(e,t,r)=>r===Z.Left?e-t:r===Z.Right?e+t:e,XA=(e,t,r)=>r===Z.Top?e-t:r===Z.Bottom?e+t:e,j0="react-flow__edgeupdater",S0=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:a})=>H.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:Rt([j0,`${j0}-${a}`]),cx:YA(t,n,e),cy:XA(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),QA=()=>!0;var Es=e=>{const t=({id:r,className:n,type:s,data:i,onClick:o,onEdgeDoubleClick:a,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:g,style:w,source:v,target:x,sourceX:y,sourceY:_,targetX:j,targetY:S,sourcePosition:N,targetPosition:k,elementsSelectable:C,hidden:R,sourceHandleId:T,targetHandleId:L,onContextMenu:$,onMouseEnter:E,onMouseMove:O,onMouseLeave:P,reconnectRadius:F,onReconnect:D,onReconnectStart:I,onReconnectEnd:z,markerEnd:M,markerStart:q,rfId:A,ariaLabel:B,isFocusable:V,isReconnectable:Y,pathOptions:te,interactionWidth:ne,disableKeyboardA11y:re})=>{const X=m.useRef(null),[ue,J]=m.useState(!1),[se,ie]=m.useState(!1),ee=tt(),xe=m.useMemo(()=>`url('#${Ig(q,A)}')`,[q,A]),U=m.useMemo(()=>`url('#${Ig(M,A)}')`,[M,A]);if(R)return null;const K=Se=>{var Ft;const{edges:nt,addSelectedEdges:Xe,unselectNodesAndEdges:st,multiSelectionActive:nr}=ee.getState(),$t=nt.find(sn=>sn.id===r);$t&&(C&&(ee.setState({nodesSelectionActive:!1}),$t.selected&&nr?(st({nodes:[],edges:[$t]}),(Ft=X.current)==null||Ft.blur()):Xe([r])),o&&o(Se,$t))},ae=Di(r,ee.getState,a),W=Di(r,ee.getState,$),we=Di(r,ee.getState,E),_e=Di(r,ee.getState,O),de=Di(r,ee.getState,P),je=(Se,nt)=>{if(Se.button!==0)return;const{edges:Xe,isValidConnection:st}=ee.getState(),nr=nt?x:v,$t=(nt?L:T)||null,Ft=nt?"target":"source",sn=st||QA,_i=nt,Bn=Xe.find(qe=>qe.id===r);ie(!0),I==null||I(Se,Bn,Ft);const ji=qe=>{ie(!1),z==null||z(qe,Bn,Ft)};mN({event:Se,handleId:$t,nodeId:nr,onConnect:qe=>D==null?void 0:D(Bn,qe),isTarget:_i,getState:ee.getState,setState:ee.setState,isValidConnection:sn,edgeUpdaterType:Ft,onReconnectEnd:ji})},lt=Se=>je(Se,!0),We=Se=>je(Se,!1),rt=()=>J(!0),Fe=()=>J(!1),ht=!C&&!o,rr=Se=>{var nt;if(!re&&nN.includes(Se.key)&&C){const{unselectNodesAndEdges:Xe,addSelectedEdges:st,edges:nr}=ee.getState();Se.key==="Escape"?((nt=X.current)==null||nt.blur(),Xe({edges:[nr.find(Ft=>Ft.id===r)]})):st([r])}};return H.createElement("g",{className:Rt(["react-flow__edge",`react-flow__edge-${s}`,n,{selected:c,animated:u,inactive:ht,updating:ue}]),onClick:K,onDoubleClick:ae,onContextMenu:W,onMouseEnter:we,onMouseMove:_e,onMouseLeave:de,onKeyDown:V?rr:void 0,tabIndex:V?0:void 0,role:V?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":B===null?void 0:B||`Edge from ${v} to ${x}`,"aria-describedby":V?`${SN}-${A}`:void 0,ref:X},!se&&H.createElement(e,{id:r,source:v,target:x,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:g,data:i,style:w,sourceX:y,sourceY:_,targetX:j,targetY:S,sourcePosition:N,targetPosition:k,sourceHandleId:T,targetHandleId:L,markerStart:xe,markerEnd:U,pathOptions:te,interactionWidth:ne}),Y&&H.createElement(H.Fragment,null,(Y==="source"||Y===!0)&&H.createElement(S0,{position:N,centerX:y,centerY:_,radius:F,onMouseDown:lt,onMouseEnter:rt,onMouseOut:Fe,type:"source"}),(Y==="target"||Y===!0)&&H.createElement(S0,{position:k,centerX:j,centerY:S,radius:F,onMouseDown:We,onMouseEnter:rt,onMouseOut:Fe,type:"target"})))};return t.displayName="EdgeWrapper",m.memo(t)};function ZA(e){const t={default:Es(e.default||Al),straight:Es(e.bezier||Yv),step:Es(e.step||Kv),smoothstep:Es(e.step||pc),simplebezier:Es(e.simplebezier||Gv)},r={},n=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=Es(e[i]||Al),s),r);return{...t,...n}}function k0(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,s=((r==null?void 0:r.y)||0)+t.y,i=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case Z.Top:return{x:n+i/2,y:s};case Z.Right:return{x:n+i,y:s+o/2};case Z.Bottom:return{x:n+i/2,y:s+o};case Z.Left:return{x:n,y:s+o/2}}}function N0(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const JA=(e,t,r,n,s,i)=>{const o=k0(r,e,t),a=k0(i,n,s);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function eP({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:s,targetHeight:i,width:o,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+s),y2:Math.max(e.y+n,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Po({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*p)>0}function E0(e){var n,s,i,o,a;const t=((n=e==null?void 0:e[ze])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const tP=[{level:0,isMaxLevel:!0,edges:[]}];function rP(e,t,r=!1){let n=-1;const s=e.reduce((o,a)=>{var d,f;const c=Xt(a.zIndex);let u=c?a.zIndex:0;if(r){const p=t.get(a.target),h=t.get(a.source),b=a.selected||(p==null?void 0:p.selected)||(h==null?void 0:h.selected),g=Math.max(((d=h==null?void 0:h[ze])==null?void 0:d.z)||0,((f=p==null?void 0:p[ze])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(b?g:0)}return o[u]?o[u].push(a):o[u]=[a],n=u>n?u:n,o},{}),i=Object.entries(s).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===n}});return i.length===0?tP:i}function nP(e,t,r){const n=Me(m.useCallback(s=>e?s.edges.filter(i=>{const o=t.get(i.source),a=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&eP({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return rP(n,t,r)}const sP=({color:e="none",strokeWidth:t=1})=>H.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),iP=({color:e="none",strokeWidth:t=1})=>H.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),C0={[Ml.Arrow]:sP,[Ml.ArrowClosed]:iP};function oP(e){const t=tt();return m.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(C0,e)?C0[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",Jr.error009(e)),null)},[e])}const aP=({id:e,type:t,color:r,width:n=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=oP(t);return c?H.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},H.createElement(c,{color:r,strokeWidth:o})):null},lP=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Ig(o,t);n.includes(a)||(s.push({id:a,color:o.color||e,...o}),n.push(a))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},LN=({defaultColor:e,rfId:t})=>{const r=Me(m.useCallback(lP({defaultColor:e,rfId:t}),[e,t]),(n,s)=>!(n.length!==s.length||n.some((i,o)=>i.id!==s[o].id)));return H.createElement("defs",null,r.map(n=>H.createElement(aP,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};LN.displayName="MarkerDefinitions";var cP=m.memo(LN);const uP=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),zN=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:b,reconnectRadius:g,children:w,disableKeyboardA11y:v})=>{const{edgesFocusable:x,edgesUpdatable:y,elementsSelectable:_,width:j,height:S,connectionMode:N,nodeInternals:k,onError:C}=Me(uP,pt),R=nP(t,k,r);return j?H.createElement(H.Fragment,null,R.map(({level:T,edges:L,isMaxLevel:$})=>H.createElement("svg",{key:T,style:{zIndex:T},width:j,height:S,className:"react-flow__edges react-flow__container"},$&&H.createElement(cP,{defaultColor:e,rfId:n}),H.createElement("g",null,L.map(E=>{const[O,P,F]=E0(k.get(E.source)),[D,I,z]=E0(k.get(E.target));if(!F||!z)return null;let M=E.type||"default";s[M]||(C==null||C("011",Jr.error011(M)),M="default");const q=s[M]||s.default,A=N===ms.Strict?I.target:(I.target??[]).concat(I.source??[]),B=N0(P.source,E.sourceHandle),V=N0(A,E.targetHandle),Y=(B==null?void 0:B.position)||Z.Bottom,te=(V==null?void 0:V.position)||Z.Top,ne=!!(E.focusable||x&&typeof E.focusable>"u"),re=E.reconnectable||E.updatable,X=typeof p<"u"&&(re||y&&typeof re>"u");if(!B||!V)return C==null||C("008",Jr.error008(B,E)),null;const{sourceX:ue,sourceY:J,targetX:se,targetY:ie}=JA(O,B,Y,D,V,te);return H.createElement(q,{key:E.id,id:E.id,className:Rt([E.className,i]),type:M,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:ue,sourceY:J,targetX:se,targetY:ie,sourcePosition:Y,targetPosition:te,elementsSelectable:_,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:b,reconnectRadius:g,rfId:n,ariaLabel:E.ariaLabel,isFocusable:ne,isReconnectable:X,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth,disableKeyboardA11y:v})})))),w):null};zN.displayName="EdgeRenderer";var dP=m.memo(zN);const fP=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function pP({children:e}){const t=Me(fP);return H.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function hP(e){const t=mc(),r=m.useRef(!1);m.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const mP={[Z.Left]:Z.Right,[Z.Right]:Z.Left,[Z.Top]:Z.Bottom,[Z.Bottom]:Z.Top},qN=({nodeId:e,handleType:t,style:r,type:n=yn.Bezier,CustomComponent:s,connectionStatus:i})=>{var S,N,k;const{fromNode:o,handleId:a,toX:c,toY:u,connectionMode:d}=Me(m.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),pt),f=(S=o==null?void 0:o[ze])==null?void 0:S.handleBounds;let p=f==null?void 0:f[t];if(d===ms.Loose&&(p=p||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!p)return null;const h=a?p.find(C=>C.id===a):p[0],b=h?h.x+h.width/2:(o.width??0)/2,g=h?h.y+h.height/2:o.height??0,w=(((N=o.positionAbsolute)==null?void 0:N.x)??0)+b,v=(((k=o.positionAbsolute)==null?void 0:k.y)??0)+g,x=h==null?void 0:h.position,y=x?mP[x]:null;if(!x||!y)return null;if(s)return H.createElement(s,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:h,fromX:w,fromY:v,toX:c,toY:u,fromPosition:x,toPosition:y,connectionStatus:i});let _="";const j={sourceX:w,sourceY:v,sourcePosition:x,targetX:c,targetY:u,targetPosition:y};return n===yn.Bezier?[_]=lN(j):n===yn.Step?[_]=Tg({...j,borderRadius:0}):n===yn.SmoothStep?[_]=Tg(j):n===yn.SimpleBezier?[_]=aN(j):_=`M${w},${v} ${c},${u}`,H.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:r})};qN.displayName="ConnectionLine";const gP=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function vP({containerStyle:e,style:t,type:r,component:n}){const{nodeId:s,handleType:i,nodesConnectable:o,width:a,height:c,connectionStatus:u}=Me(gP,pt);return!(s&&i&&a&&o)?null:H.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},H.createElement("g",{className:Rt(["react-flow__connection",u])},H.createElement(qN,{nodeId:s,handleType:i,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function R0(e,t){return m.useRef(null),tt(),m.useMemo(()=>t(e),[e])}const $N=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:s,onInit:i,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,onSelectionContextMenu:b,onSelectionStart:g,onSelectionEnd:w,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:y,connectionLineContainerStyle:_,selectionKeyCode:j,selectionOnDrag:S,selectionMode:N,multiSelectionKeyCode:k,panActivationKeyCode:C,zoomActivationKeyCode:R,deleteKeyCode:T,onlyRenderVisibleElements:L,elementsSelectable:$,selectNodesOnDrag:E,defaultViewport:O,translateExtent:P,minZoom:F,maxZoom:D,preventScrolling:I,defaultMarkerColor:z,zoomOnScroll:M,zoomOnPinch:q,panOnScroll:A,panOnScrollSpeed:B,panOnScrollMode:V,zoomOnDoubleClick:Y,panOnDrag:te,onPaneClick:ne,onPaneMouseEnter:re,onPaneMouseMove:X,onPaneMouseLeave:ue,onPaneScroll:J,onPaneContextMenu:se,onEdgeContextMenu:ie,onEdgeMouseEnter:ee,onEdgeMouseMove:xe,onEdgeMouseLeave:U,onReconnect:K,onReconnectStart:ae,onReconnectEnd:W,reconnectRadius:we,noDragClassName:_e,noWheelClassName:de,noPanClassName:je,elevateEdgesOnSelect:lt,disableKeyboardA11y:We,nodeOrigin:rt,nodeExtent:Fe,rfId:ht})=>{const rr=R0(e,VA),Se=R0(t,ZA);return hP(i),H.createElement(HA,{onPaneClick:ne,onPaneMouseEnter:re,onPaneMouseMove:X,onPaneMouseLeave:ue,onPaneContextMenu:se,onPaneScroll:J,deleteKeyCode:T,selectionKeyCode:j,selectionOnDrag:S,selectionMode:N,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:k,panActivationKeyCode:C,zoomActivationKeyCode:R,elementsSelectable:$,onMove:r,onMoveStart:n,onMoveEnd:s,zoomOnScroll:M,zoomOnPinch:q,zoomOnDoubleClick:Y,panOnScroll:A,panOnScrollSpeed:B,panOnScrollMode:V,panOnDrag:te,defaultViewport:O,translateExtent:P,minZoom:F,maxZoom:D,onSelectionContextMenu:b,preventScrolling:I,noDragClassName:_e,noWheelClassName:de,noPanClassName:je,disableKeyboardA11y:We},H.createElement(pP,null,H.createElement(dP,{edgeTypes:Se,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:ie,onEdgeMouseEnter:ee,onEdgeMouseMove:xe,onEdgeMouseLeave:U,onReconnect:K,onReconnectStart:ae,onReconnectEnd:W,reconnectRadius:we,defaultMarkerColor:z,noPanClassName:je,elevateEdgesOnSelect:!!lt,disableKeyboardA11y:We,rfId:ht},H.createElement(vP,{style:x,type:v,component:y,containerStyle:_})),H.createElement("div",{className:"react-flow__edgelabel-renderer"}),H.createElement(KA,{nodeTypes:rr,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,selectNodesOnDrag:E,onlyRenderVisibleElements:L,noPanClassName:je,noDragClassName:_e,disableKeyboardA11y:We,nodeOrigin:rt,nodeExtent:Fe,rfId:ht})))};$N.displayName="GraphView";var xP=m.memo($N);const Dg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ln={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Dg,nodeExtent:Dg,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ms.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:UM,isValidConnection:void 0},yP=()=>a3((e,t)=>({...ln,setNodes:r=>{const{nodeInternals:n,nodeOrigin:s,elevateNodesOnSelect:i}=t();e({nodeInternals:_u(r,n,s,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(s=>({...n,...s}))})},setDefaultNodesAndEdges:(r,n)=>{const s=typeof r<"u",i=typeof n<"u",o=s?_u(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?n:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=r.reduce((g,w)=>{const v=s.get(w.id);if(v!=null&&v.hidden)s.set(v.id,{...v,[ze]:{...v[ze],handleBounds:void 0}});else if(v){const x=Vv(w.nodeElement);!!(x.width&&x.height&&(v.width!==x.width||v.height!==x.height||w.forceUpdate))&&(s.set(v.id,{...v,[ze]:{...v[ze],handleBounds:{source:_0(".source",w.nodeElement,p,u),target:_0(".target",w.nodeElement,p,u)}},...x}),g.push({id:v.id,type:"dimensions",dimensions:x}))}return g},[]);NN(s,u);const b=o||i&&!o&&EN(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:b}),(h==null?void 0:h.length)>0&&(n==null||n(h))},updateNodePositions:(r,n=!0,s=!1)=>{const{triggerNodeChanges:i}=t(),o=r.map(a=>{const c={id:a.id,type:"position",dragging:s};return n&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(i){const u=RN(r,a()),d=_u(u,s,o,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:s,getNodes:i}=t();let o,a=null;n?o=r.map(c=>mn(c,!0)):(o=Fs(i(),r),a=Fs(s,[])),Ea({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:s,getNodes:i}=t();let o,a=null;n?o=r.map(c=>mn(c,!0)):(o=Fs(s,r),a=Fs(i(),[])),Ea({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:s,getNodes:i}=t(),o=r||i(),a=n||s,c=o.map(d=>(d.selected=!1,mn(d.id,!1))),u=a.map(d=>mn(d.id,!1));Ea({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:s}=t();n==null||n.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:s}=t();n==null||n.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),i=n().filter(a=>a.selected).map(a=>mn(a.id,!1)),o=r.filter(a=>a.selected).map(a=>mn(a.id,!1));Ea({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(s=>{s.positionAbsolute=Uv(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:s,height:i,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!r.x&&!r.y)return!1;const u=Gr.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[s,i]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(a,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:ln.connectionNodeId,connectionHandleId:ln.connectionHandleId,connectionHandleType:ln.connectionHandleType,connectionStatus:ln.connectionStatus,connectionStartHandle:ln.connectionStartHandle,connectionEndHandle:ln.connectionEndHandle}),reset:()=>e({...ln})}),Object.is),gc=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=yP()),H.createElement(qM,{value:t.current},e)};gc.displayName="ReactFlowProvider";const FN=({children:e})=>m.useContext(fc)?H.createElement(H.Fragment,null,e):H.createElement(gc,null,e);FN.displayName="ReactFlowWrapper";const bP={input:yN,default:Ag,output:wN,group:Zv},wP={default:Al,straight:Yv,step:Kv,smoothstep:pc,simplebezier:Gv},_P=[0,0],jP=[15,15],SP={x:0,y:0,zoom:1},kP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ex=m.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:s,nodeTypes:i=bP,edgeTypes:o=wP,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onConnect:h,onConnectStart:b,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:v,onNodeMouseEnter:x,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:j,onNodeDoubleClick:S,onNodeDragStart:N,onNodeDrag:k,onNodeDragStop:C,onNodesDelete:R,onEdgesDelete:T,onSelectionChange:L,onSelectionDragStart:$,onSelectionDrag:E,onSelectionDragStop:O,onSelectionContextMenu:P,onSelectionStart:F,onSelectionEnd:D,connectionMode:I=ms.Strict,connectionLineType:z=yn.Bezier,connectionLineStyle:M,connectionLineComponent:q,connectionLineContainerStyle:A,deleteKeyCode:B="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:Y=!1,selectionMode:te=Do.Full,panActivationKeyCode:ne="Space",multiSelectionKeyCode:re=Il()?"Meta":"Control",zoomActivationKeyCode:X=Il()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:J=jP,onlyRenderVisibleElements:se=!1,selectNodesOnDrag:ie=!0,nodesDraggable:ee,nodesConnectable:xe,nodesFocusable:U,nodeOrigin:K=_P,edgesFocusable:ae,edgesUpdatable:W,elementsSelectable:we,defaultViewport:_e=SP,minZoom:de=.5,maxZoom:je=2,translateExtent:lt=Dg,preventScrolling:We=!0,nodeExtent:rt,defaultMarkerColor:Fe="#b1b1b7",zoomOnScroll:ht=!0,zoomOnPinch:rr=!0,panOnScroll:Se=!1,panOnScrollSpeed:nt=.5,panOnScrollMode:Xe=ns.Free,zoomOnDoubleClick:st=!0,panOnDrag:nr=!0,onPaneClick:$t,onPaneMouseEnter:Ft,onPaneMouseMove:sn,onPaneMouseLeave:_i,onPaneScroll:Bn,onPaneContextMenu:ji,children:Ve,onEdgeContextMenu:qe,onEdgeDoubleClick:mt,onEdgeMouseEnter:yr,onEdgeMouseMove:wt,onEdgeMouseLeave:gt,onEdgeUpdate:Bt,onEdgeUpdateStart:on,onEdgeUpdateEnd:Ue,onReconnect:br,onReconnectStart:Ht,onReconnectEnd:sr,reconnectRadius:Hn=10,edgeUpdaterRadius:Wn=10,onNodesChange:wr,onEdgesChange:Vn,noDragClassName:Si="nodrag",noWheelClassName:GC="nowheel",noPanClassName:Rx="nopan",fitView:KC=!1,fitViewOptions:YC,connectOnClick:XC=!0,attributionPosition:QC,proOptions:ZC,defaultEdgeOptions:JC,elevateNodesOnSelect:e4=!0,elevateEdgesOnSelect:t4=!1,disableKeyboardA11y:Tx=!1,autoPanOnConnect:r4=!0,autoPanOnNodeDrag:n4=!0,connectionRadius:s4=20,isValidConnection:i4,onError:o4,style:a4,id:Ix,nodeDragThreshold:l4,...c4},u4)=>{const Hc=Ix||"1";return H.createElement("div",{...c4,style:{...a4,...kP},ref:u4,className:Rt(["react-flow",s]),"data-testid":"rf__wrapper",id:Ix},H.createElement(FN,null,H.createElement(xP,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:j,onNodeDoubleClick:S,nodeTypes:i,edgeTypes:o,connectionLineType:z,connectionLineStyle:M,connectionLineComponent:q,connectionLineContainerStyle:A,selectionKeyCode:V,selectionOnDrag:Y,selectionMode:te,deleteKeyCode:B,multiSelectionKeyCode:re,panActivationKeyCode:ne,zoomActivationKeyCode:X,onlyRenderVisibleElements:se,selectNodesOnDrag:ie,defaultViewport:_e,translateExtent:lt,minZoom:de,maxZoom:je,preventScrolling:We,zoomOnScroll:ht,zoomOnPinch:rr,zoomOnDoubleClick:st,panOnScroll:Se,panOnScrollSpeed:nt,panOnScrollMode:Xe,panOnDrag:nr,onPaneClick:$t,onPaneMouseEnter:Ft,onPaneMouseMove:sn,onPaneMouseLeave:_i,onPaneScroll:Bn,onPaneContextMenu:ji,onSelectionContextMenu:P,onSelectionStart:F,onSelectionEnd:D,onEdgeContextMenu:qe,onEdgeDoubleClick:mt,onEdgeMouseEnter:yr,onEdgeMouseMove:wt,onEdgeMouseLeave:gt,onReconnect:br??Bt,onReconnectStart:Ht??on,onReconnectEnd:sr??Ue,reconnectRadius:Hn??Wn,defaultMarkerColor:Fe,noDragClassName:Si,noWheelClassName:GC,noPanClassName:Rx,elevateEdgesOnSelect:t4,rfId:Hc,disableKeyboardA11y:Tx,nodeOrigin:K,nodeExtent:rt}),H.createElement(mA,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:h,onConnectStart:b,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:v,nodesDraggable:ee,nodesConnectable:xe,nodesFocusable:U,edgesFocusable:ae,edgesUpdatable:W,elementsSelectable:we,elevateNodesOnSelect:e4,minZoom:de,maxZoom:je,nodeExtent:rt,onNodesChange:wr,onEdgesChange:Vn,snapToGrid:ue,snapGrid:J,connectionMode:I,translateExtent:lt,connectOnClick:XC,defaultEdgeOptions:JC,fitView:KC,fitViewOptions:YC,onNodesDelete:R,onEdgesDelete:T,onNodeDragStart:N,onNodeDrag:k,onNodeDragStop:C,onSelectionDrag:E,onSelectionDragStart:$,onSelectionDragStop:O,noPanClassName:Rx,nodeOrigin:K,rfId:Hc,autoPanOnConnect:r4,autoPanOnNodeDrag:n4,onError:o4,connectionRadius:s4,isValidConnection:i4,nodeDragThreshold:l4}),H.createElement(pA,{onSelectionChange:L}),Ve,H.createElement(FM,{proOptions:ZC,position:QC}),H.createElement(bA,{rfId:Hc,disableKeyboardA11y:Tx})))});ex.displayName="ReactFlow";function BN(e){return t=>{const[r,n]=m.useState(t),s=m.useCallback(i=>n(o=>e(i,o)),[]);return[r,n,s]}}const HN=BN(RN),WN=BN(PA),VN=({id:e,x:t,y:r,width:n,height:s,style:i,color:o,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:p,selected:h})=>{const{background:b,backgroundColor:g}=i||{},w=o||b||g;return H.createElement("rect",{className:Rt(["react-flow__minimap-node",{selected:h},u]),x:t,y:r,rx:d,ry:d,width:n,height:s,fill:w,stroke:a,strokeWidth:c,shapeRendering:f,onClick:p?v=>p(v,e):void 0})};VN.displayName="MiniMapNode";var NP=m.memo(VN);const EP=e=>e.nodeOrigin,CP=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Nu=e=>e instanceof Function?e:()=>e;function RP({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:r="",nodeBorderRadius:n=5,nodeStrokeWidth:s=2,nodeComponent:i=NP,onClick:o}){const a=Me(CP,pt),c=Me(EP),u=Nu(t),d=Nu(e),f=Nu(r),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return H.createElement(H.Fragment,null,a.map(h=>{const{x:b,y:g}=ls(h,c).positionAbsolute;return H.createElement(i,{key:h.id,x:b,y:g,width:h.width,height:h.height,style:h.style,selected:h.selected,className:f(h),color:u(h),borderRadius:n,strokeColor:d(h),strokeWidth:s,shapeRendering:p,onClick:o,id:h.id})}))}var TP=m.memo(RP);const IP=200,MP=150,AP=e=>{const t=e.getNodes(),r={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:r,boundingRect:t.length>0?WM(hc(t,e.nodeOrigin),r):r,rfId:e.rfId}},PP="react-flow__minimap-desc";function UN({style:e,className:t,nodeStrokeColor:r="transparent",nodeColor:n="#e2e2e2",nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:p,onNodeClick:h,pannable:b=!1,zoomable:g=!1,ariaLabel:w="React Flow mini map",inversePan:v=!1,zoomStep:x=10,offsetScale:y=5}){const _=tt(),j=m.useRef(null),{boundingRect:S,viewBB:N,rfId:k}=Me(AP,pt),C=(e==null?void 0:e.width)??IP,R=(e==null?void 0:e.height)??MP,T=S.width/C,L=S.height/R,$=Math.max(T,L),E=$*C,O=$*R,P=y*$,F=S.x-(E-S.width)/2-P,D=S.y-(O-S.height)/2-P,I=E+P*2,z=O+P*2,M=`${PP}-${k}`,q=m.useRef(0);q.current=$,m.useEffect(()=>{if(j.current){const V=Kt(j.current),Y=re=>{const{transform:X,d3Selection:ue,d3Zoom:J}=_.getState();if(re.sourceEvent.type!=="wheel"||!ue||!J)return;const se=-re.sourceEvent.deltaY*(re.sourceEvent.deltaMode===1?.05:re.sourceEvent.deltaMode?1:.002)*x,ie=X[2]*Math.pow(2,se);J.scaleTo(ue,ie)},te=re=>{const{transform:X,d3Selection:ue,d3Zoom:J,translateExtent:se,width:ie,height:ee}=_.getState();if(re.sourceEvent.type!=="mousemove"||!ue||!J)return;const xe=q.current*Math.max(1,X[2])*(v?-1:1),U={x:X[0]-re.sourceEvent.movementX*xe,y:X[1]-re.sourceEvent.movementY*xe},K=[[0,0],[ie,ee]],ae=Gr.translate(U.x,U.y).scale(X[2]),W=J.constrain()(ae,K,se);J.transform(ue,W)},ne=Qk().on("zoom",b?te:null).on("zoom.wheel",g?Y:null);return V.call(ne),()=>{V.on("zoom",null)}}},[b,g,v,x]);const A=p?V=>{const Y=cr(V);p(V,{x:Y[0],y:Y[1]})}:void 0,B=h?(V,Y)=>{const te=_.getState().nodeInternals.get(Y);h(V,te)}:void 0;return H.createElement(Mn,{position:f,style:e,className:Rt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},H.createElement("svg",{width:C,height:R,viewBox:`${F} ${D} ${I} ${z}`,role:"img","aria-labelledby":M,ref:j,onClick:A},w&&H.createElement("title",{id:M},w),H.createElement(TP,{onClick:B,nodeColor:n,nodeStrokeColor:r,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:a}),H.createElement("path",{className:"react-flow__minimap-mask",d:`M${F-P},${D-P}h${I+P*2}v${z+P*2}h${-I-P*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}UN.displayName="MiniMap";var GN=m.memo(UN);const Ra={active:"#f59e0b",complete:"#10b981",queued:"#64748b"},DP=180,OP=400,LP=260,zP=48;function qP(e){if(!e)return"";try{const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}}function $P({projects:e,selectedId:t,onSelectProject:r,onNewProject:n,showArchived:s,onToggleShowArchived:i,userSection:o}){const[a,c]=m.useState(!1),[u,d]=m.useState(LP),[f,p]=m.useState(!1),h=m.useRef(null),b=m.useRef(null);m.useEffect(()=>{b.current&&b.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[t]);const g=m.useMemo(()=>Object.values(e).sort((j,S)=>{const N=(j.name||"").localeCompare(S.name||"");return N!==0?N:(j.projectId||"").localeCompare(S.projectId||"")}),[e]),w=()=>{n()},v=m.useCallback(j=>{j.preventDefault(),p(!0)},[]),x=m.useCallback(j=>{if(!f)return;const S=Math.min(OP,Math.max(DP,j.clientX));d(S)},[f]),y=m.useCallback(()=>{p(!1)},[]);m.useEffect(()=>(f?(document.addEventListener("mousemove",x),document.addEventListener("mouseup",y),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y),document.body.style.cursor="",document.body.style.userSelect=""}),[f,x,y]);const _=a?zP:u;return l.jsxs("div",{ref:h,className:"h-full flex flex-col relative",style:{width:_,minWidth:_,background:"var(--bg-panel)",borderRight:"1px solid var(--border-panel)",transition:f?"none":"width 0.2s ease"},children:[l.jsxs("div",{className:"p-3 border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[!a&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Projects"}),l.jsx("button",{onClick:i,className:"p-1 rounded hover:bg-white/10 transition-colors",style:{color:s?"#f59e0b":"var(--text-muted)"},title:s?"Hide archived":"Show archived",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 8v13H3V8M1 3h22v5H1zM10 12h4"})})})]}),l.jsx("button",{onClick:()=>c(!a),className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},title:a?"Expand sidebar":"Collapse sidebar",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{transform:a?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:l.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),!a&&l.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:g.map(j=>{const S=t===j.id;return l.jsxs("div",{ref:S?b:null,onClick:()=>r(j.id),className:"p-3 rounded-lg mb-2 cursor-pointer transition-all",style:{background:S?"var(--state-active-bg)":"transparent",border:S?"1px solid var(--state-active-bg)":"1px solid transparent",boxShadow:S?"0 0 12px rgba(245, 158, 11, 0.3)":"none"},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:S?"#ffffff":Ra[j.status]||Ra.queued}}),l.jsx("span",{className:"text-sm font-medium truncate flex-1",style:{color:S?"#ffffff":"var(--text-primary)"},children:j.name}),j.isArchived&&l.jsx("svg",{className:"w-3.5 h-3.5 flex-shrink-0",style:{color:S?"rgba(255,255,255,0.7)":"var(--text-muted)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",title:"Archived",children:l.jsx("path",{d:"M21 8v13H3V8M1 3h22v5H1zM10 12h4"})})]}),l.jsxs("div",{className:"flex items-center justify-between mt-0.5 ml-4",children:[l.jsx("span",{className:"text-[10px] font-mono",style:{color:S?"rgba(255,255,255,0.8)":"var(--text-muted)"},children:j.projectId}),l.jsx("span",{className:"text-[10px]",style:{color:S?"rgba(255,255,255,0.8)":"var(--text-muted)"},children:qP(j.createdAt)})]})]},j.id)})}),a&&l.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:g.map(j=>l.jsx("div",{onClick:()=>r(j.id),className:"flex items-center justify-center py-2 cursor-pointer hover:bg-white/5",title:j.name,children:l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:Ra[j.status]||Ra.queued,boxShadow:t===j.id?"0 0 0 2px var(--bg-panel), 0 0 0 4px var(--border-node)":"none"}})},j.id))}),!a&&l.jsx("div",{className:"p-3 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsxs("button",{onClick:w,className:"w-full py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",style:{background:"#10b981",color:"white"},children:[l.jsx("span",{style:{fontSize:18,lineHeight:1},children:"+"}),l.jsx("span",{children:"New Project"})]})}),a&&l.jsx("div",{className:"p-2 border-t flex justify-center",style:{borderColor:"var(--border-panel)"},children:l.jsx("button",{onClick:w,className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"#10b981",color:"white"},title:"New Project",children:l.jsx("span",{style:{fontSize:18,lineHeight:1},children:"+"})})}),o,!a&&l.jsx("div",{onMouseDown:v,className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-emerald-500/50 transition-colors",style:{background:f?"var(--state-active-bg)":"transparent"}})]})}function FP({stations:e}){return e!=null&&e.length?l.jsx("div",{className:"flex items-center gap-0.5 mt-2",children:e.map((t,r)=>{const n=t.state==="complete"?"var(--state-stabilized-bg)":t.state==="active"?"var(--state-active-bg)":"var(--state-queued-bg)",s=t.state==="complete"?"var(--state-stabilized-bg)":"var(--state-queued-bg)",i=t.state==="active"?"var(--state-active-text)":"var(--text-muted)";return l.jsxs(H.Fragment,{children:[r>0&&l.jsx("div",{className:"w-4 h-0.5",style:{background:s}}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:`w-3 h-3 rounded-full${t.state==="active"?" station-active":""}`,style:{background:n}}),l.jsx("span",{className:"text-[7px] mt-0.5",style:{color:i,fontWeight:t.state==="active"?500:400},children:t.label})]})]},t.id)})}):null}const T0={light:{stabilized:"#10b981",active:"#6366f1",queued:"#cbd5e1"},industrial:{stabilized:"#10b981",active:"#f59e0b",queued:"#334155"},blueprint:{stabilized:"#ffffff",active:"#fbbf24",queued:"#d4e8f8"}},KN=(e,t)=>{var r;return((r=T0[t])==null?void 0:r[e])||T0.industrial.queued},or={EPICS_PER_ROW:3,EPIC_WIDTH:220,EPIC_HEIGHT:70,EPIC_GAP_X:50,EPIC_GAP_Y:100,EPIC_OFFSET_X:80,EPIC_OFFSET_Y:80},ao={GAP:8,WIDTH:280},Eu=["pgc","asm","draft","qa","done"],bn=["industrial","light","blueprint"];function BP({questions:e,nodeWidth:t,onSubmit:r,onClose:n,onZoomComplete:s}){const[i,o]=m.useState({}),a=e.filter(c=>c.required).every(c=>i[c.id]);return m.useEffect(()=>{if(s){const c=setTimeout(()=>s(),150);return()=>clearTimeout(c)}},[s]),l.jsxs("div",{className:"absolute top-0 border border-amber-500/50 rounded-lg shadow-2xl tray-slide",style:{left:t+ao.GAP,width:ao.WIDTH,boxShadow:"0 0 30px rgba(0,0,0,0.5)",zIndex:1e3,background:"var(--bg-sidecar)"},children:[l.jsx("div",{className:"absolute border-t-2 border-dashed border-amber-500/60",style:{top:14,right:"100%",width:ao.GAP}}),l.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-amber-500",style:{top:11,right:"100%",marginRight:-4}}),l.jsxs("div",{className:"bg-amber-500/10 border-b border-amber-500/30 px-3 py-2 flex justify-between items-center",children:[l.jsx("span",{className:"text-[9px] font-semibold text-amber-600 uppercase tracking-wide",children:"Operator Input Required"}),l.jsx("button",{onClick:n,style:{color:"var(--text-sidecar-muted)"},className:"hover:opacity-70 text-sm leading-none",children:""})]}),l.jsx("div",{className:"p-3 space-y-3 max-h-64 overflow-y-auto",children:e.map(c=>l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] mb-1",style:{color:"var(--text-sidecar-muted)"},children:[c.text," ",c.required&&l.jsx("span",{className:"text-amber-600",children:"*"})]}),l.jsx("input",{type:"text",className:"w-full rounded px-2 py-1.5 text-xs border",style:{background:"var(--bg-input)",borderColor:"var(--border-input)",color:"var(--text-sidecar)"},value:i[c.id]||"",onChange:u=>o(d=>({...d,[c.id]:u.target.value}))})]},c.id))}),l.jsx("div",{className:"p-3",style:{borderTop:"1px solid var(--border-node)"},children:l.jsx("button",{className:`w-full py-2 rounded text-xs font-medium transition-colors ${a?"bg-amber-500 text-slate-900 hover:bg-amber-400":"subway-button cursor-not-allowed"}`,disabled:!a,onClick:()=>r(i),children:"Submit & Continue"})})]})}function HP({features:e,epicName:t,nodeWidth:r,onClose:n,onZoomComplete:s}){const i=e.length>6,o=i?240:320;return m.useEffect(()=>{if(s){const a=setTimeout(()=>s(),150);return()=>clearTimeout(a)}},[s]),l.jsxs("div",{className:"absolute top-0 border border-indigo-500/50 rounded-lg shadow-2xl tray-slide",style:{left:r+ao.GAP,width:o,boxShadow:"0 0 30px rgba(0,0,0,0.5)",zIndex:1e3,background:"var(--bg-sidecar)"},children:[l.jsx("div",{className:"absolute border-t-2 border-dashed border-indigo-500/60",style:{top:14,right:"100%",width:ao.GAP}}),l.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-indigo-500",style:{top:11,right:"100%",marginRight:-4}}),l.jsxs("div",{className:"bg-indigo-500/10 border-b border-indigo-500/30 px-3 py-2 flex justify-between items-center",children:[l.jsxs("span",{className:"text-[9px] font-semibold uppercase tracking-wide",style:{color:"var(--text-sidecar-muted)"},children:["Features - ",t]}),l.jsx("button",{onClick:n,style:{color:"var(--text-sidecar-muted)"},className:"hover:opacity-70 text-sm leading-none",children:""})]}),l.jsx("div",{className:`p-3 max-h-64 overflow-y-auto ${i?"":"grid grid-cols-2 gap-2"}`,children:e.map(a=>{const c=a.state==="complete"?"var(--state-stabilized-bg)":a.state==="active"?"var(--state-active-bg)":"var(--state-queued-bg)";return l.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded cursor-pointer hover:opacity-80 ${i?"mb-1":""}`,children:[l.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:c}}),l.jsx("span",{className:"text-[10px] truncate",style:{color:"var(--text-sidecar)"},children:a.name})]},a.id)})}),l.jsxs("div",{className:"px-3 py-2 text-[9px]",style:{borderTop:"1px solid var(--border-node)",color:"var(--text-sidecar-muted)"},children:[e.length," features"]})]})}const tx="/api/v1";class WP extends Error{constructor(t,r,n){super(t),this.name="ApiError",this.status=r,this.data=n}}function VP(){const e=document.cookie.match(/(?:^|;\s*)csrf=([^;]*)/);return e?decodeURIComponent(e[1]):null}async function ye(e,t={}){const r=`${tx}${e}`,n={headers:{"Content-Type":"application/json",...t.headers},credentials:"same-origin",...t},s=await fetch(r,n);if(!s.ok){const i=await s.json().catch(()=>({}));throw new WP(i.detail||`Request failed: ${s.status}`,s.status,i)}return s.status===204?null:s.json()}const Ie={getMe:()=>fetch("/api/me",{credentials:"same-origin"}).then(e=>{if(e.status===401)return null;if(!e.ok)throw new Error(`Request failed: ${e.status}`);return e.json()}).catch(e=>(console.error("Auth check failed:",e),null)),logout:()=>fetch("/auth/logout",{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":VP()||""}}),getProjects:(e={})=>{const t=new URLSearchParams;e.search&&t.set("search",e.search),e.includeArchived&&t.set("include_archived","true");const r=t.toString();return ye(`/projects${r?"?"+r:""}`)},getProject:e=>ye(`/projects/${e}`),getProjectTree:e=>ye(`/projects/${e}/tree`),createProject:e=>ye("/projects",{method:"POST",body:JSON.stringify(e)}),updateProject:(e,t)=>ye(`/projects/${e}`,{method:"PATCH",body:JSON.stringify(t)}),archiveProject:e=>ye(`/projects/${e}/archive`,{method:"POST"}),unarchiveProject:e=>ye(`/projects/${e}/unarchive`,{method:"POST"}),deleteProject:e=>ye(`/projects/${e}`,{method:"DELETE"}),getProductionStatus:e=>ye(`/production/status?project_id=${e}`),startProduction:(e,t=null)=>{const r=new URLSearchParams({project_id:e});return t&&r.set("document_type",t),ye(`/production/start?${r}`,{method:"POST"})},getProjectInterrupts:e=>ye(`/projects/${e}/interrupts`),resolveInterrupt:(e,t)=>ye(`/interrupts/${e}/resolve`,{method:"POST",body:JSON.stringify(t)}),startWorkflow:(e,t,r=null)=>ye("/document-workflows/start",{method:"POST",body:JSON.stringify({project_id:e,document_type:t,initial_context:r})}),submitWorkflowInput:(e,t,r=null)=>ye(`/document-workflows/executions/${e}/input`,{method:"POST",body:JSON.stringify({user_input:t,selected_option_id:r})}),getExecutionStatus:e=>ye(`/document-workflows/executions/${e}`),getPgcAnswers:e=>ye(`/document-workflows/executions/${e}/pgc-answers`),getDocument:(e,t)=>ye(`/projects/${e}/documents/${t}`),getDocumentRenderModel:(e,t)=>ye(`/projects/${e}/documents/${t}/render-model`),startIntake:()=>ye("/intake/start",{method:"POST"}),getIntakeState:e=>ye(`/intake/${e}`),submitIntakeMessage:(e,t)=>ye(`/intake/${e}/message`,{method:"POST",body:JSON.stringify({content:t})}),updateIntakeField:(e,t,r)=>ye(`/intake/${e}/field/${t}`,{method:"PATCH",body:JSON.stringify({value:r})}),initializeIntake:e=>ye(`/intake/${e}/initialize`,{method:"POST"}),getWorkflowInstance:e=>ye(`/projects/${e}/workflow`),createWorkflowInstance:(e,t,r)=>ye(`/projects/${e}/workflow`,{method:"POST",body:JSON.stringify({workflow_id:t,version:r})}),updateWorkflowInstance:(e,t)=>ye(`/projects/${e}/workflow`,{method:"PUT",body:JSON.stringify({effective_workflow:t})}),getWorkflowDrift:e=>ye(`/projects/${e}/workflow/drift`),getWorkflowHistory:(e,t=50,r=0)=>ye(`/projects/${e}/workflow/history?limit=${t}&offset=${r}`),completeWorkflowInstance:e=>ye(`/projects/${e}/workflow/complete`,{method:"POST"})};function UP(e){const t=`${tx}/production/events?project_id=${e}`;return new EventSource(t)}function GP(e){const t=`${tx}/intake/${e}/events`;return new EventSource(t)}function KP(e){return`/auth/login/${e}`}function YP({block:e}){const{data:t}=e,r=t.content||t.value||"";return r?l.jsxs("div",{style:{marginBottom:12},children:[l.jsx("p",{style:{margin:0,fontSize:14,lineHeight:1.6,color:"#374151",whiteSpace:"pre-line"},children:r}),t.detail_ref&&l.jsx("a",{href:"#",style:{fontSize:12,color:"#6366f1",textDecoration:"none",marginTop:4,display:"inline-block"},children:"View details "})]}):null}function I0({block:e}){const{data:t}=e,r=t.items||[],n=t.style||"bullet";if(r.length===0)return null;const s=n==="numbered"?"decimal":"disc";return l.jsxs("div",{style:{marginBottom:12},children:[t.title&&l.jsx("h4",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:t.title}),l.jsx("ul",{style:{margin:0,paddingLeft:n==="check"?0:20,listStyle:n==="check"?"none":s},children:r.map((i,o)=>l.jsxs("li",{style:{fontSize:14,lineHeight:1.6,color:"#374151",marginBottom:4,display:n==="check"?"flex":"list-item",alignItems:"flex-start",gap:8},children:[n==="check"&&l.jsx("span",{style:{color:"#10b981"},children:""}),typeof i=="string"?i:(i==null?void 0:i.value)||(i==null?void 0:i.text)||(i==null?void 0:i.question)||(i==null?void 0:i.description)||JSON.stringify(i)]},o))})]})}function XP({block:e}){const{data:t}=e,r=t.value||"unknown",n=t.label,i={low:{bg:"#d1fae5",text:"#065f46"},medium:{bg:"#fef3c7",text:"#92400e"},high:{bg:"#fee2e2",text:"#991b1b"},critical:{bg:"#fecaca",text:"#7f1d1d"},none:{bg:"#e5e7eb",text:"#374151"},external:{bg:"#dbeafe",text:"#1e40af"},qualified:{bg:"#d1fae5",text:"#065f46"},not_ready:{bg:"#fef3c7",text:"#92400e"}}[r.toLowerCase()]||{bg:"#f3f4f6",text:"#374151"};return l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:8,marginBottom:12},children:[n&&l.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:500},children:[n,":"]}),l.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:20,background:i.bg,color:i.text,fontSize:12,fontWeight:500,textTransform:"capitalize"},children:r})]})}function YN({block:e}){const{data:t}=e,{id:r,text:n,blocking:s,why_it_matters:i,priority:o,tags:a,options:c}=t,u={must:{bg:"#fee2e2",text:"#991b1b"},should:{bg:"#fef3c7",text:"#92400e"},could:{bg:"#e5e7eb",text:"#374151"}},d=u[o]||u.should;return l.jsx("div",{style:{padding:"12px 16px",background:s?"#fef2f2":"#f8fafc",borderRadius:8,border:`1px solid ${s?"#fecaca":"#e2e8f0"}`,marginBottom:12},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:"#6b7280",background:"#e5e7eb",padding:"2px 6px",borderRadius:4,flexShrink:0},children:r}),l.jsxs("div",{style:{flex:1},children:[l.jsx("p",{style:{margin:0,fontSize:14,fontWeight:500,color:"#111827",marginBottom:6},children:n}),i&&l.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280",fontStyle:"italic"},children:i}),l.jsxs("div",{style:{display:"flex",gap:6,marginTop:8,flexWrap:"wrap"},children:[s&&l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:"#fee2e2",color:"#991b1b",fontWeight:600},children:"BLOCKING"}),o&&l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:d.bg,color:d.text,textTransform:"uppercase"},children:o}),a==null?void 0:a.map((f,p)=>l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:"#e0e7ff",color:"#3730a3"},children:f},p))]}),c&&c.length>0&&l.jsxs("div",{style:{marginTop:8},children:[l.jsx("span",{style:{fontSize:11,color:"#6b7280"},children:"Options: "}),c.map((f,p)=>l.jsx("span",{style:{fontSize:11,color:"#374151",marginLeft:p>0?8:4},children:f},p))]})]})]})})}function QP({block:e}){const{data:t}=e,r=t.items||[],n=t.total_count||r.length,s=t.blocking_count||r.filter(i=>i.blocking).length;return r.length===0?l.jsx("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:8,border:"1px solid #bbf7d0",textAlign:"center",color:"#166534",fontSize:14},children:"No open questions"}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,padding:"8px 12px",background:"#f8fafc",borderRadius:6,fontSize:12},children:[l.jsxs("span",{style:{color:"#6b7280"},children:[l.jsx("strong",{style:{color:"#374151"},children:n})," questions"]}),s>0&&l.jsxs("span",{style:{color:"#dc2626"},children:[l.jsx("strong",{children:s})," blocking"]})]}),r.map((i,o)=>l.jsx(YN,{block:{type:"schema:OpenQuestionV1",data:i}},i.id||o))]})}function M0({block:e}){const{data:t}=e,r=t.items||[],n=t.title;if(r.length===0)return null;const s={low:{bg:"#d1fae5",text:"#065f46",border:"#a7f3d0"},medium:{bg:"#fef3c7",text:"#92400e",border:"#fde68a"},high:{bg:"#fee2e2",text:"#991b1b",border:"#fecaca"},critical:{bg:"#fecaca",text:"#7f1d1d",border:"#f87171"}};return l.jsxs("div",{style:{marginBottom:12},children:[n&&l.jsx("h4",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:n}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:r.map((i,o)=>{const a=i.severity||i.likelihood||"medium",c=s[a]||s.medium;return l.jsx("div",{style:{padding:"10px 14px",background:c.bg,borderRadius:6,border:`1px solid ${c.border}`},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[i.id&&l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:c.text,background:"rgba(255,255,255,0.5)",padding:"2px 6px",borderRadius:4,flexShrink:0},children:i.id}),l.jsxs("div",{style:{flex:1},children:[l.jsx("p",{style:{margin:0,fontSize:13,color:c.text,fontWeight:500},children:i.description||i.reason||JSON.stringify(i)}),i.impact&&l.jsxs("p",{style:{margin:"4px 0 0",fontSize:12,color:c.text,opacity:.8},children:["Impact: ",i.impact]}),i.mitigation&&l.jsxs("p",{style:{margin:"4px 0 0",fontSize:12,color:c.text,opacity:.8},children:["Mitigation: ",i.mitigation]})]}),l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:"rgba(255,255,255,0.5)",color:c.text,textTransform:"uppercase",fontWeight:600},children:a})]})},i.id||o)})})]})}function ZP({block:e}){const{data:t}=e,n=Object.entries({problem_understanding:"Problem Understanding",architectural_intent:"Architectural Intent",scope_pressure_points:"Scope Pressure Points",proposed_system_shape:"Proposed System Shape",overall_intent:"Overall Intent",mvp_definition:"MVP Definition"}).filter(([s])=>t[s]&&typeof t[s]=="string").map(([s,i])=>({title:i,content:t[s]}));return n.length===0?null:l.jsx("div",{style:{marginBottom:12},children:n.map((s,i)=>l.jsxs("div",{style:{marginBottom:i<n.length-1?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:6,textTransform:"uppercase",letterSpacing:"0.05em"},children:s.title}),l.jsx("div",{style:{padding:"12px 16px",background:"#f8fafc",borderRadius:6,borderLeft:"3px solid #6366f1"},children:l.jsx("p",{style:{margin:0,fontSize:14,lineHeight:1.6,color:"#374151",whiteSpace:"pre-line"},children:s.content})})]},i))})}function A0({block:e}){const{data:t}=e,{epic_id:r,title:n,name:s,intent:i,phase:o,mvp_phase:a,risk_level:c,stories:u,detail_ref:d}=t,f=o||a,p=n||s,h={low:{bg:"#d1fae5",text:"#065f46"},medium:{bg:"#fef3c7",text:"#92400e"},high:{bg:"#fee2e2",text:"#991b1b"}},b=h[c]||h.medium,g={mvp:{bg:"#dbeafe",text:"#1e40af"},"later-phase":{bg:"#e5e7eb",text:"#374151"},later:{bg:"#e5e7eb",text:"#374151"}},w=g[f]||g.mvp;return l.jsxs("div",{style:{padding:"14px 16px",background:"#ffffff",borderRadius:8,border:"1px solid #e2e8f0",marginBottom:12,boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:12},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[r&&l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:"#6366f1",background:"#eef2ff",padding:"2px 6px",borderRadius:4},children:r}),l.jsx("h4",{style:{margin:0,fontSize:14,fontWeight:600,color:"#111827"},children:p})]}),i&&l.jsx("p",{style:{margin:0,fontSize:13,color:"#6b7280",lineHeight:1.5},children:i}),u&&u.length>0&&l.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#6b7280"},children:[u.length," stories"]})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,alignItems:"flex-end"},children:[f&&l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:w.bg,color:w.text,textTransform:"uppercase",fontWeight:500},children:f==="later-phase"?"LATER":f}),c&&l.jsxs("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:b.bg,color:b.text,textTransform:"uppercase",fontWeight:500},children:[c," risk"]})]})]}),d&&l.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid #f3f4f6"},children:l.jsx("a",{href:"#",style:{fontSize:12,color:"#6366f1",textDecoration:"none"},children:"View epic details "})})]})}function JP({block:e}){const{data:t}=e,{story_id:r,title:n,intent:s,phase:i,risk_level:o,detail_ref:a}=t,u={low:{bg:"#d1fae5",text:"#065f46"},medium:{bg:"#fef3c7",text:"#92400e"},high:{bg:"#fee2e2",text:"#991b1b"}}[o]||null,d={mvp:{bg:"#dbeafe",text:"#1e40af"},later:{bg:"#e5e7eb",text:"#374151"}},f=d[i]||d.mvp;return l.jsx("div",{style:{padding:"10px 14px",background:"#fafafa",borderRadius:6,border:"1px solid #e5e7eb",marginBottom:8},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:10},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[r&&l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:"#059669",background:"#ecfdf5",padding:"1px 5px",borderRadius:3},children:r}),l.jsx("span",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:n})]}),s&&l.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280",lineHeight:1.4},children:s})]}),l.jsxs("div",{style:{display:"flex",gap:4},children:[i&&l.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:f.bg,color:f.text,textTransform:"uppercase",fontWeight:500},children:i}),u&&l.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:u.bg,color:u.text,textTransform:"uppercase",fontWeight:500},children:o})]})]})})}function e6({block:e}){const{type:t,data:r}=e;return l.jsxs("div",{style:{padding:"12px 16px",background:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0",marginBottom:12},children:[l.jsx("div",{style:{fontSize:10,color:"#94a3b8",marginBottom:8,fontFamily:"monospace"},children:t}),l.jsx("pre",{style:{fontSize:12,color:"#475569",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(r,null,2)})]})}function t6({block:e}){const{data:t}=e,r=t.items||[],[n,s]=m.useState({});if(r.length===0)return null;const i=o=>{s(a=>({...a,[o]:!a[o]}))};return l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:r.map((o,a)=>{const c=n[a],u=o.why_it_matters||o.impact_if_unresolved;return l.jsxs("div",{style:{background:"#fefce8",border:"1px solid #fef08a",borderRadius:6,borderLeft:"3px solid #eab308",overflow:"hidden"},children:[l.jsxs("button",{onClick:()=>u&&i(a),style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",cursor:u?"pointer":"default",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8,textAlign:"left"},children:[l.jsx("span",{style:{fontSize:13,fontWeight:500,color:"#854d0e",lineHeight:1.4},children:o.question||o.value||o.text||"Unknown"}),u&&l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"#a16207",strokeWidth:"2",style:{flexShrink:0,marginTop:2,transform:c?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.15s"},children:l.jsx("path",{d:"M3 5l4 4 4-4"})})]}),c&&u&&l.jsxs("div",{style:{padding:"0 12px 12px",borderTop:"1px solid #fde68a",marginTop:0},children:[o.why_it_matters&&l.jsxs("div",{style:{marginTop:10},children:[l.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#a16207",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:3},children:"Why it matters"}),l.jsx("div",{style:{fontSize:12,color:"#713f12",lineHeight:1.5},children:o.why_it_matters})]}),o.impact_if_unresolved&&l.jsxs("div",{style:{marginTop:10},children:[l.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#a16207",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:3},children:"Impact if unresolved"}),l.jsx("div",{style:{fontSize:12,color:"#713f12",lineHeight:1.5},children:o.impact_if_unresolved})]})]})]},a)})})}function r6({block:e}){const{data:t}=e,{description:r,user_statement:n}=t;return l.jsxs("div",{style:{marginBottom:12},children:[r&&l.jsx("div",{style:{paddingLeft:16,borderLeft:"4px solid #8b5cf6",color:"#374151",marginBottom:16,fontSize:14,lineHeight:1.6},children:r}),n&&l.jsxs("blockquote",{style:{paddingLeft:16,borderLeft:"4px solid #d1d5db",color:"#6b7280",fontStyle:"italic",margin:0,fontSize:13,lineHeight:1.5},children:['"',n,'"']})]})}function n6({block:e}){const{data:t}=e,{category:r,confidence:n,rationale:s}=t;return l.jsxs("div",{style:{marginBottom:12},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[l.jsx("span",{style:{padding:"4px 12px",borderRadius:16,fontSize:13,fontWeight:500,background:"#ede9fe",color:"#6d28d9"},children:r}),n&&l.jsxs("span",{style:{fontSize:13,color:"#6b7280"},children:["Confidence: ",n]})]}),s&&l.jsx("p",{style:{margin:0,fontSize:13,color:"#6b7280",lineHeight:1.5},children:s})]})}function s6({block:e}){const{data:t}=e,{explicit:r=[],inferred:n=[]}=t,s=r&&r.length>0,i=n&&n.length>0;return!s&&!i?null:l.jsxs("div",{style:{marginBottom:12},children:[s&&l.jsxs("div",{style:{marginBottom:i?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Explicit"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:r.map((o,a)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#f59e0b"},children:""}),l.jsx("span",{children:o})]},a))})]}),i&&l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Inferred"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:n.map((o,a)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#3b82f6"},children:""}),l.jsx("span",{children:o})]},a))})]})]})}function i6({block:e}){const{data:t}=e,{questions:r=[],missing_context:n=[],assumptions_made:s=[]}=t,i=r&&r.length>0,o=n&&n.length>0,a=s&&s.length>0;return!i&&!o&&!a?null:l.jsxs("div",{style:{marginBottom:12},children:[i&&l.jsxs("div",{style:{marginBottom:o||a?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Questions"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:r.map((c,u)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#3b82f6"},children:""}),l.jsx("span",{children:c})]},u))})]}),o&&l.jsxs("div",{style:{marginBottom:a?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Missing Context"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:n.map((c,u)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#f59e0b"},children:""}),l.jsx("span",{children:c})]},u))})]}),a&&l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Assumptions"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:s.map((c,u)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#6b7280"},children:""}),l.jsx("span",{children:c})]},u))})]})]})}function o6({block:e}){const{data:t}=e,{status:r,rationale:n,next_action:s}=t,o={qualified:{bg:"#d1fae5",text:"#065f46"},not_ready:{bg:"#fef3c7",text:"#92400e"},out_of_scope:{bg:"#fee2e2",text:"#991b1b"},redirect:{bg:"#e0e7ff",text:"#3730a3"}}[r]||{bg:"#f3f4f6",text:"#374151"};return l.jsxs("div",{style:{marginBottom:12},children:[r&&l.jsx("div",{style:{marginBottom:12},children:l.jsx("span",{style:{padding:"4px 12px",borderRadius:16,fontSize:13,fontWeight:500,background:o.bg,color:o.text},children:r})}),n&&l.jsx("p",{style:{margin:0,marginBottom:s?12:0,fontSize:13,color:"#6b7280",lineHeight:1.5},children:n}),s&&l.jsx("div",{style:{padding:12,borderRadius:8,background:"#ecfdf5",border:"1px solid #a7f3d0"},children:l.jsxs("span",{style:{fontSize:13,fontWeight:500,color:"#065f46"},children:["Next: ",s]})})]})}const a6={"schema:ParagraphBlockV1":YP,"schema:StringListBlockV1":I0,"schema:IndicatorBlockV1":XP,"schema:OpenQuestionV1":YN,"schema:OpenQuestionsBlockV1":QP,"schema:RisksBlockV1":M0,"schema:DependenciesBlockV1":M0,"schema:SummaryBlockV1":ZP,"schema:EpicSummaryBlockV1":A0,"schema:StorySummaryBlockV1":JP,"schema:EpicStoriesCardBlockV1":A0,"schema:StoriesBlockV1":I0,"schema:UnknownsBlockV1":t6,"schema:IntakeSummaryBlockV1":r6,"schema:IntakeProjectTypeBlockV1":n6,"schema:IntakeConstraintsBlockV1":s6,"schema:IntakeOpenGapsBlockV1":i6,"schema:IntakeOutcomeBlockV1":o6};function l6(e){return a6[e]||e6}function c6(e,t){const r=l6(e.type);return l.jsx(r,{block:e},e.key||t)}function XN({renderModel:e,variant:t="full",hideHeader:r=!1,onSectionClick:n,className:s=""}){var w;const[i,o]=m.useState(new Set(((w=e==null?void 0:e.sections)==null?void 0:w.map(v=>v.section_id))||[]));if(!e)return l.jsx("div",{style:{padding:20,textAlign:"center",color:"#6b7280"},children:"No render model available"});const{title:a,subtitle:c,sections:u=[],metadata:d}=e;if(d!=null&&d.fallback&&e.raw_content)return l.jsx(d6,{title:a,content:e.raw_content,reason:d.reason});const f=v=>{o(x=>{const y=new Set(x);return y.has(v)?y.delete(v):y.add(v),y})},p=t==="compact"||t==="sidecar",b=t==="sidecar"?u.filter(v=>v.viewer_tab==="overview"||!v.viewer_tab):u,g=(()=>{if(!a)return"Document";const v=a.indexOf(": ");return v>-1?a.slice(v+2):a})();return l.jsxs("div",{className:s,children:[t==="full"&&!r&&l.jsxs("div",{style:{marginBottom:24},children:[l.jsx("h1",{style:{margin:0,fontSize:24,fontWeight:700,color:"#111827"},children:g}),c&&l.jsx("p",{style:{margin:"8px 0 0",fontSize:14,color:"#6b7280"},children:c})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:p?12:20},children:b.map(v=>l.jsx(u6,{section:v,isExpanded:i.has(v.section_id),onToggle:()=>f(v.section_id),onClick:()=>n==null?void 0:n(v),variant:t},v.section_id))}),b.length===0&&l.jsx("div",{style:{padding:32,textAlign:"center",color:"#9ca3af",background:"#f9fafb",borderRadius:8},children:"No content sections available"})]})}function u6({section:e,isExpanded:t,onToggle:r,onClick:n,variant:s}){const{section_id:i,title:o,description:a,blocks:c=[],sidecar_max_items:u}=e,d=s==="compact"||s==="sidecar",f=s==="sidecar";if(c.length===0)return null;const p=f&&u&&c.length>u?c.slice(0,u):c,h=f&&u&&c.length>u;return l.jsxs("div",{style:{background:"#ffffff",borderRadius:8,border:"1px solid #e5e7eb",overflow:"hidden"},children:[l.jsxs("button",{onClick:r,style:{width:"100%",padding:d?"10px 14px":"14px 18px",background:"#f9fafb",border:"none",borderBottom:t?"1px solid #e5e7eb":"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left"},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{margin:0,fontSize:d?13:15,fontWeight:600,color:"#111827"},children:[o,h&&l.jsxs("span",{style:{fontWeight:400,color:"#6b7280",marginLeft:6},children:["(showing ",u," of ",c.length,")"]})]}),a&&!d&&l.jsx("p",{style:{margin:"4px 0 0",fontSize:12,color:"#6b7280"},children:a})]}),l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#9ca3af",transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:l.jsx("path",{d:"M4 6l4 4 4-4"})})]}),t&&l.jsxs("div",{style:{padding:d?12:18},children:[p.map((b,g)=>c6(b,g)),h&&l.jsxs("div",{style:{marginTop:8,padding:"8px 12px",background:"#f3f4f6",borderRadius:4,fontSize:12,color:"#6b7280",textAlign:"center"},children:["+",c.length-u," more in full view"]})]})]})}function d6({title:e,content:t,reason:r}){return l.jsxs("div",{children:[l.jsxs("div",{style:{padding:"12px 16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:8,marginBottom:16,fontSize:12,color:"#92400e"},children:["Displaying raw content (reason: ",r||"unknown",")"]}),l.jsx("div",{style:{background:"#f8fafc",borderRadius:8,padding:16,overflow:"auto"},children:l.jsx("pre",{style:{margin:0,fontSize:12,color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:JSON.stringify(t,null,2)})})]})}function f6({renderModel:e,projectCode:t,documentName:r,isExpanded:n,onToggleExpand:s,onClose:i,onViewFull:o,nodeWidth:a=280}){const p=n?900:520,h=n?900:600,b=`${t||"DOC"} - ${r||"Document"}`,g=w=>{w.stopPropagation()};return l.jsxs("div",{className:"absolute top-0 tray-slide",style:{left:a+30,width:p,zIndex:1e3,transition:"width 0.2s ease"},onMouseDown:g,onPointerDown:g,children:[l.jsx("div",{className:"absolute",style:{top:40,right:"100%",width:30,height:3,background:"#10b981"}}),l.jsx("div",{className:"absolute rounded-full",style:{top:36,right:"100%",marginRight:26,width:10,height:10,background:"#10b981"}}),l.jsxs("div",{style:{background:"#ffffff",borderRadius:2,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",minHeight:h,transition:"min-height 0.2s ease",display:"flex",flexDirection:"column"},children:[l.jsx("div",{style:{padding:"24px 32px 16px",borderBottom:"2px solid #10b981",background:"linear-gradient(to bottom, #ffffff, #fafafa)"},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:10,letterSpacing:"0.15em",color:"#10b981",fontWeight:600,marginBottom:4},children:"STABILIZED DOCUMENT"}),l.jsx("h1",{style:{fontSize:20,fontFamily:"Georgia, serif",fontWeight:700,color:"#1a1a1a",margin:0},children:(()=>{const w=(e==null?void 0:e.title)||"DOCUMENT",v=w.indexOf(": ");return(v>-1?w.slice(v+2):w).toUpperCase()})()}),l.jsx("div",{style:{fontSize:11,color:"#666",marginTop:4,fontFamily:"monospace"},children:b})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:s,title:n?"Contract":"Expand",style:{color:"#666",fontSize:16,lineHeight:1,padding:6,background:"none",border:"1px solid #e5e5e5",borderRadius:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n?l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M9 1v4h4M5 13v-4H1M9 5L13 1M5 9L1 13"})}):l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M13 5V1h-4M1 9v4h4M13 1L9 5M1 13l4-4"})})}),l.jsx("button",{onClick:i,title:"Close",style:{color:"#999",fontSize:24,lineHeight:1,padding:4,background:"none",border:"none",cursor:"pointer"},children:""})]})]})}),l.jsx("div",{style:{flex:1,padding:"16px 24px",overflowY:"auto",maxHeight:n?600:400},children:l.jsx(XN,{renderModel:e,variant:"sidecar"})}),l.jsx("div",{style:{padding:"16px 32px 24px",borderTop:"1px solid #e5e5e5",background:"#fafafa"},children:l.jsxs("button",{onClick:o,style:{width:"100%",padding:"10px 16px",background:"#10b981",color:"white",border:"none",borderRadius:4,fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[l.jsx("span",{children:"View Full Document"}),l.jsx("span",{style:{fontSize:14},children:""})]})})]})]})}function p6({document:e,projectId:t,projectCode:r,nodeWidth:n,onClose:s,onZoomComplete:i,onViewFull:o}){const[a,c]=m.useState(null),[u,d]=m.useState(null),[f,p]=m.useState(!0),[h,b]=m.useState(!1);return m.useEffect(()=>{if(i){const g=setTimeout(()=>i(),150);return()=>clearTimeout(g)}},[i]),m.useEffect(()=>{async function g(){var w;if(!t||!e.id){p(!1);return}try{p(!0);try{const x=await Ie.getDocumentRenderModel(t,e.id);if(x&&x.sections&&x.sections.length>0){c(x),d(null);return}if((w=x==null?void 0:x.metadata)!=null&&w.fallback&&x.raw_content){c(null),d(x.raw_content);return}}catch(x){console.log("RenderModel not available, falling back to raw document:",x.message)}const v=await Ie.getDocument(t,e.id);c(null),d((v==null?void 0:v.content)||null)}catch(v){console.error("Failed to fetch document for sidecar:",v)}finally{p(!1)}}g()},[t,e.id]),f?null:a?l.jsx(f6,{renderModel:a,projectCode:r,documentName:e.name,isExpanded:h,onToggleExpand:()=>b(!h),onClose:s,onViewFull:()=>o==null?void 0:o(e.id),nodeWidth:n}):l.jsx(h6,{document:e,projectCode:r,rawContent:u,nodeWidth:n,isExpanded:h,onToggleExpand:()=>b(!h),onClose:s,onViewFull:()=>o==null?void 0:o(e.id)})}function h6({document:e,projectCode:t,rawContent:r,nodeWidth:n,isExpanded:s,onToggleExpand:i,onClose:o,onViewFull:a}){var w;const p=s?900:520,h=s?900:600,b=`${t||"DOC"} - ${e.name||"Document"}`,g=v=>{v.stopPropagation()};return l.jsxs("div",{className:"absolute top-0 tray-slide",style:{left:n+30,width:p,zIndex:1e3,transition:"width 0.2s ease"},onMouseDown:g,onPointerDown:g,children:[l.jsx("div",{className:"absolute",style:{top:40,right:"100%",width:30,height:3,background:"#10b981"}}),l.jsx("div",{className:"absolute rounded-full",style:{top:36,right:"100%",marginRight:26,width:10,height:10,background:"#10b981"}}),l.jsxs("div",{style:{background:"#ffffff",borderRadius:2,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",minHeight:h,transition:"min-height 0.2s ease",display:"flex",flexDirection:"column"},children:[l.jsx("div",{style:{padding:"24px 32px 16px",borderBottom:"2px solid #10b981",background:"linear-gradient(to bottom, #ffffff, #fafafa)"},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:10,letterSpacing:"0.15em",color:"#10b981",fontWeight:600,marginBottom:4},children:"PRODUCED DOCUMENT"}),l.jsx("h1",{style:{fontSize:20,fontFamily:"Georgia, serif",fontWeight:700,color:"#1a1a1a",margin:0},children:((w=e.name)==null?void 0:w.toUpperCase())||"DOCUMENT"}),l.jsx("div",{style:{fontSize:11,color:"#666",marginTop:4,fontFamily:"monospace"},children:b})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:i,title:s?"Contract":"Expand",style:{color:"#666",fontSize:16,lineHeight:1,padding:6,background:"none",border:"1px solid #e5e5e5",borderRadius:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:s?l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M9 1v4h4M5 13v-4H1M9 5L13 1M5 9L1 13"})}):l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M13 5V1h-4M1 9v4h4M13 1L9 5M1 13l4-4"})})}),l.jsx("button",{onClick:o,title:"Close",style:{color:"#999",fontSize:24,lineHeight:1,padding:4,background:"none",border:"none",cursor:"pointer"},children:""})]})]})}),l.jsxs("div",{style:{flex:1,padding:"16px 24px",overflowY:"auto",maxHeight:s?600:400},children:[l.jsx("div",{style:{padding:"12px 16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:8,marginBottom:16,fontSize:12,color:"#92400e"},children:"No view definition configured - displaying raw content"}),l.jsx("div",{style:{background:"#f8fafc",borderRadius:8,padding:16,overflow:"auto"},children:l.jsx("pre",{style:{margin:0,fontSize:11,color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace",lineHeight:1.5},children:JSON.stringify(r,null,2)})})]}),l.jsx("div",{style:{padding:"16px 32px 24px",borderTop:"1px solid #e5e5e5",background:"#fafafa"},children:l.jsxs("button",{onClick:a,style:{width:"100%",padding:"10px 16px",background:"#10b981",color:"white",border:"none",borderRadius:4,fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[l.jsx("span",{children:"View Full Document"}),l.jsx("span",{style:{fontSize:14},children:""})]})})]})]})}const m6={produced:"Produced",in_production:"In Production",ready_for_production:"Ready",requirements_not_met:"Requirements Not Met",awaiting_operator:"Awaiting Operator",halted:"Halted",stabilized:"Produced",active:"In Production",queued:"Ready",blocked:"Requirements Not Met",ready:"Produced",waiting:"Ready"};function g6({data:e}){var _,j,S;const r=(e.level||1)===1,n=e.isExpanded,s=e.expandType,i=((_=e.questions)==null?void 0:_.length)>0,o=((j=e.features)==null?void 0:j.length)>0,a=(S=e.stations)==null?void 0:S.some(N=>N.needs_input),c=e.state||"ready_for_production",u=["produced","stabilized","ready"].includes(c),d=["in_production","active"].includes(c),f=["requirements_not_met","blocked"].includes(c),p=d&&e.stations,h=d?"node-active":"",b=r?"DOCUMENT":"EPIC",g=r?"subway-node-header-doc":"subway-node-header-epic",w=u?"var(--state-produced-bg, var(--state-stabilized-bg))":d?"var(--state-in-production-bg, var(--state-active-bg))":f?"var(--state-requirements-not-met-bg, var(--state-blocked-bg, var(--state-queued-bg)))":"var(--state-ready-bg, var(--state-queued-bg))",v=u?"var(--state-produced-text, var(--state-stabilized-text))":d?"var(--state-in-production-text, var(--state-active-text))":f?"var(--state-requirements-not-met-text, var(--state-blocked-text, var(--state-queued-text)))":"var(--state-ready-text, var(--state-queued-text))",x=d?"var(--state-in-production-bg, var(--state-active-bg))":u?"var(--state-produced-bg, var(--state-stabilized-bg))":"var(--border-node)",y=m6[c]||c;return l.jsxs("div",{className:"relative",children:[l.jsx(Ir,{type:"target",position:Z.Top,className:"!opacity-0",style:{left:"15%"}}),l.jsxs("div",{className:`subway-node rounded-lg border ${h} overflow-hidden`,style:{width:e.width,minHeight:e.height,borderColor:x},children:[l.jsxs("div",{className:`${g} border-b px-3 py-1.5 flex items-center justify-between`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase tracking-wider",style:{color:r?"var(--header-text-doc)":"var(--header-text-epic)"},children:b}),l.jsx("span",{className:"text-[10px] font-medium",style:{color:"var(--text-primary)"},children:e.name})]}),e.intent==="optional"&&l.jsx("span",{className:"subway-button text-[8px] px-1.5 py-0.5 rounded",children:"OPTIONAL"})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"rounded-full flex-shrink-0",style:{width:r?24:18,height:r?24:18,backgroundColor:w}}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide",style:{color:v},children:y}),r&&e.desc&&l.jsx("p",{className:"text-[9px] mt-0.5 truncate",style:{color:"var(--text-muted)"},children:e.desc})]})]}),p&&l.jsx(FP,{stations:e.stations}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[r&&u&&l.jsx("button",{className:"px-2 py-1 bg-emerald-500/20 rounded text-[9px] hover:bg-emerald-500/30 transition-colors",style:{color:"var(--action-success)"},onClick:N=>{var k;N.stopPropagation(),(k=e.onExpand)==null||k.call(e,e.id,"document")},children:"View Document"}),a&&i&&!n&&l.jsx("button",{className:"px-2 py-1 bg-amber-500/20 rounded text-[9px] hover:bg-amber-500/30 transition-colors amber-pulse",style:{color:"var(--action-warning)"},onClick:N=>{var k;N.stopPropagation(),(k=e.onExpand)==null||k.call(e,e.id,"questions")},children:"Answer Questions"}),!r&&o&&(n&&s==="features"?l.jsxs("span",{className:"text-[9px] text-indigo-400",children:[e.features.length," features expanded"]}):l.jsxs("button",{className:"subway-button px-2 py-1 rounded text-[9px] transition-colors flex items-center gap-1",onClick:N=>{var k;N.stopPropagation(),(k=e.onExpand)==null||k.call(e,e.id,"features")},children:[l.jsx("span",{className:"text-indigo-400",children:e.features.length}),l.jsx("span",{children:"features"}),l.jsx("span",{className:"text-indigo-400",children:""})]}))]})]})]}),n&&s==="questions"&&i&&l.jsx(BP,{questions:e.questions,nodeWidth:e.width,onSubmit:N=>{var k;return(k=e.onSubmitQuestions)==null?void 0:k.call(e,e.id,N)},onClose:()=>{var N;return(N=e.onCollapse)==null?void 0:N.call(e)},onZoomComplete:()=>{var N;return(N=e.onZoomToNode)==null?void 0:N.call(e,e.id)}}),n&&s==="features"&&o&&l.jsx(HP,{features:e.features,epicName:e.name,nodeWidth:e.width,onClose:()=>{var N;return(N=e.onCollapse)==null?void 0:N.call(e)},onZoomComplete:()=>{var N;return(N=e.onZoomToNode)==null?void 0:N.call(e,e.id)}}),n&&s==="document"&&r&&u&&l.jsx(p6,{document:e,projectId:e.projectId,projectCode:e.projectCode,nodeWidth:e.width,onClose:()=>{var N;return(N=e.onCollapse)==null?void 0:N.call(e)},onZoomComplete:()=>{var N;return(N=e.onZoomToNode)==null?void 0:N.call(e,e.id)},onViewFull:N=>{var k;return(k=e.onViewFullDocument)==null?void 0:k.call(e,N)}}),l.jsx(Ir,{type:"source",position:Z.Bottom,className:"!opacity-0",style:{left:"15%"}})]})}function v6(){return l.jsxs("div",{style:{width:1,height:1,background:"transparent"},children:[l.jsx(Ir,{type:"target",position:Z.Top,style:{opacity:0}}),l.jsx(Ir,{type:"source",position:Z.Bottom,style:{opacity:0}})]})}function x6({projectId:e,projectCode:t,docTypeId:r,onClose:n}){const[s,i]=m.useState(null),[o,a]=m.useState(null),[c,u]=m.useState(!0),[d,f]=m.useState(null);return m.useEffect(()=>{async function p(){var h;try{u(!0),f(null);try{const g=await Ie.getDocumentRenderModel(e,r);if(g&&g.sections&&g.sections.length>0){i(g),a(null);return}if((h=g==null?void 0:g.metadata)!=null&&h.fallback&&g.raw_content){i(null),a(g.raw_content);return}}catch(g){console.log("RenderModel not available, falling back to raw document:",g.message)}const b=await Ie.getDocument(e,r);i(null),a((b==null?void 0:b.content)||null)}catch(b){f(b.message),console.error("Failed to fetch document:",b)}finally{u(!1)}}p()},[e,r]),m.useEffect(()=>{const p=h=>{h.key==="Escape"&&n()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[n]),c?l.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",style:{background:"rgba(0,0,0,0.8)"},children:l.jsx("div",{style:{color:"white",fontSize:14},children:"Loading..."})}):l.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",style:{background:"rgba(0,0,0,0.8)"},onClick:p=>p.target===p.currentTarget&&n(),children:l.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-lg shadow-2xl",style:{background:"#ffffff"},children:[l.jsxs("div",{className:"sticky top-0 px-6 py-4 border-b flex items-center justify-between",style:{background:"#f8fafc",borderColor:"#e2e8f0"},children:[l.jsx("div",{children:t&&l.jsx("div",{style:{display:"inline-block",padding:"2px 8px",background:"#10b981",color:"white",fontSize:11,fontWeight:600,borderRadius:4,letterSpacing:"0.05em"},children:t})}),l.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-200 transition-colors",children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsxs("div",{className:"overflow-y-auto p-6",style:{maxHeight:"calc(90vh - 80px)"},children:[d&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-red-500",children:d})}),s&&l.jsx(XN,{renderModel:s,variant:"full"}),o&&!s&&l.jsx(y6,{content:o,docTypeId:r}),!s&&!o&&!d&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500",children:"No content available"})})]})]})})}function y6({content:e,docTypeId:t}){if(!e)return l.jsx("p",{className:"text-gray-500",children:"No content available"});const r=e.project_name||e.title||e.name,n=e.description||e.summary||e.preliminary_summary;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{style:{padding:"12px 16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:8,fontSize:13,color:"#92400e"},children:["No view definition configured for ",l.jsx("strong",{children:t})," - displaying raw content"]}),(r||n)&&l.jsxs("div",{style:{padding:16,background:"#f8fafc",borderRadius:8,border:"1px solid #e2e8f0"},children:[r&&l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r}),n&&l.jsx("p",{className:"text-gray-700 text-sm",children:n})]}),l.jsx("div",{style:{background:"#f8fafc",borderRadius:8,padding:16,overflow:"auto"},children:l.jsx("pre",{style:{margin:0,fontSize:12,color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace",lineHeight:1.6},children:JSON.stringify(e,null,2)})})]})}const b6="/api/v1/admin";class w6 extends Error{constructor(t,r,n){super(t),this.name="AdminApiError",this.status=r,this.data=n,this.errorCode=n==null?void 0:n.error_code}}function _6(){const e=document.cookie.match(/(?:^|;\s*)csrf=([^;]*)/);return e?decodeURIComponent(e[1]):null}async function Re(e,t={}){var i;const r=`${b6}${e}`,n={headers:{"Content-Type":"application/json",...t.headers},credentials:"same-origin",...t};if(t.method&&t.method!=="GET"){const o=_6();o&&(n.headers["X-CSRF-Token"]=o)}const s=await fetch(r,n);if(!s.ok){const o=await s.json().catch(()=>({})),a=((i=o.detail)==null?void 0:i.message)||o.detail||`Request failed: ${s.status}`;throw new w6(a,s.status,o.detail||o)}return s.status===204?null:s.json()}const Ne={getCurrentWorkspace:async()=>{try{return await Re("/workspaces/current")}catch(e){if(e.status===404&&e.errorCode==="NO_WORKSPACE")return null;throw e}},createWorkspace:()=>Re("/workspaces",{method:"POST"}),getWorkspaceState:e=>Re(`/workspaces/${e}/state`),closeWorkspace:(e,t=!1)=>Re(`/workspaces/${e}?force=${t}`,{method:"DELETE"}),getArtifact:(e,t)=>Re(`/workspaces/${e}/artifacts/${t}`),writeArtifact:(e,t,r)=>Re(`/workspaces/${e}/artifacts/${t}`,{method:"PUT",body:JSON.stringify({content:r})}),getPreview:(e,t,r="execution")=>Re(`/workspaces/${e}/preview/${t}?mode=${r}`),getDiff:(e,t=null)=>{const r=t?`?artifact_id=${encodeURIComponent(t)}`:"";return Re(`/workspaces/${e}/diff${r}`)},commit:(e,t)=>Re(`/workspaces/${e}/commit`,{method:"POST",body:JSON.stringify({message:t})}),discard:e=>Re(`/workspaces/${e}/discard`,{method:"POST"}),getDocumentTypes:()=>Re("/workbench/document-types"),getDocumentType:(e,t=null)=>{const r=t?`?version=${t}`:"";return Re(`/workbench/document-types/${e}${r}`)},getDocumentTypeVersions:e=>Re(`/workbench/document-types/${e}/versions`),getRoles:()=>Re("/workbench/roles"),getTemplates:()=>Re("/workbench/templates"),getRole:(e,t=null)=>{const r=t?`?version=${t}`:"";return Re(`/workbench/roles/${e}${r}`)},getTemplate:(e,t=null)=>{const r=t?`?version=${t}`:"";return Re(`/workbench/templates/${e}${r}`)},getWorkflows:()=>Re("/workbench/workflows"),getOrchestrationWorkflows:()=>Re("/workbench/orchestration-workflows"),getWorkflow:(e,t=null)=>{const r=t?`?version=${t}`:"";return Re(`/workbench/workflows/${e}${r}`)},createOrchestrationWorkflow:(e,t)=>Re(`/workspaces/${e}/orchestration-workflows`,{method:"POST",body:JSON.stringify(t)}),deleteOrchestrationWorkflow:(e,t)=>Re(`/workspaces/${e}/orchestration-workflows/${t}`,{method:"DELETE"}),getActiveReleases:()=>Re("/workbench/active-releases"),invalidateCache:()=>Re("/workbench/cache/invalidate",{method:"POST"})};function j6({projectId:e}){const[t,r]=m.useState(null),[n,s]=m.useState(!0),[i,o]=m.useState(null),[a,c]=m.useState(!1),[u,d]=m.useState([]),[f,p]=m.useState(!1),[h,b]=m.useState(!1),[g,w]=m.useState(null),[v,x]=m.useState(!1),[y,_]=m.useState(!1),j=m.useCallback(async()=>{if(e){s(!0),o(null);try{const L=await Ie.getWorkflowInstance(e);r(L)}catch(L){L.status===404?r(null):o(L.message)}finally{s(!1)}}},[e]);m.useEffect(()=>{j()},[j]);const S=async()=>{c(!0),p(!0);try{const L=await Ne.getOrchestrationWorkflows();d(L.workflows||[])}catch{d([])}finally{p(!1)}},N=async L=>{b(!0);try{const $=await Ie.createWorkflowInstance(e,L.workflow_id,L.active_version);r($),c(!1)}catch($){o($.message)}finally{b(!1)}},k=async()=>{if(t&&(_(!y),!g)){x(!0);try{const L=await Ie.getWorkflowDrift(e);w(L)}catch(L){w({error:L.message})}finally{x(!1)}}};if(n)return l.jsx("div",{className:"p-4 text-xs",style:{color:"var(--text-muted)"},children:"Loading workflow..."});if(i&&!t)return l.jsx("div",{className:"p-4 text-xs",style:{color:"var(--status-error, #ef4444)"},children:i});if(!t)return l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"text-xs mb-3",style:{color:"var(--text-muted)"},children:"No workflow assigned to this project."}),a?l.jsx(S6,{workflows:u,loading:f,assigning:h,onSelect:N,onCancel:()=>c(!1)}):l.jsx("button",{onClick:S,className:"text-xs px-3 py-1.5 rounded font-semibold hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",border:"none",cursor:"pointer"},children:"Assign Workflow"})]});const C=t.effective_workflow||{},R=C.steps||[],T=t.base_workflow_ref||{};return l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:C.name||T.workflow_id||"Workflow"}),l.jsx(k6,{status:t.status})]}),l.jsxs("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:["From ",T.workflow_id," v",T.version,T.pow_class?` (${T.pow_class})`:""]})]}),l.jsx("button",{onClick:k,className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-secondary)",cursor:"pointer"},children:v?"Checking...":y?"Hide Drift":"Check Drift"})]}),y&&g&&l.jsx(N6,{drift:g}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:"var(--text-muted)"},children:["Steps (",R.length,")"]}),R.length===0?l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"No steps defined"}):l.jsx("div",{className:"space-y-1",children:R.map((L,$)=>l.jsx(E6,{step:L,index:$},L.step_id||$))})]}),i&&l.jsx("div",{className:"text-xs",style:{color:"var(--status-error, #ef4444)"},children:i})]})}function S6({workflows:e,loading:t,assigning:r,onSelect:n,onCancel:s}){const i=e.filter(a=>(a.pow_class||"reference")==="reference"),o=e.filter(a=>a.pow_class==="template");return l.jsxs("div",{className:"rounded p-3 space-y-2",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--text-primary)"},children:"Select a workflow to assign:"}),t?l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Loading..."}):l.jsxs(l.Fragment,{children:[i.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Reference Workflows"}),i.map(a=>l.jsxs("button",{onClick:()=>n(a),disabled:r,className:"w-full text-left text-xs px-2 py-1.5 rounded mb-0.5 hover:opacity-80",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-secondary)",cursor:r?"default":"pointer",opacity:r?.5:1},children:[l.jsx("div",{className:"font-medium",children:a.name||a.workflow_id}),l.jsxs("div",{style:{color:"var(--text-muted)"},children:["v",a.active_version,"  ",a.step_count," steps"]})]},a.workflow_id))]}),o.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Template Workflows"}),o.map(a=>l.jsxs("button",{onClick:()=>n(a),disabled:r,className:"w-full text-left text-xs px-2 py-1.5 rounded mb-0.5 hover:opacity-80",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-secondary)",cursor:r?"default":"pointer",opacity:r?.5:1},children:[l.jsx("div",{className:"font-medium",children:a.name||a.workflow_id}),l.jsxs("div",{style:{color:"var(--text-muted)"},children:["v",a.active_version,"  ",a.step_count," steps",a.derived_from_label?`  from ${a.derived_from_label}`:""]})]},a.workflow_id))]}),i.length===0&&o.length===0&&l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"No workflows available"})]}),l.jsx("button",{onClick:s,className:"text-xs px-2 py-1 hover:opacity-80",style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:"Cancel"})]})}function k6({status:e}){const t={active:{bg:"var(--action-primary)",color:"#000"},completed:{bg:"#22c55e",color:"#000"},archived:{bg:"var(--text-muted)",color:"#000"}},r=t[e]||t.active;return l.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded font-semibold uppercase",style:{fontSize:9,letterSpacing:"0.05em",background:r.bg,color:r.color},children:e})}function N6({drift:e}){return e.error?l.jsxs("div",{className:"text-xs p-2 rounded",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)",color:"var(--status-error, #ef4444)"},children:["Drift check failed: ",e.error]}):l.jsxs("div",{className:"text-xs p-2 rounded space-y-1",style:{background:"var(--bg-panel)",border:`1px solid ${e.is_drifted?"var(--status-warning, #f59e0b)":"var(--border-panel)"}`},children:[l.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[l.jsx("span",{style:{color:e.is_drifted?"var(--status-warning, #f59e0b)":"#22c55e"},children:e.is_drifted?"Drifted":"In Sync"}),l.jsxs("span",{style:{color:"var(--text-muted)"},children:["vs ",e.base_workflow_id," v",e.base_version]})]}),e.is_drifted&&l.jsxs("div",{style:{color:"var(--text-secondary)"},children:[e.steps_added.length>0&&l.jsxs("div",{children:["+ Steps added: ",e.steps_added.join(", ")]}),e.steps_removed.length>0&&l.jsxs("div",{children:["- Steps removed: ",e.steps_removed.join(", ")]}),e.steps_reordered&&l.jsx("div",{children:"~ Steps reordered"}),e.metadata_changed&&l.jsx("div",{children:"~ Metadata changed"})]})]})}function E6({step:e,index:t}){return l.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 rounded text-xs",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("span",{className:"font-mono font-semibold",style:{color:"var(--text-muted)",minWidth:20,textAlign:"right"},children:t+1}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:"var(--text-primary)"},children:e.step_id||`Step ${t+1}`}),e.produces&&l.jsxs("div",{style:{color:"var(--text-muted)"},children:["produces: ",e.produces]})]}),e.scope&&l.jsx("span",{className:"px-1 py-0.5 rounded",style:{background:"var(--bg-selected, #334155)",color:"var(--text-muted)",fontSize:10},children:e.scope})]})}function rx(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cu,P0;function C6(){if(P0)return Cu;P0=1;function e(){this.__data__=[],this.size=0}return Cu=e,Cu}var Ru,D0;function pi(){if(D0)return Ru;D0=1;function e(t,r){return t===r||t!==t&&r!==r}return Ru=e,Ru}var Tu,O0;function vc(){if(O0)return Tu;O0=1;var e=pi();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return Tu=t,Tu}var Iu,L0;function R6(){if(L0)return Iu;L0=1;var e=vc(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var a=i.length-1;return o==a?i.pop():r.call(i,o,1),--this.size,!0}return Iu=n,Iu}var Mu,z0;function T6(){if(z0)return Mu;z0=1;var e=vc();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return Mu=t,Mu}var Au,q0;function I6(){if(q0)return Au;q0=1;var e=vc();function t(r){return e(this.__data__,r)>-1}return Au=t,Au}var Pu,$0;function M6(){if($0)return Pu;$0=1;var e=vc();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return Pu=t,Pu}var Du,F0;function xc(){if(F0)return Du;F0=1;var e=C6(),t=R6(),r=T6(),n=I6(),s=M6();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Du=i,Du}var Ou,B0;function A6(){if(B0)return Ou;B0=1;var e=xc();function t(){this.__data__=new e,this.size=0}return Ou=t,Ou}var Lu,H0;function P6(){if(H0)return Lu;H0=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Lu=e,Lu}var zu,W0;function D6(){if(W0)return zu;W0=1;function e(t){return this.__data__.get(t)}return zu=e,zu}var qu,V0;function O6(){if(V0)return qu;V0=1;function e(t){return this.__data__.has(t)}return qu=e,qu}var $u,U0;function QN(){if(U0)return $u;U0=1;var e=typeof ra=="object"&&ra&&ra.Object===Object&&ra;return $u=e,$u}var Fu,G0;function vr(){if(G0)return Fu;G0=1;var e=QN(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Fu=r,Fu}var Bu,K0;function hi(){if(K0)return Bu;K0=1;var e=vr(),t=e.Symbol;return Bu=t,Bu}var Hu,Y0;function L6(){if(Y0)return Hu;Y0=1;var e=hi(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var a=r.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(a?o[s]=c:delete o[s]),d}return Hu=i,Hu}var Wu,X0;function z6(){if(X0)return Wu;X0=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Wu=r,Wu}var Vu,Q0;function xs(){if(Q0)return Vu;Q0=1;var e=hi(),t=L6(),r=z6(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?s:n:i&&i in Object(a)?t(a):r(a)}return Vu=o,Vu}var Uu,Z0;function er(){if(Z0)return Uu;Z0=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Uu=e,Uu}var Gu,J0;function Ko(){if(J0)return Gu;J0=1;var e=xs(),t=er(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(a){if(!t(a))return!1;var c=e(a);return c==n||c==s||c==r||c==i}return Gu=o,Gu}var Ku,e1;function q6(){if(e1)return Ku;e1=1;var e=vr(),t=e["__core-js_shared__"];return Ku=t,Ku}var Yu,t1;function $6(){if(t1)return Yu;t1=1;var e=q6(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return Yu=r,Yu}var Xu,r1;function ZN(){if(r1)return Xu;r1=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Xu=r,Xu}var Qu,n1;function F6(){if(n1)return Qu;n1=1;var e=Ko(),t=$6(),r=er(),n=ZN(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,c=o.toString,u=a.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!r(p)||t(p))return!1;var h=e(p)?d:i;return h.test(n(p))}return Qu=f,Qu}var Zu,s1;function B6(){if(s1)return Zu;s1=1;function e(t,r){return t==null?void 0:t[r]}return Zu=e,Zu}var Ju,i1;function ys(){if(i1)return Ju;i1=1;var e=F6(),t=B6();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return Ju=r,Ju}var ed,o1;function nx(){if(o1)return ed;o1=1;var e=ys(),t=vr(),r=e(t,"Map");return ed=r,ed}var td,a1;function yc(){if(a1)return td;a1=1;var e=ys(),t=e(Object,"create");return td=t,td}var rd,l1;function H6(){if(l1)return rd;l1=1;var e=yc();function t(){this.__data__=e?e(null):{},this.size=0}return rd=t,rd}var nd,c1;function W6(){if(c1)return nd;c1=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return nd=e,nd}var sd,u1;function V6(){if(u1)return sd;u1=1;var e=yc(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var a=o[i];return a===t?void 0:a}return n.call(o,i)?o[i]:void 0}return sd=s,sd}var id,d1;function U6(){if(d1)return id;d1=1;var e=yc(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return id=n,id}var od,f1;function G6(){if(f1)return od;f1=1;var e=yc(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return od=r,od}var ad,p1;function K6(){if(p1)return ad;p1=1;var e=H6(),t=W6(),r=V6(),n=U6(),s=G6();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,ad=i,ad}var ld,h1;function Y6(){if(h1)return ld;h1=1;var e=K6(),t=xc(),r=nx();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return ld=n,ld}var cd,m1;function X6(){if(m1)return cd;m1=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return cd=e,cd}var ud,g1;function bc(){if(g1)return ud;g1=1;var e=X6();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return ud=t,ud}var dd,v1;function Q6(){if(v1)return dd;v1=1;var e=bc();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return dd=t,dd}var fd,x1;function Z6(){if(x1)return fd;x1=1;var e=bc();function t(r){return e(this,r).get(r)}return fd=t,fd}var pd,y1;function J6(){if(y1)return pd;y1=1;var e=bc();function t(r){return e(this,r).has(r)}return pd=t,pd}var hd,b1;function eD(){if(b1)return hd;b1=1;var e=bc();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return hd=t,hd}var md,w1;function sx(){if(w1)return md;w1=1;var e=Y6(),t=Q6(),r=Z6(),n=J6(),s=eD();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,md=i,md}var gd,_1;function tD(){if(_1)return gd;_1=1;var e=xc(),t=nx(),r=sx(),n=200;function s(i,o){var a=this.__data__;if(a instanceof e){var c=a.__data__;if(!t||c.length<n-1)return c.push([i,o]),this.size=++a.size,this;a=this.__data__=new r(c)}return a.set(i,o),this.size=a.size,this}return gd=s,gd}var vd,j1;function wc(){if(j1)return vd;j1=1;var e=xc(),t=A6(),r=P6(),n=D6(),s=O6(),i=tD();function o(a){var c=this.__data__=new e(a);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,vd=o,vd}var xd,S1;function ix(){if(S1)return xd;S1=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s&&r(t[n],n,t)!==!1;);return t}return xd=e,xd}var yd,k1;function JN(){if(k1)return yd;k1=1;var e=ys(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return yd=t,yd}var bd,N1;function _c(){if(N1)return bd;N1=1;var e=JN();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return bd=t,bd}var wd,E1;function jc(){if(E1)return wd;E1=1;var e=_c(),t=pi(),r=Object.prototype,n=r.hasOwnProperty;function s(i,o,a){var c=i[o];(!(n.call(i,o)&&t(c,a))||a===void 0&&!(o in i))&&e(i,o,a)}return wd=s,wd}var _d,C1;function Yo(){if(C1)return _d;C1=1;var e=jc(),t=_c();function r(n,s,i,o){var a=!i;i||(i={});for(var c=-1,u=s.length;++c<u;){var d=s[c],f=o?o(i[d],n[d],d,i,n):void 0;f===void 0&&(f=n[d]),a?t(i,d,f):e(i,d,f)}return i}return _d=r,_d}var jd,R1;function rD(){if(R1)return jd;R1=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return jd=e,jd}var Sd,T1;function Pr(){if(T1)return Sd;T1=1;function e(t){return t!=null&&typeof t=="object"}return Sd=e,Sd}var kd,I1;function nD(){if(I1)return kd;I1=1;var e=xs(),t=Pr(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return kd=n,kd}var Nd,M1;function Xo(){if(M1)return Nd;M1=1;var e=nD(),t=Pr(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return Nd=i,Nd}var Ed,A1;function He(){if(A1)return Ed;A1=1;var e=Array.isArray;return Ed=e,Ed}var Ui={exports:{}},Cd,P1;function sD(){if(P1)return Cd;P1=1;function e(){return!1}return Cd=e,Cd}Ui.exports;var D1;function mi(){return D1||(D1=1,function(e,t){var r=vr(),n=sD(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,a=o?r.Buffer:void 0,c=a?a.isBuffer:void 0,u=c||n;e.exports=u}(Ui,Ui.exports)),Ui.exports}var Rd,O1;function Sc(){if(O1)return Rd;O1=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Rd=r,Rd}var Td,L1;function ox(){if(L1)return Td;L1=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Td=t,Td}var Id,z1;function iD(){if(z1)return Id;z1=1;var e=xs(),t=ox(),r=Pr(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",a="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",p="[object RegExp]",h="[object Set]",b="[object String]",g="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",y="[object Float64Array]",_="[object Int8Array]",j="[object Int16Array]",S="[object Int32Array]",N="[object Uint8Array]",k="[object Uint8ClampedArray]",C="[object Uint16Array]",R="[object Uint32Array]",T={};T[x]=T[y]=T[_]=T[j]=T[S]=T[N]=T[k]=T[C]=T[R]=!0,T[n]=T[s]=T[w]=T[i]=T[v]=T[o]=T[a]=T[c]=T[u]=T[d]=T[f]=T[p]=T[h]=T[b]=T[g]=!1;function L($){return r($)&&t($.length)&&!!T[e($)]}return Id=L,Id}var Md,q1;function kc(){if(q1)return Md;q1=1;function e(t){return function(r){return t(r)}}return Md=e,Md}var Gi={exports:{}};Gi.exports;var $1;function ax(){return $1||($1=1,function(e,t){var r=QN(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,a=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(Gi,Gi.exports)),Gi.exports}var Ad,F1;function Qo(){if(F1)return Ad;F1=1;var e=iD(),t=kc(),r=ax(),n=r&&r.isTypedArray,s=n?t(n):e;return Ad=s,Ad}var Pd,B1;function eE(){if(B1)return Pd;B1=1;var e=rD(),t=Xo(),r=He(),n=mi(),s=Sc(),i=Qo(),o=Object.prototype,a=o.hasOwnProperty;function c(u,d){var f=r(u),p=!f&&t(u),h=!f&&!p&&n(u),b=!f&&!p&&!h&&i(u),g=f||p||h||b,w=g?e(u.length,String):[],v=w.length;for(var x in u)(d||a.call(u,x))&&!(g&&(x=="length"||h&&(x=="offset"||x=="parent")||b&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||s(x,v)))&&w.push(x);return w}return Pd=c,Pd}var Dd,H1;function Nc(){if(H1)return Dd;H1=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return Dd=t,Dd}var Od,W1;function tE(){if(W1)return Od;W1=1;function e(t,r){return function(n){return t(r(n))}}return Od=e,Od}var Ld,V1;function oD(){if(V1)return Ld;V1=1;var e=tE(),t=e(Object.keys,Object);return Ld=t,Ld}var zd,U1;function lx(){if(U1)return zd;U1=1;var e=Nc(),t=oD(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var a in Object(i))n.call(i,a)&&a!="constructor"&&o.push(a);return o}return zd=s,zd}var qd,G1;function rn(){if(G1)return qd;G1=1;var e=Ko(),t=ox();function r(n){return n!=null&&t(n.length)&&!e(n)}return qd=r,qd}var $d,K1;function Fn(){if(K1)return $d;K1=1;var e=eE(),t=lx(),r=rn();function n(s){return r(s)?e(s):t(s)}return $d=n,$d}var Fd,Y1;function aD(){if(Y1)return Fd;Y1=1;var e=Yo(),t=Fn();function r(n,s){return n&&e(s,t(s),n)}return Fd=r,Fd}var Bd,X1;function lD(){if(X1)return Bd;X1=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return Bd=e,Bd}var Hd,Q1;function cD(){if(Q1)return Hd;Q1=1;var e=er(),t=Nc(),r=lD(),n=Object.prototype,s=n.hasOwnProperty;function i(o){if(!e(o))return r(o);var a=t(o),c=[];for(var u in o)u=="constructor"&&(a||!s.call(o,u))||c.push(u);return c}return Hd=i,Hd}var Wd,Z1;function bs(){if(Z1)return Wd;Z1=1;var e=eE(),t=cD(),r=rn();function n(s){return r(s)?e(s,!0):t(s)}return Wd=n,Wd}var Vd,J1;function uD(){if(J1)return Vd;J1=1;var e=Yo(),t=bs();function r(n,s){return n&&e(s,t(s),n)}return Vd=r,Vd}var Ki={exports:{}};Ki.exports;var eb;function rE(){return eb||(eb=1,function(e,t){var r=vr(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var f=u.length,p=a?a(f):new u.constructor(f);return u.copy(p),p}e.exports=c}(Ki,Ki.exports)),Ki.exports}var Ud,tb;function nE(){if(tb)return Ud;tb=1;function e(t,r){var n=-1,s=t.length;for(r||(r=Array(s));++n<s;)r[n]=t[n];return r}return Ud=e,Ud}var Gd,rb;function sE(){if(rb)return Gd;rb=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var a=t[n];r(a,n,t)&&(o[i++]=a)}return o}return Gd=e,Gd}var Kd,nb;function iE(){if(nb)return Kd;nb=1;function e(){return[]}return Kd=e,Kd}var Yd,sb;function cx(){if(sb)return Yd;sb=1;var e=sE(),t=iE(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(a){return n.call(o,a)}))}:t;return Yd=i,Yd}var Xd,ib;function dD(){if(ib)return Xd;ib=1;var e=Yo(),t=cx();function r(n,s){return e(n,t(n),s)}return Xd=r,Xd}var Qd,ob;function ux(){if(ob)return Qd;ob=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return Qd=e,Qd}var Zd,ab;function Ec(){if(ab)return Zd;ab=1;var e=tE(),t=e(Object.getPrototypeOf,Object);return Zd=t,Zd}var Jd,lb;function oE(){if(lb)return Jd;lb=1;var e=ux(),t=Ec(),r=cx(),n=iE(),s=Object.getOwnPropertySymbols,i=s?function(o){for(var a=[];o;)e(a,r(o)),o=t(o);return a}:n;return Jd=i,Jd}var ef,cb;function fD(){if(cb)return ef;cb=1;var e=Yo(),t=oE();function r(n,s){return e(n,t(n),s)}return ef=r,ef}var tf,ub;function aE(){if(ub)return tf;ub=1;var e=ux(),t=He();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return tf=r,tf}var rf,db;function lE(){if(db)return rf;db=1;var e=aE(),t=cx(),r=Fn();function n(s){return e(s,r,t)}return rf=n,rf}var nf,fb;function pD(){if(fb)return nf;fb=1;var e=aE(),t=oE(),r=bs();function n(s){return e(s,r,t)}return nf=n,nf}var sf,pb;function hD(){if(pb)return sf;pb=1;var e=ys(),t=vr(),r=e(t,"DataView");return sf=r,sf}var of,hb;function mD(){if(hb)return of;hb=1;var e=ys(),t=vr(),r=e(t,"Promise");return of=r,of}var af,mb;function cE(){if(mb)return af;mb=1;var e=ys(),t=vr(),r=e(t,"Set");return af=r,af}var lf,gb;function gD(){if(gb)return lf;gb=1;var e=ys(),t=vr(),r=e(t,"WeakMap");return lf=r,lf}var cf,vb;function gi(){if(vb)return cf;vb=1;var e=hD(),t=nx(),r=mD(),n=cE(),s=gD(),i=xs(),o=ZN(),a="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",h=o(e),b=o(t),g=o(r),w=o(n),v=o(s),x=i;return(e&&x(new e(new ArrayBuffer(1)))!=p||t&&x(new t)!=a||r&&x(r.resolve())!=u||n&&x(new n)!=d||s&&x(new s)!=f)&&(x=function(y){var _=i(y),j=_==c?y.constructor:void 0,S=j?o(j):"";if(S)switch(S){case h:return p;case b:return a;case g:return u;case w:return d;case v:return f}return _}),cf=x,cf}var uf,xb;function vD(){if(xb)return uf;xb=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var s=n.length,i=new n.constructor(s);return s&&typeof n[0]=="string"&&t.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return uf=r,uf}var df,yb;function uE(){if(yb)return df;yb=1;var e=vr(),t=e.Uint8Array;return df=t,df}var ff,bb;function dx(){if(bb)return ff;bb=1;var e=uE();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return ff=t,ff}var pf,wb;function xD(){if(wb)return pf;wb=1;var e=dx();function t(r,n){var s=n?e(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return pf=t,pf}var hf,_b;function yD(){if(_b)return hf;_b=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return hf=t,hf}var mf,jb;function bD(){if(jb)return mf;jb=1;var e=hi(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(s){return r?Object(r.call(s)):{}}return mf=n,mf}var gf,Sb;function dE(){if(Sb)return gf;Sb=1;var e=dx();function t(r,n){var s=n?e(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return gf=t,gf}var vf,kb;function wD(){if(kb)return vf;kb=1;var e=dx(),t=xD(),r=yD(),n=bD(),s=dE(),i="[object Boolean]",o="[object Date]",a="[object Map]",c="[object Number]",u="[object RegExp]",d="[object Set]",f="[object String]",p="[object Symbol]",h="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",w="[object Float64Array]",v="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",_="[object Uint8Array]",j="[object Uint8ClampedArray]",S="[object Uint16Array]",N="[object Uint32Array]";function k(C,R,T){var L=C.constructor;switch(R){case h:return e(C);case i:case o:return new L(+C);case b:return t(C,T);case g:case w:case v:case x:case y:case _:case j:case S:case N:return s(C,T);case a:return new L;case c:case f:return new L(C);case u:return r(C);case d:return new L;case p:return n(C)}}return vf=k,vf}var xf,Nb;function fE(){if(Nb)return xf;Nb=1;var e=er(),t=Object.create,r=function(){function n(){}return function(s){if(!e(s))return{};if(t)return t(s);n.prototype=s;var i=new n;return n.prototype=void 0,i}}();return xf=r,xf}var yf,Eb;function pE(){if(Eb)return yf;Eb=1;var e=fE(),t=Ec(),r=Nc();function n(s){return typeof s.constructor=="function"&&!r(s)?e(t(s)):{}}return yf=n,yf}var bf,Cb;function _D(){if(Cb)return bf;Cb=1;var e=gi(),t=Pr(),r="[object Map]";function n(s){return t(s)&&e(s)==r}return bf=n,bf}var wf,Rb;function jD(){if(Rb)return wf;Rb=1;var e=_D(),t=kc(),r=ax(),n=r&&r.isMap,s=n?t(n):e;return wf=s,wf}var _f,Tb;function SD(){if(Tb)return _f;Tb=1;var e=gi(),t=Pr(),r="[object Set]";function n(s){return t(s)&&e(s)==r}return _f=n,_f}var jf,Ib;function kD(){if(Ib)return jf;Ib=1;var e=SD(),t=kc(),r=ax(),n=r&&r.isSet,s=n?t(n):e;return jf=s,jf}var Sf,Mb;function hE(){if(Mb)return Sf;Mb=1;var e=wc(),t=ix(),r=jc(),n=aD(),s=uD(),i=rE(),o=nE(),a=dD(),c=fD(),u=lE(),d=pD(),f=gi(),p=vD(),h=wD(),b=pE(),g=He(),w=mi(),v=jD(),x=er(),y=kD(),_=Fn(),j=bs(),S=1,N=2,k=4,C="[object Arguments]",R="[object Array]",T="[object Boolean]",L="[object Date]",$="[object Error]",E="[object Function]",O="[object GeneratorFunction]",P="[object Map]",F="[object Number]",D="[object Object]",I="[object RegExp]",z="[object Set]",M="[object String]",q="[object Symbol]",A="[object WeakMap]",B="[object ArrayBuffer]",V="[object DataView]",Y="[object Float32Array]",te="[object Float64Array]",ne="[object Int8Array]",re="[object Int16Array]",X="[object Int32Array]",ue="[object Uint8Array]",J="[object Uint8ClampedArray]",se="[object Uint16Array]",ie="[object Uint32Array]",ee={};ee[C]=ee[R]=ee[B]=ee[V]=ee[T]=ee[L]=ee[Y]=ee[te]=ee[ne]=ee[re]=ee[X]=ee[P]=ee[F]=ee[D]=ee[I]=ee[z]=ee[M]=ee[q]=ee[ue]=ee[J]=ee[se]=ee[ie]=!0,ee[$]=ee[E]=ee[A]=!1;function xe(U,K,ae,W,we,_e){var de,je=K&S,lt=K&N,We=K&k;if(ae&&(de=we?ae(U,W,we,_e):ae(U)),de!==void 0)return de;if(!x(U))return U;var rt=g(U);if(rt){if(de=p(U),!je)return o(U,de)}else{var Fe=f(U),ht=Fe==E||Fe==O;if(w(U))return i(U,je);if(Fe==D||Fe==C||ht&&!we){if(de=lt||ht?{}:b(U),!je)return lt?c(U,s(de,U)):a(U,n(de,U))}else{if(!ee[Fe])return we?U:{};de=h(U,Fe,je)}}_e||(_e=new e);var rr=_e.get(U);if(rr)return rr;_e.set(U,de),y(U)?U.forEach(function(Xe){de.add(xe(Xe,K,ae,Xe,U,_e))}):v(U)&&U.forEach(function(Xe,st){de.set(st,xe(Xe,K,ae,st,U,_e))});var Se=We?lt?d:u:lt?j:_,nt=rt?void 0:Se(U);return t(nt||U,function(Xe,st){nt&&(st=Xe,Xe=U[st]),r(de,st,xe(Xe,K,ae,st,U,_e))}),de}return Sf=xe,Sf}var kf,Ab;function ND(){if(Ab)return kf;Ab=1;var e=hE(),t=4;function r(n){return e(n,t)}return kf=r,kf}var Nf,Pb;function fx(){if(Pb)return Nf;Pb=1;function e(t){return function(){return t}}return Nf=e,Nf}var Ef,Db;function ED(){if(Db)return Ef;Db=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),a=s(r),c=a.length;c--;){var u=a[t?c:++i];if(n(o[u],u,o)===!1)break}return r}}return Ef=e,Ef}var Cf,Ob;function px(){if(Ob)return Cf;Ob=1;var e=ED(),t=e();return Cf=t,Cf}var Rf,Lb;function hx(){if(Lb)return Rf;Lb=1;var e=px(),t=Fn();function r(n,s){return n&&e(n,s,t)}return Rf=r,Rf}var Tf,zb;function CD(){if(zb)return Tf;zb=1;var e=rn();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,a=n?o:-1,c=Object(s);(n?a--:++a<o)&&i(c[a],a,c)!==!1;);return s}}return Tf=t,Tf}var If,qb;function Cc(){if(qb)return If;qb=1;var e=hx(),t=CD(),r=t(e);return If=r,If}var Mf,$b;function ws(){if($b)return Mf;$b=1;function e(t){return t}return Mf=e,Mf}var Af,Fb;function mE(){if(Fb)return Af;Fb=1;var e=ws();function t(r){return typeof r=="function"?r:e}return Af=t,Af}var Pf,Bb;function gE(){if(Bb)return Pf;Bb=1;var e=ix(),t=Cc(),r=mE(),n=He();function s(i,o){var a=n(i)?e:t;return a(i,r(o))}return Pf=s,Pf}var Df,Hb;function vE(){return Hb||(Hb=1,Df=gE()),Df}var Of,Wb;function RD(){if(Wb)return Of;Wb=1;var e=Cc();function t(r,n){var s=[];return e(r,function(i,o,a){n(i,o,a)&&s.push(i)}),s}return Of=t,Of}var Lf,Vb;function TD(){if(Vb)return Lf;Vb=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Lf=t,Lf}var zf,Ub;function ID(){if(Ub)return zf;Ub=1;function e(t){return this.__data__.has(t)}return zf=e,zf}var qf,Gb;function xE(){if(Gb)return qf;Gb=1;var e=sx(),t=TD(),r=ID();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,qf=n,qf}var $f,Kb;function MD(){if(Kb)return $f;Kb=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return $f=e,$f}var Ff,Yb;function yE(){if(Yb)return Ff;Yb=1;function e(t,r){return t.has(r)}return Ff=e,Ff}var Bf,Xb;function bE(){if(Xb)return Bf;Xb=1;var e=xE(),t=MD(),r=yE(),n=1,s=2;function i(o,a,c,u,d,f){var p=c&n,h=o.length,b=a.length;if(h!=b&&!(p&&b>h))return!1;var g=f.get(o),w=f.get(a);if(g&&w)return g==a&&w==o;var v=-1,x=!0,y=c&s?new e:void 0;for(f.set(o,a),f.set(a,o);++v<h;){var _=o[v],j=a[v];if(u)var S=p?u(j,_,v,a,o,f):u(_,j,v,o,a,f);if(S!==void 0){if(S)continue;x=!1;break}if(y){if(!t(a,function(N,k){if(!r(y,k)&&(_===N||d(_,N,c,u,f)))return y.push(k)})){x=!1;break}}else if(!(_===j||d(_,j,c,u,f))){x=!1;break}}return f.delete(o),f.delete(a),x}return Bf=i,Bf}var Hf,Qb;function AD(){if(Qb)return Hf;Qb=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return Hf=e,Hf}var Wf,Zb;function mx(){if(Zb)return Wf;Zb=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return Wf=e,Wf}var Vf,Jb;function PD(){if(Jb)return Vf;Jb=1;var e=hi(),t=uE(),r=pi(),n=bE(),s=AD(),i=mx(),o=1,a=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",p="[object Number]",h="[object RegExp]",b="[object Set]",g="[object String]",w="[object Symbol]",v="[object ArrayBuffer]",x="[object DataView]",y=e?e.prototype:void 0,_=y?y.valueOf:void 0;function j(S,N,k,C,R,T,L){switch(k){case x:if(S.byteLength!=N.byteLength||S.byteOffset!=N.byteOffset)return!1;S=S.buffer,N=N.buffer;case v:return!(S.byteLength!=N.byteLength||!T(new t(S),new t(N)));case c:case u:case p:return r(+S,+N);case d:return S.name==N.name&&S.message==N.message;case h:case g:return S==N+"";case f:var $=s;case b:var E=C&o;if($||($=i),S.size!=N.size&&!E)return!1;var O=L.get(S);if(O)return O==N;C|=a,L.set(S,N);var P=n($(S),$(N),C,R,T,L);return L.delete(S),P;case w:if(_)return _.call(S)==_.call(N)}return!1}return Vf=j,Vf}var Uf,ew;function DD(){if(ew)return Uf;ew=1;var e=lE(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,a,c,u,d){var f=a&t,p=e(i),h=p.length,b=e(o),g=b.length;if(h!=g&&!f)return!1;for(var w=h;w--;){var v=p[w];if(!(f?v in o:n.call(o,v)))return!1}var x=d.get(i),y=d.get(o);if(x&&y)return x==o&&y==i;var _=!0;d.set(i,o),d.set(o,i);for(var j=f;++w<h;){v=p[w];var S=i[v],N=o[v];if(c)var k=f?c(N,S,v,o,i,d):c(S,N,v,i,o,d);if(!(k===void 0?S===N||u(S,N,a,c,d):k)){_=!1;break}j||(j=v=="constructor")}if(_&&!j){var C=i.constructor,R=o.constructor;C!=R&&"constructor"in i&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof R=="function"&&R instanceof R)&&(_=!1)}return d.delete(i),d.delete(o),_}return Uf=s,Uf}var Gf,tw;function OD(){if(tw)return Gf;tw=1;var e=wc(),t=bE(),r=PD(),n=DD(),s=gi(),i=He(),o=mi(),a=Qo(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype,h=p.hasOwnProperty;function b(g,w,v,x,y,_){var j=i(g),S=i(w),N=j?d:s(g),k=S?d:s(w);N=N==u?f:N,k=k==u?f:k;var C=N==f,R=k==f,T=N==k;if(T&&o(g)){if(!o(w))return!1;j=!0,C=!1}if(T&&!C)return _||(_=new e),j||a(g)?t(g,w,v,x,y,_):r(g,w,N,v,x,y,_);if(!(v&c)){var L=C&&h.call(g,"__wrapped__"),$=R&&h.call(w,"__wrapped__");if(L||$){var E=L?g.value():g,O=$?w.value():w;return _||(_=new e),y(E,O,v,x,_)}}return T?(_||(_=new e),n(g,w,v,x,y,_)):!1}return Gf=b,Gf}var Kf,rw;function wE(){if(rw)return Kf;rw=1;var e=OD(),t=Pr();function r(n,s,i,o,a){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,a)}return Kf=r,Kf}var Yf,nw;function LD(){if(nw)return Yf;nw=1;var e=wc(),t=wE(),r=1,n=2;function s(i,o,a,c){var u=a.length,d=u,f=!c;if(i==null)return!d;for(i=Object(i);u--;){var p=a[u];if(f&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++u<d;){p=a[u];var h=p[0],b=i[h],g=p[1];if(f&&p[2]){if(b===void 0&&!(h in i))return!1}else{var w=new e;if(c)var v=c(b,g,h,i,o,w);if(!(v===void 0?t(g,b,r|n,c,w):v))return!1}}return!0}return Yf=s,Yf}var Xf,sw;function _E(){if(sw)return Xf;sw=1;var e=er();function t(r){return r===r&&!e(r)}return Xf=t,Xf}var Qf,iw;function zD(){if(iw)return Qf;iw=1;var e=_E(),t=Fn();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],a=n[o];s[i]=[o,a,e(a)]}return s}return Qf=r,Qf}var Zf,ow;function jE(){if(ow)return Zf;ow=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Zf=e,Zf}var Jf,aw;function qD(){if(aw)return Jf;aw=1;var e=LD(),t=zD(),r=jE();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Jf=n,Jf}var ep,lw;function vi(){if(lw)return ep;lw=1;var e=xs(),t=Pr(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return ep=n,ep}var tp,cw;function gx(){if(cw)return tp;cw=1;var e=He(),t=vi(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var a=typeof i;return a=="number"||a=="symbol"||a=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return tp=s,tp}var rp,uw;function $D(){if(uw)return rp;uw=1;var e=sx(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,a=s?s.apply(this,o):o[0],c=i.cache;if(c.has(a))return c.get(a);var u=n.apply(this,o);return i.cache=c.set(a,u)||c,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,rp=r,rp}var np,dw;function FD(){if(dw)return np;dw=1;var e=$D(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return np=r,np}var sp,fw;function BD(){if(fw)return sp;fw=1;var e=FD(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,a,c,u){i.push(c?u.replace(r,"$1"):a||o)}),i});return sp=n,sp}var ip,pw;function Rc(){if(pw)return ip;pw=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return ip=e,ip}var op,hw;function HD(){if(hw)return op;hw=1;var e=hi(),t=Rc(),r=He(),n=vi(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return i?i.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return op=o,op}var ap,mw;function SE(){if(mw)return ap;mw=1;var e=HD();function t(r){return r==null?"":e(r)}return ap=t,ap}var lp,gw;function Tc(){if(gw)return lp;gw=1;var e=He(),t=gx(),r=BD(),n=SE();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return lp=s,lp}var cp,vw;function Zo(){if(vw)return cp;vw=1;var e=vi();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return cp=t,cp}var up,xw;function Ic(){if(xw)return up;xw=1;var e=Tc(),t=Zo();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return up=r,up}var dp,yw;function WD(){if(yw)return dp;yw=1;var e=Ic();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return dp=t,dp}var fp,bw;function VD(){if(bw)return fp;bw=1;function e(t,r){return t!=null&&r in Object(t)}return fp=e,fp}var pp,ww;function kE(){if(ww)return pp;ww=1;var e=Tc(),t=Xo(),r=He(),n=Sc(),s=ox(),i=Zo();function o(a,c,u){c=e(c,a);for(var d=-1,f=c.length,p=!1;++d<f;){var h=i(c[d]);if(!(p=a!=null&&u(a,h)))break;a=a[h]}return p||++d!=f?p:(f=a==null?0:a.length,!!f&&s(f)&&n(h,f)&&(r(a)||t(a)))}return pp=o,pp}var hp,_w;function NE(){if(_w)return hp;_w=1;var e=VD(),t=kE();function r(n,s){return n!=null&&t(n,s,e)}return hp=r,hp}var mp,jw;function UD(){if(jw)return mp;jw=1;var e=wE(),t=WD(),r=NE(),n=gx(),s=_E(),i=jE(),o=Zo(),a=1,c=2;function u(d,f){return n(d)&&s(f)?i(o(d),f):function(p){var h=t(p,d);return h===void 0&&h===f?r(p,d):e(f,h,a|c)}}return mp=u,mp}var gp,Sw;function EE(){if(Sw)return gp;Sw=1;function e(t){return function(r){return r==null?void 0:r[t]}}return gp=e,gp}var vp,kw;function GD(){if(kw)return vp;kw=1;var e=Ic();function t(r){return function(n){return e(n,r)}}return vp=t,vp}var xp,Nw;function KD(){if(Nw)return xp;Nw=1;var e=EE(),t=GD(),r=gx(),n=Zo();function s(i){return r(i)?e(n(i)):t(i)}return xp=s,xp}var yp,Ew;function nn(){if(Ew)return yp;Ew=1;var e=qD(),t=UD(),r=ws(),n=He(),s=KD();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return yp=i,yp}var bp,Cw;function CE(){if(Cw)return bp;Cw=1;var e=sE(),t=RD(),r=nn(),n=He();function s(i,o){var a=n(i)?e:t;return a(i,r(o,3))}return bp=s,bp}var wp,Rw;function YD(){if(Rw)return wp;Rw=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,s){return n!=null&&t.call(n,s)}return wp=r,wp}var _p,Tw;function RE(){if(Tw)return _p;Tw=1;var e=YD(),t=kE();function r(n,s){return n!=null&&t(n,s,e)}return _p=r,_p}var jp,Iw;function XD(){if(Iw)return jp;Iw=1;var e=lx(),t=gi(),r=Xo(),n=He(),s=rn(),i=mi(),o=Nc(),a=Qo(),c="[object Map]",u="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function p(h){if(h==null)return!0;if(s(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||i(h)||a(h)||r(h)))return!h.length;var b=t(h);if(b==c||b==u)return!h.size;if(o(h))return!e(h).length;for(var g in h)if(f.call(h,g))return!1;return!0}return jp=p,jp}var Sp,Mw;function TE(){if(Mw)return Sp;Mw=1;function e(t){return t===void 0}return Sp=e,Sp}var kp,Aw;function IE(){if(Aw)return kp;Aw=1;var e=Cc(),t=rn();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(a,c,u){o[++i]=s(a,c,u)}),o}return kp=r,kp}var Np,Pw;function ME(){if(Pw)return Np;Pw=1;var e=Rc(),t=nn(),r=IE(),n=He();function s(i,o){var a=n(i)?e:r;return a(i,t(o,3))}return Np=s,Np}var Ep,Dw;function QD(){if(Dw)return Ep;Dw=1;function e(t,r,n,s){var i=-1,o=t==null?0:t.length;for(s&&o&&(n=t[++i]);++i<o;)n=r(n,t[i],i,t);return n}return Ep=e,Ep}var Cp,Ow;function ZD(){if(Ow)return Cp;Ow=1;function e(t,r,n,s,i){return i(t,function(o,a,c){n=s?(s=!1,o):r(n,o,a,c)}),n}return Cp=e,Cp}var Rp,Lw;function AE(){if(Lw)return Rp;Lw=1;var e=QD(),t=Cc(),r=nn(),n=ZD(),s=He();function i(o,a,c){var u=s(o)?e:n,d=arguments.length<3;return u(o,r(a,4),c,d,t)}return Rp=i,Rp}var Tp,zw;function JD(){if(zw)return Tp;zw=1;var e=xs(),t=He(),r=Pr(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return Tp=s,Tp}var Ip,qw;function eO(){if(qw)return Ip;qw=1;var e=EE(),t=e("length");return Ip=t,Ip}var Mp,$w;function tO(){if($w)return Mp;$w=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+s+i+"]");function c(u){return a.test(u)}return Mp=c,Mp}var Ap,Fw;function rO(){if(Fw)return Ap;Fw=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",a="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+a+"|"+c+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",b=u+"?",g="["+i+"]?",w="(?:"+h+"(?:"+[d,f,p].join("|")+")"+g+b+")*",v=g+b+w,x="(?:"+[d+a+"?",a,f,p,o].join("|")+")",y=RegExp(c+"(?="+c+")|"+x+v,"g");function _(j){for(var S=y.lastIndex=0;y.test(j);)++S;return S}return Ap=_,Ap}var Pp,Bw;function nO(){if(Bw)return Pp;Bw=1;var e=eO(),t=tO(),r=rO();function n(s){return t(s)?r(s):e(s)}return Pp=n,Pp}var Dp,Hw;function sO(){if(Hw)return Dp;Hw=1;var e=lx(),t=gi(),r=rn(),n=JD(),s=nO(),i="[object Map]",o="[object Set]";function a(c){if(c==null)return 0;if(r(c))return n(c)?s(c):c.length;var u=t(c);return u==i||u==o?c.size:e(c).length}return Dp=a,Dp}var Op,Ww;function iO(){if(Ww)return Op;Ww=1;var e=ix(),t=fE(),r=hx(),n=nn(),s=Ec(),i=He(),o=mi(),a=Ko(),c=er(),u=Qo();function d(f,p,h){var b=i(f),g=b||o(f)||u(f);if(p=n(p,4),h==null){var w=f&&f.constructor;g?h=b?new w:[]:c(f)?h=a(w)?t(s(f)):{}:h={}}return(g?e:r)(f,function(v,x,y){return p(h,v,x,y)}),h}return Op=d,Op}var Lp,Vw;function oO(){if(Vw)return Lp;Vw=1;var e=hi(),t=Xo(),r=He(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return Lp=s,Lp}var zp,Uw;function vx(){if(Uw)return zp;Uw=1;var e=ux(),t=oO();function r(n,s,i,o,a){var c=-1,u=n.length;for(i||(i=t),a||(a=[]);++c<u;){var d=n[c];s>0&&i(d)?s>1?r(d,s-1,i,o,a):e(a,d):o||(a[a.length]=d)}return a}return zp=r,zp}var qp,Gw;function aO(){if(Gw)return qp;Gw=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return qp=e,qp}var $p,Kw;function PE(){if(Kw)return $p;Kw=1;var e=aO(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,a=-1,c=t(o.length-s,0),u=Array(c);++a<c;)u[a]=o[s+a];a=-1;for(var d=Array(s+1);++a<s;)d[a]=o[a];return d[s]=i(u),e(n,this,d)}}return $p=r,$p}var Fp,Yw;function lO(){if(Yw)return Fp;Yw=1;var e=fx(),t=JN(),r=ws(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Fp=n,Fp}var Bp,Xw;function cO(){if(Xw)return Bp;Xw=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var a=r(),c=t-(a-o);if(o=a,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Bp=n,Bp}var Hp,Qw;function DE(){if(Qw)return Hp;Qw=1;var e=lO(),t=cO(),r=t(e);return Hp=r,Hp}var Wp,Zw;function Mc(){if(Zw)return Wp;Zw=1;var e=ws(),t=PE(),r=DE();function n(s,i){return r(t(s,i,e),s+"")}return Wp=n,Wp}var Vp,Jw;function OE(){if(Jw)return Vp;Jw=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return Vp=e,Vp}var Up,e_;function uO(){if(e_)return Up;e_=1;function e(t){return t!==t}return Up=e,Up}var Gp,t_;function dO(){if(t_)return Gp;t_=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return Gp=e,Gp}var Kp,r_;function fO(){if(r_)return Kp;r_=1;var e=OE(),t=uO(),r=dO();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return Kp=n,Kp}var Yp,n_;function pO(){if(n_)return Yp;n_=1;var e=fO();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return Yp=t,Yp}var Xp,s_;function hO(){if(s_)return Xp;s_=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return Xp=e,Xp}var Qp,i_;function mO(){if(i_)return Qp;i_=1;function e(){}return Qp=e,Qp}var Zp,o_;function gO(){if(o_)return Zp;o_=1;var e=cE(),t=mO(),r=mx(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return Zp=s,Zp}var Jp,a_;function vO(){if(a_)return Jp;a_=1;var e=xE(),t=pO(),r=hO(),n=yE(),s=gO(),i=mx(),o=200;function a(c,u,d){var f=-1,p=t,h=c.length,b=!0,g=[],w=g;if(d)b=!1,p=r;else if(h>=o){var v=u?null:s(c);if(v)return i(v);b=!1,p=n,w=new e}else w=u?[]:g;e:for(;++f<h;){var x=c[f],y=u?u(x):x;if(x=d||x!==0?x:0,b&&y===y){for(var _=w.length;_--;)if(w[_]===y)continue e;u&&w.push(y),g.push(x)}else p(w,y,d)||(w!==g&&w.push(y),g.push(x))}return g}return Jp=a,Jp}var eh,l_;function LE(){if(l_)return eh;l_=1;var e=rn(),t=Pr();function r(n){return t(n)&&e(n)}return eh=r,eh}var th,c_;function xO(){if(c_)return th;c_=1;var e=vx(),t=Mc(),r=vO(),n=LE(),s=t(function(i){return r(e(i,1,n,!0))});return th=s,th}var rh,u_;function yO(){if(u_)return rh;u_=1;var e=Rc();function t(r,n){return e(n,function(s){return r[s]})}return rh=t,rh}var nh,d_;function zE(){if(d_)return nh;d_=1;var e=yO(),t=Fn();function r(n){return n==null?[]:e(n,t(n))}return nh=r,nh}var sh,f_;function tr(){if(f_)return sh;f_=1;var e;if(typeof rx=="function")try{e={clone:ND(),constant:fx(),each:vE(),filter:CE(),has:RE(),isArray:He(),isEmpty:XD(),isFunction:Ko(),isUndefined:TE(),keys:Fn(),map:ME(),reduce:AE(),size:sO(),transform:iO(),union:xO(),values:zE()}}catch{}return e||(e=window._),sh=e,sh}var ih,p_;function xx(){if(p_)return ih;p_=1;var e=tr();ih=s;var t="\0",r="\0",n="";function s(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(d){return this._label=d,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return e.keys(this._nodes)},s.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._in[f])})},s.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._out[f])})},s.prototype.setNodes=function(d,f){var p=arguments,h=this;return e.each(d,function(b){p.length>1?h.setNode(b,f):h.setNode(b)}),this},s.prototype.setNode=function(d,f){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},s.prototype.node=function(d){return this._nodes[d]},s.prototype.hasNode=function(d){return e.has(this._nodes,d)},s.prototype.removeNode=function(d){var f=this;if(e.has(this._nodes,d)){var p=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(h){f.setParent(h)}),delete this._children[d]),e.each(e.keys(this._in[d]),p),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),p),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},s.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=r;else{f+="";for(var p=f;!e.isUndefined(p);p=this.parent(p))if(p===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},s.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},s.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==r)return f}},s.prototype.children=function(d){if(e.isUndefined(d)&&(d=r),this._isCompound){var f=this._children[d];if(f)return e.keys(f)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},s.prototype.predecessors=function(d){var f=this._preds[d];if(f)return e.keys(f)},s.prototype.successors=function(d){var f=this._sucs[d];if(f)return e.keys(f)},s.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return e.union(f,this.successors(d))},s.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},s.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var p=this;e.each(this._nodes,function(g,w){d(w)&&f.setNode(w,g)}),e.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,p.edge(g))});var h={};function b(g){var w=p.parent(g);return w===void 0||f.hasNode(w)?(h[g]=w,w):w in h?h[w]:b(w)}return this._isCompound&&e.each(f.nodes(),function(g){f.setParent(g,b(g))}),f},s.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return e.values(this._edgeObjs)},s.prototype.setPath=function(d,f){var p=this,h=arguments;return e.reduce(d,function(b,g){return h.length>1?p.setEdge(b,g,f):p.setEdge(b,g),g}),this},s.prototype.setEdge=function(){var d,f,p,h,b=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(d=g.v,f=g.w,p=g.name,arguments.length===2&&(h=arguments[1],b=!0)):(d=g,f=arguments[1],p=arguments[3],arguments.length>2&&(h=arguments[2],b=!0)),d=""+d,f=""+f,e.isUndefined(p)||(p=""+p);var w=a(this._isDirected,d,f,p);if(e.has(this._edgeLabels,w))return b&&(this._edgeLabels[w]=h),this;if(!e.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[w]=b?h:this._defaultEdgeLabelFn(d,f,p);var v=c(this._isDirected,d,f,p);return d=v.v,f=v.w,Object.freeze(v),this._edgeObjs[w]=v,i(this._preds[f],d),i(this._sucs[d],f),this._in[f][w]=v,this._out[d][w]=v,this._edgeCount++,this},s.prototype.edge=function(d,f,p){var h=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,d,f,p);return this._edgeLabels[h]},s.prototype.hasEdge=function(d,f,p){var h=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,d,f,p);return e.has(this._edgeLabels,h)},s.prototype.removeEdge=function(d,f,p){var h=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,d,f,p),b=this._edgeObjs[h];return b&&(d=b.v,f=b.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[f],d),o(this._sucs[d],f),delete this._in[f][h],delete this._out[d][h],this._edgeCount--),this},s.prototype.inEdges=function(d,f){var p=this._in[d];if(p){var h=e.values(p);return f?e.filter(h,function(b){return b.v===f}):h}},s.prototype.outEdges=function(d,f){var p=this._out[d];if(p){var h=e.values(p);return f?e.filter(h,function(b){return b.w===f}):h}},s.prototype.nodeEdges=function(d,f){var p=this.inEdges(d,f);if(p)return p.concat(this.outEdges(d,f))};function i(d,f){d[f]?d[f]++:d[f]=1}function o(d,f){--d[f]||delete d[f]}function a(d,f,p,h){var b=""+f,g=""+p;if(!d&&b>g){var w=b;b=g,g=w}return b+n+g+n+(e.isUndefined(h)?t:h)}function c(d,f,p,h){var b=""+f,g=""+p;if(!d&&b>g){var w=b;b=g,g=w}var v={v:b,w:g};return h&&(v.name=h),v}function u(d,f){return a(d,f.v,f.w,f.name)}return ih}var oh,h_;function bO(){return h_||(h_=1,oh="2.1.8"),oh}var ah,m_;function wO(){return m_||(m_=1,ah={Graph:xx(),version:bO()}),ah}var lh,g_;function _O(){if(g_)return lh;g_=1;var e=tr(),t=xx();lh={write:r,read:i};function r(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:s(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function n(o){return e.map(o.nodes(),function(a){var c=o.node(a),u=o.parent(a),d={v:a};return e.isUndefined(c)||(d.value=c),e.isUndefined(u)||(d.parent=u),d})}function s(o){return e.map(o.edges(),function(a){var c=o.edge(a),u={v:a.v,w:a.w};return e.isUndefined(a.name)||(u.name=a.name),e.isUndefined(c)||(u.value=c),u})}function i(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(c){a.setNode(c.v,c.value),c.parent&&a.setParent(c.v,c.parent)}),e.each(o.edges,function(c){a.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),a}return lh}var ch,v_;function jO(){if(v_)return ch;v_=1;var e=tr();ch=t;function t(r){var n={},s=[],i;function o(a){e.has(n,a)||(n[a]=!0,i.push(a),e.each(r.successors(a),o),e.each(r.predecessors(a),o))}return e.each(r.nodes(),function(a){i=[],o(a),i.length&&s.push(i)}),s}return ch}var uh,x_;function qE(){if(x_)return uh;x_=1;var e=tr();uh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var s=this._keyIndices;if(r=String(r),!e.has(s,r)){var i=this._arr,o=i.length;return s[r]=o,i.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var s=this._keyIndices[r];if(n>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[s].priority+" New: "+n);this._arr[s].priority=n,this._decrease(s)},t.prototype._heapify=function(r){var n=this._arr,s=2*r,i=s+1,o=r;s<n.length&&(o=n[s].priority<n[o].priority?s:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,s=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<s));)this._swap(r,i),r=i},t.prototype._swap=function(r,n){var s=this._arr,i=this._keyIndices,o=s[r],a=s[n];s[r]=a,s[n]=o,i[a.key]=r,i[o.key]=n},uh}var dh,y_;function $E(){if(y_)return dh;y_=1;var e=tr(),t=qE();dh=n;var r=e.constant(1);function n(i,o,a,c){return s(i,String(o),a||r,c||function(u){return i.outEdges(u)})}function s(i,o,a,c){var u={},d=new t,f,p,h=function(b){var g=b.v!==f?b.v:b.w,w=u[g],v=a(b),x=p.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+v);x<w.distance&&(w.distance=x,w.predecessor=f,d.decrease(g,x))};for(i.nodes().forEach(function(b){var g=b===o?0:Number.POSITIVE_INFINITY;u[b]={distance:g},d.add(b,g)});d.size()>0&&(f=d.removeMin(),p=u[f],p.distance!==Number.POSITIVE_INFINITY);)c(f).forEach(h);return u}return dh}var fh,b_;function SO(){if(b_)return fh;b_=1;var e=$E(),t=tr();fh=r;function r(n,s,i){return t.transform(n.nodes(),function(o,a){o[a]=e(n,a,s,i)},{})}return fh}var ph,w_;function FE(){if(w_)return ph;w_=1;var e=tr();ph=t;function t(r){var n=0,s=[],i={},o=[];function a(c){var u=i[c]={onStack:!0,lowlink:n,index:n++};if(s.push(c),r.successors(c).forEach(function(p){e.has(i,p)?i[p].onStack&&(u.lowlink=Math.min(u.lowlink,i[p].index)):(a(p),u.lowlink=Math.min(u.lowlink,i[p].lowlink))}),u.lowlink===u.index){var d=[],f;do f=s.pop(),i[f].onStack=!1,d.push(f);while(c!==f);o.push(d)}}return r.nodes().forEach(function(c){e.has(i,c)||a(c)}),o}return ph}var hh,__;function kO(){if(__)return hh;__=1;var e=tr(),t=FE();hh=r;function r(n){return e.filter(t(n),function(s){return s.length>1||s.length===1&&n.hasEdge(s[0],s[0])})}return hh}var mh,j_;function NO(){if(j_)return mh;j_=1;var e=tr();mh=r;var t=e.constant(1);function r(s,i,o){return n(s,i||t,o||function(a){return s.outEdges(a)})}function n(s,i,o){var a={},c=s.nodes();return c.forEach(function(u){a[u]={},a[u][u]={distance:0},c.forEach(function(d){u!==d&&(a[u][d]={distance:Number.POSITIVE_INFINITY})}),o(u).forEach(function(d){var f=d.v===u?d.w:d.v,p=i(d);a[u][f]={distance:p,predecessor:u}})}),c.forEach(function(u){var d=a[u];c.forEach(function(f){var p=a[f];c.forEach(function(h){var b=p[u],g=d[h],w=p[h],v=b.distance+g.distance;v<w.distance&&(w.distance=v,w.predecessor=g.predecessor)})})}),a}return mh}var gh,S_;function BE(){if(S_)return gh;S_=1;var e=tr();gh=t,t.CycleException=r;function t(n){var s={},i={},o=[];function a(c){if(e.has(i,c))throw new r;e.has(s,c)||(i[c]=!0,s[c]=!0,e.each(n.predecessors(c),a),delete i[c],o.push(c))}if(e.each(n.sinks(),a),e.size(s)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,gh}var vh,k_;function EO(){if(k_)return vh;k_=1;var e=BE();vh=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return vh}var xh,N_;function HE(){if(N_)return xh;N_=1;var e=tr();xh=t;function t(n,s,i){e.isArray(s)||(s=[s]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],c={};return e.each(s,function(u){if(!n.hasNode(u))throw new Error("Graph does not have node: "+u);r(n,u,i==="post",c,o,a)}),a}function r(n,s,i,o,a,c){e.has(o,s)||(o[s]=!0,i||c.push(s),e.each(a(s),function(u){r(n,u,i,o,a,c)}),i&&c.push(s))}return xh}var yh,E_;function CO(){if(E_)return yh;E_=1;var e=HE();yh=t;function t(r,n){return e(r,n,"post")}return yh}var bh,C_;function RO(){if(C_)return bh;C_=1;var e=HE();bh=t;function t(r,n){return e(r,n,"pre")}return bh}var wh,R_;function TO(){if(R_)return wh;R_=1;var e=tr(),t=xx(),r=qE();wh=n;function n(s,i){var o=new t,a={},c=new r,u;function d(p){var h=p.v===u?p.w:p.v,b=c.priority(h);if(b!==void 0){var g=i(p);g<b&&(a[h]=u,c.decrease(h,g))}}if(s.nodeCount()===0)return o;e.each(s.nodes(),function(p){c.add(p,Number.POSITIVE_INFINITY),o.setNode(p)}),c.decrease(s.nodes()[0],0);for(var f=!1;c.size()>0;){if(u=c.removeMin(),e.has(a,u))o.setEdge(u,a[u]);else{if(f)throw new Error("Input graph is not connected: "+s);f=!0}s.nodeEdges(u).forEach(d)}return o}return wh}var _h,T_;function IO(){return T_||(T_=1,_h={components:jO(),dijkstra:$E(),dijkstraAll:SO(),findCycles:kO(),floydWarshall:NO(),isAcyclic:EO(),postorder:CO(),preorder:RO(),prim:TO(),tarjan:FE(),topsort:BE()}),_h}var jh,I_;function MO(){if(I_)return jh;I_=1;var e=wO();return jh={Graph:e.Graph,json:_O(),alg:IO(),version:e.version},jh}var Pl;if(typeof rx=="function")try{Pl=MO()}catch{}Pl||(Pl=window.graphlib);var xr=Pl,Sh,M_;function AO(){if(M_)return Sh;M_=1;var e=hE(),t=1,r=4;function n(s){return e(s,t|r)}return Sh=n,Sh}var kh,A_;function Ac(){if(A_)return kh;A_=1;var e=pi(),t=rn(),r=Sc(),n=er();function s(i,o,a){if(!n(a))return!1;var c=typeof o;return(c=="number"?t(a)&&r(o,a.length):c=="string"&&o in a)?e(a[o],i):!1}return kh=s,kh}var Nh,P_;function PO(){if(P_)return Nh;P_=1;var e=Mc(),t=pi(),r=Ac(),n=bs(),s=Object.prototype,i=s.hasOwnProperty,o=e(function(a,c){a=Object(a);var u=-1,d=c.length,f=d>2?c[2]:void 0;for(f&&r(c[0],c[1],f)&&(d=1);++u<d;)for(var p=c[u],h=n(p),b=-1,g=h.length;++b<g;){var w=h[b],v=a[w];(v===void 0||t(v,s[w])&&!i.call(a,w))&&(a[w]=p[w])}return a});return Nh=o,Nh}var Eh,D_;function DO(){if(D_)return Eh;D_=1;var e=nn(),t=rn(),r=Fn();function n(s){return function(i,o,a){var c=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(f){return u(c[f],f,c)}}var d=s(i,o,a);return d>-1?c[u?i[d]:d]:void 0}}return Eh=n,Eh}var Ch,O_;function OO(){if(O_)return Ch;O_=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Ch=t,Ch}var Rh,L_;function LO(){if(L_)return Rh;L_=1;var e=OO(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Rh=r,Rh}var Th,z_;function zO(){if(z_)return Th;z_=1;var e=LO(),t=er(),r=vi(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||o.test(u)?a(u.slice(2),f?2:8):s.test(u)?n:+u}return Th=c,Th}var Ih,q_;function WE(){if(q_)return Ih;q_=1;var e=zO(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return Ih=n,Ih}var Mh,$_;function qO(){if($_)return Mh;$_=1;var e=WE();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return Mh=t,Mh}var Ah,F_;function $O(){if(F_)return Ah;F_=1;var e=OE(),t=nn(),r=qO(),n=Math.max;function s(i,o,a){var c=i==null?0:i.length;if(!c)return-1;var u=a==null?0:r(a);return u<0&&(u=n(c+u,0)),e(i,t(o,3),u)}return Ah=s,Ah}var Ph,B_;function FO(){if(B_)return Ph;B_=1;var e=DO(),t=$O(),r=e(t);return Ph=r,Ph}var Dh,H_;function VE(){if(H_)return Dh;H_=1;var e=vx();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return Dh=t,Dh}var Oh,W_;function BO(){if(W_)return Oh;W_=1;var e=px(),t=mE(),r=bs();function n(s,i){return s==null?s:e(s,t(i),r)}return Oh=n,Oh}var Lh,V_;function HO(){if(V_)return Lh;V_=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Lh=e,Lh}var zh,U_;function WO(){if(U_)return zh;U_=1;var e=_c(),t=hx(),r=nn();function n(s,i){var o={};return i=r(i,3),t(s,function(a,c,u){e(o,c,i(a,c,u))}),o}return zh=n,zh}var qh,G_;function yx(){if(G_)return qh;G_=1;var e=vi();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var a=r[i],c=n(a);if(c!=null&&(u===void 0?c===c&&!e(c):s(c,u)))var u=c,d=a}return d}return qh=t,qh}var $h,K_;function VO(){if(K_)return $h;K_=1;function e(t,r){return t>r}return $h=e,$h}var Fh,Y_;function UO(){if(Y_)return Fh;Y_=1;var e=yx(),t=VO(),r=ws();function n(s){return s&&s.length?e(s,r,t):void 0}return Fh=n,Fh}var Bh,X_;function UE(){if(X_)return Bh;X_=1;var e=_c(),t=pi();function r(n,s,i){(i!==void 0&&!t(n[s],i)||i===void 0&&!(s in n))&&e(n,s,i)}return Bh=r,Bh}var Hh,Q_;function GO(){if(Q_)return Hh;Q_=1;var e=xs(),t=Ec(),r=Pr(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,a=i.hasOwnProperty,c=o.call(Object);function u(d){if(!r(d)||e(d)!=n)return!1;var f=t(d);if(f===null)return!0;var p=a.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return Hh=u,Hh}var Wh,Z_;function GE(){if(Z_)return Wh;Z_=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return Wh=e,Wh}var Vh,J_;function KO(){if(J_)return Vh;J_=1;var e=Yo(),t=bs();function r(n){return e(n,t(n))}return Vh=r,Vh}var Uh,e2;function YO(){if(e2)return Uh;e2=1;var e=UE(),t=rE(),r=dE(),n=nE(),s=pE(),i=Xo(),o=He(),a=LE(),c=mi(),u=Ko(),d=er(),f=GO(),p=Qo(),h=GE(),b=KO();function g(w,v,x,y,_,j,S){var N=h(w,x),k=h(v,x),C=S.get(k);if(C){e(w,x,C);return}var R=j?j(N,k,x+"",w,v,S):void 0,T=R===void 0;if(T){var L=o(k),$=!L&&c(k),E=!L&&!$&&p(k);R=k,L||$||E?o(N)?R=N:a(N)?R=n(N):$?(T=!1,R=t(k,!0)):E?(T=!1,R=r(k,!0)):R=[]:f(k)||i(k)?(R=N,i(N)?R=b(N):(!d(N)||u(N))&&(R=s(k))):T=!1}T&&(S.set(k,R),_(R,k,y,j,S),S.delete(k)),e(w,x,R)}return Uh=g,Uh}var Gh,t2;function XO(){if(t2)return Gh;t2=1;var e=wc(),t=UE(),r=px(),n=YO(),s=er(),i=bs(),o=GE();function a(c,u,d,f,p){c!==u&&r(u,function(h,b){if(p||(p=new e),s(h))n(c,u,b,d,a,f,p);else{var g=f?f(o(c,b),h,b+"",c,u,p):void 0;g===void 0&&(g=h),t(c,b,g)}},i)}return Gh=a,Gh}var Kh,r2;function QO(){if(r2)return Kh;r2=1;var e=Mc(),t=Ac();function r(n){return e(function(s,i){var o=-1,a=i.length,c=a>1?i[a-1]:void 0,u=a>2?i[2]:void 0;for(c=n.length>3&&typeof c=="function"?(a--,c):void 0,u&&t(i[0],i[1],u)&&(c=a<3?void 0:c,a=1),s=Object(s);++o<a;){var d=i[o];d&&n(s,d,o,c)}return s})}return Kh=r,Kh}var Yh,n2;function ZO(){if(n2)return Yh;n2=1;var e=XO(),t=QO(),r=t(function(n,s,i){e(n,s,i)});return Yh=r,Yh}var Xh,s2;function KE(){if(s2)return Xh;s2=1;function e(t,r){return t<r}return Xh=e,Xh}var Qh,i2;function JO(){if(i2)return Qh;i2=1;var e=yx(),t=KE(),r=ws();function n(s){return s&&s.length?e(s,r,t):void 0}return Qh=n,Qh}var Zh,o2;function e8(){if(o2)return Zh;o2=1;var e=yx(),t=nn(),r=KE();function n(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return Zh=n,Zh}var Jh,a2;function t8(){if(a2)return Jh;a2=1;var e=vr(),t=function(){return e.Date.now()};return Jh=t,Jh}var em,l2;function r8(){if(l2)return em;l2=1;var e=jc(),t=Tc(),r=Sc(),n=er(),s=Zo();function i(o,a,c,u){if(!n(o))return o;a=t(a,o);for(var d=-1,f=a.length,p=f-1,h=o;h!=null&&++d<f;){var b=s(a[d]),g=c;if(b==="__proto__"||b==="constructor"||b==="prototype")return o;if(d!=p){var w=h[b];g=u?u(w,b,h):void 0,g===void 0&&(g=n(w)?w:r(a[d+1])?[]:{})}e(h,b,g),h=h[b]}return o}return em=i,em}var tm,c2;function n8(){if(c2)return tm;c2=1;var e=Ic(),t=r8(),r=Tc();function n(s,i,o){for(var a=-1,c=i.length,u={};++a<c;){var d=i[a],f=e(s,d);o(f,d)&&t(u,r(d,s),f)}return u}return tm=n,tm}var rm,u2;function s8(){if(u2)return rm;u2=1;var e=n8(),t=NE();function r(n,s){return e(n,s,function(i,o){return t(n,o)})}return rm=r,rm}var nm,d2;function i8(){if(d2)return nm;d2=1;var e=VE(),t=PE(),r=DE();function n(s){return r(t(s,void 0,e),s+"")}return nm=n,nm}var sm,f2;function o8(){if(f2)return sm;f2=1;var e=s8(),t=i8(),r=t(function(n,s){return n==null?{}:e(n,s)});return sm=r,sm}var im,p2;function a8(){if(p2)return im;p2=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var a=-1,c=t(e((s-n)/(i||1)),0),u=Array(c);c--;)u[o?c:++a]=n,n+=i;return u}return im=r,im}var om,h2;function l8(){if(h2)return om;h2=1;var e=a8(),t=Ac(),r=WE();function n(s){return function(i,o,a){return a&&typeof a!="number"&&t(i,o,a)&&(o=a=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),a=a===void 0?i<o?1:-1:r(a),e(i,o,a,s)}}return om=n,om}var am,m2;function c8(){if(m2)return am;m2=1;var e=l8(),t=e();return am=t,am}var lm,g2;function u8(){if(g2)return lm;g2=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return lm=e,lm}var cm,v2;function d8(){if(v2)return cm;v2=1;var e=vi();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,a=e(r),c=n!==void 0,u=n===null,d=n===n,f=e(n);if(!u&&!f&&!a&&r>n||a&&c&&d&&!u&&!f||i&&c&&d||!s&&d||!o)return 1;if(!i&&!a&&!f&&r<n||f&&s&&o&&!i&&!a||u&&s&&o||!c&&o||!d)return-1}return 0}return cm=t,cm}var um,x2;function f8(){if(x2)return um;x2=1;var e=d8();function t(r,n,s){for(var i=-1,o=r.criteria,a=n.criteria,c=o.length,u=s.length;++i<c;){var d=e(o[i],a[i]);if(d){if(i>=u)return d;var f=s[i];return d*(f=="desc"?-1:1)}}return r.index-n.index}return um=t,um}var dm,y2;function p8(){if(y2)return dm;y2=1;var e=Rc(),t=Ic(),r=nn(),n=IE(),s=u8(),i=kc(),o=f8(),a=ws(),c=He();function u(d,f,p){f.length?f=e(f,function(g){return c(g)?function(w){return t(w,g.length===1?g[0]:g)}:g}):f=[a];var h=-1;f=e(f,i(r));var b=n(d,function(g,w,v){var x=e(f,function(y){return y(g)});return{criteria:x,index:++h,value:g}});return s(b,function(g,w){return o(g,w,p)})}return dm=u,dm}var fm,b2;function h8(){if(b2)return fm;b2=1;var e=vx(),t=p8(),r=Mc(),n=Ac(),s=r(function(i,o){if(i==null)return[];var a=o.length;return a>1&&n(i,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return fm=s,fm}var pm,w2;function m8(){if(w2)return pm;w2=1;var e=SE(),t=0;function r(n){var s=++t;return e(n)+s}return pm=r,pm}var hm,_2;function g8(){if(_2)return hm;_2=1;function e(t,r,n){for(var s=-1,i=t.length,o=r.length,a={};++s<i;){var c=s<o?r[s]:void 0;n(a,t[s],c)}return a}return hm=e,hm}var mm,j2;function v8(){if(j2)return mm;j2=1;var e=jc(),t=g8();function r(n,s){return t(n||[],s||[],e)}return mm=r,mm}var Dl;if(typeof rx=="function")try{Dl={cloneDeep:AO(),constant:fx(),defaults:PO(),each:vE(),filter:CE(),find:FO(),flatten:VE(),forEach:gE(),forIn:BO(),has:RE(),isUndefined:TE(),last:HO(),map:ME(),mapValues:WO(),max:UO(),merge:ZO(),min:JO(),minBy:e8(),now:t8(),pick:o8(),range:c8(),reduce:AE(),sortBy:h8(),uniqueId:m8(),values:zE(),zipObject:v8()}}catch{}Dl||(Dl=window._);var Ae=Dl,x8=Pc;function Pc(){var e={};e._next=e._prev=e,this._sentinel=e}Pc.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return YE(t),t};Pc.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&YE(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Pc.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,y8)),r=r._prev;return"["+e.join(", ")+"]"};function YE(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function y8(e,t){if(e!=="_next"&&e!=="_prev")return t}var Wr=Ae,b8=xr.Graph,w8=x8,_8=S8,j8=Wr.constant(1);function S8(e,t){if(e.nodeCount()<=1)return[];var r=N8(e,t||j8),n=k8(r.graph,r.buckets,r.zeroIdx);return Wr.flatten(Wr.map(n,function(s){return e.outEdges(s.v,s.w)}),!0)}function k8(e,t,r){for(var n=[],s=t[t.length-1],i=t[0],o;e.nodeCount();){for(;o=i.dequeue();)gm(e,t,r,o);for(;o=s.dequeue();)gm(e,t,r,o);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){n=n.concat(gm(e,t,r,o,!0));break}}}return n}function gm(e,t,r,n,s){var i=s?[]:void 0;return Wr.forEach(e.inEdges(n.v),function(o){var a=e.edge(o),c=e.node(o.v);s&&i.push({v:o.v,w:o.w}),c.out-=a,Og(t,r,c)}),Wr.forEach(e.outEdges(n.v),function(o){var a=e.edge(o),c=o.w,u=e.node(c);u.in-=a,Og(t,r,u)}),e.removeNode(n.v),i}function N8(e,t){var r=new b8,n=0,s=0;Wr.forEach(e.nodes(),function(a){r.setNode(a,{v:a,in:0,out:0})}),Wr.forEach(e.edges(),function(a){var c=r.edge(a.v,a.w)||0,u=t(a),d=c+u;r.setEdge(a.v,a.w,d),s=Math.max(s,r.node(a.v).out+=u),n=Math.max(n,r.node(a.w).in+=u)});var i=Wr.range(s+n+3).map(function(){return new w8}),o=n+1;return Wr.forEach(r.nodes(),function(a){Og(i,o,r.node(a))}),{graph:r,buckets:i,zeroIdx:o}}function Og(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var ss=Ae,E8=_8,C8={run:R8,undo:I8};function R8(e){var t=e.graph().acyclicer==="greedy"?E8(e,r(e)):T8(e);ss.forEach(t,function(n){var s=e.edge(n);e.removeEdge(n),s.forwardName=n.name,s.reversed=!0,e.setEdge(n.w,n.v,s,ss.uniqueId("rev"))});function r(n){return function(s){return n.edge(s).weight}}}function T8(e){var t=[],r={},n={};function s(i){ss.has(n,i)||(n[i]=!0,r[i]=!0,ss.forEach(e.outEdges(i),function(o){ss.has(r,o.w)?t.push(o):s(o.w)}),delete r[i])}return ss.forEach(e.nodes(),s),t}function I8(e){ss.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}var ve=Ae,XE=xr.Graph,Ct={addDummyNode:QE,simplify:M8,asNonCompoundGraph:A8,successorWeights:P8,predecessorWeights:D8,intersectRect:O8,buildLayerMatrix:L8,normalizeRanks:z8,removeEmptyRanks:q8,addBorderNode:$8,maxRank:ZE,partition:F8,time:B8,notime:H8};function QE(e,t,r,n){var s;do s=ve.uniqueId(n);while(e.hasNode(s));return r.dummy=t,e.setNode(s,r),s}function M8(e){var t=new XE().setGraph(e.graph());return ve.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))}),ve.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},s=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+s.weight,minlen:Math.max(n.minlen,s.minlen)})}),t}function A8(e){var t=new XE({multigraph:e.isMultigraph()}).setGraph(e.graph());return ve.forEach(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),ve.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t}function P8(e){var t=ve.map(e.nodes(),function(r){var n={};return ve.forEach(e.outEdges(r),function(s){n[s.w]=(n[s.w]||0)+e.edge(s).weight}),n});return ve.zipObject(e.nodes(),t)}function D8(e){var t=ve.map(e.nodes(),function(r){var n={};return ve.forEach(e.inEdges(r),function(s){n[s.v]=(n[s.v]||0)+e.edge(s).weight}),n});return ve.zipObject(e.nodes(),t)}function O8(e,t){var r=e.x,n=e.y,s=t.x-r,i=t.y-n,o=e.width/2,a=e.height/2;if(!s&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var c,u;return Math.abs(i)*o>Math.abs(s)*a?(i<0&&(a=-a),c=a*s/i,u=a):(s<0&&(o=-o),c=o,u=o*i/s),{x:r+c,y:n+u}}function L8(e){var t=ve.map(ve.range(ZE(e)+1),function(){return[]});return ve.forEach(e.nodes(),function(r){var n=e.node(r),s=n.rank;ve.isUndefined(s)||(t[s][n.order]=r)}),t}function z8(e){var t=ve.min(ve.map(e.nodes(),function(r){return e.node(r).rank}));ve.forEach(e.nodes(),function(r){var n=e.node(r);ve.has(n,"rank")&&(n.rank-=t)})}function q8(e){var t=ve.min(ve.map(e.nodes(),function(i){return e.node(i).rank})),r=[];ve.forEach(e.nodes(),function(i){var o=e.node(i).rank-t;r[o]||(r[o]=[]),r[o].push(i)});var n=0,s=e.graph().nodeRankFactor;ve.forEach(r,function(i,o){ve.isUndefined(i)&&o%s!==0?--n:n&&ve.forEach(i,function(a){e.node(a).rank+=n})})}function $8(e,t,r,n){var s={width:0,height:0};return arguments.length>=4&&(s.rank=r,s.order=n),QE(e,"border",s,t)}function ZE(e){return ve.max(ve.map(e.nodes(),function(t){var r=e.node(t).rank;if(!ve.isUndefined(r))return r}))}function F8(e,t){var r={lhs:[],rhs:[]};return ve.forEach(e,function(n){t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function B8(e,t){var r=ve.now();try{return t()}finally{console.log(e+" time: "+(ve.now()-r)+"ms")}}function H8(e,t){return t()}var JE=Ae,W8=Ct,V8={run:U8,undo:K8};function U8(e){e.graph().dummyChains=[],JE.forEach(e.edges(),function(t){G8(e,t)})}function G8(e,t){var r=t.v,n=e.node(r).rank,s=t.w,i=e.node(s).rank,o=t.name,a=e.edge(t),c=a.labelRank;if(i!==n+1){e.removeEdge(t);var u,d,f;for(f=0,++n;n<i;++f,++n)a.points=[],d={width:0,height:0,edgeLabel:a,edgeObj:t,rank:n},u=W8.addDummyNode(e,"edge",d,"_d"),n===c&&(d.width=a.width,d.height=a.height,d.dummy="edge-label",d.labelpos=a.labelpos),e.setEdge(r,u,{weight:a.weight},o),f===0&&e.graph().dummyChains.push(u),r=u;e.setEdge(r,s,{weight:a.weight},o)}}function K8(e){JE.forEach(e.graph().dummyChains,function(t){var r=e.node(t),n=r.edgeLabel,s;for(e.setEdge(r.edgeObj,n);r.dummy;)s=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=s,r=e.node(t)})}var Ta=Ae,Dc={longestPath:Y8,slack:X8};function Y8(e){var t={};function r(n){var s=e.node(n);if(Ta.has(t,n))return s.rank;t[n]=!0;var i=Ta.min(Ta.map(e.outEdges(n),function(o){return r(o.w)-e.edge(o).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),s.rank=i}Ta.forEach(e.sources(),r)}function X8(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Ol=Ae,Q8=xr.Graph,Ll=Dc.slack,eC=Z8;function Z8(e){var t=new Q8({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var s,i;J8(t,e)<n;)s=eL(t,e),i=t.hasNode(s.v)?Ll(e,s):-Ll(e,s),tL(t,e,i);return t}function J8(e,t){function r(n){Ol.forEach(t.nodeEdges(n),function(s){var i=s.v,o=n===i?s.w:i;!e.hasNode(o)&&!Ll(t,s)&&(e.setNode(o,{}),e.setEdge(n,o,{}),r(o))})}return Ol.forEach(e.nodes(),r),e.nodeCount()}function eL(e,t){return Ol.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return Ll(t,r)})}function tL(e,t,r){Ol.forEach(e.nodes(),function(n){t.node(n).rank+=r})}var en=Ae,rL=eC,nL=Dc.slack,sL=Dc.longestPath,iL=xr.alg.preorder,oL=xr.alg.postorder,aL=Ct.simplify,lL=_s;_s.initLowLimValues=wx;_s.initCutValues=bx;_s.calcCutValue=tC;_s.leaveEdge=nC;_s.enterEdge=sC;_s.exchangeEdges=iC;function _s(e){e=aL(e),sL(e);var t=rL(e);wx(t),bx(t,e);for(var r,n;r=nC(t);)n=sC(t,e,r),iC(t,e,r,n)}function bx(e,t){var r=oL(e,e.nodes());r=r.slice(0,r.length-1),en.forEach(r,function(n){cL(e,t,n)})}function cL(e,t,r){var n=e.node(r),s=n.parent;e.edge(r,s).cutvalue=tC(e,t,r)}function tC(e,t,r){var n=e.node(r),s=n.parent,i=!0,o=t.edge(r,s),a=0;return o||(i=!1,o=t.edge(s,r)),a=o.weight,en.forEach(t.nodeEdges(r),function(c){var u=c.v===r,d=u?c.w:c.v;if(d!==s){var f=u===i,p=t.edge(c).weight;if(a+=f?p:-p,dL(e,r,d)){var h=e.edge(r,d).cutvalue;a+=f?-h:h}}}),a}function wx(e,t){arguments.length<2&&(t=e.nodes()[0]),rC(e,{},1,t)}function rC(e,t,r,n,s){var i=r,o=e.node(n);return t[n]=!0,en.forEach(e.neighbors(n),function(a){en.has(t,a)||(r=rC(e,t,r,a,n))}),o.low=i,o.lim=r++,s?o.parent=s:delete o.parent,r}function nC(e){return en.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function sC(e,t,r){var n=r.v,s=r.w;t.hasEdge(n,s)||(n=r.w,s=r.v);var i=e.node(n),o=e.node(s),a=i,c=!1;i.lim>o.lim&&(a=o,c=!0);var u=en.filter(t.edges(),function(d){return c===S2(e,e.node(d.v),a)&&c!==S2(e,e.node(d.w),a)});return en.minBy(u,function(d){return nL(t,d)})}function iC(e,t,r,n){var s=r.v,i=r.w;e.removeEdge(s,i),e.setEdge(n.v,n.w,{}),wx(e),bx(e,t),uL(e,t)}function uL(e,t){var r=en.find(e.nodes(),function(s){return!t.node(s).parent}),n=iL(e,r);n=n.slice(1),en.forEach(n,function(s){var i=e.node(s).parent,o=t.edge(s,i),a=!1;o||(o=t.edge(i,s),a=!0),t.node(s).rank=t.node(i).rank+(a?o.minlen:-o.minlen)})}function dL(e,t,r){return e.hasEdge(t,r)}function S2(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}var fL=Dc,oC=fL.longestPath,pL=eC,hL=lL,mL=gL;function gL(e){switch(e.graph().ranker){case"network-simplex":k2(e);break;case"tight-tree":xL(e);break;case"longest-path":vL(e);break;default:k2(e)}}var vL=oC;function xL(e){oC(e),pL(e)}function k2(e){hL(e)}var Lg=Ae,yL=bL;function bL(e){var t=_L(e);Lg.forEach(e.graph().dummyChains,function(r){for(var n=e.node(r),s=n.edgeObj,i=wL(e,t,s.v,s.w),o=i.path,a=i.lca,c=0,u=o[c],d=!0;r!==s.w;){if(n=e.node(r),d){for(;(u=o[c])!==a&&e.node(u).maxRank<n.rank;)c++;u===a&&(d=!1)}if(!d){for(;c<o.length-1&&e.node(u=o[c+1]).minRank<=n.rank;)c++;u=o[c]}e.setParent(r,u),r=e.successors(r)[0]}})}function wL(e,t,r,n){var s=[],i=[],o=Math.min(t[r].low,t[n].low),a=Math.max(t[r].lim,t[n].lim),c,u;c=r;do c=e.parent(c),s.push(c);while(c&&(t[c].low>o||a>t[c].lim));for(u=c,c=n;(c=e.parent(c))!==u;)i.push(c);return{path:s.concat(i.reverse()),lca:u}}function _L(e){var t={},r=0;function n(s){var i=r;Lg.forEach(e.children(s),n),t[s]={low:i,lim:r++}}return Lg.forEach(e.children(),n),t}var Vr=Ae,zg=Ct,jL={run:SL,cleanup:EL};function SL(e){var t=zg.addDummyNode(e,"root",{},"_root"),r=kL(e),n=Vr.max(Vr.values(r))-1,s=2*n+1;e.graph().nestingRoot=t,Vr.forEach(e.edges(),function(o){e.edge(o).minlen*=s});var i=NL(e)+1;Vr.forEach(e.children(),function(o){aC(e,t,s,i,n,r,o)}),e.graph().nodeRankFactor=s}function aC(e,t,r,n,s,i,o){var a=e.children(o);if(!a.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:r});return}var c=zg.addBorderNode(e,"_bt"),u=zg.addBorderNode(e,"_bb"),d=e.node(o);e.setParent(c,o),d.borderTop=c,e.setParent(u,o),d.borderBottom=u,Vr.forEach(a,function(f){aC(e,t,r,n,s,i,f);var p=e.node(f),h=p.borderTop?p.borderTop:f,b=p.borderBottom?p.borderBottom:f,g=p.borderTop?n:2*n,w=h!==b?1:s-i[o]+1;e.setEdge(c,h,{weight:g,minlen:w,nestingEdge:!0}),e.setEdge(b,u,{weight:g,minlen:w,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,c,{weight:0,minlen:s+i[o]})}function kL(e){var t={};function r(n,s){var i=e.children(n);i&&i.length&&Vr.forEach(i,function(o){r(o,s+1)}),t[n]=s}return Vr.forEach(e.children(),function(n){r(n,1)}),t}function NL(e){return Vr.reduce(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function EL(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Vr.forEach(e.edges(),function(r){var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}var vm=Ae,CL=Ct,RL=TL;function TL(e){function t(r){var n=e.children(r),s=e.node(r);if(n.length&&vm.forEach(n,t),vm.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var i=s.minRank,o=s.maxRank+1;i<o;++i)N2(e,"borderLeft","_bl",r,s,i),N2(e,"borderRight","_br",r,s,i)}}vm.forEach(e.children(),t)}function N2(e,t,r,n,s,i){var o={width:0,height:0,rank:i,borderType:t},a=s[t][i-1],c=CL.addDummyNode(e,"border",o,r);s[t][i]=c,e.setParent(c,n),a&&e.setEdge(a,c,{weight:1})}var Er=Ae,IL={adjust:ML,undo:AL};function ML(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&lC(e)}function AL(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&PL(e),(t==="lr"||t==="rl")&&(DL(e),lC(e))}function lC(e){Er.forEach(e.nodes(),function(t){E2(e.node(t))}),Er.forEach(e.edges(),function(t){E2(e.edge(t))})}function E2(e){var t=e.width;e.width=e.height,e.height=t}function PL(e){Er.forEach(e.nodes(),function(t){xm(e.node(t))}),Er.forEach(e.edges(),function(t){var r=e.edge(t);Er.forEach(r.points,xm),Er.has(r,"y")&&xm(r)})}function xm(e){e.y=-e.y}function DL(e){Er.forEach(e.nodes(),function(t){ym(e.node(t))}),Er.forEach(e.edges(),function(t){var r=e.edge(t);Er.forEach(r.points,ym),Er.has(r,"x")&&ym(r)})}function ym(e){var t=e.x;e.x=e.y,e.y=t}var Or=Ae,OL=LL;function LL(e){var t={},r=Or.filter(e.nodes(),function(a){return!e.children(a).length}),n=Or.max(Or.map(r,function(a){return e.node(a).rank})),s=Or.map(Or.range(n+1),function(){return[]});function i(a){if(!Or.has(t,a)){t[a]=!0;var c=e.node(a);s[c.rank].push(a),Or.forEach(e.successors(a),i)}}var o=Or.sortBy(r,function(a){return e.node(a).rank});return Or.forEach(o,i),s}var cn=Ae,zL=qL;function qL(e,t){for(var r=0,n=1;n<t.length;++n)r+=$L(e,t[n-1],t[n]);return r}function $L(e,t,r){for(var n=cn.zipObject(r,cn.map(r,function(u,d){return d})),s=cn.flatten(cn.map(t,function(u){return cn.sortBy(cn.map(e.outEdges(u),function(d){return{pos:n[d.w],weight:e.edge(d).weight}}),"pos")}),!0),i=1;i<r.length;)i<<=1;var o=2*i-1;i-=1;var a=cn.map(new Array(o),function(){return 0}),c=0;return cn.forEach(s.forEach(function(u){var d=u.pos+i;a[d]+=u.weight;for(var f=0;d>0;)d%2&&(f+=a[d+1]),d=d-1>>1,a[d]+=u.weight;c+=u.weight*f})),c}var C2=Ae,FL=BL;function BL(e,t){return C2.map(t,function(r){var n=e.inEdges(r);if(n.length){var s=C2.reduce(n,function(i,o){var a=e.edge(o),c=e.node(o.v);return{sum:i.sum+a.weight*c.order,weight:i.weight+a.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}var At=Ae,HL=WL;function WL(e,t){var r={};At.forEach(e,function(s,i){var o=r[s.v]={indegree:0,in:[],out:[],vs:[s.v],i};At.isUndefined(s.barycenter)||(o.barycenter=s.barycenter,o.weight=s.weight)}),At.forEach(t.edges(),function(s){var i=r[s.v],o=r[s.w];!At.isUndefined(i)&&!At.isUndefined(o)&&(o.indegree++,i.out.push(r[s.w]))});var n=At.filter(r,function(s){return!s.indegree});return VL(n)}function VL(e){var t=[];function r(i){return function(o){o.merged||(At.isUndefined(o.barycenter)||At.isUndefined(i.barycenter)||o.barycenter>=i.barycenter)&&UL(i,o)}}function n(i){return function(o){o.in.push(i),--o.indegree===0&&e.push(o)}}for(;e.length;){var s=e.pop();t.push(s),At.forEach(s.in.reverse(),r(s)),At.forEach(s.out,n(s))}return At.map(At.filter(t,function(i){return!i.merged}),function(i){return At.pick(i,["vs","i","barycenter","weight"])})}function UL(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}var Yi=Ae,GL=Ct,KL=YL;function YL(e,t){var r=GL.partition(e,function(d){return Yi.has(d,"barycenter")}),n=r.lhs,s=Yi.sortBy(r.rhs,function(d){return-d.i}),i=[],o=0,a=0,c=0;n.sort(XL(!!t)),c=R2(i,s,c),Yi.forEach(n,function(d){c+=d.vs.length,i.push(d.vs),o+=d.barycenter*d.weight,a+=d.weight,c=R2(i,s,c)});var u={vs:Yi.flatten(i,!0)};return a&&(u.barycenter=o/a,u.weight=a),u}function R2(e,t,r){for(var n;t.length&&(n=Yi.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}function XL(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}var wn=Ae,QL=FL,ZL=HL,JL=KL,ez=cC;function cC(e,t,r,n){var s=e.children(t),i=e.node(t),o=i?i.borderLeft:void 0,a=i?i.borderRight:void 0,c={};o&&(s=wn.filter(s,function(b){return b!==o&&b!==a}));var u=QL(e,s);wn.forEach(u,function(b){if(e.children(b.v).length){var g=cC(e,b.v,r,n);c[b.v]=g,wn.has(g,"barycenter")&&rz(b,g)}});var d=ZL(u,r);tz(d,c);var f=JL(d,n);if(o&&(f.vs=wn.flatten([o,f.vs,a],!0),e.predecessors(o).length)){var p=e.node(e.predecessors(o)[0]),h=e.node(e.predecessors(a)[0]);wn.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+h.order)/(f.weight+2),f.weight+=2}return f}function tz(e,t){wn.forEach(e,function(r){r.vs=wn.flatten(r.vs.map(function(n){return t[n]?t[n].vs:n}),!0)})}function rz(e,t){wn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Xi=Ae,nz=xr.Graph,sz=iz;function iz(e,t,r){var n=oz(e),s=new nz({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(i){return e.node(i)});return Xi.forEach(e.nodes(),function(i){var o=e.node(i),a=e.parent(i);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(s.setNode(i),s.setParent(i,a||n),Xi.forEach(e[r](i),function(c){var u=c.v===i?c.w:c.v,d=s.edge(u,i),f=Xi.isUndefined(d)?0:d.weight;s.setEdge(u,i,{weight:e.edge(c).weight+f})}),Xi.has(o,"minRank")&&s.setNode(i,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),s}function oz(e){for(var t;e.hasNode(t=Xi.uniqueId("_root")););return t}var az=Ae,lz=cz;function cz(e,t,r){var n={},s;az.forEach(r,function(i){for(var o=e.parent(i),a,c;o;){if(a=e.parent(o),a?(c=n[a],n[a]=o):(c=s,s=o),c&&c!==o){t.setEdge(c,o);return}o=a}})}var Pn=Ae,uz=OL,dz=zL,fz=ez,pz=sz,hz=lz,mz=xr.Graph,T2=Ct,gz=vz;function vz(e){var t=T2.maxRank(e),r=I2(e,Pn.range(1,t+1),"inEdges"),n=I2(e,Pn.range(t-1,-1,-1),"outEdges"),s=uz(e);M2(e,s);for(var i=Number.POSITIVE_INFINITY,o,a=0,c=0;c<4;++a,++c){xz(a%2?r:n,a%4>=2),s=T2.buildLayerMatrix(e);var u=dz(e,s);u<i&&(c=0,o=Pn.cloneDeep(s),i=u)}M2(e,o)}function I2(e,t,r){return Pn.map(t,function(n){return pz(e,n,r)})}function xz(e,t){var r=new mz;Pn.forEach(e,function(n){var s=n.graph().root,i=fz(n,s,r,t);Pn.forEach(i.vs,function(o,a){n.node(o).order=a}),hz(n,r,i.vs)})}function M2(e,t){Pn.forEach(t,function(r){Pn.forEach(r,function(n,s){e.node(n).order=s})})}var oe=Ae,yz=xr.Graph,bz=Ct,wz={positionX:Mz};function _z(e,t){var r={};function n(s,i){var o=0,a=0,c=s.length,u=oe.last(i);return oe.forEach(i,function(d,f){var p=Sz(e,d),h=p?e.node(p).order:c;(p||d===u)&&(oe.forEach(i.slice(a,f+1),function(b){oe.forEach(e.predecessors(b),function(g){var w=e.node(g),v=w.order;(v<o||h<v)&&!(w.dummy&&e.node(b).dummy)&&uC(r,g,b)})}),a=f+1,o=h)}),i}return oe.reduce(t,n),r}function jz(e,t){var r={};function n(i,o,a,c,u){var d;oe.forEach(oe.range(o,a),function(f){d=i[f],e.node(d).dummy&&oe.forEach(e.predecessors(d),function(p){var h=e.node(p);h.dummy&&(h.order<c||h.order>u)&&uC(r,p,d)})})}function s(i,o){var a=-1,c,u=0;return oe.forEach(o,function(d,f){if(e.node(d).dummy==="border"){var p=e.predecessors(d);p.length&&(c=e.node(p[0]).order,n(o,u,f,a,c),u=f,a=c)}n(o,u,o.length,c,i.length)}),o}return oe.reduce(t,s),r}function Sz(e,t){if(e.node(t).dummy)return oe.find(e.predecessors(t),function(r){return e.node(r).dummy})}function uC(e,t,r){if(t>r){var n=t;t=r,r=n}var s=e[t];s||(e[t]=s={}),s[r]=!0}function kz(e,t,r){if(t>r){var n=t;t=r,r=n}return oe.has(e[t],r)}function Nz(e,t,r,n){var s={},i={},o={};return oe.forEach(t,function(a){oe.forEach(a,function(c,u){s[c]=c,i[c]=c,o[c]=u})}),oe.forEach(t,function(a){var c=-1;oe.forEach(a,function(u){var d=n(u);if(d.length){d=oe.sortBy(d,function(g){return o[g]});for(var f=(d.length-1)/2,p=Math.floor(f),h=Math.ceil(f);p<=h;++p){var b=d[p];i[u]===u&&c<o[b]&&!kz(r,u,b)&&(i[b]=u,i[u]=s[u]=s[b],c=o[b])}}})}),{root:s,align:i}}function Ez(e,t,r,n,s){var i={},o=Cz(e,t,r,s),a=s?"borderLeft":"borderRight";function c(f,p){for(var h=o.nodes(),b=h.pop(),g={};b;)g[b]?f(b):(g[b]=!0,h.push(b),h=h.concat(p(b))),b=h.pop()}function u(f){i[f]=o.inEdges(f).reduce(function(p,h){return Math.max(p,i[h.v]+o.edge(h))},0)}function d(f){var p=o.outEdges(f).reduce(function(b,g){return Math.min(b,i[g.w]-o.edge(g))},Number.POSITIVE_INFINITY),h=e.node(f);p!==Number.POSITIVE_INFINITY&&h.borderType!==a&&(i[f]=Math.max(i[f],p))}return c(u,o.predecessors.bind(o)),c(d,o.successors.bind(o)),oe.forEach(n,function(f){i[f]=i[r[f]]}),i}function Cz(e,t,r,n){var s=new yz,i=e.graph(),o=Az(i.nodesep,i.edgesep,n);return oe.forEach(t,function(a){var c;oe.forEach(a,function(u){var d=r[u];if(s.setNode(d),c){var f=r[c],p=s.edge(f,d);s.setEdge(f,d,Math.max(o(e,u,c),p||0))}c=u})}),s}function Rz(e,t){return oe.minBy(oe.values(t),function(r){var n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return oe.forIn(r,function(i,o){var a=Pz(e,o)/2;n=Math.max(i+a,n),s=Math.min(i-a,s)}),n-s})}function Tz(e,t){var r=oe.values(t),n=oe.min(r),s=oe.max(r);oe.forEach(["u","d"],function(i){oe.forEach(["l","r"],function(o){var a=i+o,c=e[a],u;if(c!==t){var d=oe.values(c);u=o==="l"?n-oe.min(d):s-oe.max(d),u&&(e[a]=oe.mapValues(c,function(f){return f+u}))}})})}function Iz(e,t){return oe.mapValues(e.ul,function(r,n){if(t)return e[t.toLowerCase()][n];var s=oe.sortBy(oe.map(e,n));return(s[1]+s[2])/2})}function Mz(e){var t=bz.buildLayerMatrix(e),r=oe.merge(_z(e,t),jz(e,t)),n={},s;oe.forEach(["u","d"],function(o){s=o==="u"?t:oe.values(t).reverse(),oe.forEach(["l","r"],function(a){a==="r"&&(s=oe.map(s,function(f){return oe.values(f).reverse()}));var c=(o==="u"?e.predecessors:e.successors).bind(e),u=Nz(e,s,r,c),d=Ez(e,s,u.root,u.align,a==="r");a==="r"&&(d=oe.mapValues(d,function(f){return-f})),n[o+a]=d})});var i=Rz(e,n);return Tz(n,i),Iz(n,e.graph().align)}function Az(e,t,r){return function(n,s,i){var o=n.node(s),a=n.node(i),c=0,u;if(c+=o.width/2,oe.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=-o.width/2;break;case"r":u=o.width/2;break}if(u&&(c+=r?u:-u),u=0,c+=(o.dummy?t:e)/2,c+=(a.dummy?t:e)/2,c+=a.width/2,oe.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(c+=r?u:-u),u=0,c}}function Pz(e,t){return e.node(t).width}var Qi=Ae,dC=Ct,Dz=wz.positionX,Oz=Lz;function Lz(e){e=dC.asNonCompoundGraph(e),zz(e),Qi.forEach(Dz(e),function(t,r){e.node(r).x=t})}function zz(e){var t=dC.buildLayerMatrix(e),r=e.graph().ranksep,n=0;Qi.forEach(t,function(s){var i=Qi.max(Qi.map(s,function(o){return e.node(o).height}));Qi.forEach(s,function(o){e.node(o).y=n+i/2}),n+=i+r})}var le=Ae,A2=C8,P2=V8,qz=mL,$z=Ct.normalizeRanks,Fz=yL,Bz=Ct.removeEmptyRanks,D2=jL,Hz=RL,O2=IL,Wz=gz,Vz=Oz,Ln=Ct,Uz=xr.Graph,Gz=Kz;function Kz(e,t){var r=t&&t.debugTiming?Ln.time:Ln.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return iq(e)});r("  runLayout",function(){Yz(n,r)}),r("  updateInputGraph",function(){Xz(e,n)})})}function Yz(e,t){t("    makeSpaceForEdgeLabels",function(){oq(e)}),t("    removeSelfEdges",function(){mq(e)}),t("    acyclic",function(){A2.run(e)}),t("    nestingGraph.run",function(){D2.run(e)}),t("    rank",function(){qz(Ln.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){aq(e)}),t("    removeEmptyRanks",function(){Bz(e)}),t("    nestingGraph.cleanup",function(){D2.cleanup(e)}),t("    normalizeRanks",function(){$z(e)}),t("    assignRankMinMax",function(){lq(e)}),t("    removeEdgeLabelProxies",function(){cq(e)}),t("    normalize.run",function(){P2.run(e)}),t("    parentDummyChains",function(){Fz(e)}),t("    addBorderSegments",function(){Hz(e)}),t("    order",function(){Wz(e)}),t("    insertSelfEdges",function(){gq(e)}),t("    adjustCoordinateSystem",function(){O2.adjust(e)}),t("    position",function(){Vz(e)}),t("    positionSelfEdges",function(){vq(e)}),t("    removeBorderNodes",function(){hq(e)}),t("    normalize.undo",function(){P2.undo(e)}),t("    fixupEdgeLabelCoords",function(){fq(e)}),t("    undoCoordinateSystem",function(){O2.undo(e)}),t("    translateGraph",function(){uq(e)}),t("    assignNodeIntersects",function(){dq(e)}),t("    reversePoints",function(){pq(e)}),t("    acyclic.undo",function(){A2.undo(e)})}function Xz(e,t){le.forEach(e.nodes(),function(r){var n=e.node(r),s=t.node(r);n&&(n.x=s.x,n.y=s.y,t.children(r).length&&(n.width=s.width,n.height=s.height))}),le.forEach(e.edges(),function(r){var n=e.edge(r),s=t.edge(r);n.points=s.points,le.has(s,"x")&&(n.x=s.x,n.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var Qz=["nodesep","edgesep","ranksep","marginx","marginy"],Zz={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Jz=["acyclicer","ranker","rankdir","align"],eq=["width","height"],tq={width:0,height:0},rq=["minlen","weight","width","height","labeloffset"],nq={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},sq=["labelpos"];function iq(e){var t=new Uz({multigraph:!0,compound:!0}),r=wm(e.graph());return t.setGraph(le.merge({},Zz,bm(r,Qz),le.pick(r,Jz))),le.forEach(e.nodes(),function(n){var s=wm(e.node(n));t.setNode(n,le.defaults(bm(s,eq),tq)),t.setParent(n,e.parent(n))}),le.forEach(e.edges(),function(n){var s=wm(e.edge(n));t.setEdge(n,le.merge({},nq,bm(s,rq),le.pick(s,sq)))}),t}function oq(e){var t=e.graph();t.ranksep/=2,le.forEach(e.edges(),function(r){var n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function aq(e){le.forEach(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),s=e.node(t.w),i={rank:(s.rank-n.rank)/2+n.rank,e:t};Ln.addDummyNode(e,"edge-proxy",i,"_ep")}})}function lq(e){var t=0;le.forEach(e.nodes(),function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=le.max(t,n.maxRank))}),e.graph().maxRank=t}function cq(e){le.forEach(e.nodes(),function(t){var r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function uq(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,s=0,i=e.graph(),o=i.marginx||0,a=i.marginy||0;function c(u){var d=u.x,f=u.y,p=u.width,h=u.height;t=Math.min(t,d-p/2),r=Math.max(r,d+p/2),n=Math.min(n,f-h/2),s=Math.max(s,f+h/2)}le.forEach(e.nodes(),function(u){c(e.node(u))}),le.forEach(e.edges(),function(u){var d=e.edge(u);le.has(d,"x")&&c(d)}),t-=o,n-=a,le.forEach(e.nodes(),function(u){var d=e.node(u);d.x-=t,d.y-=n}),le.forEach(e.edges(),function(u){var d=e.edge(u);le.forEach(d.points,function(f){f.x-=t,f.y-=n}),le.has(d,"x")&&(d.x-=t),le.has(d,"y")&&(d.y-=n)}),i.width=r-t+o,i.height=s-n+a}function dq(e){le.forEach(e.edges(),function(t){var r=e.edge(t),n=e.node(t.v),s=e.node(t.w),i,o;r.points?(i=r.points[0],o=r.points[r.points.length-1]):(r.points=[],i=s,o=n),r.points.unshift(Ln.intersectRect(n,i)),r.points.push(Ln.intersectRect(s,o))})}function fq(e){le.forEach(e.edges(),function(t){var r=e.edge(t);if(le.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function pq(e){le.forEach(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}function hq(e){le.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),s=e.node(r.borderBottom),i=e.node(le.last(r.borderLeft)),o=e.node(le.last(r.borderRight));r.width=Math.abs(o.x-i.x),r.height=Math.abs(s.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}}),le.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function mq(e){le.forEach(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function gq(e){var t=Ln.buildLayerMatrix(e);le.forEach(t,function(r){var n=0;le.forEach(r,function(s,i){var o=e.node(s);o.order=i+n,le.forEach(o.selfEdges,function(a){Ln.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:i+ ++n,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function vq(e){le.forEach(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),s=n.x+n.width/2,i=n.y,o=r.x-s,a=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:s+2*o/3,y:i-a},{x:s+5*o/6,y:i-a},{x:s+o,y:i},{x:s+5*o/6,y:i+a},{x:s+2*o/3,y:i+a}],r.label.x=r.x,r.label.y=r.y}})}function bm(e,t){return le.mapValues(le.pick(e,t),Number)}function wm(e){var t={};return le.forEach(e,function(r,n){t[n.toLowerCase()]=r}),t}var Ia=Ae,xq=Ct,yq=xr.Graph,bq={debugOrdering:wq};function wq(e){var t=xq.buildLayerMatrix(e),r=new yq({compound:!0,multigraph:!0}).setGraph({});return Ia.forEach(e.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+e.node(n).rank)}),Ia.forEach(e.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),Ia.forEach(t,function(n,s){var i="layer"+s;r.setNode(i,{rank:"same"}),Ia.reduce(n,function(o,a){return r.setEdge(o,a,{style:"invis"}),a})}),r}var _q="0.8.5",jq={graphlib:xr,layout:Gz,debug:bq,util:{time:Ct.time,notime:Ct.notime},version:_q};const zl=Wg(jq),L2=(e,t)=>{const r=new zl.graphlib.Graph;return r.setGraph({rankdir:"TB",align:"UL",nodesep:20,ranksep:70,marginx:100,marginy:30,ranker:"longest-path"}),r.setDefaultEdgeLabel(()=>({})),e.forEach(n=>{r.setNode(n.id,{width:n.data.width??280,height:n.data.height??90})}),t.forEach(n=>{r.setEdge(n.source,n.target)}),zl.layout(r),{nodes:e.map(n=>{const s=r.node(n.id);return{...n,targetPosition:Z.Top,sourcePosition:Z.Bottom,position:{x:s.x-(n.data.width??280)/2,y:s.y-(n.data.height??90)/2}}}),edges:t}},z2=(e,t,r)=>{let n=[],s=[],i=null,o=null,a=[];const c=r.theme||"industrial";return e.forEach((u,d)=>{var b,g;if((u.level||1)!==1)return;const f=280;let p=95;u.state==="active"&&u.stations&&(p+=35);const h=t===u.id;if(n.push({id:u.id,type:"documentNode",data:{...u,width:f,height:p,isExpanded:h,...r},draggable:!1,connectable:!1,position:{x:0,y:0},zIndex:h?1e3:0}),i){const w=(b=e[d-1])==null?void 0:b.state;s.push({id:"e-"+i+"-"+u.id,source:i,target:u.id,type:"smoothstep",animated:w==="active",style:{stroke:KN(w,c),strokeWidth:3}})}((g=u.children)==null?void 0:g.length)>0&&(o=u.id,a=u.children),i=u.id}),{nodes:n,edges:s,epicBacklogId:o,epicChildren:a}},q2=(e,t,r,n,s)=>{const{nodes:i,edges:o}=e;if(!t||!r.length)return{nodes:i,edges:o};const a=i.find(y=>y.id===t);if(!a)return{nodes:i,edges:o};const c=a.position.x,u=a.position.y+(a.data.height||95),d=a.data.state,f=s.theme||"industrial",p=KN(d,f),h=d==="active",b=or.EPIC_HEIGHT+or.EPIC_GAP_Y,g=Math.ceil(r.length/or.EPICS_PER_ROW),w=c+280*.15,v=50,x={};r.forEach((y,_)=>{const j=Math.floor(_/or.EPICS_PER_ROW);x[j]||(x[j]=[]),x[j].push({epic:y,idx:_})});for(let y=0;y<g;y++){const _=x[y]||[];if(_.length===0)continue;const j=u+or.EPIC_OFFSET_Y+y*b,S=`junction-row-${y}`;i.push({id:S,type:"waypoint",position:{x:w,y:j-v},draggable:!1,connectable:!1,selectable:!1}),y===0?o.push({id:`e-spine-drop-${y}`,source:t,target:S,type:"straight",animated:h,style:{stroke:p,strokeWidth:2}}):o.push({id:`e-spine-${y-1}-to-${y}`,source:`junction-row-${y-1}`,target:S,type:"straight",animated:h,style:{stroke:p,strokeWidth:2}}),_.forEach(({epic:N,idx:k})=>{const C=k%or.EPICS_PER_ROW,R=c+or.EPIC_OFFSET_X+C*(or.EPIC_WIDTH+or.EPIC_GAP_X),T=j,L=n===N.id;i.push({id:N.id,type:"documentNode",data:{...N,width:or.EPIC_WIDTH,height:or.EPIC_HEIGHT,isExpanded:L,...s},draggable:!1,connectable:!1,position:{x:R,y:T},targetPosition:Z.Top,sourcePosition:Z.Bottom,zIndex:L?1e3:0}),o.push({id:`e-branch-${N.id}`,source:S,target:N.id,type:"smoothstep",pathOptions:{borderRadius:20},animated:h,style:{stroke:p,strokeWidth:2}})})}return{nodes:i,edges:o}},Sq={produced:"produced",in_production:"in_production",ready_for_production:"ready_for_production",requirements_not_met:"requirements_not_met",awaiting_operator:"awaiting_operator",halted:"halted",queued:"ready_for_production",blocked:"requirements_not_met",assembling:"in_production",binding:"in_production",auditing:"in_production",remediating:"in_production",stabilized:"produced"},$2={pgc:"PGC",bind:"BIND",asm:"ASM",aud:"AUD",rem:"REM",done:"DONE"};function kq(e){const t={};for(const r of e.projects)t[r.id]={id:r.id,projectId:r.project_id,name:r.name,description:r.description||"",status:r.status==="active"?"active":r.is_archived?"complete":"queued",icon:r.icon,createdAt:r.created_at,isArchived:r.is_archived||!1};return t}function Nq(e,t=[]){const r=[],n=[],s={};for(const i of e.tracks){const o=Eq(i,t);if((i.scope||"project")==="project")n.push({...o,mayOwn:i.may_own||[],childDocType:i.child_doc_type});else{const c=i.document_type;s[c]||(s[c]=[]),s[c].push(o)}}for(const i of n)i.childDocType&&s[i.childDocType]&&(i.children=s[i.childDocType].map(o=>({...o,level:2}))),r.push(i);return r}function Eq(e,t=[]){const r=Sq[e.state]||"ready_for_production",n=e.state==="awaiting_operator",s=t.find(a=>a.document_type===e.document_type);let i=null;(r==="in_production"||n)&&(i=Cq(e.stations,e.state,e.station));let o=null;return s&&s.questions&&(o=s.questions.map((a,c)=>({id:a.id||`q${c+1}`,text:a.question||a.text||a,required:a.required!==!1}))),{id:e.document_type,name:e.document_name||Rq(e.document_type),desc:e.description||"",state:r,intent:"mandatory",level:1,stations:i,questions:o,interruptId:s==null?void 0:s.id,blockedBy:e.blocked_by||[]}}function Cq(e,t,r){if(!e||e.length===0){const n=r||(t==="awaiting_operator"?"pgc":t==="in_production"?"asm":null);return Eu.map(s=>({id:s,label:$2[s]||s.toUpperCase(),state:n===s?"active":Eu.indexOf(s)<Eu.indexOf(n)?"complete":"pending",needs_input:s==="pgc"&&t==="awaiting_operator"}))}return e.map(n=>({id:n.station,label:$2[n.station]||n.station.toUpperCase(),state:n.state||"pending",needs_input:n.needs_input||!1}))}function Rq(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Tq({includeArchived:e=!1}={}){const[t,r]=m.useState({}),[n,s]=m.useState(!0),[i,o]=m.useState(null),a=m.useCallback(async()=>{s(!0),o(null);try{const u=await Ie.getProjects({includeArchived:e}),d=kq(u);r(d)}catch(u){o(u.message),console.error("Failed to fetch projects:",u)}finally{s(!1)}},[e]),c=m.useCallback(async u=>{try{const d=await Ie.createProject({name:u,description:""});return r(f=>({...f,[d.id]:{id:d.id,projectId:d.project_id,name:d.name,description:d.description||"",status:"active",icon:d.icon,createdAt:d.created_at}})),d}catch(d){throw o(d.message),console.error("Failed to create project:",d),d}},[]);return m.useEffect(()=>{a()},[a]),{projects:t,loading:n,error:i,addProject:c,refresh:a}}function Iq(e){const[t,r]=m.useState([]),[n,s]=m.useState("idle"),[i,o]=m.useState([]),[a,c]=m.useState(!0),[u,d]=m.useState(null),[f,p]=m.useState(!1),h=m.useRef(null),b=m.useRef(null),g=m.useCallback(async()=>{if(e)try{c(!0),d(null);const[_,j]=await Promise.all([Ie.getProductionStatus(e),Ie.getProjectInterrupts(e).catch(()=>[])]);o(j),s(_.line_state),r(Nq(_,j))}catch(_){d(_.message),console.error("Failed to fetch production status:",_)}finally{c(!1)}},[e]),w=m.useCallback(()=>{if(!e)return;h.current&&h.current.close();const _=UP(e);h.current=_,_.addEventListener("connected",()=>{p(!0),d(null),console.log(`SSE connected for project ${e}`)}),_.addEventListener("station_transition",j=>{try{const S=JSON.parse(j.data);console.log("Station transition:",S),g()}catch(S){console.error("Failed to parse station_transition:",S)}}),_.addEventListener("line_stopped",j=>{try{const S=JSON.parse(j.data);console.log("Line stopped:",S),s("stopped"),g()}catch(S){console.error("Failed to parse line_stopped:",S)}}),_.addEventListener("production_complete",j=>{try{const S=JSON.parse(j.data);console.log("Production complete:",S),s("complete"),g()}catch(S){console.error("Failed to parse production_complete:",S)}}),_.addEventListener("interrupt_resolved",j=>{try{const S=JSON.parse(j.data);console.log("Interrupt resolved:",S),g()}catch(S){console.error("Failed to parse interrupt_resolved:",S)}}),_.addEventListener("track_started",j=>{try{const S=JSON.parse(j.data);console.log("Track started:",S),s("active"),g()}catch(S){console.error("Failed to parse track_started:",S)}}),_.onerror=j=>{console.error("SSE error:",j),p(!1),d("Connection lost"),_.close(),b.current=setTimeout(()=>{console.log("Attempting SSE reconnect..."),w()},3e3)}},[e,g]),v=m.useCallback(()=>{b.current&&clearTimeout(b.current),h.current&&(h.current.close(),h.current=null),p(!1)},[]),x=m.useCallback(async(_,j)=>{try{await Ie.resolveInterrupt(_,{answers:j}),await g()}catch(S){throw console.error("Failed to resolve interrupt:",S),S}},[g]),y=m.useCallback(async(_=null)=>{try{await Ie.startProduction(e,_),s("active"),await g()}catch(j){throw console.error("Failed to start production:",j),j}},[e,g]);return m.useEffect(()=>(g(),w(),()=>v()),[g,w,v]),{data:t,lineState:n,interrupts:i,loading:a,error:u,connected:f,refresh:g,resolveInterrupt:x,startProduction:y}}const F2="combine-theme";function fC(e="industrial"){const[t,r]=m.useState(()=>{if(typeof window>"u")return e;const i=localStorage.getItem(F2);return i&&bn.includes(i)?i:e});m.useEffect(()=>{localStorage.setItem(F2,t)},[t]);const n=m.useCallback(i=>{bn.includes(i)&&r(i)},[]),s=m.useCallback(()=>{r(i=>{const o=bn.indexOf(i);return bn[(o+1)%bn.length]})},[]);return{theme:t,setTheme:n,cycleTheme:s}}function Mq(){const[e,t]=m.useState(null),[r,n]=m.useState("idle"),[s,i]=m.useState([]),[o,a]=m.useState(null),[c,u]=m.useState(null),[d,f]=m.useState({}),[p,h]=m.useState(0),[b,g]=m.useState([]),[w,v]=m.useState(!1),[x,y]=m.useState(null),[_,j]=m.useState(null),[S,N]=m.useState(null),[k,C]=m.useState(!1),[R,T]=m.useState(!1),L=m.useRef(null),$=m.useRef(!0);m.useEffect(()=>($.current=!0,()=>{$.current=!1,L.current&&L.current.close()}),[]);const E=m.useCallback(M=>{$.current&&(n(M.phase),i(M.messages||[]),a(M.pending_prompt),u(M.pending_choices),f(M.interpretation||{}),h(M.confidence||0),g(M.missing_fields||[]),v(M.can_initialize||!1),y(M.gate_outcome),j(M.project))},[]),O=m.useCallback(async()=>{N(null),C(!0);try{const M=await Ie.startIntake();if(!$.current)return;t(M.execution_id),n(M.phase||"describe"),a(M.pending_prompt),i([]),f({}),j(null),y(null)}catch(M){if(!$.current)return;N(M.message||"Failed to start intake")}finally{$.current&&C(!1)}},[]),P=m.useCallback(async M=>{if(!e||!M.trim())return;N(null),T(!0);const q={role:"user",content:M};i(A=>[...A,q]);try{const A=await Ie.submitIntakeMessage(e,M);if(!$.current)return;E(A)}catch(A){if(!$.current)return;i(B=>B.filter(V=>V!==q)),N(A.message||"Failed to submit message")}finally{$.current&&T(!1)}},[e,E]),F=m.useCallback(async(M,q)=>{if(e){N(null),f(A=>({...A,[M]:{value:q,source:"user",locked:!0}}));try{const A=await Ie.updateIntakeField(e,M,q);if(!$.current)return;E(A)}catch(A){if(!$.current)return;N(A.message||"Failed to update field");const B=await Ie.getIntakeState(e);$.current&&E(B)}}},[e,E]),D=m.useCallback(async()=>{if(!(!e||!w)){N(null),C(!0);try{const M=await Ie.initializeIntake(e);if(!$.current)return;E(M),M.phase==="generating"&&I()}catch(M){if(!$.current)return;N(M.message||"Failed to initialize project"),C(!1)}}},[e,w,E]),I=m.useCallback(()=>{L.current&&L.current.close();const M=GP(e);L.current=M,M.addEventListener("started",q=>{if(!$.current)return;const A=JSON.parse(q.data);console.log("Intake started:",A)}),M.addEventListener("progress",q=>{if(!$.current)return;const A=JSON.parse(q.data);console.log("Intake progress:",A.current_node)}),M.addEventListener("complete",async q=>{if(!$.current)return;const A=JSON.parse(q.data);console.log("Intake complete:",A),M.close(),L.current=null,n("complete"),y(A.gate_outcome),j(A.project),C(!1)}),M.addEventListener("error",q=>{if($.current&&M.readyState!==EventSource.CLOSED){try{const A=JSON.parse(q.data);N(A.message||"Generation failed")}catch{N("Connection lost during generation")}M.close(),L.current=null,C(!1)}}),M.onerror=()=>{$.current&&M.readyState===EventSource.CLOSED&&(L.current=null,C(!1))}},[e]),z=m.useCallback(()=>{L.current&&(L.current.close(),L.current=null),t(null),n("idle"),i([]),a(null),u(null),f({}),h(0),g([]),v(!1),y(null),j(null),N(null),C(!1),T(!1)},[]);return{executionId:e,phase:r,messages:s,pendingPrompt:o,pendingChoices:c,interpretation:d,confidence:p,missingFields:b,canInitialize:w,gateOutcome:x,project:_,error:S,loading:k,submitting:R,startIntake:O,submitMessage:P,updateField:F,lockAndGenerate:D,reset:z}}const pC=m.createContext(null);function Aq({children:e}){const[t,r]=m.useState(null),[n,s]=m.useState(!0),[i,o]=m.useState(null);m.useEffect(()=>{a()},[]);const a=m.useCallback(async()=>{s(!0),o(null);try{const f=await Ie.getMe();f&&f.user?r(f.user):r(null)}catch(f){console.error("Auth check failed:",f),o(f.message),r(null)}finally{s(!1)}},[]),c=m.useCallback(f=>{window.location.href=KP(f)},[]),u=m.useCallback(async()=>{try{await Ie.logout(),r(null),window.location.href="/"}catch(f){console.error("Logout failed:",f),r(null)}},[]),d={user:t,loading:n,error:i,isAuthenticated:!!t,isAdmin:(t==null?void 0:t.is_admin)||!1,login:c,logout:u,checkAuth:a};return l.jsx(pC.Provider,{value:d,children:e})}function xi(){const e=m.useContext(pC);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Pq(){const[e,t]=m.useState(null),[r,n]=m.useState(null),[s,i]=m.useState(!0),[o,a]=m.useState(null),c=m.useCallback(async()=>{i(!0),a(null);try{let d=await Ne.getCurrentWorkspace();d||(d=await Ne.createWorkspace()),t(d.workspace_id),n(d.branch)}catch(d){a(d.message),console.error("Failed to initialize workspace:",d)}finally{i(!1)}},[]),u=m.useCallback(async(d=!1)=>{if(e)try{await Ne.closeWorkspace(e,d),t(null),n(null)}catch(f){throw f}},[e]);return m.useEffect(()=>{c()},[c]),{workspaceId:e,branch:r,loading:s,error:o,closeWorkspace:u,reinitialize:c}}function Dq(e,t=1e4){var d,f;const[r,n]=m.useState(null),[s,i]=m.useState(!0),[o,a]=m.useState(null),c=m.useRef(null),u=m.useCallback(async()=>{if(!e){n(null),i(!1);return}try{const p=await Ne.getWorkspaceState(e);n(p),a(null)}catch(p){a(p.message),console.error("Failed to fetch workspace state:",p)}finally{i(!1)}},[e]);return m.useEffect(()=>{e&&(i(!0),u())},[e,u]),m.useEffect(()=>{if(!(!e||!t))return c.current=setInterval(u,t),()=>{c.current&&clearInterval(c.current)}},[e,t,u]),{state:r,loading:s,error:o,refresh:u,isDirty:(r==null?void 0:r.is_dirty)??!1,modifiedArtifacts:(r==null?void 0:r.modified_artifacts)??[],tier1Passed:((d=r==null?void 0:r.tier1)==null?void 0:d.passed)??!0,tier1Results:((f=r==null?void 0:r.tier1)==null?void 0:f.results)??[],expiresAt:r!=null&&r.expires_at?new Date(r.expires_at):null}}function Oq(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{n(!0),i(null);try{const a=await Ne.getDocumentTypes();t(a.document_types||[])}catch(a){i(a.message),console.error("Failed to fetch document types:",a)}finally{n(!1)}},[]);return m.useEffect(()=>{o()},[o]),{documentTypes:e,loading:r,error:s,refresh:o}}function Lq(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{n(!0),i(null);try{const a=await Ne.getRoles();t(a.roles||[])}catch(a){i(a.message),console.error("Failed to fetch roles:",a)}finally{n(!1)}},[]);return m.useEffect(()=>{o()},[o]),{roles:e,loading:r,error:s,refresh:o}}function _x(e,t,{debounceMs:r=500,onSave:n}={}){const[s,i]=m.useState(""),[o,a]=m.useState(""),[c,u]=m.useState(!0),[d,f]=m.useState(null),[p,h]=m.useState(!1),[b,g]=m.useState(null),w=m.useRef(null),v=m.useRef(null),x=m.useCallback(async()=>{if(!e||!t){i(""),a(""),u(!1);return}u(!0),f(null);try{const k=await Ne.getArtifact(e,t);i(k.content),a(k.content)}catch(k){f(k.message),console.error("Failed to load artifact:",k)}finally{u(!1)}},[e,t]),y=m.useCallback(async k=>{if(!(!e||!t)){h(!0),f(null);try{const C=await Ne.writeArtifact(e,t,k);g(C),a(k),n&&n(C)}catch(C){f(C.message),console.error("Failed to save artifact:",C)}finally{h(!1)}}},[e,t,n]),_=m.useCallback(k=>{v.current=k,w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{v.current!==null&&(y(v.current),v.current=null)},r)},[y,r]),j=m.useCallback(k=>{i(k),k!==o&&_(k)},[o,_]),S=m.useCallback(()=>{w.current&&clearTimeout(w.current),v.current=null,i(o)},[o]),N=m.useCallback(()=>{w.current&&clearTimeout(w.current),s!==o&&y(s)},[s,o,y]);return m.useEffect(()=>(x(),()=>{w.current&&clearTimeout(w.current)}),[x]),{content:s,originalContent:o,loading:c,error:d,saving:p,lastSaveResult:b,isDirty:s!==o,updateContent:j,reset:S,saveNow:N,reload:x}}const zq={documentNode:g6,waypoint:v6},qq={industrial:"Industrial",light:"Light",blueprint:"Blueprint"};function $q({projectId:e,projectCode:t,projectName:r,isArchived:n,autoExpandNodeId:s,theme:i,onThemeChange:o,onProjectUpdate:a,onProjectArchive:c,onProjectUnarchive:u,onProjectDelete:d}){const{data:f,lineState:p,loading:h,error:b,connected:g,resolveInterrupt:w}=Iq(e),[v,x]=m.useState([]),[y,_]=m.useState(null),[j,S]=m.useState(null),[N,k]=m.useState(null),[C,R]=m.useState(!1),[T,L]=m.useState(""),[$,E]=m.useState(!1),[O,P]=m.useState(!1),[F,D]=m.useState(!1),I=mc();m.useEffect(()=>{f.length>0&&x(f)},[f]),m.useEffect(()=>{s&&v.length>0&&setTimeout(()=>{_(s),S("questions")},300)},[s,v.length]),m.useEffect(()=>{_(null),S(null)},[e]);const z=m.useCallback(()=>{const U=bn.indexOf(i);o(bn[(U+1)%bn.length])},[i,o]),M=m.useCallback(()=>{L(r||""),R(!0)},[r]),q=m.useCallback(async()=>{if(!T.trim()||T===r){R(!1);return}P(!0);try{await a(e,{name:T.trim()}),R(!1)}catch(U){console.error("Failed to update name:",U)}finally{P(!1)}},[T,r,e,a]),A=m.useCallback(()=>{R(!1),L("")},[]),B=m.useCallback(async()=>{P(!0);try{n?await u(e):await c(e)}catch(U){console.error("Failed to toggle archive:",U)}finally{P(!1)}},[e,n,c,u]),V=m.useCallback(async()=>{P(!0);try{await d(e),E(!1)}catch(U){console.error("Failed to delete:",U)}finally{P(!1)}},[e,d]),Y=m.useCallback(U=>{const K=I.getNode(U);if(K){const W=window.innerWidth,we=-K.position.x*.9+W/2-400,_e=-K.position.y*.9+120;I.setViewport({x:we,y:_e,zoom:.9},{duration:800})}},[I]),te=m.useMemo(()=>({onExpand:(U,K)=>{_(U),S(K)},onCollapse:()=>{_(null),S(null),setTimeout(()=>I.fitView({padding:.2,duration:300}),50)},onViewFullDocument:U=>{k(U)},onSubmitQuestions:async(U,K)=>{console.log("Submitted:",U,K);const ae=v.find(W=>W.id===U);if(ae!=null&&ae.interruptId)try{await w(ae.interruptId,K)}catch(W){console.error("Failed to submit answers:",W)}_(null),S(null),x(W=>{const we=_e=>_e.map(de=>de.id===U&&de.stations?{...de,stations:de.stations.map(je=>je.id==="pgc"?{...je,state:"complete",needs_input:!1}:je.id==="asm"?{...je,state:"active"}:je)}:de.children?{...de,children:we(de.children)}:de);return we(W)})}}),[I,v,w]),{layoutNodes:ne,layoutEdges:re}=m.useMemo(()=>{if(v.length===0)return{layoutNodes:[],layoutEdges:[]};const U={...te,expandType:j,theme:i,onZoomToNode:Y,projectId:e,projectCode:t},{nodes:K,edges:ae,epicBacklogId:W,epicChildren:we}=z2(v,y,U),_e=L2(K,ae),{nodes:de,edges:je}=q2(_e,W,we,y,U);return{layoutNodes:de.map(We=>({...We,data:{...We.data,expandType:We.id===y?j:null}})),layoutEdges:je}},[v,y,j,te,i,Y,e,t]),[X,ue,J]=HN(ne),[se,ie,ee]=WN(re);m.useEffect(()=>{if(v.length===0)return;const U={...te,expandType:j,theme:i,onZoomToNode:Y,projectId:e,projectCode:t},{nodes:K,edges:ae,epicBacklogId:W,epicChildren:we}=z2(v,y,U),_e=L2(K,ae),{nodes:de,edges:je}=q2(_e,W,we,y,U),lt=de.map(We=>({...We,data:{...We.data,expandType:We.id===y?j:null}}));ue(lt),ie(je)},[v,y,j,te,ue,ie,i,Y,e,t]);const xe=m.useCallback((U,K)=>{},[]);return h&&v.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/logo-light.png",alt:"The Combine",className:"h-12 mx-auto mb-4 animate-pulse"}),l.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading production line..."})]})}):b&&v.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",style:{background:"var(--bg-canvas)"},children:l.jsx("div",{className:"text-center p-6 rounded-lg",style:{background:"var(--bg-panel)"},children:l.jsx("p",{className:"text-red-500 mb-4",children:b})})}):l.jsxs("div",{className:"w-full h-full",children:[l.jsxs(ex,{nodes:X,edges:se,onNodesChange:J,onEdgesChange:ee,onNodeClick:xe,nodeTypes:zq,nodesDraggable:!1,nodesConnectable:!1,edgesUpdatable:!1,edgesFocusable:!1,elementsSelectable:!1,fitView:!0,fitViewOptions:{padding:.2},minZoom:.3,maxZoom:1.5,style:{background:"var(--bg-canvas)"},proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"smoothstep"},children:[l.jsx(Mn,{position:"top-left",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"subway-panel backdrop-blur rounded-lg px-4 py-3 border",children:l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:"Production Line"}),l.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:[p==="active"&&l.jsx("span",{className:"text-amber-500",children:" Active"}),p==="stopped"&&l.jsx("span",{className:"text-red-500",children:" Stopped"}),p==="complete"&&l.jsx("span",{className:"text-emerald-500",children:" Complete"}),p==="idle"&&l.jsx("span",{children:" Idle"}),!g&&l.jsx("span",{className:"ml-2 text-red-400",children:"(Disconnected)"})]})]}),l.jsx("button",{onClick:z,className:"subway-button px-3 py-1.5 rounded-md text-xs font-medium transition-colors",children:qq[i]})]})}),l.jsx("div",{className:"subway-panel backdrop-blur rounded-lg px-4 py-3 border",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--state-active-bg)"},children:l.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"text-xs font-mono",style:{color:"var(--text-muted)"},children:t||"No Project"}),C?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("input",{type:"text",value:T,onChange:U=>L(U.target.value),onKeyDown:U=>{U.key==="Enter"&&q(),U.key==="Escape"&&A()},className:"flex-1 px-2 py-1 text-sm rounded border bg-transparent",style:{color:"var(--text-primary)",borderColor:"var(--border-panel)"},autoFocus:!0,disabled:O}),l.jsx("button",{onClick:q,disabled:O,className:"p-1 rounded hover:bg-white/10",title:"Save",children:l.jsx("svg",{className:"w-4 h-4 text-emerald-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("button",{onClick:A,disabled:O,className:"p-1 rounded hover:bg-white/10",title:"Cancel",children:l.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-muted)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}):l.jsx("p",{className:"text-sm font-semibold truncate",style:{color:"var(--text-primary)"},children:r||"Untitled Project"})]}),!C&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:M,className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},title:"Edit name",children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),l.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),l.jsx("button",{onClick:B,disabled:O,className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:n?"#f59e0b":"var(--text-muted)"},title:n?"Unarchive project":"Archive project",children:l.jsxs("svg",{className:"w-4 h-4 relative",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 8v13H3V8M1 3h22v5H1zM10 12h4"}),n&&l.jsx("path",{d:"M4 20L20 4",strokeWidth:"2.5",stroke:"currentColor"})]})}),l.jsx("button",{onClick:()=>E(!0),disabled:O||!n,className:`p-1.5 rounded transition-colors ${n?"hover:bg-red-500/20":""}`,style:{color:"var(--text-muted)",opacity:n?1:.3,cursor:n?"pointer":"not-allowed"},title:n?"Delete project":"Archive project first to delete",children:l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]})]})}),l.jsxs("div",{className:"subway-panel backdrop-blur rounded-lg border overflow-hidden",children:[l.jsxs("button",{onClick:()=>D(!F),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-semibold hover:opacity-80",style:{background:"transparent",border:"none",color:"var(--text-primary)",cursor:"pointer"},children:[l.jsx("span",{children:"Workflow"}),l.jsx("span",{style:{color:"var(--text-muted)",fontSize:10},children:F?"":""})]}),F&&l.jsx("div",{style:{maxHeight:300,overflowY:"auto"},children:l.jsx(j6,{projectId:e})})]})]})}),l.jsx(GN,{position:"top-right",nodeColor:U=>{var ae;const K=(ae=U.data)==null?void 0:ae.state;return["produced","stabilized","ready"].includes(K)?"#10b981":["in_production","active"].includes(K)?"#f59e0b":["requirements_not_met","blocked"].includes(K)?"#ef4444":"#475569"},maskColor:"rgba(11, 17, 32, 0.85)",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)",borderRadius:8},pannable:!0,zoomable:!0}),l.jsx(Mn,{position:"bottom-left",children:l.jsxs("div",{className:"subway-panel flex gap-4 text-[10px] backdrop-blur px-4 py-2.5 rounded-lg border",children:[l.jsx("span",{style:{color:"var(--text-muted)"},className:"font-medium",children:"STATE:"}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--state-stabilized-bg)"}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:"Produced"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--state-active-bg)"}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:"In Production"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--state-queued-bg)"}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:"Ready"})]})]})}),l.jsx(Mn,{position:"bottom-right",children:l.jsx("div",{className:"subway-panel text-[10px] px-2 py-1 rounded",style:{color:"var(--text-muted)"},children:"Scroll to zoom | Drag to pan"})})]}),N&&l.jsx(x6,{projectId:e,projectCode:t,docTypeId:N,onClose:()=>k(null)}),$&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:l.jsxs("div",{className:"rounded-lg p-6 max-w-sm mx-4",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Delete Project?"}),l.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:["This will permanently delete ",l.jsx("strong",{children:r})," and all its documents. This action cannot be undone."]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx("button",{onClick:()=>E(!1),disabled:O,className:"px-4 py-2 rounded text-sm font-medium transition-colors",style:{color:"var(--text-muted)"},children:"Cancel"}),l.jsx("button",{onClick:V,disabled:O,className:"px-4 py-2 rounded text-sm font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:O?"Deleting...":"Delete"})]})]})})]})}function Ma({messages:e,pendingPrompt:t}){const r=m.useRef(null);return m.useEffect(()=>{var n;(n=r.current)==null||n.scrollIntoView({behavior:"smooth"})},[e,t]),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.map((n,s)=>l.jsx("div",{className:`flex ${n.role==="user"?"justify-end":"justify-start"}`,children:l.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm ${n.role==="user"?"bg-emerald-500/20 text-emerald-100 rounded-br-sm":"bg-violet-500/20 text-violet-100 rounded-bl-sm"}`,children:n.content})},s)),t&&l.jsx("div",{className:"flex justify-start",children:l.jsx("div",{className:"max-w-[85%] rounded-lg px-3 py-2 text-sm bg-violet-500/20 text-violet-100 rounded-bl-sm",children:t})}),l.jsx("div",{ref:r})]})}function Fq({onSubmit:e,disabled:t,placeholder:r}){const[n,s]=m.useState(""),i=m.useRef(null);m.useEffect(()=>{var c;t||(c=i.current)==null||c.focus()},[t]);const o=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),n.trim()&&!t&&(e(n.trim()),s("")))},a=()=>{n.trim()&&!t&&(e(n.trim()),s(""))};return l.jsxs("div",{className:"p-3 border-t",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{ref:i,value:n,onChange:c=>s(c.target.value),onKeyDown:o,disabled:t,placeholder:r||"Type your message...",rows:2,className:"flex-1 rounded-lg px-3 py-2 text-sm resize-none",style:{background:"var(--bg-input)",border:"1px solid var(--border-input)",color:"var(--text-primary)"}}),l.jsx("button",{onClick:a,disabled:t||!n.trim(),className:`px-4 rounded-lg font-medium text-sm transition-colors ${t||!n.trim()?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-violet-500 text-white hover:bg-violet-400"}`,children:"Send"})]}),l.jsx("p",{className:"text-[10px] mt-1",style:{color:"var(--text-muted)"},children:"Press Enter to send, Shift+Enter for newline"})]})}const Bq={project_name:"Project Name",problem_statement:"Problem Statement",project_type:"Project Type"},Hq=["project_name","problem_statement","project_type"];function Wq({interpretation:e,missingFields:t,canInitialize:r,onUpdateField:n,onInitialize:s,loading:i}){const[o,a]=m.useState(null),[c,u]=m.useState(""),d=(h,b)=>{a(h),u(b)},f=async()=>{o&&c.trim()&&(await n(o,c.trim()),a(null),u(""))},p=()=>{a(null),u("")};return l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Review & Lock"}),t.length>0&&l.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-amber-500/20 text-amber-400",children:[t.length," missing"]})]}),Hq.map(h=>{const b=e[h];if(!b)return null;const g=b.locked,w=t.includes(h),v=o===h;return l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("label",{className:"text-[10px] font-medium",style:{color:"var(--text-muted)"},children:[Bq[h]||h,w&&l.jsx("span",{className:"text-amber-400 ml-1",children:"*"})]}),g&&l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:"locked"})]}),v?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),onKeyDown:x=>{x.key==="Enter"&&f(),x.key==="Escape"&&p()},autoFocus:!0,className:"flex-1 rounded px-2 py-1.5 text-xs",style:{background:"var(--bg-input)",border:"1px solid var(--border-input)",color:"var(--text-primary)"}}),l.jsx("button",{onClick:f,className:"px-2 py-1 rounded text-xs bg-emerald-500 text-white",children:"Save"}),l.jsx("button",{onClick:p,className:"px-2 py-1 rounded text-xs",style:{background:"var(--bg-button)",color:"var(--text-muted)"},children:"Cancel"})]}):l.jsx("div",{onClick:()=>!g&&d(h,b.value),className:`rounded px-2 py-1.5 text-xs ${g?"cursor-default":"cursor-pointer hover:bg-white/5"} ${w?"border border-amber-500/50":""}`,style:{background:"var(--bg-input)",color:b.value?"var(--text-primary)":"var(--text-muted)"},children:b.value||"Click to edit..."})]},h)}),l.jsx("button",{onClick:s,disabled:!r||i,className:`w-full py-2.5 rounded-lg text-sm font-medium transition-colors ${r&&!i?"bg-violet-500 text-white hover:bg-violet-400":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:i?"Initializing...":"Lock & Initialize Project"}),!r&&l.jsx("p",{className:"text-[10px] text-center",style:{color:"var(--text-muted)"},children:"Fill all required fields to continue"})]})}function Vq(){return l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[l.jsxs("div",{className:"relative w-16 h-16 mb-4",children:[l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-violet-500/20"}),l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-violet-500 border-r-transparent border-b-transparent border-l-transparent animate-spin"}),l.jsx("div",{className:"absolute inset-3 rounded-full bg-violet-500/20 animate-pulse"})]}),l.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-primary)"},children:"Generating Project"}),l.jsx("p",{className:"text-xs text-center max-w-[200px]",style:{color:"var(--text-muted)"},children:"Creating intake document and running quality checks..."}),l.jsxs("div",{className:"flex gap-1 mt-4",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-bounce",style:{animationDelay:"0ms"}}),l.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-bounce",style:{animationDelay:"150ms"}}),l.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-bounce",style:{animationDelay:"300ms"}})]})]})}const B2={qualified:{icon:"check",iconBg:"bg-emerald-500/20",iconColor:"text-emerald-400",title:"Project Created",description:"Your project is ready for PM Discovery."},not_ready:{icon:"warning",iconBg:"bg-amber-500/20",iconColor:"text-amber-400",title:"Not Ready",description:"Additional information is needed before proceeding."},out_of_scope:{icon:"x",iconBg:"bg-slate-500/20",iconColor:"text-slate-400",title:"Out of Scope",description:"This request is outside the scope of The Combine."},redirect:{icon:"arrow",iconBg:"bg-blue-500/20",iconColor:"text-blue-400",title:"Redirected",description:"This request has been redirected to a different engagement type."},blocked:{icon:"warning",iconBg:"bg-amber-500/20",iconColor:"text-amber-400",title:"Blocked",description:"The workflow could not complete due to validation issues."}};function Uq({type:e,className:t}){switch(e){case"check":return l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})});case"warning":return l.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 9v4M12 17h.01"}),l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"})]});case"x":return l.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});case"arrow":return l.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]});default:return null}}function Gq({gateOutcome:e,project:t,onViewProject:r,onClose:n}){const s=B2[e]||B2.blocked,i=e==="qualified";return l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:`w-16 h-16 rounded-full ${s.iconBg} flex items-center justify-center mx-auto mb-4`,children:l.jsx(Uq,{type:s.icon,className:`w-8 h-8 ${s.iconColor}`})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:s.title}),l.jsx("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:s.description}),i&&t&&l.jsxs("div",{className:"rounded-lg p-3 mb-4",style:{background:"var(--bg-input)"},children:[l.jsx("p",{className:"text-xs font-mono mb-1",style:{color:"var(--text-muted)"},children:t.project_id}),l.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:t.name})]}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[i&&t&&l.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-sm font-medium bg-emerald-500 text-white hover:bg-emerald-400 transition-colors",children:"View Project"}),l.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"var(--bg-button)",color:"var(--text-muted)"},children:"Close"})]})]})}function Kq({onClose:e,onComplete:t}){const{phase:r,messages:n,pendingPrompt:s,interpretation:i,missingFields:o,canInitialize:a,gateOutcome:c,project:u,error:d,loading:f,submitting:p,startIntake:h,submitMessage:b,updateField:g,lockAndGenerate:w,reset:v}=Mq();m.useEffect(()=>(h(),()=>v()),[]);const x=()=>{v(),e()},y=()=>{u&&t&&t(u),x()},_=()=>{const S=[{id:"describe",label:"Describe"},{id:"review",label:"Review"},{id:"generating",label:"Generate"},{id:"complete",label:"Done"}],N=S.findIndex(k=>k.id===r);return l.jsx("div",{className:"flex items-center gap-1 text-[10px]",children:S.map((k,C)=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:`px-2 py-0.5 rounded ${C===N?"bg-violet-500/30 text-violet-300":C<N?"text-emerald-400":"text-slate-500"}`,children:k.label}),C<S.length-1&&l.jsx("span",{className:"mx-1 text-slate-600",children:"/"})]},k.id))})},j=()=>{if(f&&r==="idle")return l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"w-8 h-8 border-2 border-t-violet-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})});switch(r){case"describe":return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{messages:n,pendingPrompt:s}),l.jsx(Fq,{onSubmit:b,disabled:p,placeholder:"Describe what you want to build..."})]});case"review":return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{messages:n}),l.jsx("div",{className:"border-t",style:{borderColor:"var(--border-panel)"},children:l.jsx(Wq,{interpretation:i,missingFields:o,canInitialize:a,onUpdateField:g,onInitialize:w,loading:f})})]});case"generating":return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{messages:n}),l.jsx(Vq,{})]});case"complete":return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{messages:n}),l.jsx(Gq,{gateOutcome:c,project:u,onViewProject:y,onClose:x})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.6)"},children:l.jsxs("div",{className:"flex flex-col w-full max-w-lg h-[80vh] rounded-xl shadow-2xl tray-slide",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-500/20 flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-violet-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"New Project"}),_()]})]}),l.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),d&&l.jsx("div",{className:"px-4 py-2 bg-red-500/20 text-red-300 text-sm",children:d}),j()]})})}function Yq({onClose:e}){const{user:t,logout:r,isAdmin:n}=xi(),[s,i]=m.useState(null),[o,a]=m.useState([]),[c,u]=m.useState(!1),[d,f]=m.useState(null);m.useEffect(()=>{s==="linked"&&p()},[s]);const p=async()=>{try{u(!0);const j=await fetch("/auth/accounts",{credentials:"include"});if(j.ok){const S=await j.json();a(S.identities||[])}}catch(j){console.error("Failed to load accounts:",j)}finally{u(!1)}},h=j=>{window.location.href=`/auth/accounts/link/${j}`},b=async j=>{var S;if(o.length<=1){f({type:"error",text:"Cannot unlink your only account"});return}if(confirm(`Unlink your ${j} account?`))try{const N=(S=document.cookie.split("; ").find(C=>C.startsWith("csrf=")||C.startsWith("__Host-csrf=")))==null?void 0:S.split("=")[1],k=await fetch(`/auth/accounts/${j}`,{method:"DELETE",credentials:"include",headers:{"X-CSRF-Token":N||""}});if(k.ok)f({type:"success",text:"Account unlinked"}),await p();else{const C=await k.json();throw new Error(C.detail||"Failed to unlink")}}catch(N){f({type:"error",text:N.message})}},g=async()=>{await r(),e()},w=j=>{i(s===j?null:j),f(null)},v={google:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),microsoft:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 23 23",children:[l.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),l.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),l.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),l.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]})},x=[{id:"account",label:"Account",icon:"user",future:!1},{id:"linked",label:"Linked Accounts",icon:"link",future:!1},{id:"team",label:"Team / Org",icon:"users",future:!0},{id:"billing",label:"Billing",icon:"credit-card",future:!0},{id:"preferences",label:"Preferences",icon:"settings",future:!0}],y=j=>{const S={user:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),link:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),l.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),users:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"credit-card":l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),l.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),settings:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})};return S[j]||S.user},_=j=>{switch(j){case"account":return l.jsxs("div",{className:"px-4 py-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Email"}),l.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-primary)"},children:(t==null?void 0:t.email)||"-"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Member since"}),l.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-primary)"},children:t!=null&&t.user_created_at?new Date(t.user_created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"-"})]})]});case"linked":return l.jsxs("div",{className:"px-4 py-3",children:[d&&l.jsx("div",{className:`mb-3 px-3 py-2 rounded text-xs ${d.type==="error"?"bg-red-500/20 text-red-300":"bg-emerald-500/20 text-emerald-300"}`,children:d.text}),c?l.jsx("div",{className:"flex items-center justify-center py-4",children:l.jsx("div",{className:"w-5 h-5 border-2 border-t-blue-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-2 mb-4",children:o.map(S=>l.jsxs("div",{className:"flex items-center justify-between p-2 rounded",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[v[S.provider_id],l.jsx("span",{className:"text-xs",style:{color:"var(--text-primary)"},children:S.provider_email})]}),l.jsx("button",{onClick:()=>b(S.provider_id),disabled:o.length<=1,className:`text-xs px-2 py-1 rounded ${o.length<=1?"text-slate-600 cursor-not-allowed":"text-red-400 hover:bg-red-500/20"}`,children:"Unlink"})]},S.provider_id))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide mb-2",style:{color:"var(--text-muted)"},children:"Link another"}),l.jsxs("button",{onClick:()=>h("google"),className:"w-full flex items-center gap-2 p-2 rounded text-xs hover:bg-white/5",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},children:[v.google,"Google"]}),l.jsxs("button",{onClick:()=>h("microsoft"),className:"w-full flex items-center gap-2 p-2 rounded text-xs hover:bg-white/5",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},children:[v.microsoft,"Microsoft"]})]})]})]});default:return l.jsx("div",{className:"px-4 py-3 text-xs",style:{color:"var(--text-muted)"},children:"Coming soon"})}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",style:{background:"rgba(0, 0, 0, 0.3)"},onClick:e}),l.jsxs("div",{className:"fixed top-12 bottom-0 z-50 w-72 flex flex-col shadow-2xl",style:{left:"240px",background:"var(--bg-panel)",borderRight:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"px-4 py-4 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t!=null&&t.avatar_url?l.jsx("img",{src:t.avatar_url,alt:t.name,className:"w-10 h-10 rounded-full"}):l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--text-muted)"},children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("div",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:(t==null?void 0:t.name)||"User"}),l.jsx("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:(t==null?void 0:t.email)||""})]}),l.jsx("button",{onClick:e,className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsx("div",{className:"text-xs px-2 py-1 rounded inline-block",style:{background:"var(--bg-canvas)",color:"var(--text-muted)"},children:"Plan: Individual"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n&&l.jsxs("div",{style:{borderBottom:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"px-4 py-2",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{className:"text-[10px] uppercase tracking-wide font-medium",style:{color:"var(--text-muted)"},children:"Administration"})}),l.jsxs("a",{href:"/admin",className:"w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-white/5",style:{color:"var(--text-primary)",textDecoration:"none"},children:[l.jsx("span",{style:{color:"var(--amber-400, #fbbf24)"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"})]})}),l.jsx("span",{className:"text-sm",children:"Admin Panel"})]}),l.jsxs("a",{href:"/admin/workbench",className:"w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-white/5",style:{color:"var(--text-primary)",textDecoration:"none"},children:[l.jsx("span",{style:{color:"var(--purple-400, #a78bfa)"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),l.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),l.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]})}),l.jsx("span",{className:"text-sm",children:"Prompt Workbench"})]})]}),x.map(j=>l.jsxs("div",{style:{borderBottom:"1px solid var(--border-panel)"},children:[l.jsxs("button",{onClick:()=>!j.future&&w(j.id),className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${j.future?"cursor-not-allowed opacity-50":"hover:bg-white/5"}`,style:{color:"var(--text-primary)"},disabled:j.future,children:[l.jsx("span",{style:{color:"var(--text-muted)"},children:y(j.icon)}),l.jsx("span",{className:"flex-1 text-sm text-left",children:j.label}),j.future?l.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{background:"var(--bg-canvas)",color:"var(--text-muted)"},children:"Soon"}):l.jsx("svg",{className:"w-4 h-4 transition-transform",style:{color:"var(--text-muted)",transform:s===j.id?"rotate(90deg)":"rotate(0deg)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),s===j.id&&!j.future&&l.jsx("div",{style:{background:"var(--bg-canvas)",borderTop:"1px solid var(--border-panel)"},children:_(j.id)})]},j.id))]}),l.jsx("div",{className:"p-4 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded text-sm transition-colors hover:bg-white/5",style:{color:"var(--text-muted)"},children:[l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})})]})]})}const me={bg:"#0f172a",bgElevated:"#1e293b",border:"#334155",textPrimary:"#f8fafc",textSecondary:"#94a3b8",textMuted:"#64748b",textSubtle:"#475569",accent:"#3b82f6",accentHover:"#2563eb"};function Xq(){return l.jsx("header",{className:"h-16 flex items-center justify-center border-b",style:{background:me.bg,borderColor:me.border},children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo-dark.png",alt:"The Combine",className:"h-8"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-bold tracking-[0.2em]",style:{color:me.textPrimary},children:"THE COMBINE"}),l.jsx("span",{className:"text-xs tracking-wide ml-4",style:{color:me.textMuted},children:"Industrial AI for Knowledge Work"})]})]})})}function Qq(){return l.jsxs("section",{className:"text-center max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-semibold mb-6 leading-tight",style:{color:me.textPrimary},children:"Turn complex intent into governed, repeatable artifacts."}),l.jsx("p",{className:"text-lg leading-relaxed mb-6",style:{color:me.textSecondary},children:"The Combine applies manufacturing discipline to AI knowledge work. Every output is traceable. Every decision is auditable. Production over prompting."}),l.jsxs("a",{href:"/learn",className:"text-sm transition-colors inline-flex items-center gap-1",style:{color:me.textMuted},onMouseOver:e=>e.currentTarget.style.color=me.textSecondary,onMouseOut:e=>e.currentTarget.style.color=me.textMuted,children:["Learn how The Combine works",l.jsx("span",{"aria-hidden":"true",children:""})]})]})}function Zq(){const e=[{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Express Intent",description:"Describe what you need"},{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Line Assembles",description:"Stations configure"},{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Gates Enforce",description:"Validation required"},{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Artifacts Stabilize",description:"Versioned, ready"}];return l.jsx("section",{className:"max-w-4xl mx-auto",children:l.jsx("div",{className:"flex items-start justify-between gap-4",children:e.map((t,r)=>l.jsxs("div",{className:"flex-1 text-center group",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full mb-3",style:{background:me.bgElevated,border:`1px solid ${me.border}`,color:me.textMuted},children:t.icon}),l.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:me.textPrimary},children:t.title}),l.jsx("p",{className:"text-xs",style:{color:me.textMuted},children:t.description}),r<e.length-1&&l.jsx("div",{className:"absolute top-5 -right-2 hidden md:block",style:{color:me.border}})]},r))})})}function Jq(){const e=["Auditable outputs","Traceable decisions","Validated delivery","Human accountability"];return l.jsx("section",{className:"text-center",children:l.jsx("div",{className:"flex flex-wrap justify-center gap-x-6 gap-y-2",children:e.map((t,r)=>l.jsx("span",{className:"text-xs",style:{color:me.textMuted},children:t},r))})})}function e$({onLogin:e}){return l.jsxs("section",{className:"text-center",children:[l.jsx("p",{className:"text-sm font-medium mb-4",style:{color:me.textSecondary},children:"Ready?"}),l.jsxs("div",{className:"inline-flex flex-col gap-3",children:[l.jsxs("button",{onClick:()=>e("google"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:me.accent,color:"#ffffff"},onMouseOver:t=>t.currentTarget.style.background=me.accentHover,onMouseOut:t=>t.currentTarget.style.background=me.accent,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#ffffff",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#ffffff",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#ffffff",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#ffffff",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsxs("button",{onClick:()=>e("microsoft"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:me.bg,border:`1px solid ${me.border}`,color:me.textPrimary},onMouseOver:t=>t.currentTarget.style.background=me.bgElevated,onMouseOut:t=>t.currentTarget.style.background=me.bg,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",children:[l.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),l.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),l.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),l.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]}),"Continue with Microsoft"]})]})]})}function t$(){return l.jsxs("footer",{className:"py-6 flex items-center justify-center gap-6",children:[l.jsx("a",{href:"/terms",className:"text-xs transition-colors",style:{color:me.textSubtle},onMouseOver:e=>e.currentTarget.style.color=me.textMuted,onMouseOut:e=>e.currentTarget.style.color=me.textSubtle,children:"Terms"}),l.jsx("a",{href:"/privacy",className:"text-xs transition-colors",style:{color:me.textSubtle},onMouseOver:e=>e.currentTarget.style.color=me.textMuted,onMouseOut:e=>e.currentTarget.style.color=me.textSubtle,children:"Privacy"}),l.jsx("span",{className:"text-xs",style:{color:me.border},children:" 2026 The Combine"})]})}function r$(){const{login:e}=xi();return l.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:me.bg},children:[l.jsx(Xq,{}),l.jsx("main",{className:"flex-1 flex flex-col justify-center px-8 py-12",children:l.jsxs("div",{className:"space-y-12",children:[l.jsx(Qq,{}),l.jsx(Zq,{}),l.jsx(Jq,{}),l.jsx(e$,{onLogin:e})]})}),l.jsx(t$,{})]})}const pe={bg:"#0f172a",bgElevated:"#1e293b",border:"#334155",textPrimary:"#f8fafc",textSecondary:"#94a3b8",textMuted:"#64748b",textSubtle:"#475569",accent:"#3b82f6",accentHover:"#2563eb"};function n$(){return l.jsxs("header",{className:"h-16 flex items-center justify-between px-6 border-b",style:{background:pe.bg,borderColor:pe.border},children:[l.jsxs("a",{href:"/",className:"flex items-center gap-3 transition-colors",style:{color:pe.textMuted},onMouseOver:e=>e.currentTarget.style.color=pe.textSecondary,onMouseOut:e=>e.currentTarget.style.color=pe.textMuted,children:[l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("span",{className:"text-sm",children:"Back"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo-dark.png",alt:"The Combine",className:"h-6"}),l.jsx("span",{className:"text-sm font-bold tracking-[0.15em]",style:{color:pe.textPrimary},children:"THE COMBINE"})]}),l.jsx("div",{className:"w-16"})," "]})}function Un({title:e,children:t}){return l.jsxs("section",{className:"mb-16",children:[e&&l.jsx("h2",{className:"text-xl font-semibold mb-6",style:{color:pe.textPrimary},children:e}),t]})}function Qe({children:e,className:t=""}){return l.jsx("p",{className:`text-base leading-relaxed mb-4 ${t}`,style:{color:pe.textSecondary},children:e})}function zi({children:e}){return l.jsx("p",{className:"text-base leading-relaxed mb-4 pl-4",style:{color:pe.textPrimary,borderLeft:`2px solid ${pe.border}`},children:e})}function Aa({items:e}){return l.jsx("ul",{className:"space-y-2 mb-4",children:e.map((t,r)=>l.jsxs("li",{className:"text-base flex items-start gap-3",style:{color:pe.textSecondary},children:[l.jsx("span",{style:{color:pe.textMuted},children:"-"}),t]},r))})}function Pa({number:e,title:t,children:r}){return l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[l.jsxs("span",{className:"text-sm font-mono",style:{color:pe.textMuted},children:[e,"."]}),l.jsx("h3",{className:"text-base font-medium",style:{color:pe.textPrimary},children:t})]}),l.jsx("div",{className:"pl-7",children:l.jsx(Qe,{children:r})})]})}function Da({title:e,children:t}){return l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-base font-medium mb-2",style:{color:pe.textPrimary},children:e}),l.jsx(Qe,{className:"mb-0",children:t})]})}function s$({onLogin:e}){return l.jsxs("section",{className:"text-center py-12 rounded-lg",style:{background:pe.bgElevated,border:`1px solid ${pe.border}`},children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:pe.textPrimary},children:"When You're Ready"}),l.jsx(Qe,{className:"max-w-md mx-auto mb-2",children:"You don't need to prepare anything."}),l.jsx(Qe,{className:"max-w-md mx-auto mb-2",children:"You don't need to know the workflow in advance."}),l.jsx(Qe,{className:"max-w-md mx-auto mb-8",children:"You start by stating intent  the system handles the rest."}),l.jsxs("div",{className:"inline-flex flex-col gap-3",children:[l.jsxs("button",{onClick:()=>e("google"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:pe.accent,color:"#ffffff"},onMouseOver:t=>t.currentTarget.style.background=pe.accentHover,onMouseOut:t=>t.currentTarget.style.background=pe.accent,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#ffffff",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#ffffff",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#ffffff",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#ffffff",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsxs("button",{onClick:()=>e("microsoft"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:pe.bg,border:`1px solid ${pe.border}`,color:pe.textPrimary},onMouseOver:t=>t.currentTarget.style.background=pe.bgElevated,onMouseOut:t=>t.currentTarget.style.background=pe.bg,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",children:[l.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),l.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),l.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),l.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]}),"Continue with Microsoft"]})]})]})}function i$(){return l.jsxs("footer",{className:"py-8 text-center",children:[l.jsx("p",{className:"text-sm mb-6",style:{color:pe.textMuted},children:"The Combine does not replace human judgment. It makes it visible."}),l.jsxs("div",{className:"flex items-center justify-center gap-6",children:[l.jsx("a",{href:"/terms",className:"text-xs transition-colors",style:{color:pe.textSubtle},onMouseOver:e=>e.currentTarget.style.color=pe.textMuted,onMouseOut:e=>e.currentTarget.style.color=pe.textSubtle,children:"Terms"}),l.jsx("a",{href:"/privacy",className:"text-xs transition-colors",style:{color:pe.textSubtle},onMouseOver:e=>e.currentTarget.style.color=pe.textMuted,onMouseOut:e=>e.currentTarget.style.color=pe.textSubtle,children:"Privacy"}),l.jsx("span",{className:"text-xs",style:{color:pe.border},children:" 2026 The Combine"})]})]})}function o$(){const{login:e}=xi();return l.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:pe.bg},children:[l.jsx(n$,{}),l.jsx("main",{className:"flex-1 px-6 py-12",children:l.jsxs("article",{className:"max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-semibold mb-12 text-center",style:{color:pe.textPrimary},children:"Learn More"}),l.jsxs(Un,{title:"What The Combine Is",children:[l.jsx(Qe,{children:"The Combine is an AI-assisted production system for knowledge work."}),l.jsx(Qe,{children:"It applies manufacturing discipline to work that is normally informal, fragile, and difficult to audit  system design, architecture, requirements, analysis, and planning."}),l.jsx(zi,{children:"Instead of prompts and chat history, The Combine produces governed artifacts."}),l.jsx(zi,{children:"Instead of experimentation without memory, it runs repeatable production lines."})]}),l.jsxs(Un,{title:"Why It Exists",children:[l.jsx(Qe,{children:"Most AI tools optimize for speed and creativity. That works well for drafts and exploration."}),l.jsx(Qe,{children:"It breaks down when the work must be:"}),l.jsx(Aa,{items:["Auditable","Traceable","Reviewed","Approved","Reused","Defended"]}),l.jsx(Qe,{children:"The Combine exists for situations where quality, accountability, and repeatability matter more than cleverness."})]}),l.jsxs(Un,{title:'Why "The Combine"',children:[l.jsx(Qe,{children:"The Combine takes its name from the combine harvester  one of the most important industrial inventions of the 20th century."}),l.jsx(Qe,{children:"Before the combine, harvesting was fragmented, manual, and inconsistent. Separate steps. Separate tools. High variability. Heavy dependence on individual skill."}),l.jsx(Qe,{children:"The combine harvester changed that by integrating many steps into a single, governed production line  increasing consistency, traceability, and scale without removing human oversight."}),l.jsx(Qe,{children:"The Combine applies the same philosophy to AI-driven knowledge work."}),l.jsx(Qe,{children:"Instead of scattered prompts, fragile documents, and unrepeatable decisions, it assembles intent through a structured line:"}),l.jsx(Aa,{items:["Inputs are clarified","Work moves through defined stations","Quality gates enforce discipline","Outputs stabilize into reusable artifacts"]}),l.jsx(Qe,{children:"This is not automation for speed. It is industrialization for reliability."}),l.jsx(zi,{children:"As with the original combine, the breakthrough is not intelligence, but integration."})]}),l.jsxs(Un,{title:"How It Works",children:[l.jsx(Pa,{number:1,title:"You express intent",children:"You describe what you want to build. The system listens, asks clarifying questions, and confirms scope and constraints."}),l.jsx(Pa,{number:2,title:"A production line is assembled",children:"Based on your intent, The Combine configures a sequence of specialized stations  each responsible for producing a specific artifact."}),l.jsx(Pa,{number:3,title:"Quality gates enforce discipline",children:"Artifacts move forward only when they meet defined criteria. Nothing proceeds without validation."}),l.jsx(Pa,{number:4,title:"Outputs stabilize",children:"Approved artifacts are versioned, bound, and ready for use  not just today, but later."})]}),l.jsxs(Un,{title:"What Makes It Different",children:[l.jsx(Da,{title:"Production over prompting",children:"Work progresses through defined stages, not conversations."}),l.jsx(Da,{title:"Human accountability remains central",children:"AI assists, but humans approve. Nothing ships without oversight."}),l.jsx(Da,{title:"Every decision is traceable",children:"Why something exists, who approved it, and what assumptions were made are always visible."}),l.jsx(Da,{title:"Designed for real-world constraints",children:"Compliance, audits, handoffs, and change management are first-class concerns."})]}),l.jsxs(Un,{title:"What The Combine Is Not",children:[l.jsx(Aa,{items:["A chat interface","A creative writing tool","An autonomous agent that acts without approval","A system that hides its reasoning or decisions"]}),l.jsx(Qe,{children:"If you want improvisation, there are better tools."}),l.jsx(zi,{children:"If you need defensible outcomes, this is what The Combine is built for."})]}),l.jsxs(Un,{title:"Who It's For",children:[l.jsx(Qe,{children:"The Combine is designed for people responsible for outcomes, including:"}),l.jsx(Aa,{items:["Architects and technical leaders","Product and delivery leaders","Compliance-conscious teams","Organizations that need repeatable, explainable AI support"]}),l.jsx(zi,{children:`If the phrase "nothing ships without validation" resonates, you're in the right place.`})]}),l.jsx(s$,{onLogin:e})]})}),l.jsx(i$,{})]})}function a$(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{n(!0),i(null);try{const a=await Ne.getTemplates();t(a.templates||[])}catch(a){i(a.message),console.error("Failed to fetch templates:",a)}finally{n(!1)}},[]);return m.useEffect(()=>{o()},[o]),{templates:e,loading:r,error:s,refresh:o}}function l$(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{n(!0),i(null);try{const a=await Ne.getOrchestrationWorkflows();t(a.workflows||[])}catch(a){i(a.message),console.error("Failed to fetch orchestration workflows:",a)}finally{n(!1)}},[]);return m.useEffect(()=>{o()},[o]),{workflows:e,loading:r,error:s,refresh:o}}function _m({title:e,defaultOpen:t=!0,children:r}){const[n,s]=m.useState(t);return l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>s(!n),className:"w-full px-4 py-2.5 flex items-center justify-between text-left",style:{background:"var(--bg-panel)",border:"none",borderBottom:"1px solid var(--border-panel)",cursor:"pointer"},children:[l.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--text-muted)"},children:e}),l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)",transform:n?"rotate(0deg)":"rotate(-90deg)",transition:"transform 150ms ease",display:"inline-block"},children:""})]}),n&&r]})}function un({title:e,action:t,defaultOpen:r=!0,children:n}){const[s,i]=m.useState(r);return l.jsxs("div",{children:[l.jsxs("div",{className:"px-4 py-1.5 flex items-center justify-between",style:{borderBottom:"1px solid var(--border-panel)"},children:[l.jsxs("button",{onClick:()=>i(!s),className:"flex items-center gap-1.5",style:{background:"transparent",border:"none",cursor:"pointer",padding:0},children:[l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)",transform:s?"rotate(0deg)":"rotate(-90deg)",transition:"transform 150ms ease",display:"inline-block"},children:""}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:e})]}),t]}),s&&n]})}function dn({selected:e,onClick:t,label:r,sublabel:n}){return l.jsxs("button",{onClick:t,className:"w-full px-4 py-2 text-left text-sm hover:opacity-80 transition-opacity",style:{background:e?"var(--bg-selected)":"transparent",color:e?"var(--text-primary)":"var(--text-secondary)",borderLeft:e?"2px solid var(--action-primary)":"2px solid transparent"},children:[l.jsx("div",{className:"font-medium truncate",children:r}),n&&l.jsx("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:n})]})}function Gn({loading:e,empty:t,emptyMessage:r="None found"}){return e?l.jsx("div",{className:"px-4 py-3 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):t?l.jsx("div",{className:"px-4 py-3 text-sm",style:{color:"var(--text-muted)"},children:r}):null}function c$({documentTypes:e=[],roles:t=[],templates:r=[],workflows:n=[],loading:s=!1,rolesLoading:i=!1,templatesLoading:o=!1,workflowsLoading:a=!1,selectedDocType:c=null,selectedRole:u=null,selectedTemplate:d=null,selectedWorkflow:f=null,onSelectDocType:p,onSelectRole:h,onSelectTemplate:b,onSelectWorkflow:g,onCreateWorkflow:w,onSelectTask:v,onSelectSchema:x}){const[y,_]=m.useState(null),[j,S]=m.useState(null),[N,k]=m.useState(""),[C,R]=m.useState(!1),T=e.reduce((A,B)=>{const V=B.category||"other";return A[V]||(A[V]=[]),A[V].push(B),A},{}),L=["intake","architecture","planning","other"],$=Object.keys(T).sort((A,B)=>{const V=L.indexOf(A),Y=L.indexOf(B);return V===-1&&Y===-1?A.localeCompare(B):V===-1?1:Y===-1?-1:V-Y}),E=()=>{_(null),S(null),k("")},O=async()=>{const A=N.trim().toLowerCase().replace(/\s+/g,"_");if(!(!A||!/^[a-z][a-z0-9_]*$/.test(A))){R(!0);try{const B={workflow_id:A,pow_class:"template"};j&&(B.derived_from={workflow_id:j.workflow_id,version:j.active_version},B.source_version=j.active_version),await(w==null?void 0:w(B)),E()}catch{}finally{R(!1)}}},P=e.map(A=>({doc_type_id:A.doc_type_id,display_name:A.display_name,active_version:A.active_version})),F=e.map(A=>({doc_type_id:A.doc_type_id,display_name:A.display_name,active_version:A.active_version})),D=n.filter(A=>(A.pow_class||"reference")==="reference"),I=n.filter(A=>A.pow_class==="template"),z=n.filter(A=>A.pow_class==="instance"),M=e.filter(A=>A.active_version).length+n.filter(A=>A.active_version).length,q=A=>{const B=`v${A.active_version}`,V=A.step_count!=null?`  ${A.step_count} steps`:"";return A.pow_class==="template"&&A.derived_from_label?`${B}${V}  from ${A.derived_from_label}`:`${B}${V}`};return l.jsx("div",{className:"w-60 flex flex-col border-r h-full",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.jsxs(_m,{title:"Production Workflows",defaultOpen:!0,children:[l.jsxs(un,{title:"Reference Workflows",children:[l.jsx(Gn,{loading:a,empty:!a&&D.length===0,emptyMessage:"No reference workflows"}),!a&&D.length>0&&l.jsx("div",{className:"py-1",children:D.map(A=>l.jsx(dn,{selected:(f==null?void 0:f.workflow_id)===A.workflow_id,onClick:()=>g==null?void 0:g(A),label:A.name||A.workflow_id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),sublabel:q(A)},A.workflow_id))})]}),l.jsxs(un,{title:"Template Workflows",action:w&&l.jsx("button",{onClick:()=>_(y?null:"choose"),className:"text-xs hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},title:"Create new template workflow",children:"+ New"}),children:[y==="choose"&&l.jsxs("div",{className:"px-4 py-2",style:{background:"var(--bg-canvas)"},children:[l.jsxs("button",{onClick:()=>_("from_reference"),className:"w-full text-left text-xs px-2 py-1.5 rounded mb-1 hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",fontWeight:600,border:"none",cursor:"pointer"},disabled:D.length===0,children:["From Reference",D.length===0?" (none available)":""]}),l.jsx("button",{onClick:()=>_("blank"),className:"w-full text-left text-xs px-2 py-1.5 rounded hover:opacity-80",style:{background:"transparent",color:"var(--text-muted)",border:"1px solid var(--border-panel)",cursor:"pointer"},children:"Blank Workflow"}),l.jsx("button",{onClick:E,className:"w-full text-center text-xs px-2 py-1 mt-1 hover:opacity-80",style:{background:"transparent",color:"var(--text-muted)",border:"none",cursor:"pointer"},children:"Cancel"})]}),y==="from_reference"&&!j&&l.jsxs("div",{className:"px-4 py-2",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"text-xs font-semibold mb-1",style:{color:"var(--text-muted)"},children:"Select reference to fork:"}),D.map(A=>l.jsxs("button",{onClick:()=>S(A),className:"w-full text-left text-xs px-2 py-1.5 rounded mb-0.5 hover:opacity-80",style:{background:"transparent",color:"var(--text-secondary)",border:"1px solid var(--border-panel)",cursor:"pointer"},children:[l.jsx("div",{className:"font-medium",children:A.name||A.workflow_id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase())}),l.jsxs("div",{style:{color:"var(--text-muted)"},children:["v",A.active_version]})]},A.workflow_id)),l.jsx("button",{onClick:()=>_("choose"),className:"w-full text-center text-xs px-2 py-1 mt-1 hover:opacity-80",style:{background:"transparent",color:"var(--text-muted)",border:"none",cursor:"pointer"},children:"Back"})]}),(y==="blank"||y==="from_reference"&&j)&&l.jsxs("div",{className:"px-4 py-2",style:{background:"var(--bg-canvas)"},children:[j&&l.jsxs("div",{className:"text-xs mb-1.5 px-2 py-1 rounded",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:["Forking: ",j.name||j.workflow_id," v",j.active_version]}),l.jsx("input",{type:"text",value:N,onChange:A=>k(A.target.value),onKeyDown:A=>{A.key==="Enter"&&O(),A.key==="Escape"&&E()},placeholder:"workflow_id (snake_case)",autoFocus:!0,disabled:C,className:"w-full text-xs px-2 py-1.5 rounded mb-1.5",style:{background:"var(--bg-input, var(--bg-panel))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",outline:"none"}}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:O,disabled:C||!N.trim(),className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",fontWeight:600,border:"none",cursor:C?"wait":"pointer",opacity:!N.trim()||C?.5:1},children:C?"Creating...":"Create"}),l.jsx("button",{onClick:E,className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{background:"transparent",color:"var(--text-muted)",border:"none",cursor:"pointer"},children:"Cancel"})]})]}),l.jsx(Gn,{loading:a,empty:!a&&I.length===0,emptyMessage:"No template workflows"}),!a&&I.length>0&&l.jsx("div",{className:"py-1",children:I.map(A=>l.jsx(dn,{selected:(f==null?void 0:f.workflow_id)===A.workflow_id,onClick:()=>g==null?void 0:g(A),label:A.name||A.workflow_id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),sublabel:q(A)},A.workflow_id))})]}),z.length>0&&l.jsx(un,{title:"Instance Workflows",children:l.jsx("div",{className:"py-1",children:z.map(A=>l.jsx(dn,{selected:(f==null?void 0:f.workflow_id)===A.workflow_id,onClick:()=>g==null?void 0:g(A),label:A.name||A.workflow_id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),sublabel:q(A)},A.workflow_id))})}),l.jsxs(un,{title:"Document Workflows",children:[l.jsx(Gn,{loading:s,empty:!s&&e.length===0,emptyMessage:"No document workflows"}),!s&&e.length>0&&l.jsx(l.Fragment,{children:$.map(A=>l.jsxs("div",{className:"py-1",children:[l.jsx("div",{className:"px-4 py-1 text-xs font-medium uppercase tracking-wider",style:{color:"var(--text-muted)"},children:A}),T[A].map(B=>l.jsx(dn,{selected:(c==null?void 0:c.doc_type_id)===B.doc_type_id,onClick:()=>p==null?void 0:p(B),label:B.display_name,sublabel:`v${B.active_version}${B.authority_level?`  ${B.authority_level}`:""}`},B.doc_type_id))]},A))})]})]}),l.jsxs(_m,{title:"Building Blocks",defaultOpen:!0,children:[l.jsxs(un,{title:"Roles",children:[l.jsx(Gn,{loading:i,empty:!i&&t.length===0,emptyMessage:"No roles"}),!i&&t.length>0&&l.jsx("div",{className:"py-1",children:t.map(A=>l.jsx(dn,{selected:(u==null?void 0:u.role_id)===A.role_id,onClick:()=>h==null?void 0:h(A),label:A.role_id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),sublabel:`v${A.active_version}`},A.role_id))})]}),l.jsxs(un,{title:"Tasks",children:[l.jsx(Gn,{loading:s,empty:!s&&P.length===0,emptyMessage:"No tasks"}),!s&&P.length>0&&l.jsx("div",{className:"py-1",children:P.map(A=>l.jsx(dn,{selected:(c==null?void 0:c.doc_type_id)===A.doc_type_id,onClick:()=>{var B;return(B=v||p)==null?void 0:B({doc_type_id:A.doc_type_id,display_name:A.display_name,active_version:A.active_version})},label:A.display_name,sublabel:`from ${A.doc_type_id}`},`task-${A.doc_type_id}`))})]}),l.jsxs(un,{title:"Schemas",children:[l.jsx(Gn,{loading:s,empty:!s&&F.length===0,emptyMessage:"No schemas"}),!s&&F.length>0&&l.jsx("div",{className:"py-1",children:F.map(A=>l.jsx(dn,{selected:(c==null?void 0:c.doc_type_id)===A.doc_type_id,onClick:()=>{var B;return(B=x||p)==null?void 0:B({doc_type_id:A.doc_type_id,display_name:A.display_name,active_version:A.active_version})},label:A.display_name,sublabel:`from ${A.doc_type_id}`},`schema-${A.doc_type_id}`))})]}),l.jsxs(un,{title:"Templates",children:[l.jsx(Gn,{loading:o,empty:!o&&r.length===0,emptyMessage:"No templates"}),!o&&r.length>0&&l.jsx("div",{className:"py-1",children:r.map(A=>l.jsx(dn,{selected:(d==null?void 0:d.template_id)===A.template_id,onClick:()=>b==null?void 0:b(A),label:A.template_id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),sublabel:`v${A.active_version}`},A.template_id))})]})]}),l.jsx(_m,{title:"Governance",defaultOpen:!1,children:l.jsx("div",{className:"px-4 py-3",children:l.jsxs("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"font-semibold uppercase tracking-wide mb-1",children:"Active Releases"}),l.jsxs("div",{children:[M," active ",M===1?"release":"releases"]})]})})})]})})}function Zn({content:e,onChange:t,loading:r=!1,saving:n=!1,isDirty:s=!1,error:i=null,readOnly:o=!1,placeholder:a="Enter prompt content...",isJson:c=!1}){const u=m.useCallback(()=>{if(!(!e||!c))try{const d=JSON.parse(e),f=JSON.stringify(d,null,2);t==null||t(f)}catch(d){console.warn("Invalid JSON, cannot format:",d.message)}},[e,c,t]);return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[o&&l.jsx("span",{className:"px-2 py-0.5 rounded",style:{background:"var(--border-panel)",color:"var(--text-muted)"},children:"Read-only"}),!o&&s&&l.jsx("span",{style:{color:"var(--text-muted)"},children:"Modified"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[c&&!o&&l.jsx("button",{onClick:u,className:"px-2 py-0.5 rounded text-xs hover:opacity-80",style:{background:"var(--bg-button)",color:"var(--text-muted)"},children:"Format JSON"}),r&&l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading..."}),n&&l.jsx("span",{style:{color:"var(--state-active-text)"},children:"Saving..."}),!n&&!r&&s&&l.jsx("span",{style:{color:"var(--action-success)"},children:"Saved"}),i&&l.jsxs("span",{style:{color:"var(--state-error-text)"},children:["Error: ",i]})]})]}),l.jsx("div",{className:"flex-1 relative",children:r?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading content..."})}):l.jsx("textarea",{value:e,onChange:d=>t==null?void 0:t(d.target.value),placeholder:a,readOnly:o,className:"w-full h-full p-4 resize-none font-mono text-sm",style:{background:"var(--bg-canvas)",color:"var(--text-primary)",border:"none",outline:"none"},spellCheck:!1})})]})}function u$({workspaceId:e,artifactId:t}){const[r,n]=m.useState(null),[s,i]=m.useState(!0),[o,a]=m.useState(null);return m.useEffect(()=>{if(!e||!t){n(null),i(!1);return}(async()=>{i(!0),a(null);try{const u=await Ne.getPreview(e,t);n(u)}catch(u){a(u.message),console.error("Failed to load preview:",u)}finally{i(!1)}})()},[e,t]),l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"px-3 py-2 text-xs border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Resolved Prompt (for execution)"}),l.jsx("span",{className:"px-2 py-0.5 rounded",style:{background:"var(--border-panel)",color:"var(--text-muted)"},children:"Read-only"})]}),(r==null?void 0:r.provenance)&&l.jsxs("div",{className:"space-y-1 font-mono",style:{color:"var(--text-muted)"},children:[r.provenance.role&&l.jsxs("div",{children:["Role: ",r.provenance.role]}),r.provenance.schema&&l.jsxs("div",{children:["Schema: ",r.provenance.schema]}),r.provenance.package&&l.jsxs("div",{children:["Package: ",r.provenance.package]})]})]}),l.jsx("div",{className:"flex-1 relative overflow-auto",children:s?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading preview..."})}):o?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-4 rounded",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--state-error-bg)"},children:[l.jsx("div",{className:"font-medium mb-2",style:{color:"var(--state-error-text)"},children:"Preview Failed"}),l.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:o})]})}):l.jsx("pre",{className:"p-4 font-mono text-sm whitespace-pre-wrap",style:{background:"var(--bg-canvas)",color:"var(--text-primary)",margin:0},children:(r==null?void 0:r.resolved_prompt)||"No preview available"})})]})}function d$({workspaceId:e,docType:t,roles:r=[],onSave:n}){const[s,i]=m.useState(null),[o,a]=m.useState(!1),[c,u]=m.useState(!1),[d,f]=m.useState(null),[p,h]=m.useState(!1);m.useEffect(()=>{var y,_,j;t&&(i({display_name:t.display_name||"",description:t.description||"",authority_level:t.authority_level||"elaborative",creation_mode:t.creation_mode||"llm_generated",production_mode:t.production_mode||"",scope:t.scope||"project",role_prompt_ref:t.role_prompt_ref||"",template_ref:t.template_ref||"",required_inputs:t.required_inputs||[],optional_inputs:t.optional_inputs||[],creates_children:t.creates_children||[],parent_doc_type:t.parent_doc_type||"",ui_icon:((y=t.ui)==null?void 0:y.icon)||"",ui_category:((_=t.ui)==null?void 0:_.category)||"",ui_display_order:((j=t.ui)==null?void 0:j.display_order)||0}),h(!1),f(null))},[t]);const b=m.useCallback((y,_)=>{i(j=>({...j,[y]:_})),h(!0)},[]),g=m.useCallback((y,_)=>{const j=_.split(",").map(S=>S.trim()).filter(S=>S);i(S=>({...S,[y]:j})),h(!0)},[]),w=m.useCallback(y=>{if(!y)return"";const _=r.find(j=>j.role_id===y);return _?`prompt:role:${y}:${_.active_version}`:""},[r]),v=m.useCallback(y=>{if(!y)return"";const _=y.split(":");return _.length>=3&&_[0]==="prompt"&&_[1]==="role"?_[2]:""},[]),x=m.useCallback(async()=>{if(!(!e||!t||!s)){u(!0),f(null);try{const y=t.version||t.active_version,_=`doctype:${t.doc_type_id}:${y}:manifest`,j=f$(t.doc_type_id,y,s),S=await Ne.writeArtifact(e,_,j);h(!1),n==null||n(_,S)}catch(y){console.error("Failed to save package:",y),f(y.message)}finally{u(!1)}}},[e,t,s,n]);return!t||!s?l.jsx("div",{className:"flex items-center justify-center h-full",style:{color:"var(--text-muted)"},children:"Loading package configuration..."}):l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsx("div",{className:"flex items-center gap-2",children:p&&l.jsx("span",{style:{color:"var(--text-muted)"},children:"Modified"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[c&&l.jsx("span",{style:{color:"var(--state-active-text)"},children:"Saving..."}),d&&l.jsxs("span",{style:{color:"var(--state-error-text)"},children:["Error: ",d]}),l.jsx("button",{onClick:x,disabled:!p||c,className:"px-3 py-1 rounded text-xs",style:{background:p?"var(--action-primary)":"var(--bg-panel)",color:p?"#000":"var(--text-muted)",opacity:p&&!c?1:.5},children:"Save Package"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"max-w-2xl space-y-6",children:[l.jsxs(qi,{title:"Identity",children:[l.jsx(It,{label:"Display Name",children:l.jsx("input",{type:"text",value:s.display_name,onChange:y=>b("display_name",y.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(It,{label:"Description",children:l.jsx("textarea",{value:s.description,onChange:y=>b("description",y.target.value),rows:3,className:"w-full px-3 py-2 rounded text-sm resize-none",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})})]}),l.jsxs(qi,{title:"Classification",children:[l.jsx(It,{label:"Authority Level",children:l.jsxs("select",{value:s.authority_level,onChange:y=>b("authority_level",y.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"descriptive",children:"Descriptive"}),l.jsx("option",{value:"prescriptive",children:"Prescriptive"}),l.jsx("option",{value:"constructive",children:"Constructive"}),l.jsx("option",{value:"elaborative",children:"Elaborative"})]})}),l.jsx(It,{label:"Creation Mode",children:l.jsxs("select",{value:s.creation_mode,onChange:y=>b("creation_mode",y.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"llm_generated",children:"LLM Generated"}),l.jsx("option",{value:"constructed",children:"Constructed"}),l.jsx("option",{value:"extracted",children:"Extracted"})]})}),l.jsx(It,{label:"Scope",children:l.jsxs("select",{value:s.scope,onChange:y=>b("scope",y.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"project",children:"Project"}),l.jsx("option",{value:"epic",children:"Epic"}),l.jsx("option",{value:"feature",children:"Feature"})]})})]}),l.jsx(qi,{title:"Shared References",children:l.jsxs(It,{label:"Role Prompt",children:[l.jsxs("select",{value:v(s.role_prompt_ref),onChange:y=>b("role_prompt_ref",w(y.target.value)),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"",children:"None"}),r.map(y=>l.jsx("option",{value:y.role_id,children:y.role_id.replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase())},y.role_id))]}),s.role_prompt_ref&&l.jsx("div",{className:"mt-1 text-xs",style:{color:"var(--text-muted)"},children:s.role_prompt_ref})]})}),l.jsxs(qi,{title:"Dependencies",children:[l.jsx(It,{label:"Required Inputs",hint:"Comma-separated doc type IDs",children:l.jsx("input",{type:"text",value:s.required_inputs.join(", "),onChange:y=>g("required_inputs",y.target.value),placeholder:"e.g., project_discovery, technical_architecture",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(It,{label:"Optional Inputs",hint:"Comma-separated doc type IDs",children:l.jsx("input",{type:"text",value:s.optional_inputs.join(", "),onChange:y=>g("optional_inputs",y.target.value),placeholder:"e.g., technical_architecture",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(It,{label:"Parent Doc Type",children:l.jsx("input",{type:"text",value:s.parent_doc_type,onChange:y=>b("parent_doc_type",y.target.value),placeholder:"e.g., implementation_plan",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(It,{label:"Creates Children",hint:"Comma-separated doc type IDs",children:l.jsx("input",{type:"text",value:s.creates_children.join(", "),onChange:y=>g("creates_children",y.target.value),placeholder:"e.g., feature, story",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})})]}),l.jsxs(qi,{title:"UI Configuration",children:[l.jsx(It,{label:"Icon",children:l.jsx("input",{type:"text",value:s.ui_icon,onChange:y=>b("ui_icon",y.target.value),placeholder:"e.g., search, package, map",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(It,{label:"Category",children:l.jsxs("select",{value:s.ui_category,onChange:y=>b("ui_category",y.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"",children:"Select category..."}),l.jsx("option",{value:"intake",children:"Intake"}),l.jsx("option",{value:"architecture",children:"Architecture"}),l.jsx("option",{value:"planning",children:"Planning"}),l.jsx("option",{value:"execution",children:"Execution"})]})}),l.jsx(It,{label:"Display Order",children:l.jsx("input",{type:"number",value:s.ui_display_order,onChange:y=>b("ui_display_order",parseInt(y.target.value)||0),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})})]})]})})]})}function qi({title:e,children:t}){return l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold mb-3 uppercase tracking-wide",style:{color:"var(--text-muted)"},children:e}),l.jsx("div",{className:"space-y-4",children:t})]})}function It({label:e,hint:t,children:r}){return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&l.jsxs("span",{className:"ml-2 text-xs",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),r]})}function f$(e,t,r){return[`# ${r.display_name} Package`,`# Version ${t}`,"",`doc_type_id: ${e}`,`display_name: "${r.display_name}"`,`version: "${t}"`,"description: >",`  ${r.description.replace(/\n/g,`
  `)}`,"","# Classification",`authority_level: ${r.authority_level}`,`creation_mode: ${r.creation_mode}`,r.production_mode?`production_mode: ${r.production_mode}`:"production_mode: null",`scope: ${r.scope}`,"","# Dependencies",`required_inputs: [${r.required_inputs.map(s=>`"${s}"`).join(", ")}]`,`optional_inputs: [${r.optional_inputs.map(s=>`"${s}"`).join(", ")}]`,`creates_children: [${r.creates_children.map(s=>`"${s}"`).join(", ")}]`,`parent_doc_type: ${r.parent_doc_type?`"${r.parent_doc_type}"`:"null"}`,"","# Shared artifact references",`role_prompt_ref: ${r.role_prompt_ref?`"${r.role_prompt_ref}"`:"null"}`,`template_ref: ${r.template_ref?`"${r.template_ref}"`:"null"}`,"","# Packaged artifacts","artifacts:",'  task_prompt: "prompts/task.prompt.txt"',"  qa_prompt: null","  reflection_prompt: null","  pgc_context: null","  questions_prompt: null",'  schema: "schemas/output.schema.json"',"","# Tests","tests:","  fixtures: []","  golden_traces: []","","# Gating rules","gating_rules:","  lifecycle_states: []","  design_status: []","  acceptance_required: false","  accepted_by: []","","# UI configuration","ui:",`  icon: ${r.ui_icon||"file"}`,`  category: ${r.ui_category||"other"}`,`  display_order: ${r.ui_display_order||0}`,""].join(`
`)}function hC(e,t,{debounceMs:r=1e3,onSave:n}={}){const[s,i]=m.useState(null),[o,a]=m.useState(null),[c,u]=m.useState(!0),[d,f]=m.useState(null),[p,h]=m.useState(!1),[b,g]=m.useState(null),w=m.useRef(null),v=m.useRef(null),x=m.useCallback(async()=>{if(!e||!t){i(null),a(null),u(!1);return}u(!0),f(null);try{const N=await Ne.getArtifact(e,t),k=JSON.parse(N.content);i(k),a(k)}catch(N){f(N.message),console.error("Failed to load workflow artifact:",N)}finally{u(!1)}},[e,t]),y=m.useCallback(async N=>{if(!(!e||!t)){h(!0),f(null);try{const k=JSON.stringify(N,null,2),C=await Ne.writeArtifact(e,t,k);g(C),a(N),n&&n(C)}catch(k){f(k.message),console.error("Failed to save workflow:",k)}finally{h(!1)}}},[e,t,n]),_=m.useCallback(N=>{v.current=N,w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{v.current!==null&&(y(v.current),v.current=null)},r)},[y,r]),j=m.useCallback(N=>{i(N),_(N)},[_]),S=m.useCallback(()=>{w.current&&clearTimeout(w.current),s&&y(s)},[s,y]);return m.useEffect(()=>(x(),()=>{w.current&&clearTimeout(w.current)}),[x]),{workflowJson:s,originalJson:o,loading:c,error:d,saving:p,lastSaveResult:b,isDirty:s!==o,updateWorkflow:j,saveNow:S,reload:x}}function p$({data:e,selected:t}){const{config:r,isEntry:n}=e,s=e.type==="end";return l.jsxs("div",{style:{background:r.bgColor,border:`2px solid ${t?r.color:r.borderColor}`,borderRadius:8,padding:"8px 12px",minWidth:180,maxWidth:220,boxShadow:t?`0 0 12px ${r.color}40`:"none",transition:"box-shadow 0.2s"},children:[l.jsx(Ir,{type:"target",position:Z.Top,style:{background:r.color,width:8,height:8,border:"none"}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[l.jsx("span",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",color:r.color,letterSpacing:"0.05em"},children:r.label}),n&&l.jsx("span",{style:{fontSize:8,padding:"1px 5px",borderRadius:3,background:r.color,color:"#fff",fontWeight:700,letterSpacing:"0.05em"},children:"ENTRY"})]}),l.jsx("div",{style:{fontSize:12,fontWeight:600,color:"var(--text-primary)",marginBottom:2},children:e.node_id}),e.description&&l.jsx("div",{style:{fontSize:10,color:"var(--text-muted)",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"14px",maxHeight:"28px"},children:e.description}),l.jsxs("div",{style:{display:"flex",gap:4,marginTop:4,flexWrap:"wrap"},children:[e.produces&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:"rgba(59,130,246,0.2)",color:"#3b82f6"},children:e.produces}),e.terminal_outcome&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:e.terminal_outcome==="stabilized"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:e.terminal_outcome==="stabilized"?"#10b981":"#ef4444"},children:e.terminal_outcome}),e.requires_qa&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:"rgba(139,92,246,0.2)",color:"#8b5cf6"},children:"QA"}),e.qa_mode&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:"rgba(139,92,246,0.1)",color:"#8b5cf6"},children:e.qa_mode})]}),!s&&l.jsx(Ir,{type:"source",position:Z.Bottom,style:{background:r.color,width:8,height:8,border:"none"}})]})}const h$=m.memo(p$),ql={intake_gate:{color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.15)",borderColor:"rgba(245, 158, 11, 0.5)",label:"Intake Gate"},task:{color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"rgba(59, 130, 246, 0.5)",label:"Task"},qa:{color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.5)",label:"QA"},pgc:{color:"#06b6d4",bgColor:"rgba(6, 182, 212, 0.15)",borderColor:"rgba(6, 182, 212, 0.5)",label:"PGC"},gate:{color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",borderColor:"rgba(249, 115, 22, 0.5)",label:"Gate"},end:{color:"#10b981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"rgba(16, 185, 129, 0.5)",label:"End"}},m$={color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"rgba(239, 68, 68, 0.5)",label:"End"},H2=220,W2=110;function V2(e){if(!e||!e.nodes)return{nodes:[],edges:[]};const t=e.entry_node_ids||[],r=e.nodes.map(s=>{const i=ql[s.type]||ql.task,a=s.type==="end"&&["blocked","abandoned"].includes(s.terminal_outcome)?m$:i;return{id:s.node_id,type:"workflowNode",position:s._position||{x:0,y:0},data:{...s,config:a,isEntry:t.includes(s.node_id)}}}),n=(e.edges||[]).map(s=>{const i=s.non_advancing||!s.to_node_id,o=s.conditions&&s.conditions.length>0;let a=s.label||s.outcome;if(o){const c=s.conditions[0],u={eq:"=",ne:"!=",lt:"<",lte:"<=",gt:">",gte:">="}[c.operator]||c.operator;a=`${a} (${c.type} ${u} ${c.value})`}return{id:s.edge_id,source:s.from_node_id,target:s.to_node_id||s.from_node_id,type:"smoothstep",animated:i,label:a,data:{...s},style:{stroke:i?"#6b7280":"#64748b",strokeWidth:2,strokeDasharray:i?"5,5":void 0},labelStyle:{fontSize:10,fill:"var(--text-muted)"},labelBgStyle:{fill:"var(--bg-panel)",fillOpacity:.9},markerEnd:s.to_node_id?{type:"arrowclosed",color:"#64748b"}:void 0}});return{nodes:r,edges:n}}function U2(e,t,r="TB"){const n=new zl.graphlib.Graph;return n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:r,nodesep:60,ranksep:80,marginx:40,marginy:40}),e.forEach(s=>{n.setNode(s.id,{width:H2,height:W2})}),t.forEach(s=>{s.target!==s.source&&n.setEdge(s.source,s.target)}),zl.layout(n),e.map(s=>{const i=n.node(s.id);return i?{...s,position:{x:i.x-H2/2,y:i.y-W2/2}}:s})}function g$(e,t){const r=new Set(t.map(i=>i.id||i.node_id));let n=1,s=`${e}_${n}`;for(;r.has(s);)n++,s=`${e}_${n}`;return s}function v$(e,t,r){const n=new Set(r.map(o=>o.id||o.edge_id));let s=1,i=`${e}_to_${t}`;for(;n.has(i);)s++,i=`${e}_to_${t}_${s}`;return i}function x$(e,t={x:100,y:100}){const n={node_id:e+"_new",type:e,description:""};return e==="end"&&(n.terminal_outcome="stabilized"),(e==="task"||e==="pgc")&&(n.task_ref="",n.includes={}),e==="qa"&&(n.requires_qa=!0,n.qa_mode="semantic"),n}const y$={workflowNode:h$},b$=[{value:"task",label:"Task"},{value:"qa",label:"QA"},{value:"pgc",label:"PGC"},{value:"gate",label:"Gate"},{value:"end",label:"End"},{value:"intake_gate",label:"Intake Gate"}];function w$({workflowJson:e,onWorkflowChange:t,selectedNodeId:r,selectedEdgeId:n,onNodeSelect:s,onEdgeSelect:i}){const o=mc(),[a,c,u]=HN([]),[d,f,p]=WN([]),[h,b]=m.useState(!1),g=m.useRef(!1);m.useEffect(()=>{if(!e){c([]),f([]);return}let{nodes:C,edges:R}=V2(e);(!C.some(L=>L.position.x!==0||L.position.y!==0)||!g.current)&&(C=U2(C,R),g.current=!0),c(C),f(R)},[e,c,f]);const w=m.useCallback(C=>{if(!e)return;const T={edge_id:v$(C.source,C.target,e.edges||[]),from_node_id:C.source,to_node_id:C.target,outcome:"success",label:"",kind:"auto"},L={...e,edges:[...e.edges||[],T]};t(L)},[e,t]),v=m.useCallback((C,R)=>{if(!e)return;const T=e.nodes.map(L=>L.node_id===R.id?{...L,_position:R.position}:L);t({...e,nodes:T})},[e,t]),x=m.useCallback((C,R)=>{s==null||s(R.id)},[s]),y=m.useCallback((C,R)=>{i==null||i(R.id)},[i]),_=m.useCallback(()=>{s==null||s(null),i==null||i(null)},[s,i]),j=m.useCallback(C=>{if(C.key==="Delete"||C.key==="Backspace"){if(r&&e){const R={...e,nodes:e.nodes.filter(T=>T.node_id!==r),edges:e.edges.filter(T=>T.from_node_id!==r&&T.to_node_id!==r),entry_node_ids:(e.entry_node_ids||[]).filter(T=>T!==r)};t(R),s==null||s(null)}else if(n&&e){const R={...e,edges:e.edges.filter(T=>T.edge_id!==n)};t(R),i==null||i(null)}}},[r,n,e,t,s,i]),S=m.useCallback(C=>{if(!e)return;const R=g$(C,e.nodes||[]),T=x$(C);T.node_id=R;const L=o.getViewport(),$=(-L.x+window.innerWidth/2)/L.zoom,E=(-L.y+window.innerHeight/2)/L.zoom;T._position={x:$-110,y:E-50};const O={...e,nodes:[...e.nodes||[],T]};t(O),b(!1),s==null||s(R)},[e,t,o,s]),N=m.useCallback(()=>{if(!e)return;let{nodes:C,edges:R}=V2(e);C=U2(C,R);const T=e.nodes.map(L=>{const $=C.find(E=>E.id===L.node_id);return $?{...L,_position:$.position}:L});t({...e,nodes:T}),setTimeout(()=>{o.fitView({padding:.2,duration:300})},50)},[e,t,o]),k=m.useCallback(()=>{o.fitView({padding:.2,duration:300})},[o]);return l.jsx("div",{className:"flex-1 relative",onKeyDown:j,tabIndex:0,style:{outline:"none"},children:l.jsxs(ex,{nodes:a,edges:d,onNodesChange:u,onEdgesChange:p,onConnect:w,onNodeDragStop:v,onNodeClick:x,onEdgeClick:y,onPaneClick:_,nodeTypes:y$,fitView:!0,fitViewOptions:{padding:.2},minZoom:.2,maxZoom:2,style:{background:"var(--bg-canvas)"},proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"smoothstep"},deleteKeyCode:null,children:[l.jsx(Mn,{position:"top-left",children:l.jsxs("div",{className:"flex gap-2 px-3 py-2 rounded-lg border backdrop-blur",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>b(!h),className:"px-2.5 py-1.5 rounded text-xs font-medium transition-colors hover:opacity-80",style:{background:"var(--action-primary)",color:"#000"},children:"+ Add Node"}),h&&l.jsx("div",{className:"absolute top-full left-0 mt-1 rounded-lg border shadow-xl z-10",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)",minWidth:140},children:b$.map(C=>{const R=ql[C.value]||{};return l.jsxs("button",{onClick:()=>S(C.value),className:"w-full px-3 py-2 text-left text-xs hover:opacity-80 transition-colors flex items-center gap-2",style:{color:"var(--text-primary)"},children:[l.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{background:R.color}}),C.label]},C.value)})})]}),l.jsx("button",{onClick:N,className:"px-2.5 py-1.5 rounded text-xs transition-colors",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Auto Layout"}),l.jsx("button",{onClick:k,className:"px-2.5 py-1.5 rounded text-xs transition-colors",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Fit View"})]})}),l.jsx(GN,{position:"bottom-right",nodeColor:C=>{var T;const R=(T=C.data)==null?void 0:T.config;return(R==null?void 0:R.color)||"#475569"},maskColor:"rgba(11, 17, 32, 0.85)",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)",borderRadius:8},pannable:!0,zoomable:!0}),l.jsx(Mn,{position:"bottom-left",children:l.jsx("div",{className:"flex gap-3 text-[10px] px-3 py-2 rounded-lg border backdrop-blur",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)"},children:Object.entries(ql).map(([C,R])=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{background:R.color}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:R.label})]},C))})}),l.jsx(Mn,{position:"top-right",children:l.jsx("div",{className:"text-[10px] px-2 py-1 rounded",style:{color:"var(--text-muted)"},children:"Drag to connect | Delete to remove | Scroll to zoom"})})]})})}const _$=[{value:"intake_gate",label:"Intake Gate"},{value:"task",label:"Task"},{value:"qa",label:"QA"},{value:"pgc",label:"PGC"},{value:"gate",label:"Gate"},{value:"end",label:"End"}],j$=["semantic","structural","hybrid"],S$=["stabilized","blocked","abandoned"],jr={width:"100%",padding:"6px 8px",borderRadius:4,fontSize:12,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},Lr={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"};function k$({node:e,onChange:t,onDelete:r}){const[n,s]=m.useState(e);m.useEffect(()=>{s(e)},[e]);const i=(u,d)=>{const f={...n,[u]:d};s(f),t(f)},o=(u,d)=>{const f={...n.includes,[u]:d},p={...n,includes:f};s(p),t(p)},a=u=>{const d={...n.includes};delete d[u];const f={...n,includes:d};s(f),t(f)},c=()=>{const u={...n.includes,NEW_KEY:""},d={...n,includes:u};s(d),t(d)};return n?l.jsxs("div",{className:"w-64 border-l overflow-y-auto flex-shrink-0",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Node Properties"}),l.jsx("button",{onClick:()=>r(n.node_id),className:"p-1 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444"},title:"Delete node",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),l.jsxs("div",{className:"p-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Node ID"}),l.jsx("input",{type:"text",value:n.node_id||"",onChange:u=>i("node_id",u.target.value),style:jr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Type"}),l.jsx("select",{value:n.type||"task",onChange:u=>i("type",u.target.value),style:jr,children:_$.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Description"}),l.jsx("textarea",{value:n.description||"",onChange:u=>i("description",u.target.value),rows:3,style:{...jr,resize:"vertical"}})]}),["task","qa","pgc","intake_gate"].includes(n.type)&&l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Task Ref"}),l.jsx("input",{type:"text",value:n.task_ref||"",onChange:u=>i("task_ref",u.target.value),placeholder:"tasks/Name v1.0",style:jr})]}),["task","intake_gate"].includes(n.type)&&l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Produces"}),l.jsx("input",{type:"text",value:n.produces||"",onChange:u=>i("produces",u.target.value),placeholder:"document_type",style:jr})]}),n.type==="qa"&&l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"QA Mode"}),l.jsx("select",{value:n.qa_mode||"semantic",onChange:u=>i("qa_mode",u.target.value),style:jr,children:j$.map(u=>l.jsx("option",{value:u,children:u},u))})]}),n.type==="end"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Terminal Outcome"}),l.jsx("select",{value:n.terminal_outcome||"stabilized",onChange:u=>i("terminal_outcome",u.target.value),style:jr,children:S$.map(u=>l.jsx("option",{value:u,children:u},u))})]}),l.jsxs("div",{children:[l.jsx("label",{style:Lr,children:"Gate Outcome"}),l.jsx("input",{type:"text",value:n.gate_outcome||"",onChange:u=>i("gate_outcome",u.target.value),placeholder:"e.g., complete, failed",style:jr})]})]}),l.jsxs("div",{className:"flex gap-4",children:[n.type==="qa"&&l.jsxs("label",{className:"flex items-center gap-1.5 text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("input",{type:"checkbox",checked:n.requires_qa||!1,onChange:u=>i("requires_qa",u.target.checked)}),"Requires QA"]}),l.jsxs("label",{className:"flex items-center gap-1.5 text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("input",{type:"checkbox",checked:n.non_advancing||!1,onChange:u=>i("non_advancing",u.target.checked)}),"Non-advancing"]})]}),["task","pgc"].includes(n.type)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{style:Lr,children:"Includes"}),l.jsx("button",{onClick:c,className:"text-xs px-1.5 py-0.5 rounded hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent"},children:"+ Add"})]}),l.jsx("div",{className:"space-y-2",children:Object.entries(n.includes||{}).map(([u,d])=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("input",{type:"text",value:u,onChange:f=>{const p={...n.includes};delete p[u],p[f.target.value]=d;const h={...n,includes:p};s(h),t(h)},style:{...jr,width:"35%",fontSize:10},placeholder:"KEY"}),l.jsx("input",{type:"text",value:d,onChange:f=>o(u,f.target.value),style:{...jr,flex:1,fontSize:10},placeholder:"path/to/file"}),l.jsx("button",{onClick:()=>a(u),className:"text-xs px-1",style:{color:"#ef4444"},children:"x"})]},u))})]})]})]}):null}const N$=["auto","user_choice"],E$=["eq","ne","lt","lte","gt","gte"],zr={width:"100%",padding:"6px 8px",borderRadius:4,fontSize:12,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},Kn={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"};function C$({edge:e,nodeIds:t,onChange:r,onDelete:n}){const[s,i]=m.useState(e);m.useEffect(()=>{i(e)},[e]);const o=(d,f)=>{const p={...s,[d]:f};i(p),r(p)},a=()=>{const d=[...s.conditions||[],{type:"retry_count",operator:"lt",value:2}];o("conditions",d)},c=(d,f,p)=>{const h=[...s.conditions||[]];h[d]={...h[d],[f]:p},o("conditions",h)},u=d=>{const f=(s.conditions||[]).filter((p,h)=>h!==d);o("conditions",f)};return s?l.jsxs("div",{className:"w-64 border-l overflow-y-auto flex-shrink-0",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Edge Properties"}),l.jsx("button",{onClick:()=>n(s.edge_id),className:"p-1 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444"},title:"Delete edge",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),l.jsxs("div",{className:"p-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{style:Kn,children:"Edge ID"}),l.jsx("input",{type:"text",value:s.edge_id||"",onChange:d=>o("edge_id",d.target.value),style:zr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Kn,children:"From Node"}),l.jsx("select",{value:s.from_node_id||"",onChange:d=>o("from_node_id",d.target.value),style:zr,children:t.map(d=>l.jsx("option",{value:d,children:d},d))})]}),l.jsxs("div",{children:[l.jsx("label",{style:Kn,children:"To Node"}),l.jsxs("select",{value:s.to_node_id||"",onChange:d=>o("to_node_id",d.target.value||null),style:zr,children:[l.jsx("option",{value:"",children:"(none - non-advancing)"}),t.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{style:Kn,children:"Outcome"}),l.jsx("input",{type:"text",value:s.outcome||"",onChange:d=>o("outcome",d.target.value),placeholder:"success, failed, etc.",style:zr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Kn,children:"Label"}),l.jsx("input",{type:"text",value:s.label||"",onChange:d=>o("label",d.target.value),placeholder:"Human-readable label",style:zr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Kn,children:"Kind"}),l.jsx("select",{value:s.kind||"auto",onChange:d=>o("kind",d.target.value),style:zr,children:N$.map(d=>l.jsx("option",{value:d,children:d},d))})]}),l.jsxs("label",{className:"flex items-center gap-1.5 text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("input",{type:"checkbox",checked:s.non_advancing||!1,onChange:d=>o("non_advancing",d.target.checked)}),"Non-advancing"]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{style:Kn,children:"Conditions"}),l.jsx("button",{onClick:a,className:"text-xs px-1.5 py-0.5 rounded hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent"},children:"+ Add"})]}),l.jsx("div",{className:"space-y-2",children:(s.conditions||[]).map((d,f)=>l.jsx("div",{className:"p-2 rounded space-y-1",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)"},children:l.jsxs("div",{className:"flex gap-1 items-center",children:[l.jsx("input",{type:"text",value:d.type||"",onChange:p=>c(f,"type",p.target.value),placeholder:"retry_count",style:{...zr,flex:1,fontSize:10}}),l.jsx("select",{value:d.operator||"lt",onChange:p=>c(f,"operator",p.target.value),style:{...zr,width:"auto",fontSize:10},children:E$.map(p=>l.jsx("option",{value:p,children:p},p))}),l.jsx("input",{type:"text",value:d.value??"",onChange:p=>{const h=isNaN(p.target.value)?p.target.value:Number(p.target.value);c(f,"value",h)},placeholder:"value",style:{...zr,width:50,fontSize:10}}),l.jsx("button",{onClick:()=>u(f),className:"text-xs px-1",style:{color:"#ef4444"},children:"x"})]})},f))})]})]})]}):null}const R$={padding:"6px 14px",fontSize:12,fontWeight:600,border:"none",cursor:"pointer",transition:"opacity 0.15s",background:"transparent"};function T$({workspaceId:e,artifactId:t,onArtifactSave:r}){var D,I,z;const[n,s]=m.useState("canvas"),[i,o]=m.useState(null),[a,c]=m.useState(null),[u,d]=m.useState(""),[f,p]=m.useState(null),{workflowJson:h,loading:b,error:g,saving:w,lastSaveResult:v,updateWorkflow:x}=hC(e,t,{onSave:M=>{r==null||r(t,M)}}),y=m.useMemo(()=>{var M;return!i||!h?null:((M=h.nodes)==null?void 0:M.find(q=>q.node_id===i))||null},[i,h]),_=m.useMemo(()=>{var M;return!a||!h?null:((M=h.edges)==null?void 0:M.find(q=>q.edge_id===a))||null},[a,h]),j=m.useMemo(()=>h!=null&&h.nodes?h.nodes.map(M=>M.node_id):[],[h]),S=m.useCallback(M=>{x(M)},[x]),N=m.useCallback(M=>{if(!h)return;const q=h.nodes.map(V=>V.node_id===i?M:V);let A=h.edges,B=h.entry_node_ids||[];M.node_id!==i&&(A=h.edges.map(V=>({...V,from_node_id:V.from_node_id===i?M.node_id:V.from_node_id,to_node_id:V.to_node_id===i?M.node_id:V.to_node_id})),B=B.map(V=>V===i?M.node_id:V),o(M.node_id)),x({...h,nodes:q,edges:A,entry_node_ids:B})},[h,i,x]),k=m.useCallback(M=>{if(!h)return;const q=h.edges.map(A=>A.edge_id===a?M:A);M.edge_id!==a&&c(M.edge_id),x({...h,edges:q})},[h,a,x]),C=m.useCallback(M=>{h&&(x({...h,nodes:h.nodes.filter(q=>q.node_id!==M),edges:h.edges.filter(q=>q.from_node_id!==M&&q.to_node_id!==M),entry_node_ids:(h.entry_node_ids||[]).filter(q=>q!==M)}),o(null))},[h,x]),R=m.useCallback(M=>{h&&(x({...h,edges:h.edges.filter(q=>q.edge_id!==M)}),c(null))},[h,x]),T=m.useCallback(M=>{o(M),M&&c(null)},[]),L=m.useCallback(M=>{c(M),M&&o(null)},[]),$=m.useCallback(M=>{M==="json"&&h&&(d(JSON.stringify(h,null,2)),p(null)),s(M)},[h]),E=m.useCallback(M=>{const q=M.target.value;d(q);try{const A=JSON.parse(q);p(null),x(A)}catch(A){p(A.message)}},[x]),O=((D=v==null?void 0:v.tier1_report)==null?void 0:D.results)||[],P=O.filter(M=>M.severity==="error").length,F=O.filter(M=>M.severity==="warning").length;return l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"flex items-center justify-between px-4 py-1.5 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsxs("div",{className:"flex items-center gap-3",children:[w&&l.jsx("span",{className:"text-xs",style:{color:"var(--action-primary)"},children:"Saving..."}),g&&l.jsx("span",{className:"text-xs",style:{color:"#ef4444"},children:g}),!w&&!g&&h&&l.jsxs("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:[((I=h.nodes)==null?void 0:I.length)||0," nodes, ",((z=h.edges)==null?void 0:z.length)||0," edges"]})]})}),l.jsx("div",{className:"flex items-center border-b px-2",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[{id:"canvas",label:"Canvas"},{id:"json",label:"JSON"},{id:"metadata",label:"Metadata"}].map(M=>l.jsx("button",{onClick:()=>$(M.id),style:{...R$,color:n===M.id?"var(--text-primary)":"var(--text-muted)",borderBottom:n===M.id?"2px solid var(--action-primary)":"2px solid transparent"},children:M.label},M.id))}),b?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading workflow..."})}):l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n==="canvas"&&l.jsxs(l.Fragment,{children:[l.jsx(gc,{children:l.jsx(w$,{workflowJson:h,onWorkflowChange:S,selectedNodeId:i,selectedEdgeId:a,onNodeSelect:T,onEdgeSelect:L})}),y&&l.jsx(k$,{node:y,onChange:N,onDelete:C}),_&&l.jsx(C$,{edge:_,nodeIds:j,onChange:k,onDelete:R})]}),n==="json"&&l.jsxs("div",{className:"flex-1 flex flex-col p-4",children:[l.jsx("textarea",{value:u,onChange:E,className:"flex-1 font-mono text-xs p-3 rounded",style:{background:"var(--bg-input, var(--bg-canvas))",border:f?"1px solid #ef4444":"1px solid var(--border-panel)",color:"var(--text-primary)",resize:"none",outline:"none"},spellCheck:!1}),f&&l.jsxs("div",{className:"mt-2 text-xs",style:{color:"#ef4444"},children:["JSON Error: ",f]})]}),n==="metadata"&&l.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:h?l.jsx(I$,{workflow:h}):l.jsx("div",{style:{color:"var(--text-muted)"},children:"No workflow loaded"})})]}),O.length>0&&l.jsxs("div",{className:"px-4 py-1.5 border-t flex items-center gap-3 text-xs",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[P>0&&l.jsxs("span",{style:{color:"#ef4444"},children:[P," error",P!==1?"s":""]}),F>0&&l.jsxs("span",{style:{color:"#f59e0b"},children:[F," warning",F!==1?"s":""]}),P===0&&F===0&&l.jsx("span",{style:{color:"#10b981"},children:"Valid"}),l.jsx("span",{style:{color:"var(--text-muted)"},children:O.map(M=>M.message).join(" | ")})]})]})}function I$({workflow:e}){const t={fontSize:12,color:"var(--text-primary)",padding:"6px 8px",borderRadius:4,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",width:"100%"},r={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"},n=[{key:"workflow_id",label:"Workflow ID"},{key:"name",label:"Name"},{key:"version",label:"Version"},{key:"description",label:"Description"}],s=e.thread_ownership||{},i=Object.entries(s),o=e.entry_node_ids||[];return l.jsxs("div",{className:"space-y-4 max-w-lg",children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Workflow Metadata"}),n.map(a=>l.jsxs("div",{children:[l.jsx("label",{style:r,children:a.label}),l.jsx("div",{style:t,children:e[a.key]||"-"})]},a.key)),l.jsxs("div",{children:[l.jsx("label",{style:r,children:"Entry Node IDs"}),l.jsx("div",{style:t,children:o.length>0?o.join(", "):"-"})]}),i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Thread Ownership"}),i.map(([a,c])=>l.jsxs("div",{children:[l.jsx("label",{style:r,children:a}),l.jsx("div",{style:t,children:c})]},a))]})]})}function M$({workspaceId:e,docType:t,loading:r=!1,roles:n=[],onArtifactSave:s,initialTab:i=null}){var U,K,ae;const[o,a]=m.useState(i||"task_prompt");m.useEffect(()=>{i&&a(i)},[i]);const[c,u]=m.useState("source"),[d,f]=m.useState(null),[p,h]=m.useState(!1),[b,g]=m.useState(null),[w,v]=m.useState(null),[x,y]=m.useState(!1),[_,j]=m.useState(null),[S,N]=m.useState(null),[k,C]=m.useState(!1),[R,T]=m.useState(null),[L,$]=m.useState(null),[E,O]=m.useState(!1),[P,F]=m.useState(null),D=m.useMemo(()=>{if(!(t!=null&&t.role_prompt_ref))return null;const W=t.role_prompt_ref.split(":");return W.length!==4||W[0]!=="prompt"||W[1]!=="role"?null:{roleId:W[2],version:W[3]}},[t==null?void 0:t.role_prompt_ref]),I=m.useMemo(()=>{if(!(t!=null&&t.template_ref))return null;const W=t.template_ref.split(":");return W.length!==4||W[0]!=="prompt"||W[1]!=="template"?null:{templateId:W[2],version:W[3]}},[t==null?void 0:t.template_ref]),z=m.useMemo(()=>{if(!(t!=null&&t.qa_template_ref))return null;const W=t.qa_template_ref.split(":");return W.length!==4||W[0]!=="prompt"||W[1]!=="template"?null:{templateId:W[2],version:W[3]}},[t==null?void 0:t.qa_template_ref]),M=m.useMemo(()=>{if(!(t!=null&&t.pgc_template_ref))return null;const W=t.pgc_template_ref.split(":");return W.length!==4||W[0]!=="prompt"||W[1]!=="template"?null:{templateId:W[2],version:W[3]}},[t==null?void 0:t.pgc_template_ref]);m.useEffect(()=>{if(!D){f(null);return}h(!0),g(null),Ne.getRole(D.roleId,D.version).then(W=>{f(W.content)}).catch(W=>{console.error("Failed to load role:",W),g(W.message)}).finally(()=>{h(!1)})},[D]),m.useEffect(()=>{if(!I){v(null);return}y(!0),j(null),Ne.getTemplate(I.templateId,I.version).then(W=>{v(W.content)}).catch(W=>{console.error("Failed to load template:",W),j(W.message)}).finally(()=>{y(!1)})},[I]),m.useEffect(()=>{if(!z){N(null);return}C(!0),T(null),Ne.getTemplate(z.templateId,z.version).then(W=>{N(W.content)}).catch(W=>{console.error("Failed to load QA template:",W),T(W.message)}).finally(()=>{C(!1)})},[z]),m.useEffect(()=>{if(!M){$(null);return}O(!0),F(null),Ne.getTemplate(M.templateId,M.version).then(W=>{$(W.content)}).catch(W=>{console.error("Failed to load PGC template:",W),F(W.message)}).finally(()=>{O(!1)})},[M]);const q=m.useMemo(()=>{if(!t||o==="role_prompt")return null;const W=t.version||t.active_version;return`doctype:${t.doc_type_id}:${W}:${o}`},[t,o]),{content:A,loading:B,error:V,saving:Y,isDirty:te,updateContent:ne,lastSaveResult:re}=_x(e,q,{onSave:W=>{s==null||s(q,W)}}),X=[{id:"package",label:"Package",isPackage:!0},{id:"role_prompt",label:"Role Prompt",viewOnly:!0},{id:"template",label:"Template",viewOnly:!0},{id:"task_prompt",label:"Task Prompt"},{id:"qa_prompt",label:"QA Prompt"},{id:"qa_template",label:"QA Template",viewOnly:!0},{id:"reflection_prompt",label:"Reflection"},{id:"pgc_context",label:"PGC Context"},{id:"pgc_template",label:"PGC Template",viewOnly:!0},{id:"schema",label:"Schema",isJson:!0},{id:"workflow",label:"Workflow",isWorkflow:!0}],ue=m.useMemo(()=>t?X.filter(W=>W.id==="package"?!0:W.id==="role_prompt"?!!t.role_prompt_ref:W.id==="template"?!!t.template_ref:W.id==="qa_template"?!!t.qa_template_ref:W.id==="pgc_template"?!!t.pgc_template_ref:W.id==="workflow"?!!t.workflow_ref:t.artifacts?t.artifacts[W.id]!=null:!1):[],[t]);m.useEffect(()=>{ue.length>0&&!ue.find(W=>W.id===o)&&a(ue[0].id)},[ue,o]);const J=o==="role_prompt"||o==="template"||o==="qa_template"||o==="pgc_template",se=o==="package",ie=o==="schema",ee=o==="workflow",xe=!J&&!se&&!ie&&!ee;return!t&&!r?l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"No Document Type Selected"}),l.jsx("div",{className:"text-sm",children:"Select a document type from the browser to edit its prompts."})]})}):r?l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"Loading..."}),l.jsx("div",{className:"text-sm",children:"Fetching document type details..."})]})}):l.jsxs("div",{className:"flex-1 flex flex-col h-full",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:t.display_name}),l.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["v",t.version||t.active_version,t.authority_level&&`  ${t.authority_level}`]})]})})}),l.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:ue.map(W=>{const we=o===W.id;return l.jsxs("button",{onClick:()=>{a(W.id),u("source")},className:"px-4 py-2 text-sm font-medium transition-colors",style:{color:we?"var(--text-primary)":"var(--text-muted)",background:we?"var(--bg-selected, rgba(255,255,255,0.1))":"transparent",borderBottom:we?"2px solid var(--action-primary)":"2px solid transparent",marginBottom:"-1px"},children:[W.label,W.viewOnly&&l.jsx("span",{className:"ml-1 text-xs font-normal",style:{color:"var(--text-muted)"},children:"(view)"})]},W.id)})}),xe&&l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>u("source"),className:"px-3 py-1 text-xs font-medium rounded transition-colors",style:{background:c==="source"?"var(--action-primary)":"transparent",color:c==="source"?"var(--bg-canvas, #000)":"var(--text-muted)"},children:"Source"}),l.jsx("button",{onClick:()=>u("resolved"),className:"px-3 py-1 text-xs font-medium rounded transition-colors",style:{background:c==="resolved"?"var(--action-primary)":"transparent",color:c==="resolved"?"var(--bg-canvas, #000)":"var(--text-muted)"},children:"Resolved"})]}),c==="source"&&((U=t==null?void 0:t.artifacts)==null?void 0:U[o])&&l.jsxs("span",{className:"text-xs font-mono truncate ml-4",style:{color:"var(--text-muted)"},title:`combine-config/document_types/${t.doc_type_id}/releases/${t.version||t.active_version}/${t.artifacts[o]}`,children:["combine-config/document_types/",t.doc_type_id,"/releases/",t.version||t.active_version,"/",t.artifacts[o]]})]}),J&&l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:[l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:o==="role_prompt"?"View Only - Edit roles in the Roles section":"View Only - Shared template"}),o==="role_prompt"&&D&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[D.roleId.replace(/_/g," ")," v",D.version]}),o==="template"&&I&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[I.templateId.replace(/_/g," ")," v",I.version]}),o==="qa_template"&&z&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[z.templateId.replace(/_/g," ")," v",z.version]}),o==="pgc_template"&&M&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[M.templateId.replace(/_/g," ")," v",M.version]})]}),ie&&((K=t==null?void 0:t.artifacts)==null?void 0:K.schema)&&l.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:l.jsxs("span",{className:"text-xs font-mono truncate",style:{color:"var(--text-muted)"},title:`combine-config/document_types/${t.doc_type_id}/releases/${t.version||t.active_version}/${t.artifacts.schema}`,children:["combine-config/document_types/",t.doc_type_id,"/releases/",t.version||t.active_version,"/",t.artifacts.schema]})}),l.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:ee?l.jsx(T$,{workspaceId:e,artifactId:t.workflow_ref,onArtifactSave:s}):o==="package"?l.jsx(d$,{workspaceId:e,docType:t,roles:n,onSave:s}):o==="role_prompt"?l.jsx(Zn,{content:d||"",onChange:()=>{},loading:p,saving:!1,isDirty:!1,error:b,readOnly:!0,placeholder:"No role prompt configured for this document type"}):o==="template"?l.jsx(Zn,{content:w||"",onChange:()=>{},loading:x,saving:!1,isDirty:!1,error:_,readOnly:!0,placeholder:"No template configured for this document type"}):o==="qa_template"?l.jsx(Zn,{content:S||"",onChange:()=>{},loading:k,saving:!1,isDirty:!1,error:R,readOnly:!0,placeholder:"No QA template configured for this document type"}):o==="pgc_template"?l.jsx(Zn,{content:L||"",onChange:()=>{},loading:E,saving:!1,isDirty:!1,error:P,readOnly:!0,placeholder:"No PGC template configured for this document type"}):c==="source"||ie?l.jsx(Zn,{content:A,onChange:ne,loading:B,saving:Y,isDirty:te,error:V,placeholder:`Enter ${((ae=ue.find(W=>W.id===o))==null?void 0:ae.label)||"prompt"} content...`,isJson:ie}):l.jsx(u$,{workspaceId:e,artifactId:q})}),xe&&(re==null?void 0:re.tier1)&&!re.tier1.passed&&l.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-panel)",background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("div",{className:"text-xs",style:{color:"var(--state-error-text)"},children:"Validation issues found - see status panel for details"})})]})}function A$({workspaceId:e,role:t,onArtifactSave:r}){const n=t?`role:${t.role_id}:${t.active_version}:role_prompt`:null,{content:s,loading:i,error:o,saving:a,isDirty:c,updateContent:u,lastSaveResult:d}=_x(e,n,{onSave:p=>{r==null||r(n,p)}});if(!t)return l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"No Role Selected"}),l.jsx("div",{className:"text-sm",children:"Select a role from the browser to edit its prompt."})]})});const f=t.role_id.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase());return l.jsxs("div",{className:"flex-1 flex flex-col h-full",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:f}),l.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["v",t.active_version,"  Role Prompt"]})]})})}),l.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"px-4 py-2 text-sm",style:{color:"var(--text-primary)",background:"var(--bg-canvas)",borderBottom:"2px solid var(--action-primary)"},children:"Role Prompt"})}),l.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:l.jsxs("span",{className:"text-xs font-mono truncate",style:{color:"var(--text-muted)"},children:["combine-config/prompts/roles/",t.role_id,"/releases/",t.active_version,"/role.prompt.txt"]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(Zn,{content:s,onChange:u,loading:i,saving:a,isDirty:c,error:o,placeholder:"Enter role prompt content..."})}),(d==null?void 0:d.tier1)&&!d.tier1.passed&&l.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-panel)",background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("div",{className:"text-xs",style:{color:"var(--state-error-text)"},children:"Validation issues found - see status panel for details"})})]})}function P$({workspaceId:e,template:t,onArtifactSave:r}){const n=t?`template:${t.template_id}:${t.active_version}:template`:null,{content:s,loading:i,error:o,saving:a,isDirty:c,updateContent:u,lastSaveResult:d}=_x(e,n,{onSave:p=>{r==null||r(n,p)}});if(!t)return l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"No Template Selected"}),l.jsx("div",{className:"text-sm",children:"Select a template from the browser to edit its content."})]})});const f=t.template_id.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase());return l.jsxs("div",{className:"flex-1 flex flex-col h-full",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:f}),l.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["v",t.active_version,"  Shared Template"]})]})})}),l.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"px-4 py-2 text-sm",style:{color:"var(--text-primary)",background:"var(--bg-canvas)",borderBottom:"2px solid var(--action-primary)"},children:"Template"})}),l.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:l.jsxs("span",{className:"text-xs font-mono truncate",style:{color:"var(--text-muted)"},children:["combine-config/prompts/templates/",t.template_id,"/releases/",t.active_version,"/template.txt"]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(Zn,{content:s,onChange:u,loading:i,saving:a,isDirty:c,error:o,placeholder:"Enter template content..."})}),(d==null?void 0:d.tier1)&&!d.tier1.passed&&l.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-panel)",background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("div",{className:"text-xs",style:{color:"var(--state-error-text)"},children:"Validation issues found - see status panel for details"})})]})}function D$(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>n=>{t.forEach(s=>s(n))},t)}const Oc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yi(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function jx(e){return"nodeType"in e}function Tt(e){var t,r;return e?yi(e)?e:jx(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Sx(e){const{Document:t}=Tt(e);return e instanceof t}function Jo(e){return yi(e)?!1:e instanceof Tt(e).HTMLElement}function mC(e){return e instanceof Tt(e).SVGElement}function bi(e){return e?yi(e)?e.document:jx(e)?Sx(e)?e:Jo(e)||mC(e)?e.ownerDocument:document:document:document}const Mr=Oc?m.useLayoutEffect:m.useEffect;function kx(e){const t=m.useRef(e);return Mr(()=>{t.current=e}),m.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function O$(){const e=m.useRef(null),t=m.useCallback((n,s)=>{e.current=setInterval(n,s)},[]),r=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Lo(e,t){t===void 0&&(t=[e]);const r=m.useRef(e);return Mr(()=>{r.current!==e&&(r.current=e)},t),r}function ea(e,t){const r=m.useRef();return m.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function $l(e){const t=kx(e),r=m.useRef(null),n=m.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,n]}function qg(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let jm={};function ta(e,t){return m.useMemo(()=>{if(t)return t;const r=jm[e]==null?0:jm[e]+1;return jm[e]=r,e+"-"+r},[e,t])}function gC(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,o)=>{const a=Object.entries(o);for(const[c,u]of a){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const Qs=gC(1),zo=gC(-1);function L$(e){return"clientX"in e&&"clientY"in e}function Nx(e){if(!e)return!1;const{KeyboardEvent:t}=Tt(e.target);return t&&e instanceof t}function z$(e){if(!e)return!1;const{TouchEvent:t}=Tt(e.target);return t&&e instanceof t}function $g(e){if(z$(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return L$(e)?{x:e.clientX,y:e.clientY}:null}const ci=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ci.Translate.toString(e),ci.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),G2="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function q$(e){return e.matches(G2)?e:e.querySelector(G2)}const $$={display:"none"};function F$(e){let{id:t,value:r}=e;return H.createElement("div",{id:t,style:$$},r)}function B$(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return H.createElement("div",{id:t,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function H$(){const[e,t]=m.useState("");return{announce:m.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const vC=m.createContext(null);function W$(e){const t=m.useContext(vC);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function V$(){const[e]=m.useState(()=>new Set),t=m.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[m.useCallback(n=>{let{type:s,event:i}=n;e.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[e]),t]}const U$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},G$={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function K$(e){let{announcements:t=G$,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=U$}=e;const{announce:i,announcement:o}=H$(),a=ta("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),W$(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:h}=f;t.onDragMove&&i(t.onDragMove({active:p,over:h}))},onDragOver(f){let{active:p,over:h}=f;i(t.onDragOver({active:p,over:h}))},onDragEnd(f){let{active:p,over:h}=f;i(t.onDragEnd({active:p,over:h}))},onDragCancel(f){let{active:p,over:h}=f;i(t.onDragCancel({active:p,over:h}))}}),[i,t])),!c)return null;const d=H.createElement(H.Fragment,null,H.createElement(F$,{id:n,value:s.draggable}),H.createElement(B$,{id:a,announcement:o}));return r?$s.createPortal(d,r):d}var Ke;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ke||(Ke={}));function Fl(){}function Bl(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function xC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const mr=Object.freeze({x:0,y:0});function yC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function bC(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function Y$(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function K2(e){let{left:t,top:r,height:n,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+n},{x:t+s,y:r+n}]}function wC(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Y2(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const _C=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=Y2(t,t.left,t.top),i=[];for(const o of n){const{id:a}=o,c=r.get(a);if(c){const u=yC(Y2(c),s);i.push({id:a,data:{droppableContainer:o,value:u}})}}return i.sort(bC)},X$=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=K2(t),i=[];for(const o of n){const{id:a}=o,c=r.get(a);if(c){const u=K2(c),d=s.reduce((p,h,b)=>p+yC(u[b],h),0),f=Number((d/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:f}})}}return i.sort(bC)};function Q$(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=s-n,a=i-r;if(n<s&&r<i){const c=t.width*t.height,u=e.width*e.height,d=o*a,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const Z$=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const i of n){const{id:o}=i,a=r.get(o);if(a){const c=Q$(a,t);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(Y$)};function J$(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function jC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mr}function eF(e){return function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+e*a.y,bottom:o.bottom+e*a.y,left:o.left+e*a.x,right:o.right+e*a.x}),{...r})}}const tF=eF(1);function rF(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function nF(e,t,r){const n=rF(t);if(!n)return e;const{scaleX:s,scaleY:i,x:o,y:a}=n,c=e.left-o-(1-s)*parseFloat(r),u=e.top-a-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=s?e.width/s:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const sF={ignoreTransform:!1};function wi(e,t){t===void 0&&(t=sF);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Tt(e).getComputedStyle(e);u&&(r=nF(r,u,d))}const{top:n,left:s,width:i,height:o,bottom:a,right:c}=r;return{top:n,left:s,width:i,height:o,bottom:a,right:c}}function X2(e){return wi(e,{ignoreTransform:!0})}function iF(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function oF(e,t){return t===void 0&&(t=Tt(e).getComputedStyle(e)),t.position==="fixed"}function aF(e,t){t===void 0&&(t=Tt(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?r.test(i):!1})}function Lc(e,t){const r=[];function n(s){if(t!=null&&r.length>=t||!s)return r;if(Sx(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Jo(s)||mC(s)||r.includes(s))return r;const i=Tt(e).getComputedStyle(s);return s!==e&&aF(s,i)&&r.push(s),oF(s,i)?r:n(s.parentNode)}return e?n(e):r}function SC(e){const[t]=Lc(e,1);return t??null}function Sm(e){return!Oc||!e?null:yi(e)?e:jx(e)?Sx(e)||e===bi(e).scrollingElement?window:Jo(e)?e:null:null}function kC(e){return yi(e)?e.scrollX:e.scrollLeft}function NC(e){return yi(e)?e.scrollY:e.scrollTop}function Fg(e){return{x:kC(e),y:NC(e)}}var Je;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Je||(Je={}));function EC(e){return!Oc||!e?!1:e===document.scrollingElement}function CC(e){const t={x:0,y:0},r=EC(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:n,minScroll:t}}const lF={x:.2,y:.2};function cF(e,t,r,n,s){let{top:i,left:o,right:a,bottom:c}=r;n===void 0&&(n=10),s===void 0&&(s=lF);const{isTop:u,isBottom:d,isLeft:f,isRight:p}=CC(e),h={x:0,y:0},b={x:0,y:0},g={height:t.height*s.y,width:t.width*s.x};return!u&&i<=t.top+g.height?(h.y=Je.Backward,b.y=n*Math.abs((t.top+g.height-i)/g.height)):!d&&c>=t.bottom-g.height&&(h.y=Je.Forward,b.y=n*Math.abs((t.bottom-g.height-c)/g.height)),!p&&a>=t.right-g.width?(h.x=Je.Forward,b.x=n*Math.abs((t.right-g.width-a)/g.width)):!f&&o<=t.left+g.width&&(h.x=Je.Backward,b.x=n*Math.abs((t.left+g.width-o)/g.width)),{direction:h,speed:b}}function uF(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function RC(e){return e.reduce((t,r)=>Qs(t,Fg(r)),mr)}function dF(e){return e.reduce((t,r)=>t+kC(r),0)}function fF(e){return e.reduce((t,r)=>t+NC(r),0)}function pF(e,t){if(t===void 0&&(t=wi),!e)return;const{top:r,left:n,bottom:s,right:i}=t(e);SC(e)&&(s<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const hF=[["x",["left","right"],dF],["y",["top","bottom"],fF]];class Ex{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Lc(r),s=RC(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,a]of hF)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=a(n),d=s[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var s;(s=this.target)==null||s.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function mF(e){const{EventTarget:t}=Tt(e);return e instanceof t?e:bi(e)}function km(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Vt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vt||(Vt={}));function Q2(e){e.preventDefault()}function gF(e){e.stopPropagation()}var he;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(he||(he={}));const TC={start:[he.Space,he.Enter],cancel:[he.Esc],end:[he.Space,he.Enter,he.Tab]},vF=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case he.Right:return{...r,x:r.x+25};case he.Left:return{...r,x:r.x-25};case he.Down:return{...r,y:r.y+25};case he.Up:return{...r,y:r.y-25}}};class zc{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new lo(bi(r)),this.windowListeners=new lo(Tt(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vt.Resize,this.handleCancel),this.windowListeners.add(Vt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&pF(n),r(mr)}handleKeyDown(t){if(Nx(t)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:i=TC,coordinateGetter:o=vF,scrollBehavior:a="smooth"}=s,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:mr;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(t,{active:r,context:n.current,currentCoordinates:d});if(f){const p=zo(f,d),h={x:0,y:0},{scrollableAncestors:b}=n.current;for(const g of b){const w=t.code,{isTop:v,isRight:x,isLeft:y,isBottom:_,maxScroll:j,minScroll:S}=CC(g),N=uF(g),k={x:Math.min(w===he.Right?N.right-N.width/2:N.right,Math.max(w===he.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(w===he.Down?N.bottom-N.height/2:N.bottom,Math.max(w===he.Down?N.top:N.top+N.height/2,f.y))},C=w===he.Right&&!x||w===he.Left&&!y,R=w===he.Down&&!_||w===he.Up&&!v;if(C&&k.x!==f.x){const T=g.scrollLeft+p.x,L=w===he.Right&&T<=j.x||w===he.Left&&T>=S.x;if(L&&!p.y){g.scrollTo({left:T,behavior:a});return}L?h.x=g.scrollLeft-T:h.x=w===he.Right?g.scrollLeft-j.x:g.scrollLeft-S.x,h.x&&g.scrollBy({left:-h.x,behavior:a});break}else if(R&&k.y!==f.y){const T=g.scrollTop+p.y,L=w===he.Down&&T<=j.y||w===he.Up&&T>=S.y;if(L&&!p.x){g.scrollTo({top:T,behavior:a});return}L?h.y=g.scrollTop-T:h.y=w===he.Down?g.scrollTop-j.y:g.scrollTop-S.y,h.y&&g.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(t,Qs(zo(f,this.referenceCoordinates),h))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}zc.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=TC,onActivation:s}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const a=i.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Z2(e){return!!(e&&"distance"in e)}function J2(e){return!!(e&&"delay"in e)}class Cx{constructor(t,r,n){var s;n===void 0&&(n=mF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=bi(o),this.documentListeners=new lo(this.document),this.listeners=new lo(n),this.windowListeners=new lo(Tt(o)),this.initialCoordinates=(s=$g(i))!=null?s:mr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Vt.Resize,this.handleCancel),this.windowListeners.add(Vt.DragStart,Q2),this.windowListeners.add(Vt.VisibilityChange,this.handleCancel),this.windowListeners.add(Vt.ContextMenu,Q2),this.documentListeners.add(Vt.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(J2(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Z2(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:s}=this.props;s(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Vt.Click,gF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vt.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const c=(r=$g(t))!=null?r:mr,u=zo(s,c);if(!n&&a){if(Z2(a)){if(a.tolerance!=null&&km(u,a.tolerance))return this.handleCancel();if(km(u,a.distance))return this.handleStart()}if(J2(a)&&km(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===he.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const xF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class qc extends Cx{constructor(t){const{event:r}=t,n=bi(r.target);super(t,xF,n)}}qc.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const yF={move:{name:"mousemove"},end:{name:"mouseup"}};var Bg;(function(e){e[e.RightClick=2]="RightClick"})(Bg||(Bg={}));class bF extends Cx{constructor(t){super(t,yF,bi(t.event.target))}}bF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Bg.RightClick?!1:(n==null||n({event:r}),!0)}}];const Nm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wF extends Cx{constructor(t){super(t,Nm)}static setup(){return window.addEventListener(Nm.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Nm.move.name,t)};function t(){}}}wF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return s.length>1?!1:(n==null||n({event:r}),!0)}}];var co;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(co||(co={}));var Hl;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Hl||(Hl={}));function _F(e){let{acceleration:t,activator:r=co.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:o=5,order:a=Hl.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=e;const h=SF({delta:f,disabled:!i}),[b,g]=O$(),w=m.useRef({x:0,y:0}),v=m.useRef({x:0,y:0}),x=m.useMemo(()=>{switch(r){case co.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case co.DraggableRect:return s}},[r,s,c]),y=m.useRef(null),_=m.useCallback(()=>{const S=y.current;if(!S)return;const N=w.current.x*v.current.x,k=w.current.y*v.current.y;S.scrollBy(N,k)},[]),j=m.useMemo(()=>a===Hl.TreeOrder?[...u].reverse():u,[a,u]);m.useEffect(()=>{if(!i||!u.length||!x){g();return}for(const S of j){if((n==null?void 0:n(S))===!1)continue;const N=u.indexOf(S),k=d[N];if(!k)continue;const{direction:C,speed:R}=cF(S,k,x,t,p);for(const T of["x","y"])h[T][C[T]]||(R[T]=0,C[T]=0);if(R.x>0||R.y>0){g(),y.current=S,b(_,o),w.current=R,v.current=C;return}}w.current={x:0,y:0},v.current={x:0,y:0},g()},[t,_,n,g,i,o,JSON.stringify(x),JSON.stringify(h),b,u,j,d,JSON.stringify(p)])}const jF={x:{[Je.Backward]:!1,[Je.Forward]:!1},y:{[Je.Backward]:!1,[Je.Forward]:!1}};function SF(e){let{delta:t,disabled:r}=e;const n=qg(t);return ea(s=>{if(r||!n||!s)return jF;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Je.Backward]:s.x[Je.Backward]||i.x===-1,[Je.Forward]:s.x[Je.Forward]||i.x===1},y:{[Je.Backward]:s.y[Je.Backward]||i.y===-1,[Je.Forward]:s.y[Je.Forward]||i.y===1}}},[r,t,n])}function kF(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return ea(s=>{var i;return t==null?null:(i=n??s)!=null?i:null},[n,t])}function NF(e,t){return m.useMemo(()=>e.reduce((r,n)=>{const{sensor:s}=n,i=s.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var qo;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(qo||(qo={}));var Hg;(function(e){e.Optimized="optimized"})(Hg||(Hg={}));const ej=new Map;function EF(e,t){let{dragging:r,dependencies:n,config:s}=t;const[i,o]=m.useState(null),{frequency:a,measure:c,strategy:u}=s,d=m.useRef(e),f=w(),p=Lo(f),h=m.useCallback(function(v){v===void 0&&(v=[]),!p.current&&o(x=>x===null?v:x.concat(v.filter(y=>!x.includes(y))))},[p]),b=m.useRef(null),g=ea(v=>{if(f&&!r)return ej;if(!v||v===ej||d.current!==e||i!=null){const x=new Map;for(let y of e){if(!y)continue;if(i&&i.length>0&&!i.includes(y.id)&&y.rect.current){x.set(y.id,y.rect.current);continue}const _=y.node.current,j=_?new Ex(c(_),_):null;y.rect.current=j,j&&x.set(y.id,j)}return x}return v},[e,i,r,f,c]);return m.useEffect(()=>{d.current=e},[e]),m.useEffect(()=>{f||h()},[r,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{h(),b.current=null},a))},[a,f,h,...n]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:i!=null};function w(){switch(u){case qo.Always:return!1;case qo.BeforeDragging:return r;default:return!r}}}function IC(e,t){return ea(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function CF(e,t){return IC(e,t)}function RF(e){let{callback:t,disabled:r}=e;const n=kx(t),s=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function $c(e){let{callback:t,disabled:r}=e;const n=kx(t),s=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function TF(e){return new Ex(wi(e),e)}function tj(e,t,r){t===void 0&&(t=TF);const[n,s]=m.useState(null);function i(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=RF({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),a=$c({callback:i});return Mr(()=>{i(),e?(a==null||a.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[e]),n}function IF(e){const t=IC(e);return jC(e,t)}const rj=[];function MF(e){const t=m.useRef(e),r=ea(n=>e?n&&n!==rj&&e&&t.current&&e.parentNode===t.current.parentNode?n:Lc(e):rj,[e]);return m.useEffect(()=>{t.current=e},[e]),r}function AF(e){const[t,r]=m.useState(null),n=m.useRef(e),s=m.useCallback(i=>{const o=Sm(i.target);o&&r(a=>a?(a.set(o,Fg(o)),new Map(a)):null)},[]);return m.useEffect(()=>{const i=n.current;if(e!==i){o(i);const a=e.map(c=>{const u=Sm(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Fg(u)]):null}).filter(c=>c!=null);r(a.length?new Map(a):null),n.current=e}return()=>{o(e),o(i)};function o(a){a.forEach(c=>{const u=Sm(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Qs(i,o),mr):RC(e):mr,[e,t])}function nj(e,t){t===void 0&&(t=[]);const r=m.useRef(null);return m.useEffect(()=>{r.current=null},t),m.useEffect(()=>{const n=e!==mr;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?zo(e,r.current):mr}function PF(e){m.useEffect(()=>{if(!Oc)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function DF(e,t){return m.useMemo(()=>e.reduce((r,n)=>{let{eventName:s,handler:i}=n;return r[s]=o=>{i(o,t)},r},{}),[e,t])}function MC(e){return m.useMemo(()=>e?iF(e):null,[e])}const sj=[];function OF(e,t){t===void 0&&(t=wi);const[r]=e,n=MC(r?Tt(r):null),[s,i]=m.useState(sj);function o(){i(()=>e.length?e.map(c=>EC(c)?n:new Ex(t(c),c)):sj)}const a=$c({callback:o});return Mr(()=>{a==null||a.disconnect(),o(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),s}function LF(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Jo(t)?t:e}function zF(e){let{measure:t}=e;const[r,n]=m.useState(null),s=m.useCallback(u=>{for(const{target:d}of u)if(Jo(d)){n(f=>{const p=t(d);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=$c({callback:s}),o=m.useCallback(u=>{const d=LF(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[a,c]=$l(o);return m.useMemo(()=>({nodeRef:a,rect:r,setRef:c}),[r,a,c])}const qF=[{sensor:qc,options:{}},{sensor:zc,options:{}}],$F={current:{}},el={draggable:{measure:X2},droppable:{measure:X2,strategy:qo.WhileDragging,frequency:Hg.Optimized},dragOverlay:{measure:wi}};class uo extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const FF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new uo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:el,measureDroppableContainers:Fl,windowRect:null,measuringScheduled:!1},BF={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fl,draggableNodes:new Map,over:null,measureDroppableContainers:Fl},Fc=m.createContext(BF),AC=m.createContext(FF);function HF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new uo}}}function WF(e,t){switch(t.type){case Ke.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ke.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ke.DragEnd:case Ke.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ke.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new uo(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case Ke.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new uo(e.droppable.containers);return o.set(r,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case Ke.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const i=new uo(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function VF(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:s}=m.useContext(Fc),i=qg(n),o=qg(r==null?void 0:r.id);return m.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!Nx(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:c,node:u}=a;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=q$(d);if(f){f.focus();break}}})}},[n,t,s,o,i]),null}function UF(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...n}),r):r}function GF(e){return m.useMemo(()=>({draggable:{...el.draggable,...e==null?void 0:e.draggable},droppable:{...el.droppable,...e==null?void 0:e.droppable},dragOverlay:{...el.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function KF(e){let{activeNode:t,measure:r,initialRect:n,config:s=!0}=e;const i=m.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Mr(()=>{if(!o&&!a||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=jC(d,n);if(o||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=SC(u);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,a,n,r])}const PC=m.createContext({...mr,scaleX:1,scaleY:1});var gn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(gn||(gn={}));const DC=m.memo(function(t){var r,n,s,i;let{id:o,accessibility:a,autoScroll:c=!0,children:u,sensors:d=qF,collisionDetection:f=Z$,measuring:p,modifiers:h,...b}=t;const g=m.useReducer(WF,void 0,HF),[w,v]=g,[x,y]=V$(),[_,j]=m.useState(gn.Uninitialized),S=_===gn.Initialized,{draggable:{active:N,nodes:k,translate:C},droppable:{containers:R}}=w,T=N!=null?k.get(N):null,L=m.useRef({initial:null,translated:null}),$=m.useMemo(()=>{var Ve;return N!=null?{id:N,data:(Ve=T==null?void 0:T.data)!=null?Ve:$F,rect:L}:null},[N,T]),E=m.useRef(null),[O,P]=m.useState(null),[F,D]=m.useState(null),I=Lo(b,Object.values(b)),z=ta("DndDescribedBy",o),M=m.useMemo(()=>R.getEnabled(),[R]),q=GF(p),{droppableRects:A,measureDroppableContainers:B,measuringScheduled:V}=EF(M,{dragging:S,dependencies:[C.x,C.y],config:q.droppable}),Y=kF(k,N),te=m.useMemo(()=>F?$g(F):null,[F]),ne=ji(),re=CF(Y,q.draggable.measure);KF({activeNode:N!=null?k.get(N):null,config:ne.layoutShiftCompensation,initialRect:re,measure:q.draggable.measure});const X=tj(Y,q.draggable.measure,re),ue=tj(Y?Y.parentElement:null),J=m.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:A,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),se=R.getNodeFor((r=J.current.over)==null?void 0:r.id),ie=zF({measure:q.dragOverlay.measure}),ee=(n=ie.nodeRef.current)!=null?n:Y,xe=S?(s=ie.rect)!=null?s:X:null,U=!!(ie.nodeRef.current&&ie.rect),K=IF(U?null:X),ae=MC(ee?Tt(ee):null),W=MF(S?se??Y:null),we=OF(W),_e=UF(h,{transform:{x:C.x-K.x,y:C.y-K.y,scaleX:1,scaleY:1},activatorEvent:F,active:$,activeNodeRect:X,containerNodeRect:ue,draggingNodeRect:xe,over:J.current.over,overlayNodeRect:ie.rect,scrollableAncestors:W,scrollableAncestorRects:we,windowRect:ae}),de=te?Qs(te,C):null,je=AF(W),lt=nj(je),We=nj(je,[X]),rt=Qs(_e,lt),Fe=xe?tF(xe,_e):null,ht=$&&Fe?f({active:$,collisionRect:Fe,droppableRects:A,droppableContainers:M,pointerCoordinates:de}):null,rr=wC(ht,"id"),[Se,nt]=m.useState(null),Xe=U?_e:Qs(_e,We),st=J$(Xe,(i=Se==null?void 0:Se.rect)!=null?i:null,X),nr=m.useRef(null),$t=m.useCallback((Ve,qe)=>{let{sensor:mt,options:yr}=qe;if(E.current==null)return;const wt=k.get(E.current);if(!wt)return;const gt=Ve.nativeEvent,Bt=new mt({active:E.current,activeNode:wt,event:gt,options:yr,context:J,onAbort(Ue){if(!k.get(Ue))return;const{onDragAbort:Ht}=I.current,sr={id:Ue};Ht==null||Ht(sr),x({type:"onDragAbort",event:sr})},onPending(Ue,br,Ht,sr){if(!k.get(Ue))return;const{onDragPending:Wn}=I.current,wr={id:Ue,constraint:br,initialCoordinates:Ht,offset:sr};Wn==null||Wn(wr),x({type:"onDragPending",event:wr})},onStart(Ue){const br=E.current;if(br==null)return;const Ht=k.get(br);if(!Ht)return;const{onDragStart:sr}=I.current,Hn={activatorEvent:gt,active:{id:br,data:Ht.data,rect:L}};$s.unstable_batchedUpdates(()=>{sr==null||sr(Hn),j(gn.Initializing),v({type:Ke.DragStart,initialCoordinates:Ue,active:br}),x({type:"onDragStart",event:Hn}),P(nr.current),D(gt)})},onMove(Ue){v({type:Ke.DragMove,coordinates:Ue})},onEnd:on(Ke.DragEnd),onCancel:on(Ke.DragCancel)});nr.current=Bt;function on(Ue){return async function(){const{active:Ht,collisions:sr,over:Hn,scrollAdjustedTranslate:Wn}=J.current;let wr=null;if(Ht&&Wn){const{cancelDrop:Vn}=I.current;wr={activatorEvent:gt,active:Ht,collisions:sr,delta:Wn,over:Hn},Ue===Ke.DragEnd&&typeof Vn=="function"&&await Promise.resolve(Vn(wr))&&(Ue=Ke.DragCancel)}E.current=null,$s.unstable_batchedUpdates(()=>{v({type:Ue}),j(gn.Uninitialized),nt(null),P(null),D(null),nr.current=null;const Vn=Ue===Ke.DragEnd?"onDragEnd":"onDragCancel";if(wr){const Si=I.current[Vn];Si==null||Si(wr),x({type:Vn,event:wr})}})}}},[k]),Ft=m.useCallback((Ve,qe)=>(mt,yr)=>{const wt=mt.nativeEvent,gt=k.get(yr);if(E.current!==null||!gt||wt.dndKit||wt.defaultPrevented)return;const Bt={active:gt};Ve(mt,qe.options,Bt)===!0&&(wt.dndKit={capturedBy:qe.sensor},E.current=yr,$t(mt,qe))},[k,$t]),sn=NF(d,Ft);PF(d),Mr(()=>{X&&_===gn.Initializing&&j(gn.Initialized)},[X,_]),m.useEffect(()=>{const{onDragMove:Ve}=I.current,{active:qe,activatorEvent:mt,collisions:yr,over:wt}=J.current;if(!qe||!mt)return;const gt={active:qe,activatorEvent:mt,collisions:yr,delta:{x:rt.x,y:rt.y},over:wt};$s.unstable_batchedUpdates(()=>{Ve==null||Ve(gt),x({type:"onDragMove",event:gt})})},[rt.x,rt.y]),m.useEffect(()=>{const{active:Ve,activatorEvent:qe,collisions:mt,droppableContainers:yr,scrollAdjustedTranslate:wt}=J.current;if(!Ve||E.current==null||!qe||!wt)return;const{onDragOver:gt}=I.current,Bt=yr.get(rr),on=Bt&&Bt.rect.current?{id:Bt.id,rect:Bt.rect.current,data:Bt.data,disabled:Bt.disabled}:null,Ue={active:Ve,activatorEvent:qe,collisions:mt,delta:{x:wt.x,y:wt.y},over:on};$s.unstable_batchedUpdates(()=>{nt(on),gt==null||gt(Ue),x({type:"onDragOver",event:Ue})})},[rr]),Mr(()=>{J.current={activatorEvent:F,active:$,activeNode:Y,collisionRect:Fe,collisions:ht,droppableRects:A,draggableNodes:k,draggingNode:ee,draggingNodeRect:xe,droppableContainers:R,over:Se,scrollableAncestors:W,scrollAdjustedTranslate:rt},L.current={initial:xe,translated:Fe}},[$,Y,ht,Fe,k,ee,xe,A,R,Se,W,rt]),_F({...ne,delta:C,draggingRect:Fe,pointerCoordinates:de,scrollableAncestors:W,scrollableAncestorRects:we});const _i=m.useMemo(()=>({active:$,activeNode:Y,activeNodeRect:X,activatorEvent:F,collisions:ht,containerNodeRect:ue,dragOverlay:ie,draggableNodes:k,droppableContainers:R,droppableRects:A,over:Se,measureDroppableContainers:B,scrollableAncestors:W,scrollableAncestorRects:we,measuringConfiguration:q,measuringScheduled:V,windowRect:ae}),[$,Y,X,F,ht,ue,ie,k,R,A,Se,B,W,we,q,V,ae]),Bn=m.useMemo(()=>({activatorEvent:F,activators:sn,active:$,activeNodeRect:X,ariaDescribedById:{draggable:z},dispatch:v,draggableNodes:k,over:Se,measureDroppableContainers:B}),[F,sn,$,X,v,z,k,Se,B]);return H.createElement(vC.Provider,{value:y},H.createElement(Fc.Provider,{value:Bn},H.createElement(AC.Provider,{value:_i},H.createElement(PC.Provider,{value:st},u)),H.createElement(VF,{disabled:(a==null?void 0:a.restoreFocus)===!1})),H.createElement(K$,{...a,hiddenTextDescribedById:z}));function ji(){const Ve=(O==null?void 0:O.autoScrollEnabled)===!1,qe=typeof c=="object"?c.enabled===!1:c===!1,mt=S&&!Ve&&!qe;return typeof c=="object"?{...c,enabled:mt}:{enabled:mt}}}),YF=m.createContext(null),ij="button",XF="Draggable";function QF(e){let{id:t,data:r,disabled:n=!1,attributes:s}=e;const i=ta(XF),{activators:o,activatorEvent:a,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=m.useContext(Fc),{role:h=ij,roleDescription:b="draggable",tabIndex:g=0}=s??{},w=(c==null?void 0:c.id)===t,v=m.useContext(w?PC:YF),[x,y]=$l(),[_,j]=$l(),S=DF(o,t),N=Lo(r);Mr(()=>(f.set(t,{id:t,key:i,node:x,activatorNode:_,data:N}),()=>{const C=f.get(t);C&&C.key===i&&f.delete(t)}),[f,t]);const k=m.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":n,"aria-pressed":w&&h===ij?!0:void 0,"aria-roledescription":b,"aria-describedby":d.draggable}),[n,h,g,w,b,d.draggable]);return{active:c,activatorEvent:a,activeNodeRect:u,attributes:k,isDragging:w,listeners:n?void 0:S,node:x,over:p,setNodeRef:y,setActivatorNodeRef:j,transform:v}}function ZF(){return m.useContext(AC)}const JF="Droppable",eB={timeout:25};function tB(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:s}=e;const i=ta(JF),{active:o,dispatch:a,over:c,measureDroppableContainers:u}=m.useContext(Fc),d=m.useRef({disabled:r}),f=m.useRef(!1),p=m.useRef(null),h=m.useRef(null),{disabled:b,updateMeasurementsFor:g,timeout:w}={...eB,...s},v=Lo(g??n),x=m.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),h.current=null},w)},[w]),y=$c({callback:x,disabled:b||!o}),_=m.useCallback((k,C)=>{y&&(C&&(y.unobserve(C),f.current=!1),k&&y.observe(k))},[y]),[j,S]=$l(_),N=Lo(t);return m.useEffect(()=>{!y||!j.current||(y.disconnect(),f.current=!1,y.observe(j.current))},[j,y]),m.useEffect(()=>(a({type:Ke.RegisterDroppable,element:{id:n,key:i,disabled:r,node:j,rect:p,data:N}}),()=>a({type:Ke.UnregisterDroppable,key:i,id:n})),[n]),m.useEffect(()=>{r!==d.current.disabled&&(a({type:Ke.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,a]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===n,node:j,over:c,setNodeRef:S}}function Bc(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function rB(e,t){return e.reduce((r,n,s)=>{const i=t.get(n);return i&&(r[s]=i),r},Array(e.length))}function Oa(e){return e!==null&&e>=0}function nB(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function sB(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const OC=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const i=Bc(t,n,r),o=t[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},La={scaleX:1,scaleY:1},LC=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:i,overIndex:o}=e;const a=(t=i[r])!=null?t:n;if(!a)return null;if(s===r){const u=i[o];return u?{x:0,y:r<o?u.top+u.height-(a.top+a.height):u.top-a.top,...La}:null}const c=iB(i,s,r);return s>r&&s<=o?{x:0,y:-a.height-c,...La}:s<r&&s>=o?{x:0,y:a.height+c,...La}:{x:0,y:0,...La}};function iB(e,t,r){const n=e[t],s=e[t-1],i=e[t+1];return n?r<t?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const zC="Sortable",qC=H.createContext({activeIndex:-1,containerId:zC,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:OC,disabled:{draggable:!1,droppable:!1}});function $C(e){let{children:t,id:r,items:n,strategy:s=OC,disabled:i=!1}=e;const{active:o,dragOverlay:a,droppableRects:c,over:u,measureDroppableContainers:d}=ZF(),f=ta(zC,r),p=a.rect!==null,h=m.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),b=o!=null,g=o?h.indexOf(o.id):-1,w=u?h.indexOf(u.id):-1,v=m.useRef(h),x=!nB(h,v.current),y=w!==-1&&g===-1||x,_=sB(i);Mr(()=>{x&&b&&d(h)},[x,h,b,d]),m.useEffect(()=>{v.current=h},[h]);const j=m.useMemo(()=>({activeIndex:g,containerId:f,disabled:_,disableTransforms:y,items:h,overIndex:w,useDragOverlay:p,sortedRects:rB(h,c),strategy:s}),[g,f,_.draggable,_.droppable,y,h,w,c,p,s]);return H.createElement(qC.Provider,{value:j},t)}const oB=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return Bc(r,n,s).indexOf(t)},aB=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:c,transition:u}=e;return!u||!n||a!==i&&s===o?!1:r?!0:o!==s&&t===c},lB={duration:200,easing:"ease"},FC="transform",cB=ci.Transition.toString({property:FC,duration:0,easing:"linear"}),uB={roleDescription:"sortable"};function dB(e){let{disabled:t,index:r,node:n,rect:s}=e;const[i,o]=m.useState(null),a=m.useRef(r);return Mr(()=>{if(!t&&r!==a.current&&n.current){const c=s.current;if(c){const u=wi(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}r!==a.current&&(a.current=r)},[t,r,n,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function BC(e){let{animateLayoutChanges:t=aB,attributes:r,disabled:n,data:s,getNewIndex:i=oB,id:o,strategy:a,resizeObserverConfig:c,transition:u=lB}=e;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:b,sortedRects:g,overIndex:w,useDragOverlay:v,strategy:x}=m.useContext(qC),y=fB(n,h),_=d.indexOf(o),j=m.useMemo(()=>({sortable:{containerId:f,index:_,items:d},...s}),[f,s,_,d]),S=m.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:N,node:k,isOver:C,setNodeRef:R}=tB({id:o,data:j,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:T,activatorEvent:L,activeNodeRect:$,attributes:E,setNodeRef:O,listeners:P,isDragging:F,over:D,setActivatorNodeRef:I,transform:z}=QF({id:o,data:j,attributes:{...uB,...r},disabled:y.draggable}),M=D$(R,O),q=!!T,A=q&&!b&&Oa(p)&&Oa(w),B=!v&&F,V=B&&A?z:null,te=A?V??(a??x)({rects:g,activeNodeRect:$,activeIndex:p,overIndex:w,index:_}):null,ne=Oa(p)&&Oa(w)?i({id:o,items:d,activeIndex:p,overIndex:w}):_,re=T==null?void 0:T.id,X=m.useRef({activeId:re,items:d,newIndex:ne,containerId:f}),ue=d!==X.current.items,J=t({active:T,containerId:f,isDragging:F,isSorting:q,id:o,index:_,items:d,newIndex:X.current.newIndex,previousItems:X.current.items,previousContainerId:X.current.containerId,transition:u,wasDragging:X.current.activeId!=null}),se=dB({disabled:!J,index:_,node:k,rect:N});return m.useEffect(()=>{q&&X.current.newIndex!==ne&&(X.current.newIndex=ne),f!==X.current.containerId&&(X.current.containerId=f),d!==X.current.items&&(X.current.items=d)},[q,ne,f,d]),m.useEffect(()=>{if(re===X.current.activeId)return;if(re!=null&&X.current.activeId==null){X.current.activeId=re;return}const ee=setTimeout(()=>{X.current.activeId=re},50);return()=>clearTimeout(ee)},[re]),{active:T,activeIndex:p,attributes:E,data:j,rect:N,index:_,newIndex:ne,items:d,isOver:C,isSorting:q,isDragging:F,listeners:P,node:k,overIndex:w,over:D,setNodeRef:M,setActivatorNodeRef:I,setDroppableNodeRef:R,setDraggableNodeRef:O,transform:se??te,transition:ie()};function ie(){if(se||ue&&X.current.newIndex===_)return cB;if(!(B&&!Nx(L)||!u)&&(q||J))return ci.Transition.toString({...u,property:FC})}}function fB(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}function Wl(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const pB=[he.Down,he.Right,he.Up,he.Left],HC=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=t;if(pB.includes(e.code)){if(e.preventDefault(),!r||!n)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=s.get(f.id);if(p)switch(e.code){case he.Down:n.top<p.top&&c.push(f);break;case he.Up:n.top>p.top&&c.push(f);break;case he.Left:n.left>p.left&&c.push(f);break;case he.Right:n.left<p.left&&c.push(f);break}});const u=X$({collisionRect:n,droppableRects:s,droppableContainers:c});let d=wC(u,"id");if(d===(o==null?void 0:o.id)&&u.length>1&&(d=u[1].id),d!=null){const f=i.get(r.id),p=i.get(d),h=p?s.get(p.id):null,b=p==null?void 0:p.node.current;if(b&&h&&f&&p){const w=Lc(b).some((S,N)=>a[N]!==S),v=WC(f,p),x=hB(f,p),y=w||!v?{x:0,y:0}:{x:x?n.width-h.width:0,y:x?n.height-h.height:0},_={x:h.left,y:h.top};return y.x&&y.y?_:zo(_,y)}}}};function WC(e,t){return!Wl(e)||!Wl(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function hB(e,t){return!Wl(e)||!Wl(t)||!WC(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const mB={padding:"6px 14px",fontSize:12,fontWeight:600,border:"none",cursor:"pointer",transition:"opacity 0.15s",background:"transparent"},Sr={width:"100%",padding:"5px 8px",borderRadius:4,fontSize:12,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",outline:"none"},Wt={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"},VC={step_id:"new_step",produces:"",scope:"",inputs:[]},gB={step_id:"new_iteration",iterate_over:{doc_type:"",collection_field:"",entity_type:""},scope:"",steps:[]};function vB({workspaceId:e,workflow:t,onArtifactSave:r,onDelete:n,onNavigateToWorkflow:s}){const[i,o]=m.useState("steps"),[a,c]=m.useState(""),[u,d]=m.useState(null),f=m.useMemo(()=>t?`workflow:${t.workflow_id}:${t.active_version}:definition`:null,[t]),{workflowJson:p,loading:h,error:b,saving:g,updateWorkflow:w}=hC(e,f,{onSave:k=>{r==null||r(f,k)}}),v=m.useCallback(k=>{k==="json"&&p&&(c(JSON.stringify(p,null,2)),d(null)),o(k)},[p]),x=m.useCallback(k=>{const C=k.target.value;c(C);try{const R=JSON.parse(C);d(null),w(R)}catch(R){d(R.message)}},[w]),y=m.useCallback((k,C)=>{if(!p)return;const R=[...p.steps];R[k]=C,w({...p,steps:R})},[p,w]),_=m.useCallback(k=>{if(!p)return;const C=p.steps.filter((R,T)=>T!==k);w({...p,steps:C})},[p,w]),j=m.useCallback(k=>{var R,T;if(!p)return;const C=k==="iteration"?{...gB,step_id:`new_iteration_${(((R=p.steps)==null?void 0:R.length)||0)+1}`}:{...VC,step_id:`new_step_${(((T=p.steps)==null?void 0:T.length)||0)+1}`};w({...p,steps:[...p.steps||[],C]})},[p,w]),S=m.useCallback((k,C)=>{if(!p)return;const R=Bc(p.steps,k,C);w({...p,steps:R})},[p,w]),N=m.useCallback(()=>{!n||!t||window.confirm(`Delete workflow "${t.workflow_id}"? This cannot be undone until you discard workspace changes.`)&&n(t.workflow_id)},[n,t]);return t?l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:(p==null?void 0:p.name)||t.workflow_id.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase())}),((p==null?void 0:p.pow_class)||t.pow_class)&&l.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded font-semibold uppercase",style:{fontSize:9,letterSpacing:"0.05em",background:((p==null?void 0:p.pow_class)||t.pow_class)==="reference"?"var(--action-primary)":"var(--bg-selected, #334155)",color:((p==null?void 0:p.pow_class)||t.pow_class)==="reference"?"#000":"var(--text-primary)"},children:(p==null?void 0:p.pow_class)||t.pow_class})]}),l.jsxs("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:["v",t.active_version,(p==null?void 0:p.description)&&`  ${p.description}`]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[g&&l.jsx("span",{className:"text-xs",style:{color:"var(--action-primary)"},children:"Saving..."}),b&&l.jsx("span",{className:"text-xs",style:{color:"#ef4444"},children:b}),n&&l.jsx("button",{onClick:N,className:"p-1 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444"},title:"Delete workflow",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]})]})}),l.jsx("div",{className:"flex items-center border-b px-2",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[{id:"steps",label:"Steps"},{id:"json",label:"JSON"},{id:"metadata",label:"Metadata"}].map(k=>l.jsx("button",{onClick:()=>v(k.id),style:{...mB,color:i===k.id?"var(--text-primary)":"var(--text-muted)",borderBottom:i===k.id?"2px solid var(--action-primary)":"2px solid transparent"},children:k.label},k.id))}),h?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading workflow..."})}):l.jsxs("div",{className:"flex-1 overflow-hidden",children:[i==="steps"&&l.jsxs("div",{className:"h-full overflow-y-auto p-4",children:[l.jsx(xB,{steps:(p==null?void 0:p.steps)||[],onStepChange:y,onStepDelete:_,onReorder:S}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:()=>j("production"),className:"text-xs px-3 py-1.5 rounded hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",fontWeight:600},children:"+ Production Step"}),l.jsx("button",{onClick:()=>j("iteration"),className:"text-xs px-3 py-1.5 rounded hover:opacity-80",style:{background:"transparent",color:"var(--action-primary)",border:"1px solid var(--action-primary)",fontWeight:600},children:"+ Iteration Step"})]})]}),i==="json"&&l.jsxs("div",{className:"h-full flex flex-col p-4",children:[l.jsx("textarea",{value:a,onChange:x,className:"flex-1 font-mono text-xs p-3 rounded",style:{background:"var(--bg-input, var(--bg-canvas))",border:u?"1px solid #ef4444":"1px solid var(--border-panel)",color:"var(--text-primary)",resize:"none",outline:"none"},spellCheck:!1}),u&&l.jsxs("div",{className:"mt-2 text-xs",style:{color:"#ef4444"},children:["JSON Error: ",u]})]}),i==="metadata"&&l.jsx("div",{className:"h-full overflow-y-auto p-4",children:p?l.jsx(_B,{workflow:p,onUpdateWorkflow:w,onNavigateToWorkflow:s}):l.jsx("div",{style:{color:"var(--text-muted)"},children:"No workflow loaded"})})]})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-1",children:"Workflow Editor"}),l.jsx("div",{className:"text-sm",children:"Select a workflow from the sidebar to begin editing"})]})})}function xB({steps:e,onStepChange:t,onStepDelete:r,onReorder:n}){const s=xC(Bl(qc,{activationConstraint:{distance:5}}),Bl(zc,{coordinateGetter:HC})),i=m.useMemo(()=>e.map(a=>a.step_id),[e]),o=m.useCallback(a=>{const{active:c,over:u}=a;if(!u||c.id===u.id)return;const d=e.findIndex(p=>p.step_id===c.id),f=e.findIndex(p=>p.step_id===u.id);d!==-1&&f!==-1&&n(d,f)},[e,n]);return e.length===0?l.jsx("div",{className:"text-sm py-4",style:{color:"var(--text-muted)"},children:"No steps defined. Add a step to get started."}):l.jsx(DC,{sensors:s,collisionDetection:_C,onDragEnd:o,children:l.jsx($C,{items:i,strategy:LC,children:e.map((a,c)=>l.jsx(yB,{step:a,index:c,onChange:t,onDelete:r},a.step_id))})})}function yB({step:e,index:t,onChange:r,onDelete:n}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:c,isDragging:u}=BC({id:e.step_id}),d={transform:ci.Transform.toString(a),transition:c,opacity:u?.5:1};return l.jsx("div",{ref:o,style:d,children:l.jsx(UC,{step:e,index:t,onChange:r,onDelete:n,dragHandleProps:{...s,...i}})})}function UC({step:e,index:t,onChange:r,onDelete:n,dragHandleProps:s,depth:i=0}){var j,S,N;const[o,a]=m.useState(e),[c,u]=m.useState(!0);m.useEffect(()=>{a(e)},[e]);const d=!!o.iterate_over,f=(k,C)=>{const R={...o,[k]:C};a(R),r(t,R)},p=(k,C)=>{const R={...o.iterate_over,[k]:C},T={...o,iterate_over:R};a(T),r(t,T)},h=()=>{const k=[...o.inputs||[],{doc_type:"",scope:""}],C={...o,inputs:k};a(C),r(t,C)},b=(k,C,R)=>{const T=[...o.inputs||[]];T[k]={...T[k],[C]:R};const L={...o,inputs:T};a(L),r(t,L)},g=k=>{const C=(o.inputs||[]).filter((T,L)=>L!==k),R={...o,inputs:C};a(R),r(t,R)},w=m.useCallback((k,C)=>{const R=[...o.steps||[]];R[k]=C;const T={...o,steps:R};a(T),r(t,T)},[o,t,r]),v=m.useCallback(k=>{const C=(o.steps||[]).filter((T,L)=>L!==k),R={...o,steps:C};a(R),r(t,R)},[o,t,r]),x=m.useCallback(()=>{var R;const k=[...o.steps||[],{...VC,step_id:`nested_step_${(((R=o.steps)==null?void 0:R.length)||0)+1}`}],C={...o,steps:k};a(C),r(t,C)},[o,t,r]),y=m.useCallback((k,C)=>{const R=Bc(o.steps||[],k,C),T={...o,steps:R};a(T),r(t,T)},[o,t,r]),_={background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",borderRadius:6,marginBottom:8,marginLeft:i*20,borderLeft:d?"3px solid var(--action-primary)":"3px solid var(--border-panel)"};return l.jsxs("div",{style:_,children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",style:{borderBottom:c?"1px solid var(--border-panel)":"none",background:"var(--bg-panel)",borderRadius:c?"6px 6px 0 0":6},children:[s&&l.jsx("span",{...s,style:{cursor:"grab",color:"var(--text-muted)",lineHeight:1},title:"Drag to reorder",children:l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("circle",{cx:"5",cy:"3",r:"1.5"}),l.jsx("circle",{cx:"11",cy:"3",r:"1.5"}),l.jsx("circle",{cx:"5",cy:"8",r:"1.5"}),l.jsx("circle",{cx:"11",cy:"8",r:"1.5"}),l.jsx("circle",{cx:"5",cy:"13",r:"1.5"}),l.jsx("circle",{cx:"11",cy:"13",r:"1.5"})]})}),l.jsx("span",{className:"text-xs font-mono px-1.5 py-0.5 rounded",style:{background:d?"var(--action-primary)":"var(--bg-canvas)",color:d?"#000":"var(--action-primary)",border:"1px solid var(--border-panel)",fontSize:10,fontWeight:700},children:d?"ITER":"STEP"}),l.jsx("span",{className:"text-xs font-mono",style:{color:"var(--text-primary)",fontWeight:600},children:o.step_id}),l.jsx("span",{style:{flex:1}}),l.jsx("button",{onClick:()=>u(!c),className:"p-0.5 rounded hover:opacity-80",style:{color:"var(--text-muted)",background:"transparent",border:"none",cursor:"pointer"},title:c?"Collapse":"Expand",children:l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c?l.jsx("path",{d:"M18 15l-6-6-6 6"}):l.jsx("path",{d:"M6 9l6 6 6-6"})})}),l.jsx("button",{onClick:()=>n(t),className:"p-0.5 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444",background:"transparent",border:"none",cursor:"pointer"},title:"Delete step",children:l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),c&&l.jsxs("div",{className:"p-3 space-y-2",children:[l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Step ID"}),l.jsx("input",{type:"text",value:o.step_id||"",onChange:k=>f("step_id",k.target.value),style:Sr})]}),d?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Doc Type"}),l.jsx("input",{type:"text",value:((j=o.iterate_over)==null?void 0:j.doc_type)||"",onChange:k=>p("doc_type",k.target.value),style:Sr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Collection Field"}),l.jsx("input",{type:"text",value:((S=o.iterate_over)==null?void 0:S.collection_field)||"",onChange:k=>p("collection_field",k.target.value),style:Sr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Entity Type"}),l.jsx("input",{type:"text",value:((N=o.iterate_over)==null?void 0:N.entity_type)||"",onChange:k=>p("entity_type",k.target.value),style:Sr})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Scope"}),l.jsx("input",{type:"text",value:o.scope||"",onChange:k=>f("scope",k.target.value),style:Sr})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{style:Wt,children:"Nested Steps"}),l.jsx("button",{onClick:x,className:"text-xs px-2 py-0.5 rounded hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:"+ Add"})]}),l.jsx(bB,{steps:o.steps||[],onStepChange:w,onStepDelete:v,onReorder:y})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Produces"}),l.jsx("input",{type:"text",value:o.produces||"",onChange:k=>f("produces",k.target.value),placeholder:"document_type (e.g., project_discovery)",style:Sr})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Scope"}),l.jsx("input",{type:"text",value:o.scope||"",onChange:k=>f("scope",k.target.value),placeholder:"project",style:Sr})]}),l.jsxs("div",{children:[l.jsx("label",{style:Wt,children:"Creates Entities"}),l.jsx("input",{type:"text",value:o.creates_entities||"",onChange:k=>f("creates_entities",k.target.value||void 0),placeholder:"e.g., epic",style:Sr})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{style:Wt,children:"Inputs"}),l.jsx("button",{onClick:h,className:"text-xs hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:"+ Add"})]}),(o.inputs||[]).length===0?l.jsx("div",{className:"text-xs py-1",style:{color:"var(--text-muted)"},children:"No inputs"}):l.jsx("div",{className:"space-y-1",children:(o.inputs||[]).map((k,C)=>l.jsxs("div",{className:"flex gap-1 items-end",children:[l.jsxs("div",{style:{flex:1},children:[C===0&&l.jsx("label",{style:{...Wt,fontSize:9},children:"Doc/Entity Type"}),l.jsx("input",{type:"text",value:k.doc_type||k.entity_type||"",onChange:R=>{const T=R.target.value;k.entity_type!==void 0?b(C,"entity_type",T):b(C,"doc_type",T)},placeholder:"doc_type",style:{...Sr,fontSize:11}})]}),l.jsxs("div",{style:{width:"30%"},children:[C===0&&l.jsx("label",{style:{...Wt,fontSize:9},children:"Scope"}),l.jsx("input",{type:"text",value:k.scope||"",onChange:R=>b(C,"scope",R.target.value),placeholder:"scope",style:{...Sr,fontSize:11}})]}),l.jsxs("label",{className:"flex items-center gap-1 text-xs pb-0.5",style:{color:"var(--text-muted)",whiteSpace:"nowrap"},children:[l.jsx("input",{type:"checkbox",checked:k.context||!1,onChange:R=>b(C,"context",R.target.checked||void 0)}),"ctx"]}),l.jsx("button",{onClick:()=>g(C),className:"pb-0.5",style:{color:"#ef4444",background:"transparent",border:"none",cursor:"pointer",fontSize:12,fontWeight:700},children:"x"})]},C))})]})]})]})]})}function bB({steps:e,onStepChange:t,onStepDelete:r,onReorder:n}){const s=xC(Bl(qc,{activationConstraint:{distance:5}}),Bl(zc,{coordinateGetter:HC})),i=m.useMemo(()=>e.map(a=>a.step_id),[e]),o=m.useCallback(a=>{const{active:c,over:u}=a;if(!u||c.id===u.id)return;const d=e.findIndex(p=>p.step_id===c.id),f=e.findIndex(p=>p.step_id===u.id);d!==-1&&f!==-1&&n(d,f)},[e,n]);return e.length===0?l.jsx("div",{className:"text-xs py-1",style:{color:"var(--text-muted)"},children:"No nested steps"}):l.jsx(DC,{sensors:s,collisionDetection:_C,onDragEnd:o,children:l.jsx($C,{items:i,strategy:LC,children:e.map((a,c)=>l.jsx(wB,{step:a,index:c,onChange:t,onDelete:r},a.step_id))})})}function wB({step:e,index:t,onChange:r,onDelete:n}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:c,isDragging:u}=BC({id:e.step_id}),d={transform:ci.Transform.toString(a),transition:c,opacity:u?.5:1};return l.jsx("div",{ref:o,style:d,children:l.jsx(UC,{step:e,index:t,onChange:r,onDelete:n,dragHandleProps:{...s,...i},depth:1})})}function _B({workflow:e,onUpdateWorkflow:t,onNavigateToWorkflow:r}){const[n,s]=m.useState(""),i={fontSize:12,color:"var(--text-primary)",padding:"6px 8px",borderRadius:4,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",width:"100%"},o={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"},a=[{key:"workflow_id",label:"Workflow ID"},{key:"name",label:"Name"},{key:"schema_version",label:"Schema Version"},{key:"revision",label:"Revision"},{key:"effective_date",label:"Effective Date"},{key:"description",label:"Description"}],c=e.scopes||{},u=Object.entries(c),d=e.document_types||{},f=Object.entries(d),p=e.pow_class||"reference",h=e.derived_from,b=e.source_version,g=e.tags||[],w=()=>{const y=n.trim().toLowerCase().replace(/\s+/g,"_");!y||g.includes(y)||(t==null||t({...e,tags:[...g,y]}),s(""))},v=y=>{t==null||t({...e,tags:g.filter(_=>_!==y)})},x=()=>{h!=null&&h.workflow_id&&r&&r(h.workflow_id)};return l.jsxs("div",{className:"space-y-4 max-w-lg",children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Classification"}),l.jsxs("div",{children:[l.jsx("label",{style:o,children:"POW Class"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"text-xs px-2 py-1 rounded font-semibold uppercase",style:{fontSize:10,letterSpacing:"0.05em",background:p==="reference"?"var(--action-primary)":"var(--bg-selected, #334155)",color:p==="reference"?"#000":"var(--text-primary)"},children:p})})]}),h&&l.jsxs("div",{children:[l.jsx("label",{style:o,children:"Derived From"}),l.jsx("div",{style:i,children:r?l.jsxs("button",{onClick:x,className:"hover:opacity-80",style:{background:"transparent",border:"none",padding:0,cursor:"pointer",color:"var(--action-primary)",textDecoration:"underline",fontSize:12},children:[h.workflow_id," v",h.version]}):l.jsxs("span",{children:[h.workflow_id," v",h.version]})})]}),b&&l.jsxs("div",{children:[l.jsx("label",{style:o,children:"Source Version"}),l.jsx("div",{style:i,children:b})]}),l.jsxs("div",{children:[l.jsx("label",{style:o,children:"Tags"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mb-1.5",children:[g.length===0&&l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:"No tags"}),g.map(y=>l.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected, #334155)",color:"var(--text-primary)",fontSize:11},children:[y,t&&l.jsx("button",{onClick:()=>v(y),className:"hover:opacity-80",style:{background:"transparent",border:"none",padding:0,cursor:"pointer",color:"var(--text-muted)",fontSize:11,lineHeight:1},title:`Remove tag "${y}"`,children:"x"})]},y))]}),t&&l.jsxs("div",{className:"flex gap-1",children:[l.jsx("input",{type:"text",value:n,onChange:y=>s(y.target.value),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),w())},placeholder:"Add tag...",className:"text-xs px-2 py-1 rounded",style:{background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",outline:"none",flex:1}}),l.jsx("button",{onClick:w,disabled:!n.trim(),className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",fontWeight:600,border:"none",cursor:n.trim()?"pointer":"default",opacity:n.trim()?1:.5},children:"Add"})]})]}),l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Workflow Metadata"}),a.map(y=>l.jsxs("div",{children:[l.jsx("label",{style:o,children:y.label}),l.jsx("div",{style:i,children:e[y.key]||"-"})]},y.key)),u.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Scopes"}),u.map(([y,_])=>l.jsxs("div",{children:[l.jsx("label",{style:o,children:y}),l.jsxs("div",{style:i,children:["parent: ",_.parent||"none"]})]},y))]}),f.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Document Types"}),f.map(([y,_])=>l.jsxs("div",{children:[l.jsx("label",{style:o,children:y}),l.jsxs("div",{style:i,children:[_.name,_.scope&&` (${_.scope})`,_.acceptance_required&&" [acceptance required]"]})]},y))]})]})}function oj({results:e,compact:t=!1}){if(!e||e.length===0)return null;const r=e.filter(s=>s.status==="fail"),n=e.filter(s=>s.status==="pass");return t?l.jsx("div",{className:"flex items-center gap-2",children:r.length>0?l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--state-error-bg)",color:"var(--state-error-text)"},children:[r.length," error",r.length!==1?"s":""]}):l.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--state-success-bg)",color:"var(--state-success-text)"},children:"Valid"})}):l.jsxs("div",{className:"space-y-2",children:[r.map((s,i)=>l.jsxs("div",{className:"text-xs p-2 rounded border",style:{background:"rgba(239, 68, 68, 0.1)",borderColor:"var(--state-error-bg)",color:"var(--text-primary)"},children:[l.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[l.jsx("span",{className:"text-red-400",children:"FAIL"}),l.jsx("span",{className:"font-mono",children:s.rule_id})]}),s.message&&l.jsx("div",{className:"mt-1 opacity-80",children:s.message}),s.artifact_id&&l.jsx("div",{className:"mt-1 font-mono text-xs opacity-60",children:s.artifact_id})]},i)),n.length>0&&r.length>0&&l.jsxs("div",{className:"text-xs p-2 rounded",style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--text-muted)"},children:[n.length," rule",n.length!==1?"s":""," passed"]})]})}function jB(e,t){const r=(e||"").split(`
`),n=(t||"").split(`
`),s=[];let i=0,o=0;for(;i<r.length||o<n.length;)if(i>=r.length)s.push({type:"added",line:n[o],lineNum:o+1}),o++;else if(o>=n.length)s.push({type:"removed",line:r[i],lineNum:i+1}),i++;else if(r[i]===n[o])s.push({type:"same",line:r[i],oldLineNum:i+1,newLineNum:o+1}),i++,o++;else{let a=n.slice(o,o+5).indexOf(r[i]),c=r.slice(i,i+5).indexOf(n[o]);if(a!==-1&&(c===-1||a<=c)){for(let u=0;u<a;u++)s.push({type:"added",line:n[o+u],lineNum:o+u+1});o+=a}else if(c!==-1){for(let u=0;u<c;u++)s.push({type:"removed",line:r[i+u],lineNum:i+u+1});i+=c}else s.push({type:"removed",line:r[i],lineNum:i+1}),s.push({type:"added",line:n[o],lineNum:o+1}),i++,o++}return s}function SB({diff:e}){const[t,r]=m.useState(!0),n=jB(e.old_content,e.new_content),s={M:{bg:"rgba(245, 158, 11, 0.2)",color:"#f59e0b"},A:{bg:"rgba(34, 197, 94, 0.2)",color:"#22c55e"},D:{bg:"rgba(239, 68, 68, 0.2)",color:"#ef4444"}};return l.jsxs("div",{className:"border rounded mb-3",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 cursor-pointer",style:{background:"var(--bg-panel)"},onClick:()=>r(!t),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium",style:s[e.status]||s.M,children:e.status}),l.jsx("span",{className:"text-sm font-mono truncate",style:{color:"var(--text-primary)"},children:e.file_path})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-xs",style:{color:"var(--action-success)"},children:["+",e.additions]}),l.jsxs("span",{className:"text-xs",style:{color:"var(--state-error-text)"},children:["-",e.deletions]}),l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:t?"":"+"})]})]}),t&&l.jsx("div",{className:"overflow-x-auto",style:{background:"var(--bg-canvas)"},children:l.jsx("pre",{className:"text-xs font-mono m-0 p-0",children:n.map((i,o)=>l.jsxs("div",{className:"flex",style:{background:i.type==="added"?"rgba(34, 197, 94, 0.1)":i.type==="removed"?"rgba(239, 68, 68, 0.1)":"transparent",borderLeft:i.type==="added"?"3px solid #22c55e":i.type==="removed"?"3px solid #ef4444":"3px solid transparent"},children:[l.jsx("span",{className:"select-none px-2 text-right",style:{color:"var(--text-muted)",minWidth:"40px",background:"rgba(0,0,0,0.1)"},children:i.type==="same"?i.oldLineNum:i.lineNum||""}),l.jsx("span",{className:"select-none px-1",style:{color:i.type==="added"?"#22c55e":i.type==="removed"?"#ef4444":"var(--text-muted)",minWidth:"16px"},children:i.type==="added"?"+":i.type==="removed"?"-":" "}),l.jsx("span",{className:"flex-1 px-2 whitespace-pre",style:{color:"var(--text-primary)"},children:i.line})]},o))})})]})}function kB({workspaceId:e,artifactId:t=null,onClose:r}){const[n,s]=m.useState([]),[i,o]=m.useState(!0),[a,c]=m.useState(null);m.useEffect(()=>{e&&(o(!0),c(null),Ne.getDiff(e,t).then(d=>{s(d.diffs||[])}).catch(d=>{c(d.message)}).finally(()=>{o(!1)}))},[e,t]);const u=d=>{d.key==="Escape"&&(r==null||r())};return l.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0, 0, 0, 0.7)"},onClick:d=>d.target===d.currentTarget&&(r==null?void 0:r()),onKeyDown:u,tabIndex:0,children:l.jsxs("div",{className:"w-full max-w-4xl max-h-[80vh] flex flex-col rounded-lg shadow-xl",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:t?"Artifact Changes":"All Changes"}),l.jsx("button",{onClick:r,className:"p-1 rounded hover:opacity-80",style:{color:"var(--text-muted)"},children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i?l.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:"Loading diff..."}):a?l.jsxs("div",{className:"text-center py-8",style:{color:"var(--state-error-text)"},children:["Error: ",a]}):n.length===0?l.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:"No changes to display"}):n.map((d,f)=>l.jsx(SB,{diff:d},d.artifact_id||f))}),l.jsx("div",{className:"flex justify-end px-4 py-3 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsx("button",{onClick:r,className:"px-4 py-2 rounded text-sm",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Close"})})]})})}function NB(e){const t=e.split(":");if(t.length!==4)return{display:e,scope:"unknown"};const[r,n,s,i]=t,o=n.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase()),a=i.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase());return{scope:r,name:n,version:s,kind:i,displayName:o,kindLabel:a,display:`${o} - ${a}`}}function EB(e){const t={doctype:{label:"Document Types",items:[]},role:{label:"Roles",items:[]},template:{label:"Templates",items:[]}};return e.forEach(r=>{const n=NB(r);t[n.scope]&&t[n.scope].items.push(n)}),Object.entries(t).filter(([r,n])=>n.items.length>0).map(([r,n])=>({scope:r,...n}))}function CB({workspaceId:e,onCommit:t,onCancel:r,loading:n=!1,modifiedArtifacts:s=[],modifiedFiles:i=[]}){const[o,a]=m.useState(""),[c,u]=m.useState(!1),d=EB(s),f=s.length,p=b=>{b.preventDefault(),o.trim()&&!n&&t(o.trim())},h=b=>{b.key==="Escape"&&!n&&r()};return l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0, 0, 0, 0.7)"},onClick:b=>b.target===b.currentTarget&&!n&&r(),onKeyDown:h,children:[l.jsxs("div",{className:"w-full max-w-lg p-6 rounded-lg shadow-xl",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Commit Changes"}),f>0&&l.jsxs("div",{className:"mb-4 p-3 rounded",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-muted)"},children:[f," ",f===1?"change":"changes"," to be committed"]}),l.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:d.map(b=>l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1",style:{color:"var(--text-secondary)"},children:b.label}),l.jsx("div",{className:"space-y-1",children:b.items.map((g,w)=>l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("span",{className:"px-1.5 py-0.5 rounded",style:{background:"var(--state-warning-bg, rgba(245, 158, 11, 0.2))",color:"var(--state-warning-text, #f59e0b)"},children:"M"}),l.jsx("span",{style:{color:"var(--text-primary)"},children:g.displayName}),l.jsx("span",{style:{color:"var(--text-muted)"},children:g.kindLabel}),l.jsxs("span",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:["v",g.version]})]},w))})]},b.scope))}),l.jsx("button",{type:"button",onClick:()=>u(!0),className:"mt-3 text-xs hover:underline",style:{color:"var(--action-primary)"},children:"View detailed changes..."})]}),l.jsxs("form",{onSubmit:p,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-muted)"},children:"Commit Message"}),l.jsx("textarea",{value:o,onChange:b=>a(b.target.value),placeholder:"Describe your changes...",className:"w-full p-3 rounded text-sm resize-none",style:{background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",minHeight:"80px"},autoFocus:!0,disabled:n}),l.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:'Keep it concise - describe the "why" not the "what"'})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,disabled:n,className:"px-4 py-2 rounded text-sm",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Cancel"}),l.jsx("button",{type:"submit",disabled:!o.trim()||n,className:"px-4 py-2 rounded text-sm font-medium",style:{background:o.trim()&&!n?"var(--action-success)":"var(--border-panel)",color:o.trim()&&!n?"#000":"var(--text-muted)",cursor:o.trim()&&!n?"pointer":"not-allowed"},children:n?"Committing...":"Commit"})]})]})]}),c&&e&&l.jsx(kB,{workspaceId:e,onClose:()=>u(!1)})]})}function RB(e){const t=e.split(":");if(t.length!==4)return{display:e};const[r,n,s,i]=t,o=n.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase()),a=i.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase());return{scope:r,name:n,displayName:o,kind:i,kindLabel:a,version:s,display:`${o} - ${a}`}}function TB({workspaceId:e,state:t,loading:r,onCommit:n,onDiscard:s,onClose:i,onRefresh:o}){var C,R;const[a,c]=m.useState(!1),[u,d]=m.useState(!1),[f,p]=m.useState(!1),[h,b]=m.useState(null),g=(t==null?void 0:t.is_dirty)??!1,w=(t==null?void 0:t.modified_artifacts)??[],v=((C=t==null?void 0:t.tier1)==null?void 0:C.passed)??!0,x=((R=t==null?void 0:t.tier1)==null?void 0:R.results)??[],y=(t==null?void 0:t.branch)??"",_=t!=null&&t.expires_at?new Date(t.expires_at):null,j=async T=>{d(!0),b(null);try{const L=await Ne.commit(e,T);c(!1),n==null||n(L),o==null||o()}catch(L){b(L.message)}finally{d(!1)}},S=async()=>{if(confirm("Discard all uncommitted changes? This cannot be undone.")){p(!0);try{await Ne.discard(e),s==null||s(),o==null||o()}catch(T){console.error("Discard failed:",T),alert("Failed to discard changes: "+T.message)}finally{p(!1)}}},N=async()=>{if(g){alert("Cannot close workspace with uncommitted changes. Commit or discard first.");return}if(confirm("Close this workspace? You can open a new one later."))try{await Ne.closeWorkspace(e),i==null||i()}catch(T){console.error("Close failed:",T),alert("Failed to close workspace: "+T.message)}},k=T=>{if(!T)return null;const $=T-new Date;if($<=0)return"Expired";const E=Math.floor($/(1e3*60*60)),O=Math.floor($%(1e3*60*60)/(1e3*60));return E>0?`${E}h ${O}m remaining`:`${O}m remaining`};return l.jsxs("div",{className:"w-80 flex flex-col border-l h-full",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Workspace Status"})}),r?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsx("div",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Branch"}),l.jsx("div",{className:"text-sm font-mono truncate",style:{color:"var(--text-primary)"},title:y,children:y||"-"}),_&&l.jsx("div",{className:"text-xs mt-2",style:{color:"var(--text-muted)"},children:k(_)})]}),l.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Status"}),l.jsx("div",{className:"text-xs px-2 py-0.5 rounded",style:{background:g?"var(--state-warning-bg, rgba(245, 158, 11, 0.2))":"var(--state-success-bg)",color:g?"var(--state-warning-text, #f59e0b)":"var(--state-success-text)"},children:g?"Modified":"Clean"})]}),w.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:["Changed (",w.length,")"]}),l.jsx("div",{className:"space-y-1",children:w.map(T=>{const L=RB(T);return l.jsxs("div",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},title:T,children:[l.jsx("span",{style:{color:"var(--text-primary)"},children:L.displayName||T}),L.kindLabel&&l.jsxs("span",{style:{color:"var(--text-muted)"},children:[" ","- ",L.kindLabel]})]},T)})})]})]}),l.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Tier 1 Validation"}),l.jsx(oj,{results:x,compact:!0})]}),x.length>0&&!v&&l.jsx("div",{className:"mt-3",children:l.jsx(oj,{results:x})})]})]}),l.jsxs("div",{className:"px-4 py-3 border-t space-y-2",style:{borderColor:"var(--border-panel)"},children:[l.jsx("button",{onClick:()=>c(!0),disabled:!g||!v||r,className:"w-full px-4 py-2 rounded text-sm font-medium transition-opacity",style:{background:g&&v?"var(--action-success)":"var(--border-panel)",color:g&&v?"#000":"var(--text-muted)",cursor:g&&v&&!r?"pointer":"not-allowed",opacity:r?.5:1},children:"Commit Changes"}),!v&&g&&l.jsx("div",{className:"text-xs text-center",style:{color:"var(--state-error-text)"},children:"Fix validation errors to commit"}),g&&l.jsx("button",{onClick:S,disabled:f||r,className:"w-full px-4 py-2 rounded text-sm transition-opacity",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)",opacity:f||r?.5:1},children:f?"Discarding...":"Discard Changes"}),!g&&l.jsx("button",{onClick:N,disabled:r,className:"w-full px-4 py-2 rounded text-sm transition-opacity",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)",opacity:r?.5:1},children:"Close Workspace"})]}),a&&l.jsx(CB,{workspaceId:e,onCommit:j,onCancel:()=>{c(!1),b(null)},loading:u,modifiedArtifacts:w,modifiedFiles:(t==null?void 0:t.modified_files)??[]}),h&&l.jsx("div",{className:"absolute bottom-4 left-4 right-4 p-3 rounded text-sm",style:{background:"rgba(239, 68, 68, 0.9)",color:"#fff"},children:h})]})}function IB(){const{isAdmin:e,loading:t}=xi(),[r,n]=m.useState(null),[s,i]=m.useState(null),[o,a]=m.useState(!1),[c,u]=m.useState(null),[d,f]=m.useState(null),[p,h]=m.useState(null),[b,g]=m.useState(null),{workspaceId:w,loading:v,error:x,reinitialize:y}=Pq(),{state:_,loading:j,refresh:S}=Dq(w),{documentTypes:N,loading:k}=Oq(),{roles:C,loading:R}=Lq(),{templates:T,loading:L}=a$(),{workflows:$,loading:E,refresh:O}=l$(),P=m.useCallback(async(J,se=null)=>{if(n(J),u(null),f(null),h(null),i(null),g(se),!!J){a(!0);try{const ie=await Ne.getDocumentType(J.doc_type_id);i(ie)}catch(ie){console.error("Failed to load doc type details:",ie),i(J)}finally{a(!1)}}},[]),F=m.useCallback(J=>{P(J,"task_prompt")},[P]),D=m.useCallback(J=>{P(J,"schema")},[P]),I=m.useCallback(J=>{u(J),n(null),i(null),f(null),h(null)},[]),z=m.useCallback(J=>{f(J),n(null),i(null),u(null),h(null)},[]),M=m.useCallback(J=>{h(J),n(null),i(null),u(null),f(null)},[]),q=m.useCallback(J=>{const se=$.find(ie=>ie.workflow_id===J);se&&M(se)},[$,M]),A=m.useCallback((J,se)=>{S()},[S]),B=m.useCallback(J=>{console.log("Committed:",J.commit_hash)},[]),V=m.useCallback(()=>{n(null),i(null),u(null),f(null),h(null)},[]),Y=m.useCallback(async J=>{if(w)try{const se=await Ne.createOrchestrationWorkflow(w,J);await O(),S(),h({workflow_id:se.workflow_id,active_version:se.version,name:J.name||se.workflow_id.replace(/_/g," ").replace(/\b\w/g,ie=>ie.toUpperCase())}),n(null),i(null),u(null),f(null)}catch(se){console.error("Failed to create workflow:",se),alert(`Failed to create workflow: ${se.message}`)}},[w,O,S]),te=m.useCallback(async J=>{if(w)try{await Ne.deleteOrchestrationWorkflow(w,J),await O(),S(),h(null)}catch(se){console.error("Failed to delete workflow:",se),alert(`Failed to delete workflow: ${se.message}`)}},[w,O,S]),ne=m.useCallback(()=>{y(),n(null),i(null),u(null),f(null),h(null)},[y]);if(t)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading..."})});if(!e)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8 rounded-lg",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"text-lg font-semibold mb-2",style:{color:"var(--state-error-text)"},children:"Access Denied"}),l.jsx("div",{style:{color:"var(--text-muted)"},children:"Admin access required for the Workbench."})]})});if(v)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg mb-2",style:{color:"var(--text-primary)"},children:"Initializing Workspace"}),l.jsx("div",{style:{color:"var(--text-muted)"},children:"Setting up your editing environment..."})]})});if(x)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8 rounded-lg max-w-md",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"text-lg font-semibold mb-2",style:{color:"var(--state-error-text)"},children:"Workspace Error"}),l.jsx("div",{className:"mb-4",style:{color:"var(--text-muted)"},children:x}),l.jsx("button",{onClick:y,className:"px-4 py-2 rounded text-sm",style:{background:"var(--action-primary)",color:"#000"},children:"Retry"})]})});const re=c&&!r&&!d&&!p,X=d&&!r&&!c&&!p,ue=p&&!r&&!c&&!d;return l.jsxs("div",{className:"flex h-screen overflow-hidden",style:{background:"var(--bg-canvas)"},children:[l.jsx(c$,{documentTypes:N,roles:C,templates:T,workflows:$,loading:k,rolesLoading:R,templatesLoading:L,workflowsLoading:E,selectedDocType:r,selectedRole:c,selectedTemplate:d,selectedWorkflow:p,onSelectDocType:P,onSelectRole:I,onSelectTemplate:z,onSelectWorkflow:M,onCreateWorkflow:Y,onSelectTask:F,onSelectSchema:D}),re?l.jsx(A$,{workspaceId:w,role:c,onArtifactSave:A}):X?l.jsx(P$,{workspaceId:w,template:d,onArtifactSave:A}):ue?l.jsx(vB,{workspaceId:w,workflow:p,onArtifactSave:A,onDelete:te,onNavigateToWorkflow:q}):l.jsx(M$,{workspaceId:w,docType:s,loading:o,roles:C,onArtifactSave:A,initialTab:b}),l.jsx(TB,{workspaceId:w,state:_,loading:j,onCommit:B,onDiscard:V,onClose:ne,onRefresh:S})]})}function MB({user:e,onClick:t}){return l.jsx("div",{className:"p-3 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors",style:{color:"var(--text-primary)"},children:[e!=null&&e.avatar_url?l.jsx("img",{src:e.avatar_url,alt:e.name,className:"w-8 h-8 rounded-full"}):l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),l.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[l.jsx("div",{className:"text-sm font-medium truncate",children:(e==null?void 0:e.name)||"User"}),l.jsx("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:(e==null?void 0:e.email)||""})]})]})})}function AB(){var T,L,$;const{user:e}=xi(),[t,r]=m.useState(!1),{projects:n,loading:s,error:i,refresh:o}=Tq({includeArchived:t}),[a,c]=m.useState(null),[u,d]=m.useState(null),[f,p]=m.useState(!1),[h,b]=m.useState(!1),{theme:g,setTheme:w}=fC(),v=Object.keys(n),x=a&&n[a]?a:v[0]||null;m.useEffect(()=>{if(x&&n[x]){const E=n[x];document.title=`${E.projectId} - The Combine`}else document.title="The Combine"},[x,n]);const y=E=>{c(E),d(null)},_=()=>{p(!0)},j=async E=>{await o(),E&&E.id&&(c(E.id),d("concierge_intake")),p(!1)},S=()=>{p(!1)},N=async(E,O)=>{try{await Ie.updateProject(E,O),await o()}catch(P){throw console.error("Failed to update project:",P),P}},k=async E=>{try{if(await Ie.archiveProject(E),!t){const O=Object.values(n).sort((D,I)=>{const z=(D.name||"").localeCompare(I.name||"");return z!==0?z:(D.projectId||"").localeCompare(I.projectId||"")}),P=O.findIndex(D=>D.id===E),F=O[P+1]||O[P-1]||null;c((F==null?void 0:F.id)||null)}await o()}catch(O){throw console.error("Failed to archive project:",O),O}},C=async E=>{try{await Ie.unarchiveProject(E),await o()}catch(O){throw console.error("Failed to unarchive project:",O),O}},R=async E=>{try{await Ie.deleteProject(E);const O=Object.values(n).sort((D,I)=>{const z=(D.name||"").localeCompare(I.name||"");return z!==0?z:(D.projectId||"").localeCompare(I.projectId||"")}),P=O.findIndex(D=>D.id===E),F=O[P+1]||O[P-1]||null;c((F==null?void 0:F.id)||null),await o()}catch(O){throw console.error("Failed to delete project:",O),O}};return s?l.jsx("div",{className:`flex h-screen items-center justify-center theme-${g}`,style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/logo-light.png",alt:"The Combine",className:"h-16 mx-auto mb-4 animate-pulse"}),l.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading projects..."})]})}):i?l.jsx("div",{className:`flex h-screen items-center justify-center theme-${g}`,style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-6 rounded-lg",style:{background:"var(--bg-panel)"},children:[l.jsxs("p",{className:"text-red-500 mb-4",children:["Failed to load projects: ",i]}),l.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-emerald-500 text-white rounded hover:bg-emerald-600",children:"Retry"})]})}):l.jsxs("div",{className:`flex flex-col h-screen theme-${g}`,children:[l.jsxs("header",{className:"h-12 flex items-center justify-between px-4 border-b flex-shrink-0",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo-256.png",alt:"The Combine",className:"h-7 w-7"}),l.jsx("span",{className:"text-sm font-bold tracking-wide",style:{color:"var(--text-primary)"},children:"THE COMBINE"})]}),l.jsx("button",{className:"p-2 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},title:"Help",children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),l.jsx("path",{d:"M12 17h.01"})]})})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx($P,{projects:n,selectedId:x,onSelectProject:y,onNewProject:_,showArchived:t,onToggleShowArchived:()=>r(E=>!E),userSection:l.jsx(MB,{user:e,onClick:()=>b(!0)})}),l.jsx("div",{className:"flex-1",children:x?l.jsx(gc,{children:l.jsx($q,{projectId:x,projectCode:(T=n[x])==null?void 0:T.projectId,projectName:(L=n[x])==null?void 0:L.name,isArchived:($=n[x])==null?void 0:$.isArchived,autoExpandNodeId:u,theme:g,onThemeChange:w,onProjectUpdate:N,onProjectArchive:k,onProjectUnarchive:C,onProjectDelete:R})},x):l.jsx("div",{className:"flex items-center justify-center h-full",style:{background:"var(--bg-canvas)"},children:l.jsx("div",{className:"text-center",children:l.jsx("p",{style:{color:"var(--text-muted)"},children:"No projects yet. Create one to get started."})})})}),f&&l.jsx(Kq,{onClose:S,onComplete:j}),h&&l.jsx(Yq,{onClose:()=>b(!1)})]})]})}function PB(){const{isAuthenticated:e,loading:t}=xi(),{theme:r}=fC(),[n,s]=m.useState(window.location.pathname);return m.useEffect(()=>{const i=()=>s(window.location.pathname);return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]),t?l.jsx("div",{className:`flex h-screen items-center justify-center theme-${r}`,style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/logo-light.png",alt:"The Combine",className:"h-16 mx-auto mb-4 animate-pulse"}),l.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading..."})]})}):e?n==="/admin/workbench"?l.jsx("div",{className:`h-screen theme-${r}`,children:l.jsx(IB,{})}):l.jsx(AB,{}):n==="/learn"?l.jsx(o$,{}):l.jsx(r$,{})}function DB(){return l.jsx(Aq,{children:l.jsx(PB,{})})}Em.createRoot(document.getElementById("root")).render(l.jsx(H.StrictMode,{children:l.jsx(DB,{})}));
//# sourceMappingURL=index-ApMF6RSb.js.map
