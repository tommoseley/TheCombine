(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rS={exports:{}},Bl={},sS={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=Symbol.for("react.element"),a4=Symbol.for("react.portal"),l4=Symbol.for("react.fragment"),c4=Symbol.for("react.strict_mode"),u4=Symbol.for("react.profiler"),d4=Symbol.for("react.provider"),f4=Symbol.for("react.context"),h4=Symbol.for("react.forward_ref"),p4=Symbol.for("react.suspense"),m4=Symbol.for("react.memo"),g4=Symbol.for("react.lazy"),Cy=Symbol.iterator;function v4(e){return e===null||typeof e!="object"?null:(e=Cy&&e[Cy]||e["@@iterator"],typeof e=="function"?e:null)}var iS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oS=Object.assign,aS={};function ai(e,t,n){this.props=e,this.context=t,this.refs=aS,this.updater=n||iS}ai.prototype.isReactComponent={};ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lS(){}lS.prototype=ai.prototype;function Fg(e,t,n){this.props=e,this.context=t,this.refs=aS,this.updater=n||iS}var Bg=Fg.prototype=new lS;Bg.constructor=Fg;oS(Bg,ai.prototype);Bg.isPureReactComponent=!0;var Ry=Array.isArray,cS=Object.prototype.hasOwnProperty,Hg={current:null},uS={key:!0,ref:!0,__self:!0,__source:!0};function dS(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)cS.call(t,r)&&!uS.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Lo,type:e,key:i,ref:o,props:s,_owner:Hg.current}}function y4(e,t){return{$$typeof:Lo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lo}function x4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ty=/\/+/g;function Fc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?x4(""+e.key):t.toString(36)}function Da(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Lo:case a4:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Fc(o,0):r,Ry(s)?(n="",e!=null&&(n=e.replace(Ty,"$&/")+"/"),Da(s,t,n,"",function(u){return u})):s!=null&&(Wg(s)&&(s=y4(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ty,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Ry(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Fc(i,a);o+=Da(i,t,n,c,s)}else if(c=v4(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Fc(i,a++),o+=Da(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ea(e,t,n){if(e==null)return e;var r=[],s=0;return Da(e,r,"","",function(i){return t.call(n,i,s++)}),r}function b4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},Oa={transition:null},w4={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:Hg};function fS(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:ea,forEach:function(e,t,n){ea(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ea(e,function(){t++}),t},toArray:function(e){return ea(e,function(t){return t})||[]},only:function(e){if(!Wg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=ai;le.Fragment=l4;le.Profiler=u4;le.PureComponent=Fg;le.StrictMode=c4;le.Suspense=p4;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w4;le.act=fS;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=oS({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Hg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)cS.call(t,c)&&!uS.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Lo,type:e.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(e){return e={$$typeof:f4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:d4,_context:e},e.Consumer=e};le.createElement=dS;le.createFactory=function(e){var t=dS.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:h4,render:e}};le.isValidElement=Wg;le.lazy=function(e){return{$$typeof:g4,_payload:{_status:-1,_result:e},_init:b4}};le.memo=function(e,t){return{$$typeof:m4,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Oa.transition;Oa.transition={};try{e()}finally{Oa.transition=t}};le.unstable_act=fS;le.useCallback=function(e,t){return vt.current.useCallback(e,t)};le.useContext=function(e){return vt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};le.useEffect=function(e,t){return vt.current.useEffect(e,t)};le.useId=function(){return vt.current.useId()};le.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return vt.current.useMemo(e,t)};le.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};le.useRef=function(e){return vt.current.useRef(e)};le.useState=function(e){return vt.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return vt.current.useTransition()};le.version="18.3.1";sS.exports=le;var m=sS.exports;const B=$g(m);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _4=m,S4=Symbol.for("react.element"),j4=Symbol.for("react.fragment"),k4=Object.prototype.hasOwnProperty,N4=_4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E4={key:!0,ref:!0,__self:!0,__source:!0};function hS(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)k4.call(t,r)&&!E4.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:S4,type:e,key:i,ref:o,props:s,_owner:N4.current}}Bl.Fragment=j4;Bl.jsx=hS;Bl.jsxs=hS;rS.exports=Bl;var l=rS.exports,Sm={},pS={exports:{}},Lt={},mS={exports:{}},gS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var L=P.length;P.push(I);e:for(;0<L;){var M=L-1>>>1,q=P[M];if(0<s(q,I))P[M]=I,P[L]=q,L=M;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var I=P[0],L=P.pop();if(L!==I){P[0]=L;e:for(var M=0,q=P.length,F=q>>>1;M<F;){var W=2*(M+1)-1,G=P[W],Z=W+1,Q=P[Z];if(0>s(G,L))Z<q&&0>s(Q,G)?(P[M]=Q,P[Z]=L,M=Z):(P[M]=G,P[W]=L,M=W);else if(Z<q&&0>s(Q,L))P[M]=Q,P[Z]=L,M=Z;else break e}}return I}function s(P,I){var L=P.sortIndex-I.sortIndex;return L!==0?L:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,h=3,p=!1,x=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=P)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function w(P){if(v=!1,b(P),!x)if(n(c)!==null)x=!0,A(S);else{var I=n(u);I!==null&&$(w,I.startTime-P)}}function S(P,I){x=!1,v&&(v=!1,g(N),N=-1),p=!0;var L=h;try{for(b(I),f=n(c);f!==null&&(!(f.expirationTime>I)||P&&!R());){var M=f.callback;if(typeof M=="function"){f.callback=null,h=f.priorityLevel;var q=M(f.expirationTime<=I);I=e.unstable_now(),typeof q=="function"?f.callback=q:f===n(c)&&r(c),b(I)}else r(c);f=n(c)}if(f!==null)var F=!0;else{var W=n(u);W!==null&&$(w,W.startTime-I),F=!1}return F}finally{f=null,h=L,p=!1}}var k=!1,j=null,N=-1,C=5,T=-1;function R(){return!(e.unstable_now()-T<C)}function D(){if(j!==null){var P=e.unstable_now();T=P;var I=!0;try{I=j(!0,P)}finally{I?z():(k=!1,j=null)}}else k=!1}var z;if(typeof y=="function")z=function(){y(D)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,O=E.port2;E.port1.onmessage=D,z=function(){O.postMessage(null)}}else z=function(){_(D,0)};function A(P){j=P,k||(k=!0,z())}function $(P,I){N=_(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,A(S))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var L=h;h=I;try{return P()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=h;h=P;try{return I()}finally{h=L}},e.unstable_scheduleCallback=function(P,I,L){var M=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?M+L:M):L=M,P){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,P={id:d++,callback:I,priorityLevel:P,startTime:L,expirationTime:q,sortIndex:-1},L>M?(P.sortIndex=L,t(u,P),n(c)===null&&P===n(u)&&(v?(g(N),N=-1):v=!0,$(w,L-M))):(P.sortIndex=q,t(c,P),x||p||(x=!0,A(S))),P},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(P){var I=h;return function(){var L=h;h=I;try{return P.apply(this,arguments)}finally{h=L}}}})(gS);mS.exports=gS;var C4=mS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R4=m,Dt=C4;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vS=new Set,lo={};function hs(e,t){Ys(e,t),Ys(e+"Capture",t)}function Ys(e,t){for(lo[e]=t,e=0;e<t.length;e++)vS.add(t[e])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jm=Object.prototype.hasOwnProperty,T4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iy={},My={};function I4(e){return jm.call(My,e)?!0:jm.call(Iy,e)?!1:T4.test(e)?My[e]=!0:(Iy[e]=!0,!1)}function M4(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A4(e,t,n,r){if(t===null||typeof t>"u"||M4(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vg=/[\-:]([a-z])/g;function Ug(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vg,Ug);ot[t]=new yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vg,Ug);ot[t]=new yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vg,Ug);ot[t]=new yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new yt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gg(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A4(t,n,s,r)&&(n=null),r||s===null?I4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var nr=R4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ta=Symbol.for("react.element"),ks=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),Kg=Symbol.for("react.strict_mode"),km=Symbol.for("react.profiler"),yS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),Yg=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),Xg=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),bS=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function _i(e){return e===null||typeof e!="object"?null:(e=Ay&&e[Ay]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Bc;function Li(e){if(Bc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bc=t&&t[1]||""}return`
`+Bc+e}var Hc=!1;function Wc(e,t){if(!e||Hc)return"";Hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Hc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Li(e):""}function P4(e){switch(e.tag){case 5:return Li(e.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return e=Wc(e.type,!1),e;case 11:return e=Wc(e.type.render,!1),e;case 1:return e=Wc(e.type,!0),e;default:return""}}function Cm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ns:return"Fragment";case ks:return"Portal";case km:return"Profiler";case Kg:return"StrictMode";case Nm:return"Suspense";case Em:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xS:return(e.displayName||"Context")+".Consumer";case yS:return(e._context.displayName||"Context")+".Provider";case Yg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xg:return t=e.displayName||null,t!==null?t:Cm(e.type)||"Memo";case ur:t=e._payload,e=e._init;try{return Cm(e(t))}catch{}}return null}function D4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cm(t);case 8:return t===Kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O4(e){var t=wS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function na(e){e._valueTracker||(e._valueTracker=O4(e))}function _S(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Za(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rm(e,t){var n=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Py(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function SS(e,t){t=t.checked,t!=null&&Gg(e,"checked",t,!1)}function Tm(e,t){SS(e,t);var n=Ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Im(e,t.type,n):t.hasOwnProperty("defaultValue")&&Im(e,t.type,Ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Dy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Im(e,t,n){(t!=="number"||Za(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zi=Array.isArray;function qs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ar(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Mm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(V(92));if(zi(n)){if(1<n.length)throw Error(V(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ar(n)}}function jS(e,t){var n=Ar(t.value),r=Ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ly(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Am(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ra,NS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ra=ra||document.createElement("div"),ra.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ra.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function co(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L4=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(e){L4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yi[t]=Yi[e]})});function ES(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yi.hasOwnProperty(e)&&Yi[e]?(""+t).trim():t+"px"}function CS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ES(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var z4=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pm(e,t){if(t){if(z4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Dm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=null;function Qg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lm=null,$s=null,Fs=null;function zy(e){if(e=$o(e)){if(typeof Lm!="function")throw Error(V(280));var t=e.stateNode;t&&(t=Gl(t),Lm(e.stateNode,e.type,t))}}function RS(e){$s?Fs?Fs.push(e):Fs=[e]:$s=e}function TS(){if($s){var e=$s,t=Fs;if(Fs=$s=null,zy(e),t)for(e=0;e<t.length;e++)zy(t[e])}}function IS(e,t){return e(t)}function MS(){}var Vc=!1;function AS(e,t,n){if(Vc)return e(t,n);Vc=!0;try{return IS(e,t,n)}finally{Vc=!1,($s!==null||Fs!==null)&&(MS(),TS())}}function uo(e,t){var n=e.stateNode;if(n===null)return null;var r=Gl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(V(231,t,typeof n));return n}var zm=!1;if(Yn)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){zm=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{zm=!1}function q4(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Xi=!1,Ja=null,el=!1,qm=null,$4={onError:function(e){Xi=!0,Ja=e}};function F4(e,t,n,r,s,i,o,a,c){Xi=!1,Ja=null,q4.apply($4,arguments)}function B4(e,t,n,r,s,i,o,a,c){if(F4.apply(this,arguments),Xi){if(Xi){var u=Ja;Xi=!1,Ja=null}else throw Error(V(198));el||(el=!0,qm=u)}}function ps(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function PS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qy(e){if(ps(e)!==e)throw Error(V(188))}function H4(e){var t=e.alternate;if(!t){if(t=ps(e),t===null)throw Error(V(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qy(s),e;if(i===r)return qy(s),t;i=i.sibling}throw Error(V(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?e:t}function DS(e){return e=H4(e),e!==null?OS(e):null}function OS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OS(e);if(t!==null)return t;e=e.sibling}return null}var LS=Dt.unstable_scheduleCallback,$y=Dt.unstable_cancelCallback,W4=Dt.unstable_shouldYield,V4=Dt.unstable_requestPaint,qe=Dt.unstable_now,U4=Dt.unstable_getCurrentPriorityLevel,Zg=Dt.unstable_ImmediatePriority,zS=Dt.unstable_UserBlockingPriority,tl=Dt.unstable_NormalPriority,G4=Dt.unstable_LowPriority,qS=Dt.unstable_IdlePriority,Hl=null,Rn=null;function K4(e){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Hl,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Q4,Y4=Math.log,X4=Math.LN2;function Q4(e){return e>>>=0,e===0?32:31-(Y4(e)/X4|0)|0}var sa=64,ia=4194304;function qi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=qi(a):(i&=o,i!==0&&(r=qi(i)))}else o=n&~s,o!==0?r=qi(o):i!==0&&(r=qi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hn(t),s=1<<n,r|=e[n],t&=~s;return r}function Z4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J4(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-hn(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Z4(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function $m(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $S(){var e=sa;return sa<<=1,!(sa&4194240)&&(sa=64),e}function Uc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hn(t),e[t]=n}function eR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Jg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xe=0;function FS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var BS,ev,HS,WS,VS,Fm=!1,oa=[],_r=null,Sr=null,jr=null,fo=new Map,ho=new Map,mr=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fy(e,t){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ho.delete(t.pointerId)}}function ji(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=$o(t),t!==null&&ev(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function nR(e,t,n,r,s){switch(t){case"focusin":return _r=ji(_r,e,t,n,r,s),!0;case"dragenter":return Sr=ji(Sr,e,t,n,r,s),!0;case"mouseover":return jr=ji(jr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,ji(fo.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ho.set(i,ji(ho.get(i)||null,e,t,n,r,s)),!0}return!1}function US(e){var t=Xr(e.target);if(t!==null){var n=ps(t);if(n!==null){if(t=n.tag,t===13){if(t=PS(n),t!==null){e.blockedOn=t,VS(e.priority,function(){HS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function La(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Om=r,n.target.dispatchEvent(r),Om=null}else return t=$o(n),t!==null&&ev(t),e.blockedOn=n,!1;t.shift()}return!0}function By(e,t,n){La(e)&&n.delete(t)}function rR(){Fm=!1,_r!==null&&La(_r)&&(_r=null),Sr!==null&&La(Sr)&&(Sr=null),jr!==null&&La(jr)&&(jr=null),fo.forEach(By),ho.forEach(By)}function ki(e,t){e.blockedOn===t&&(e.blockedOn=null,Fm||(Fm=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,rR)))}function po(e){function t(s){return ki(s,e)}if(0<oa.length){ki(oa[0],e);for(var n=1;n<oa.length;n++){var r=oa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_r!==null&&ki(_r,e),Sr!==null&&ki(Sr,e),jr!==null&&ki(jr,e),fo.forEach(t),ho.forEach(t),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)US(n),n.blockedOn===null&&mr.shift()}var Bs=nr.ReactCurrentBatchConfig,rl=!0;function sR(e,t,n,r){var s=xe,i=Bs.transition;Bs.transition=null;try{xe=1,tv(e,t,n,r)}finally{xe=s,Bs.transition=i}}function iR(e,t,n,r){var s=xe,i=Bs.transition;Bs.transition=null;try{xe=4,tv(e,t,n,r)}finally{xe=s,Bs.transition=i}}function tv(e,t,n,r){if(rl){var s=Bm(e,t,n,r);if(s===null)nu(e,t,r,sl,n),Fy(e,r);else if(nR(s,e,t,n,r))r.stopPropagation();else if(Fy(e,r),t&4&&-1<tR.indexOf(e)){for(;s!==null;){var i=$o(s);if(i!==null&&BS(i),i=Bm(e,t,n,r),i===null&&nu(e,t,r,sl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nu(e,t,r,null,n)}}var sl=null;function Bm(e,t,n,r){if(sl=null,e=Qg(r),e=Xr(e),e!==null)if(t=ps(e),t===null)e=null;else if(n=t.tag,n===13){if(e=PS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sl=e,null}function GS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U4()){case Zg:return 1;case zS:return 4;case tl:case G4:return 16;case qS:return 536870912;default:return 16}default:return 16}}var br=null,nv=null,za=null;function KS(){if(za)return za;var e,t=nv,n=t.length,r,s="value"in br?br.value:br.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return za=s.slice(e,1<r?1-r:void 0)}function qa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function aa(){return!0}function Hy(){return!1}function zt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?aa:Hy,this.isPropagationStopped=Hy,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=zt(li),qo=De({},li,{view:0,detail:0}),oR=zt(qo),Gc,Kc,Ni,Wl=De({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ni&&(Ni&&e.type==="mousemove"?(Gc=e.screenX-Ni.screenX,Kc=e.screenY-Ni.screenY):Kc=Gc=0,Ni=e),Gc)},movementY:function(e){return"movementY"in e?e.movementY:Kc}}),Wy=zt(Wl),aR=De({},Wl,{dataTransfer:0}),lR=zt(aR),cR=De({},qo,{relatedTarget:0}),Yc=zt(cR),uR=De({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),dR=zt(uR),fR=De({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hR=zt(fR),pR=De({},li,{data:0}),Vy=zt(pR),mR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vR[e])?!!t[e]:!1}function sv(){return yR}var xR=De({},qo,{key:function(e){if(e.key){var t=mR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sv,charCode:function(e){return e.type==="keypress"?qa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bR=zt(xR),wR=De({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uy=zt(wR),_R=De({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sv}),SR=zt(_R),jR=De({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),kR=zt(jR),NR=De({},Wl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ER=zt(NR),CR=[9,13,27,32],iv=Yn&&"CompositionEvent"in window,Qi=null;Yn&&"documentMode"in document&&(Qi=document.documentMode);var RR=Yn&&"TextEvent"in window&&!Qi,YS=Yn&&(!iv||Qi&&8<Qi&&11>=Qi),Gy=" ",Ky=!1;function XS(e,t){switch(e){case"keyup":return CR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Es=!1;function TR(e,t){switch(e){case"compositionend":return QS(t);case"keypress":return t.which!==32?null:(Ky=!0,Gy);case"textInput":return e=t.data,e===Gy&&Ky?null:e;default:return null}}function IR(e,t){if(Es)return e==="compositionend"||!iv&&XS(e,t)?(e=KS(),za=nv=br=null,Es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return YS&&t.locale!=="ko"?null:t.data;default:return null}}var MR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MR[e.type]:t==="textarea"}function ZS(e,t,n,r){RS(r),t=il(t,"onChange"),0<t.length&&(n=new rv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zi=null,mo=null;function AR(e){cj(e,0)}function Vl(e){var t=Ts(e);if(_S(t))return e}function PR(e,t){if(e==="change")return t}var JS=!1;if(Yn){var Xc;if(Yn){var Qc="oninput"in document;if(!Qc){var Xy=document.createElement("div");Xy.setAttribute("oninput","return;"),Qc=typeof Xy.oninput=="function"}Xc=Qc}else Xc=!1;JS=Xc&&(!document.documentMode||9<document.documentMode)}function Qy(){Zi&&(Zi.detachEvent("onpropertychange",ej),mo=Zi=null)}function ej(e){if(e.propertyName==="value"&&Vl(mo)){var t=[];ZS(t,mo,e,Qg(e)),AS(AR,t)}}function DR(e,t,n){e==="focusin"?(Qy(),Zi=t,mo=n,Zi.attachEvent("onpropertychange",ej)):e==="focusout"&&Qy()}function OR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(mo)}function LR(e,t){if(e==="click")return Vl(t)}function zR(e,t){if(e==="input"||e==="change")return Vl(t)}function qR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:qR;function go(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jm.call(t,s)||!mn(e[s],t[s]))return!1}return!0}function Zy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jy(e,t){var n=Zy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zy(n)}}function tj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nj(){for(var e=window,t=Za();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Za(e.document)}return t}function ov(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $R(e){var t=nj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tj(n.ownerDocument.documentElement,n)){if(r!==null&&ov(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Jy(n,i);var o=Jy(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FR=Yn&&"documentMode"in document&&11>=document.documentMode,Cs=null,Hm=null,Ji=null,Wm=!1;function ex(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wm||Cs==null||Cs!==Za(r)||(r=Cs,"selectionStart"in r&&ov(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&go(Ji,r)||(Ji=r,r=il(Hm,"onSelect"),0<r.length&&(t=new rv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cs)))}function la(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rs={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionend:la("Transition","TransitionEnd")},Zc={},rj={};Yn&&(rj=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Ul(e){if(Zc[e])return Zc[e];if(!Rs[e])return e;var t=Rs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rj)return Zc[e]=t[n];return e}var sj=Ul("animationend"),ij=Ul("animationiteration"),oj=Ul("animationstart"),aj=Ul("transitionend"),lj=new Map,tx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){lj.set(e,t),hs(t,[e])}for(var Jc=0;Jc<tx.length;Jc++){var eu=tx[Jc],BR=eu.toLowerCase(),HR=eu[0].toUpperCase()+eu.slice(1);Or(BR,"on"+HR)}Or(sj,"onAnimationEnd");Or(ij,"onAnimationIteration");Or(oj,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(aj,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WR=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function nx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,B4(r,t,void 0,e),e.currentTarget=null}function cj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;nx(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;nx(s,a,u),i=c}}}if(el)throw e=qm,el=!1,qm=null,e}function ke(e,t){var n=t[Ym];n===void 0&&(n=t[Ym]=new Set);var r=e+"__bubble";n.has(r)||(uj(t,e,2,!1),n.add(r))}function tu(e,t,n){var r=0;t&&(r|=4),uj(n,e,r,t)}var ca="_reactListening"+Math.random().toString(36).slice(2);function vo(e){if(!e[ca]){e[ca]=!0,vS.forEach(function(n){n!=="selectionchange"&&(WR.has(n)||tu(n,!1,e),tu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ca]||(t[ca]=!0,tu("selectionchange",!1,t))}}function uj(e,t,n,r){switch(GS(t)){case 1:var s=sR;break;case 4:s=iR;break;default:s=tv}n=s.bind(null,t,n,e),s=void 0,!zm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xr(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}AS(function(){var u=i,d=Qg(n),f=[];e:{var h=lj.get(e);if(h!==void 0){var p=rv,x=e;switch(e){case"keypress":if(qa(n)===0)break e;case"keydown":case"keyup":p=bR;break;case"focusin":x="focus",p=Yc;break;case"focusout":x="blur",p=Yc;break;case"beforeblur":case"afterblur":p=Yc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=SR;break;case sj:case ij:case oj:p=dR;break;case aj:p=kR;break;case"scroll":p=oR;break;case"wheel":p=ER;break;case"copy":case"cut":case"paste":p=hR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Uy}var v=(t&4)!==0,_=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,g!==null&&(w=uo(y,g),w!=null&&v.push(yo(y,w,b)))),_)break;y=y.return}0<v.length&&(h=new p(h,x,null,n,d),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Om&&(x=n.relatedTarget||n.fromElement)&&(Xr(x)||x[Xn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=u,x=x?Xr(x):null,x!==null&&(_=ps(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(v=Wy,w="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=Uy,w="onPointerLeave",g="onPointerEnter",y="pointer"),_=p==null?h:Ts(p),b=x==null?h:Ts(x),h=new v(w,y+"leave",p,n,d),h.target=_,h.relatedTarget=b,w=null,Xr(d)===u&&(v=new v(g,y+"enter",x,n,d),v.target=b,v.relatedTarget=_,w=v),_=w,p&&x)t:{for(v=p,g=x,y=0,b=v;b;b=bs(b))y++;for(b=0,w=g;w;w=bs(w))b++;for(;0<y-b;)v=bs(v),y--;for(;0<b-y;)g=bs(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=bs(v),g=bs(g)}v=null}else v=null;p!==null&&rx(f,h,p,v,!1),x!==null&&_!==null&&rx(f,_,x,v,!0)}}e:{if(h=u?Ts(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=PR;else if(Yy(h))if(JS)S=zR;else{S=OR;var k=DR}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=LR);if(S&&(S=S(e,u))){ZS(f,S,n,d);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Im(h,"number",h.value)}switch(k=u?Ts(u):window,e){case"focusin":(Yy(k)||k.contentEditable==="true")&&(Cs=k,Hm=u,Ji=null);break;case"focusout":Ji=Hm=Cs=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,ex(f,n,d);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":ex(f,n,d)}var j;if(iv)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Es?XS(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(YS&&n.locale!=="ko"&&(Es||N!=="onCompositionStart"?N==="onCompositionEnd"&&Es&&(j=KS()):(br=d,nv="value"in br?br.value:br.textContent,Es=!0)),k=il(u,N),0<k.length&&(N=new Vy(N,e,null,n,d),f.push({event:N,listeners:k}),j?N.data=j:(j=QS(n),j!==null&&(N.data=j)))),(j=RR?TR(e,n):IR(e,n))&&(u=il(u,"onBeforeInput"),0<u.length&&(d=new Vy("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=j))}cj(f,t)})}function yo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function il(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=uo(e,n),i!=null&&r.unshift(yo(e,i,s)),i=uo(e,t),i!=null&&r.push(yo(e,i,s))),e=e.return}return r}function bs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rx(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=uo(n,i),c!=null&&o.unshift(yo(n,c,a))):s||(c=uo(n,i),c!=null&&o.push(yo(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var VR=/\r\n?/g,UR=/\u0000|\uFFFD/g;function sx(e){return(typeof e=="string"?e:""+e).replace(VR,`
`).replace(UR,"")}function ua(e,t,n){if(t=sx(t),sx(e)!==t&&n)throw Error(V(425))}function ol(){}var Vm=null,Um=null;function Gm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,GR=typeof clearTimeout=="function"?clearTimeout:void 0,ix=typeof Promise=="function"?Promise:void 0,KR=typeof queueMicrotask=="function"?queueMicrotask:typeof ix<"u"?function(e){return ix.resolve(null).then(e).catch(YR)}:Km;function YR(e){setTimeout(function(){throw e})}function ru(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),po(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);po(t)}function kr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ox(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),En="__reactFiber$"+ci,xo="__reactProps$"+ci,Xn="__reactContainer$"+ci,Ym="__reactEvents$"+ci,XR="__reactListeners$"+ci,QR="__reactHandles$"+ci;function Xr(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xn]||n[En]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ox(e);e!==null;){if(n=e[En])return n;e=ox(e)}return t}e=n,n=e.parentNode}return null}function $o(e){return e=e[En]||e[Xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ts(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function Gl(e){return e[xo]||null}var Xm=[],Is=-1;function Lr(e){return{current:e}}function Ne(e){0>Is||(e.current=Xm[Is],Xm[Is]=null,Is--)}function Se(e,t){Is++,Xm[Is]=e.current,e.current=t}var Pr={},ut=Lr(Pr),St=Lr(!1),os=Pr;function Xs(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function jt(e){return e=e.childContextTypes,e!=null}function al(){Ne(St),Ne(ut)}function ax(e,t,n){if(ut.current!==Pr)throw Error(V(168));Se(ut,t),Se(St,n)}function dj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(V(108,D4(e)||"Unknown",s));return De({},n,r)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,os=ut.current,Se(ut,e),Se(St,St.current),!0}function lx(e,t,n){var r=e.stateNode;if(!r)throw Error(V(169));n?(e=dj(e,t,os),r.__reactInternalMemoizedMergedChildContext=e,Ne(St),Ne(ut),Se(ut,e)):Ne(St),Se(St,n)}var Fn=null,Kl=!1,su=!1;function fj(e){Fn===null?Fn=[e]:Fn.push(e)}function ZR(e){Kl=!0,fj(e)}function zr(){if(!su&&Fn!==null){su=!0;var e=0,t=xe;try{var n=Fn;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fn=null,Kl=!1}catch(s){throw Fn!==null&&(Fn=Fn.slice(e+1)),LS(Zg,zr),s}finally{xe=t,su=!1}}return null}var Ms=[],As=0,cl=null,ul=0,Vt=[],Ut=0,as=null,Bn=1,Hn="";function Ur(e,t){Ms[As++]=ul,Ms[As++]=cl,cl=e,ul=t}function hj(e,t,n){Vt[Ut++]=Bn,Vt[Ut++]=Hn,Vt[Ut++]=as,as=e;var r=Bn;e=Hn;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-hn(t)+s|n<<s|r,Hn=i+e}else Bn=1<<i|n<<s|r,Hn=e}function av(e){e.return!==null&&(Ur(e,1),hj(e,1,0))}function lv(e){for(;e===cl;)cl=Ms[--As],Ms[As]=null,ul=Ms[--As],Ms[As]=null;for(;e===as;)as=Vt[--Ut],Vt[Ut]=null,Hn=Vt[--Ut],Vt[Ut]=null,Bn=Vt[--Ut],Vt[Ut]=null}var Pt=null,At=null,Re=!1,dn=null;function pj(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pt=e,At=kr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=as!==null?{id:Bn,overflow:Hn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pt=e,At=null,!0):!1;default:return!1}}function Qm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zm(e){if(Re){var t=At;if(t){var n=t;if(!cx(e,t)){if(Qm(e))throw Error(V(418));t=kr(n.nextSibling);var r=Pt;t&&cx(e,t)?pj(r,n):(e.flags=e.flags&-4097|2,Re=!1,Pt=e)}}else{if(Qm(e))throw Error(V(418));e.flags=e.flags&-4097|2,Re=!1,Pt=e}}}function ux(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function da(e){if(e!==Pt)return!1;if(!Re)return ux(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gm(e.type,e.memoizedProps)),t&&(t=At)){if(Qm(e))throw mj(),Error(V(418));for(;t;)pj(e,t),t=kr(t.nextSibling)}if(ux(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=kr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=Pt?kr(e.stateNode.nextSibling):null;return!0}function mj(){for(var e=At;e;)e=kr(e.nextSibling)}function Qs(){At=Pt=null,Re=!1}function cv(e){dn===null?dn=[e]:dn.push(e)}var JR=nr.ReactCurrentBatchConfig;function Ei(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,e))}return e}function fa(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dx(e){var t=e._init;return t(e._payload)}function gj(e){function t(g,y){if(e){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=Rr(g,y),g.index=0,g.sibling=null,g}function i(g,y,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,b,w){return y===null||y.tag!==6?(y=du(b,g.mode,w),y.return=g,y):(y=s(y,b),y.return=g,y)}function c(g,y,b,w){var S=b.type;return S===Ns?d(g,y,b.props.children,w,b.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ur&&dx(S)===y.type)?(w=s(y,b.props),w.ref=Ei(g,y,b),w.return=g,w):(w=Ua(b.type,b.key,b.props,null,g.mode,w),w.ref=Ei(g,y,b),w.return=g,w)}function u(g,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=fu(b,g.mode,w),y.return=g,y):(y=s(y,b.children||[]),y.return=g,y)}function d(g,y,b,w,S){return y===null||y.tag!==7?(y=rs(b,g.mode,w,S),y.return=g,y):(y=s(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=du(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ta:return b=Ua(y.type,y.key,y.props,null,g.mode,b),b.ref=Ei(g,null,y),b.return=g,b;case ks:return y=fu(y,g.mode,b),y.return=g,y;case ur:var w=y._init;return f(g,w(y._payload),b)}if(zi(y)||_i(y))return y=rs(y,g.mode,b,null),y.return=g,y;fa(g,y)}return null}function h(g,y,b,w){var S=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(g,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ta:return b.key===S?c(g,y,b,w):null;case ks:return b.key===S?u(g,y,b,w):null;case ur:return S=b._init,h(g,y,S(b._payload),w)}if(zi(b)||_i(b))return S!==null?null:d(g,y,b,w,null);fa(g,b)}return null}function p(g,y,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(b)||null,a(y,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ta:return g=g.get(w.key===null?b:w.key)||null,c(y,g,w,S);case ks:return g=g.get(w.key===null?b:w.key)||null,u(y,g,w,S);case ur:var k=w._init;return p(g,y,b,k(w._payload),S)}if(zi(w)||_i(w))return g=g.get(b)||null,d(y,g,w,S,null);fa(y,w)}return null}function x(g,y,b,w){for(var S=null,k=null,j=y,N=y=0,C=null;j!==null&&N<b.length;N++){j.index>N?(C=j,j=null):C=j.sibling;var T=h(g,j,b[N],w);if(T===null){j===null&&(j=C);break}e&&j&&T.alternate===null&&t(g,j),y=i(T,y,N),k===null?S=T:k.sibling=T,k=T,j=C}if(N===b.length)return n(g,j),Re&&Ur(g,N),S;if(j===null){for(;N<b.length;N++)j=f(g,b[N],w),j!==null&&(y=i(j,y,N),k===null?S=j:k.sibling=j,k=j);return Re&&Ur(g,N),S}for(j=r(g,j);N<b.length;N++)C=p(j,g,N,b[N],w),C!==null&&(e&&C.alternate!==null&&j.delete(C.key===null?N:C.key),y=i(C,y,N),k===null?S=C:k.sibling=C,k=C);return e&&j.forEach(function(R){return t(g,R)}),Re&&Ur(g,N),S}function v(g,y,b,w){var S=_i(b);if(typeof S!="function")throw Error(V(150));if(b=S.call(b),b==null)throw Error(V(151));for(var k=S=null,j=y,N=y=0,C=null,T=b.next();j!==null&&!T.done;N++,T=b.next()){j.index>N?(C=j,j=null):C=j.sibling;var R=h(g,j,T.value,w);if(R===null){j===null&&(j=C);break}e&&j&&R.alternate===null&&t(g,j),y=i(R,y,N),k===null?S=R:k.sibling=R,k=R,j=C}if(T.done)return n(g,j),Re&&Ur(g,N),S;if(j===null){for(;!T.done;N++,T=b.next())T=f(g,T.value,w),T!==null&&(y=i(T,y,N),k===null?S=T:k.sibling=T,k=T);return Re&&Ur(g,N),S}for(j=r(g,j);!T.done;N++,T=b.next())T=p(j,g,N,T.value,w),T!==null&&(e&&T.alternate!==null&&j.delete(T.key===null?N:T.key),y=i(T,y,N),k===null?S=T:k.sibling=T,k=T);return e&&j.forEach(function(D){return t(g,D)}),Re&&Ur(g,N),S}function _(g,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Ns&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ta:e:{for(var S=b.key,k=y;k!==null;){if(k.key===S){if(S=b.type,S===Ns){if(k.tag===7){n(g,k.sibling),y=s(k,b.props.children),y.return=g,g=y;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ur&&dx(S)===k.type){n(g,k.sibling),y=s(k,b.props),y.ref=Ei(g,k,b),y.return=g,g=y;break e}n(g,k);break}else t(g,k);k=k.sibling}b.type===Ns?(y=rs(b.props.children,g.mode,w,b.key),y.return=g,g=y):(w=Ua(b.type,b.key,b.props,null,g.mode,w),w.ref=Ei(g,y,b),w.return=g,g=w)}return o(g);case ks:e:{for(k=b.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=s(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=fu(b,g.mode,w),y.return=g,g=y}return o(g);case ur:return k=b._init,_(g,y,k(b._payload),w)}if(zi(b))return x(g,y,b,w);if(_i(b))return v(g,y,b,w);fa(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,b),y.return=g,g=y):(n(g,y),y=du(b,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return _}var Zs=gj(!0),vj=gj(!1),dl=Lr(null),fl=null,Ps=null,uv=null;function dv(){uv=Ps=fl=null}function fv(e){var t=dl.current;Ne(dl),e._currentValue=t}function Jm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hs(e,t){fl=e,uv=Ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Qt(e){var t=e._currentValue;if(uv!==e)if(e={context:e,memoizedValue:t,next:null},Ps===null){if(fl===null)throw Error(V(308));Ps=e,fl.dependencies={lanes:0,firstContext:e}}else Ps=Ps.next=e;return t}var Qr=null;function hv(e){Qr===null?Qr=[e]:Qr.push(e)}function yj(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,hv(t)):(n.next=s.next,s.next=n),t.interleaved=n,Qn(e,r)}function Qn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dr=!1;function pv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Qn(e,n)}return s=r.interleaved,s===null?(t.next=t,hv(r)):(t.next=s.next,s.next=t),r.interleaved=t,Qn(e,n)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jg(e,n)}}function fx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hl(e,t,n,r){var s=e.updateQueue;dr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,a=i;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,v=a;switch(h=t,p=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(p,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,h=typeof x=="function"?x.call(p,f,h):x,h==null)break e;f=De({},f,h);break e;case 2:dr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);cs|=o,e.lanes=o,e.memoizedState=f}}function hx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(V(191,s));s.call(r)}}}var Fo={},Tn=Lr(Fo),bo=Lr(Fo),wo=Lr(Fo);function Zr(e){if(e===Fo)throw Error(V(174));return e}function mv(e,t){switch(Se(wo,t),Se(bo,e),Se(Tn,Fo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Am(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Am(t,e)}Ne(Tn),Se(Tn,t)}function Js(){Ne(Tn),Ne(bo),Ne(wo)}function bj(e){Zr(wo.current);var t=Zr(Tn.current),n=Am(t,e.type);t!==n&&(Se(bo,e),Se(Tn,n))}function gv(e){bo.current===e&&(Ne(Tn),Ne(bo))}var Ae=Lr(0);function pl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iu=[];function vv(){for(var e=0;e<iu.length;e++)iu[e]._workInProgressVersionPrimary=null;iu.length=0}var Fa=nr.ReactCurrentDispatcher,ou=nr.ReactCurrentBatchConfig,ls=0,Pe=null,Ue=null,Qe=null,ml=!1,eo=!1,_o=0,e3=0;function at(){throw Error(V(321))}function yv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mn(e[n],t[n]))return!1;return!0}function xv(e,t,n,r,s,i){if(ls=i,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fa.current=e===null||e.memoizedState===null?s3:i3,e=n(r,s),eo){i=0;do{if(eo=!1,_o=0,25<=i)throw Error(V(301));i+=1,Qe=Ue=null,t.updateQueue=null,Fa.current=o3,e=n(r,s)}while(eo)}if(Fa.current=gl,t=Ue!==null&&Ue.next!==null,ls=0,Qe=Ue=Pe=null,ml=!1,t)throw Error(V(300));return e}function bv(){var e=_o!==0;return _o=0,e}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Pe.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Zt(){if(Ue===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Qe===null?Pe.memoizedState:Qe.next;if(t!==null)Qe=t,Ue=e;else{if(e===null)throw Error(V(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Qe===null?Pe.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function So(e,t){return typeof t=="function"?t(e):t}function au(e){var t=Zt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((ls&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Pe.lanes|=d,cs|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,mn(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Pe.lanes|=i,cs|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lu(e){var t=Zt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);mn(i,t.memoizedState)||(wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function wj(){}function _j(e,t){var n=Pe,r=Zt(),s=t(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,wv(kj.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,jo(9,jj.bind(null,n,r,s,t),void 0,null),Je===null)throw Error(V(349));ls&30||Sj(n,t,s)}return s}function Sj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jj(e,t,n,r){t.value=n,t.getSnapshot=r,Nj(t)&&Ej(e)}function kj(e,t,n){return n(function(){Nj(t)&&Ej(e)})}function Nj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mn(e,n)}catch{return!0}}function Ej(e){var t=Qn(e,1);t!==null&&pn(t,e,1,-1)}function px(e){var t=Nn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=r3.bind(null,Pe,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cj(){return Zt().memoizedState}function Ba(e,t,n,r){var s=Nn();Pe.flags|=e,s.memoizedState=jo(1|t,n,void 0,r===void 0?null:r)}function Yl(e,t,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&yv(r,o.deps)){s.memoizedState=jo(t,n,i,r);return}}Pe.flags|=e,s.memoizedState=jo(1|t,n,i,r)}function mx(e,t){return Ba(8390656,8,e,t)}function wv(e,t){return Yl(2048,8,e,t)}function Rj(e,t){return Yl(4,2,e,t)}function Tj(e,t){return Yl(4,4,e,t)}function Ij(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mj(e,t,n){return n=n!=null?n.concat([e]):null,Yl(4,4,Ij.bind(null,t,e),n)}function _v(){}function Aj(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pj(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Dj(e,t,n){return ls&21?(mn(n,t)||(n=$S(),Pe.lanes|=n,cs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=n)}function t3(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=ou.transition;ou.transition={};try{e(!1),t()}finally{xe=n,ou.transition=r}}function Oj(){return Zt().memoizedState}function n3(e,t,n){var r=Cr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lj(e))zj(t,n);else if(n=yj(e,t,n,r),n!==null){var s=gt();pn(n,e,r,s),qj(n,t,r)}}function r3(e,t,n){var r=Cr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lj(e))zj(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,mn(a,o)){var c=t.interleaved;c===null?(s.next=s,hv(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=yj(e,t,s,r),n!==null&&(s=gt(),pn(n,e,r,s),qj(n,t,r))}}function Lj(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function zj(e,t){eo=ml=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qj(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jg(e,n)}}var gl={readContext:Qt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},s3={readContext:Qt,useCallback:function(e,t){return Nn().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:mx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ba(4194308,4,Ij.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=Nn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Nn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=n3.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var t=Nn();return e={current:e},t.memoizedState=e},useState:px,useDebugValue:_v,useDeferredValue:function(e){return Nn().memoizedState=e},useTransition:function(){var e=px(!1),t=e[0];return e=t3.bind(null,e[1]),Nn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pe,s=Nn();if(Re){if(n===void 0)throw Error(V(407));n=n()}else{if(n=t(),Je===null)throw Error(V(349));ls&30||Sj(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,mx(kj.bind(null,r,i,e),[e]),r.flags|=2048,jo(9,jj.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Nn(),t=Je.identifierPrefix;if(Re){var n=Hn,r=Bn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=_o++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=e3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},i3={readContext:Qt,useCallback:Aj,useContext:Qt,useEffect:wv,useImperativeHandle:Mj,useInsertionEffect:Rj,useLayoutEffect:Tj,useMemo:Pj,useReducer:au,useRef:Cj,useState:function(){return au(So)},useDebugValue:_v,useDeferredValue:function(e){var t=Zt();return Dj(t,Ue.memoizedState,e)},useTransition:function(){var e=au(So)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:wj,useSyncExternalStore:_j,useId:Oj,unstable_isNewReconciler:!1},o3={readContext:Qt,useCallback:Aj,useContext:Qt,useEffect:wv,useImperativeHandle:Mj,useInsertionEffect:Rj,useLayoutEffect:Tj,useMemo:Pj,useReducer:lu,useRef:Cj,useState:function(){return lu(So)},useDebugValue:_v,useDeferredValue:function(e){var t=Zt();return Ue===null?t.memoizedState=e:Dj(t,Ue.memoizedState,e)},useTransition:function(){var e=lu(So)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:wj,useSyncExternalStore:_j,useId:Oj,unstable_isNewReconciler:!1};function ln(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function eg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:De({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xl={isMounted:function(e){return(e=e._reactInternals)?ps(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gt(),s=Cr(e),i=Gn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Nr(e,i,s),t!==null&&(pn(t,e,s,r),$a(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gt(),s=Cr(e),i=Gn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Nr(e,i,s),t!==null&&(pn(t,e,s,r),$a(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gt(),r=Cr(e),s=Gn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Nr(e,s,r),t!==null&&(pn(t,e,r,n),$a(t,e,r))}};function gx(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!go(n,r)||!go(s,i):!0}function $j(e,t,n){var r=!1,s=Pr,i=t.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=jt(t)?os:ut.current,r=t.contextTypes,i=(r=r!=null)?Xs(e,s):Pr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function vx(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xl.enqueueReplaceState(t,t.state,null)}function tg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},pv(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=jt(t)?os:ut.current,s.context=Xs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(eg(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Xl.enqueueReplaceState(s,s.state,null),hl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ei(e,t){try{var n="",r=t;do n+=P4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function cu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ng(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var a3=typeof WeakMap=="function"?WeakMap:Map;function Fj(e,t,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yl||(yl=!0,fg=r),ng(e,t)},n}function Bj(e,t,n){n=Gn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ng(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ng(e,t),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function yx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new a3;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=w3.bind(null,e,t,n),t.then(e,e))}function xx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bx(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gn(-1,1),t.tag=2,Nr(n,t,1))),n.lanes|=1),e)}var l3=nr.ReactCurrentOwner,wt=!1;function mt(e,t,n,r){t.child=e===null?vj(t,null,n,r):Zs(t,e.child,n,r)}function wx(e,t,n,r,s){n=n.render;var i=t.ref;return Hs(t,s),r=xv(e,t,n,r,i,s),n=bv(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zn(e,t,s)):(Re&&n&&av(t),t.flags|=1,mt(e,t,r,s),t.child)}function _x(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Tv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Hj(e,t,i,r,s)):(e=Ua(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(o,r)&&e.ref===t.ref)return Zn(e,t,s)}return t.flags|=1,e=Rr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Hj(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(go(i,r)&&e.ref===t.ref)if(wt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,Zn(e,t,s)}return rg(e,t,n,r,s)}function Wj(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Os,It),It|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(Os,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(Os,It),It|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Se(Os,It),It|=r;return mt(e,t,s,n),t.child}function Vj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function rg(e,t,n,r,s){var i=jt(n)?os:ut.current;return i=Xs(t,i),Hs(t,s),n=xv(e,t,n,r,i,s),r=bv(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zn(e,t,s)):(Re&&r&&av(t),t.flags|=1,mt(e,t,n,s),t.child)}function Sx(e,t,n,r,s){if(jt(n)){var i=!0;ll(t)}else i=!1;if(Hs(t,s),t.stateNode===null)Ha(e,t),$j(t,n,r),tg(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qt(u):(u=jt(n)?os:ut.current,u=Xs(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&vx(t,o,r,u),dr=!1;var h=t.memoizedState;o.state=h,hl(t,r,o,s),c=t.memoizedState,a!==r||h!==c||St.current||dr?(typeof d=="function"&&(eg(t,n,d,r),c=t.memoizedState),(a=dr||gx(t,n,a,r,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xj(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ln(t.type,a),o.props=u,f=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=jt(n)?os:ut.current,c=Xs(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==c)&&vx(t,o,r,c),dr=!1,h=t.memoizedState,o.state=h,hl(t,r,o,s);var x=t.memoizedState;a!==f||h!==x||St.current||dr?(typeof p=="function"&&(eg(t,n,p,r),x=t.memoizedState),(u=dr||gx(t,n,u,r,h,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return sg(e,t,n,r,i,s)}function sg(e,t,n,r,s,i){Vj(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&lx(t,n,!1),Zn(e,t,i);r=t.stateNode,l3.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Zs(t,e.child,null,i),t.child=Zs(t,null,a,i)):mt(e,t,a,i),t.memoizedState=r.state,s&&lx(t,n,!0),t.child}function Uj(e){var t=e.stateNode;t.pendingContext?ax(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ax(e,t.context,!1),mv(e,t.containerInfo)}function jx(e,t,n,r,s){return Qs(),cv(s),t.flags|=256,mt(e,t,n,r),t.child}var ig={dehydrated:null,treeContext:null,retryLane:0};function og(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gj(e,t,n){var r=t.pendingProps,s=Ae.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Se(Ae,s&1),e===null)return Zm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Jl(o,r,0,null),e=rs(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=og(n),t.memoizedState=ig,e):Sv(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return c3(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rr(a,i):(i=rs(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?og(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ig,r}return i=e.child,e=i.sibling,r=Rr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Sv(e,t){return t=Jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ha(e,t,n,r){return r!==null&&cv(r),Zs(t,e.child,null,n),e=Sv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function c3(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=cu(Error(V(422))),ha(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Jl({mode:"visible",children:r.children},s,0,null),i=rs(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Zs(t,e.child,null,o),t.child.memoizedState=og(o),t.memoizedState=ig,i);if(!(t.mode&1))return ha(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(V(419)),r=cu(i,r,void 0),ha(e,t,o,r)}if(a=(o&e.childLanes)!==0,wt||a){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(e,s),pn(r,e,s,-1))}return Rv(),r=cu(Error(V(421))),ha(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=_3.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,At=kr(s.nextSibling),Pt=t,Re=!0,dn=null,e!==null&&(Vt[Ut++]=Bn,Vt[Ut++]=Hn,Vt[Ut++]=as,Bn=e.id,Hn=e.overflow,as=t),t=Sv(t,r.children),t.flags|=4096,t)}function kx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jm(e.return,t,n)}function uu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Kj(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(mt(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kx(e,n,t);else if(e.tag===19)kx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&pl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),uu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&pl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}uu(t,!0,n,null,i);break;case"together":uu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,n=Rr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function u3(e,t,n){switch(t.tag){case 3:Uj(t),Qs();break;case 5:bj(t);break;case 1:jt(t.type)&&ll(t);break;case 4:mv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Se(dl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?Gj(e,t,n):(Se(Ae,Ae.current&1),e=Zn(e,t,n),e!==null?e.sibling:null);Se(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kj(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Wj(e,t,n)}return Zn(e,t,n)}var Yj,ag,Xj,Qj;Yj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ag=function(){};Xj=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Zr(Tn.current);var i=null;switch(n){case"input":s=Rm(e,s),r=Rm(e,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Mm(e,s),r=Mm(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ol)}Pm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(lo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(lo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ke("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Qj=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ci(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function d3(e,t,n){var r=t.pendingProps;switch(lv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return jt(t.type)&&al(),lt(t),null;case 3:return r=t.stateNode,Js(),Ne(St),Ne(ut),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(da(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dn!==null&&(mg(dn),dn=null))),ag(e,t),lt(t),null;case 5:gv(t);var s=Zr(wo.current);if(n=t.type,e!==null&&t.stateNode!=null)Xj(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(V(166));return lt(t),null}if(e=Zr(Tn.current),da(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[En]=t,r[xo]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<$i.length;s++)ke($i[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Py(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Oy(r,i),ke("invalid",r)}Pm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ua(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ua(r.textContent,a,e),s=["children",""+a]):lo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":na(r),Dy(r,i,!0);break;case"textarea":na(r),Ly(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ol)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[En]=t,e[xo]=r,Yj(e,t,!1,!1),t.stateNode=e;e:{switch(o=Dm(n,r),n){case"dialog":ke("cancel",e),ke("close",e),s=r;break;case"iframe":case"object":case"embed":ke("load",e),s=r;break;case"video":case"audio":for(s=0;s<$i.length;s++)ke($i[s],e);s=r;break;case"source":ke("error",e),s=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),s=r;break;case"details":ke("toggle",e),s=r;break;case"input":Py(e,r),s=Rm(e,r),ke("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),ke("invalid",e);break;case"textarea":Oy(e,r),s=Mm(e,r),ke("invalid",e);break;default:s=r}Pm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?CS(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&NS(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&co(e,c):typeof c=="number"&&co(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",e):c!=null&&Gg(e,i,c,o))}switch(n){case"input":na(e),Dy(e,r,!1);break;case"textarea":na(e),Ly(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ar(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?qs(e,!!r.multiple,i,!1):r.defaultValue!=null&&qs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)Qj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(V(166));if(n=Zr(wo.current),Zr(Tn.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[En]=t,(i=r.nodeValue!==n)&&(e=Pt,e!==null))switch(e.tag){case 3:ua(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ua(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=t,t.stateNode=r}return lt(t),null;case 13:if(Ne(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&At!==null&&t.mode&1&&!(t.flags&128))mj(),Qs(),t.flags|=98560,i=!1;else if(i=da(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(V(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(V(317));i[En]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),i=!1}else dn!==null&&(mg(dn),dn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?Ke===0&&(Ke=3):Rv())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return Js(),ag(e,t),e===null&&vo(t.stateNode.containerInfo),lt(t),null;case 10:return fv(t.type._context),lt(t),null;case 17:return jt(t.type)&&al(),lt(t),null;case 19:if(Ne(Ae),i=t.memoizedState,i===null)return lt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ci(i,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=pl(e),o!==null){for(t.flags|=128,Ci(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Ae,Ae.current&1|2),t.child}e=e.sibling}i.tail!==null&&qe()>ti&&(t.flags|=128,r=!0,Ci(i,!1),t.lanes=4194304)}else{if(!r)if(e=pl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return lt(t),null}else 2*qe()-i.renderingStartTime>ti&&n!==1073741824&&(t.flags|=128,r=!0,Ci(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qe(),t.sibling=null,n=Ae.current,Se(Ae,r?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return Cv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?It&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function f3(e,t){switch(lv(t),t.tag){case 1:return jt(t.type)&&al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Js(),Ne(St),Ne(ut),vv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gv(t),null;case 13:if(Ne(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Ae),null;case 4:return Js(),null;case 10:return fv(t.type._context),null;case 22:case 23:return Cv(),null;case 24:return null;default:return null}}var pa=!1,ct=!1,h3=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ds(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(e,t,r)}else n.current=null}function lg(e,t,n){try{n()}catch(r){Oe(e,t,r)}}var Nx=!1;function p3(e,t){if(Vm=rl,e=nj(),ov(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===s&&(a=o),h===i&&++d===r&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Um={focusedElem:e,selectionRange:n},rl=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,_=x.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:ln(t.type,v),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(w){Oe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return x=Nx,Nx=!1,x}function to(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&lg(t,n,i)}s=s.next}while(s!==r)}}function Ql(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zj(e){var t=e.alternate;t!==null&&(e.alternate=null,Zj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[En],delete t[xo],delete t[Ym],delete t[XR],delete t[QR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jj(e){return e.tag===5||e.tag===3||e.tag===4}function Ex(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ug(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ol));else if(r!==4&&(e=e.child,e!==null))for(ug(e,t,n),e=e.sibling;e!==null;)ug(e,t,n),e=e.sibling}function dg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dg(e,t,n),e=e.sibling;e!==null;)dg(e,t,n),e=e.sibling}var st=null,cn=!1;function ar(e,t,n){for(n=n.child;n!==null;)ek(e,t,n),n=n.sibling}function ek(e,t,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Hl,n)}catch{}switch(n.tag){case 5:ct||Ds(n,t);case 6:var r=st,s=cn;st=null,ar(e,t,n),st=r,cn=s,st!==null&&(cn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(cn?(e=st,n=n.stateNode,e.nodeType===8?ru(e.parentNode,n):e.nodeType===1&&ru(e,n),po(e)):ru(st,n.stateNode));break;case 4:r=st,s=cn,st=n.stateNode.containerInfo,cn=!0,ar(e,t,n),st=r,cn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lg(n,t,o),s=s.next}while(s!==r)}ar(e,t,n);break;case 1:if(!ct&&(Ds(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,t,a)}ar(e,t,n);break;case 21:ar(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,ar(e,t,n),ct=r):ar(e,t,n);break;default:ar(e,t,n)}}function Cx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new h3),t.forEach(function(r){var s=S3.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,cn=!1;break e;case 3:st=a.stateNode.containerInfo,cn=!0;break e;case 4:st=a.stateNode.containerInfo,cn=!0;break e}a=a.return}if(st===null)throw Error(V(160));ek(i,o,s),st=null,cn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Oe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tk(t,e),t=t.sibling}function tk(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(on(t,e),Sn(e),r&4){try{to(3,e,e.return),Ql(3,e)}catch(v){Oe(e,e.return,v)}try{to(5,e,e.return)}catch(v){Oe(e,e.return,v)}}break;case 1:on(t,e),Sn(e),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(on(t,e),Sn(e),r&512&&n!==null&&Ds(n,n.return),e.flags&32){var s=e.stateNode;try{co(s,"")}catch(v){Oe(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&SS(s,i),Dm(a,o);var u=Dm(a,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?CS(s,f):d==="dangerouslySetInnerHTML"?NS(s,f):d==="children"?co(s,f):Gg(s,d,f,u)}switch(a){case"input":Tm(s,i);break;case"textarea":jS(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?qs(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?qs(s,!!i.multiple,i.defaultValue,!0):qs(s,!!i.multiple,i.multiple?[]:"",!1))}s[xo]=i}catch(v){Oe(e,e.return,v)}}break;case 6:if(on(t,e),Sn(e),r&4){if(e.stateNode===null)throw Error(V(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Oe(e,e.return,v)}}break;case 3:if(on(t,e),Sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{po(t.containerInfo)}catch(v){Oe(e,e.return,v)}break;case 4:on(t,e),Sn(e);break;case 13:on(t,e),Sn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nv=qe())),r&4&&Cx(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(u=ct)||d,on(t,e),ct=u):on(t,e),Sn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(J=e,d=e.child;d!==null;){for(f=J=d;J!==null;){switch(h=J,p=h.child,h.tag){case 0:case 11:case 14:case 15:to(4,h,h.return);break;case 1:Ds(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){Oe(r,n,v)}}break;case 5:Ds(h,h.return);break;case 22:if(h.memoizedState!==null){Tx(f);continue}}p!==null?(p.return=h,J=p):Tx(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=ES("display",o))}catch(v){Oe(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Oe(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:on(t,e),Sn(e),r&4&&Cx(e);break;case 21:break;default:on(t,e),Sn(e)}}function Sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jj(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=Ex(e);dg(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ex(e);ug(e,a,o);break;default:throw Error(V(161))}}catch(c){Oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function m3(e,t,n){J=e,nk(e)}function nk(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||pa;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ct;a=pa;var u=ct;if(pa=o,(ct=c)&&!u)for(J=s;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?Ix(s):c!==null?(c.return=o,J=c):Ix(s);for(;i!==null;)J=i,nk(i),i=i.sibling;J=s,pa=a,ct=u}Rx(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):Rx(e)}}function Rx(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||Ql(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ln(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&hx(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hx(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&po(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}ct||t.flags&512&&cg(t)}catch(h){Oe(t,t.return,h)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function Tx(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function Ix(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ql(4,t)}catch(c){Oe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Oe(t,s,c)}}var i=t.return;try{cg(t)}catch(c){Oe(t,i,c)}break;case 5:var o=t.return;try{cg(t)}catch(c){Oe(t,o,c)}}}catch(c){Oe(t,t.return,c)}if(t===e){J=null;break}var a=t.sibling;if(a!==null){a.return=t.return,J=a;break}J=t.return}}var g3=Math.ceil,vl=nr.ReactCurrentDispatcher,jv=nr.ReactCurrentOwner,Xt=nr.ReactCurrentBatchConfig,he=0,Je=null,Be=null,it=0,It=0,Os=Lr(0),Ke=0,ko=null,cs=0,Zl=0,kv=0,no=null,bt=null,Nv=0,ti=1/0,$n=null,yl=!1,fg=null,Er=null,ma=!1,wr=null,xl=0,ro=0,hg=null,Wa=-1,Va=0;function gt(){return he&6?qe():Wa!==-1?Wa:Wa=qe()}function Cr(e){return e.mode&1?he&2&&it!==0?it&-it:JR.transition!==null?(Va===0&&(Va=$S()),Va):(e=xe,e!==0||(e=window.event,e=e===void 0?16:GS(e.type)),e):1}function pn(e,t,n,r){if(50<ro)throw ro=0,hg=null,Error(V(185));zo(e,n,r),(!(he&2)||e!==Je)&&(e===Je&&(!(he&2)&&(Zl|=n),Ke===4&&gr(e,it)),kt(e,r),n===1&&he===0&&!(t.mode&1)&&(ti=qe()+500,Kl&&zr()))}function kt(e,t){var n=e.callbackNode;J4(e,t);var r=nl(e,e===Je?it:0);if(r===0)n!==null&&$y(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$y(n),t===1)e.tag===0?ZR(Mx.bind(null,e)):fj(Mx.bind(null,e)),KR(function(){!(he&6)&&zr()}),n=null;else{switch(FS(r)){case 1:n=Zg;break;case 4:n=zS;break;case 16:n=tl;break;case 536870912:n=qS;break;default:n=tl}n=uk(n,rk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rk(e,t){if(Wa=-1,Va=0,he&6)throw Error(V(327));var n=e.callbackNode;if(Ws()&&e.callbackNode!==n)return null;var r=nl(e,e===Je?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=bl(e,r);else{t=r;var s=he;he|=2;var i=ik();(Je!==e||it!==t)&&($n=null,ti=qe()+500,ns(e,t));do try{x3();break}catch(a){sk(e,a)}while(!0);dv(),vl.current=i,he=s,Be!==null?t=0:(Je=null,it=0,t=Ke)}if(t!==0){if(t===2&&(s=$m(e),s!==0&&(r=s,t=pg(e,s))),t===1)throw n=ko,ns(e,0),gr(e,r),kt(e,qe()),n;if(t===6)gr(e,r);else{if(s=e.current.alternate,!(r&30)&&!v3(s)&&(t=bl(e,r),t===2&&(i=$m(e),i!==0&&(r=i,t=pg(e,i))),t===1))throw n=ko,ns(e,0),gr(e,r),kt(e,qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(V(345));case 2:Gr(e,bt,$n);break;case 3:if(gr(e,r),(r&130023424)===r&&(t=Nv+500-qe(),10<t)){if(nl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){gt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Km(Gr.bind(null,e,bt,$n),t);break}Gr(e,bt,$n);break;case 4:if(gr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g3(r/1960))-r,10<r){e.timeoutHandle=Km(Gr.bind(null,e,bt,$n),r);break}Gr(e,bt,$n);break;case 5:Gr(e,bt,$n);break;default:throw Error(V(329))}}}return kt(e,qe()),e.callbackNode===n?rk.bind(null,e):null}function pg(e,t){var n=no;return e.current.memoizedState.isDehydrated&&(ns(e,t).flags|=256),e=bl(e,t),e!==2&&(t=bt,bt=n,t!==null&&mg(t)),e}function mg(e){bt===null?bt=e:bt.push.apply(bt,e)}function v3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t){for(t&=~kv,t&=~Zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hn(t),r=1<<n;e[n]=-1,t&=~r}}function Mx(e){if(he&6)throw Error(V(327));Ws();var t=nl(e,0);if(!(t&1))return kt(e,qe()),null;var n=bl(e,t);if(e.tag!==0&&n===2){var r=$m(e);r!==0&&(t=r,n=pg(e,r))}if(n===1)throw n=ko,ns(e,0),gr(e,t),kt(e,qe()),n;if(n===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gr(e,bt,$n),kt(e,qe()),null}function Ev(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(ti=qe()+500,Kl&&zr())}}function us(e){wr!==null&&wr.tag===0&&!(he&6)&&Ws();var t=he;he|=1;var n=Xt.transition,r=xe;try{if(Xt.transition=null,xe=1,e)return e()}finally{xe=r,Xt.transition=n,he=t,!(he&6)&&zr()}}function Cv(){It=Os.current,Ne(Os)}function ns(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,GR(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(lv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:Js(),Ne(St),Ne(ut),vv();break;case 5:gv(r);break;case 4:Js();break;case 13:Ne(Ae);break;case 19:Ne(Ae);break;case 10:fv(r.type._context);break;case 22:case 23:Cv()}n=n.return}if(Je=e,Be=e=Rr(e.current,null),it=It=t,Ke=0,ko=null,kv=Zl=cs=0,bt=no=null,Qr!==null){for(t=0;t<Qr.length;t++)if(n=Qr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qr=null}return e}function sk(e,t){do{var n=Be;try{if(dv(),Fa.current=gl,ml){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ml=!1}if(ls=0,Qe=Ue=Pe=null,eo=!1,_o=0,jv.current=null,n===null||n.return===null){Ke=1,ko=t,Be=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=it,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=xx(o);if(p!==null){p.flags&=-257,bx(p,o,a,i,t),p.mode&1&&yx(i,u,t),t=p,c=u;var x=t.updateQueue;if(x===null){var v=new Set;v.add(c),t.updateQueue=v}else x.add(c);break e}else{if(!(t&1)){yx(i,u,t),Rv();break e}c=Error(V(426))}}else if(Re&&a.mode&1){var _=xx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),bx(_,o,a,i,t),cv(ei(c,a));break e}}i=c=ei(c,a),Ke!==4&&(Ke=2),no===null?no=[i]:no.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Fj(i,c,t);fx(i,g);break e;case 1:a=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Er===null||!Er.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Bj(i,a,t);fx(i,w);break e}}i=i.return}while(i!==null)}ak(n)}catch(S){t=S,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function ik(){var e=vl.current;return vl.current=gl,e===null?gl:e}function Rv(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(cs&268435455)&&!(Zl&268435455)||gr(Je,it)}function bl(e,t){var n=he;he|=2;var r=ik();(Je!==e||it!==t)&&($n=null,ns(e,t));do try{y3();break}catch(s){sk(e,s)}while(!0);if(dv(),he=n,vl.current=r,Be!==null)throw Error(V(261));return Je=null,it=0,Ke}function y3(){for(;Be!==null;)ok(Be)}function x3(){for(;Be!==null&&!W4();)ok(Be)}function ok(e){var t=ck(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?ak(e):Be=t,jv.current=null}function ak(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=f3(n,t),n!==null){n.flags&=32767,Be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Be=null;return}}else if(n=d3(n,t,It),n!==null){Be=n;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);Ke===0&&(Ke=5)}function Gr(e,t,n){var r=xe,s=Xt.transition;try{Xt.transition=null,xe=1,b3(e,t,n,r)}finally{Xt.transition=s,xe=r}return null}function b3(e,t,n,r){do Ws();while(wr!==null);if(he&6)throw Error(V(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(eR(e,i),e===Je&&(Be=Je=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ma||(ma=!0,uk(tl,function(){return Ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=xe;xe=1;var a=he;he|=4,jv.current=null,p3(e,n),tk(n,e),$R(Um),rl=!!Vm,Um=Vm=null,e.current=n,m3(n),V4(),he=a,xe=o,Xt.transition=i}else e.current=n;if(ma&&(ma=!1,wr=e,xl=s),i=e.pendingLanes,i===0&&(Er=null),K4(n.stateNode),kt(e,qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yl)throw yl=!1,e=fg,fg=null,e;return xl&1&&e.tag!==0&&Ws(),i=e.pendingLanes,i&1?e===hg?ro++:(ro=0,hg=e):ro=0,zr(),null}function Ws(){if(wr!==null){var e=FS(xl),t=Xt.transition,n=xe;try{if(Xt.transition=null,xe=16>e?16:e,wr===null)var r=!1;else{if(e=wr,wr=null,xl=0,he&6)throw Error(V(331));var s=he;for(he|=4,J=e.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(J=u;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:to(8,d,i)}var f=d.child;if(f!==null)f.return=d,J=f;else for(;J!==null;){d=J;var h=d.sibling,p=d.return;if(Zj(d),d===u){J=null;break}if(h!==null){h.return=p,J=h;break}J=p}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,J=g;break e}J=i.return}}var y=e.current;for(J=y;J!==null;){o=J;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,J=b;else e:for(o=y;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ql(9,a)}}catch(S){Oe(a,a.return,S)}if(a===o){J=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,J=w;break e}J=a.return}}if(he=s,zr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Hl,e)}catch{}r=!0}return r}finally{xe=n,Xt.transition=t}}return!1}function Ax(e,t,n){t=ei(n,t),t=Fj(e,t,1),e=Nr(e,t,1),t=gt(),e!==null&&(zo(e,1,t),kt(e,t))}function Oe(e,t,n){if(e.tag===3)Ax(e,e,n);else for(;t!==null;){if(t.tag===3){Ax(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){e=ei(n,e),e=Bj(t,e,1),t=Nr(t,e,1),e=gt(),t!==null&&(zo(t,1,e),kt(t,e));break}}t=t.return}}function w3(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gt(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(it&n)===n&&(Ke===4||Ke===3&&(it&130023424)===it&&500>qe()-Nv?ns(e,0):kv|=n),kt(e,t)}function lk(e,t){t===0&&(e.mode&1?(t=ia,ia<<=1,!(ia&130023424)&&(ia=4194304)):t=1);var n=gt();e=Qn(e,t),e!==null&&(zo(e,t,n),kt(e,n))}function _3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lk(e,n)}function S3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(t),lk(e,n)}var ck;ck=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wt=!1,u3(e,t,n);wt=!!(e.flags&131072)}else wt=!1,Re&&t.flags&1048576&&hj(t,ul,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var s=Xs(t,ut.current);Hs(t,n),s=xv(null,t,r,e,s,n);var i=bv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(r)?(i=!0,ll(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pv(t),s.updater=Xl,t.stateNode=s,s._reactInternals=t,tg(t,r,e,n),t=sg(null,t,r,!0,i,n)):(t.tag=0,Re&&i&&av(t),mt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=k3(r),e=ln(r,e),s){case 0:t=rg(null,t,r,e,n);break e;case 1:t=Sx(null,t,r,e,n);break e;case 11:t=wx(null,t,r,e,n);break e;case 14:t=_x(null,t,r,ln(r.type,e),n);break e}throw Error(V(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),rg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),Sx(e,t,r,s,n);case 3:e:{if(Uj(t),e===null)throw Error(V(387));r=t.pendingProps,i=t.memoizedState,s=i.element,xj(e,t),hl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ei(Error(V(423)),t),t=jx(e,t,r,n,s);break e}else if(r!==s){s=ei(Error(V(424)),t),t=jx(e,t,r,n,s);break e}else for(At=kr(t.stateNode.containerInfo.firstChild),Pt=t,Re=!0,dn=null,n=vj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){t=Zn(e,t,n);break e}mt(e,t,r,n)}t=t.child}return t;case 5:return bj(t),e===null&&Zm(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Gm(r,s)?o=null:i!==null&&Gm(r,i)&&(t.flags|=32),Vj(e,t),mt(e,t,o,n),t.child;case 6:return e===null&&Zm(t),null;case 13:return Gj(e,t,n);case 4:return mv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zs(t,null,r,n):mt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),wx(e,t,r,s,n);case 7:return mt(e,t,t.pendingProps,n),t.child;case 8:return mt(e,t,t.pendingProps.children,n),t.child;case 12:return mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Se(dl,r._currentValue),r._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!St.current){t=Zn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Gn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Jm(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(V(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jm(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Hs(t,n),s=Qt(s),r=r(s),t.flags|=1,mt(e,t,r,n),t.child;case 14:return r=t.type,s=ln(r,t.pendingProps),s=ln(r.type,s),_x(e,t,r,s,n);case 15:return Hj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),Ha(e,t),t.tag=1,jt(r)?(e=!0,ll(t)):e=!1,Hs(t,n),$j(t,r,s),tg(t,r,s,n),sg(null,t,r,!0,e,n);case 19:return Kj(e,t,n);case 22:return Wj(e,t,n)}throw Error(V(156,t.tag))};function uk(e,t){return LS(e,t)}function j3(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new j3(e,t,n,r)}function Tv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k3(e){if(typeof e=="function")return Tv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yg)return 11;if(e===Xg)return 14}return 2}function Rr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ua(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Tv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ns:return rs(n.children,s,i,t);case Kg:o=8,s|=8;break;case km:return e=Kt(12,n,t,s|2),e.elementType=km,e.lanes=i,e;case Nm:return e=Kt(13,n,t,s),e.elementType=Nm,e.lanes=i,e;case Em:return e=Kt(19,n,t,s),e.elementType=Em,e.lanes=i,e;case bS:return Jl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yS:o=10;break e;case xS:o=9;break e;case Yg:o=11;break e;case Xg:o=14;break e;case ur:o=16,r=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Kt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function rs(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function Jl(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=bS,e.lanes=n,e.stateNode={isHidden:!1},e}function du(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function fu(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function N3(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iv(e,t,n,r,s,i,o,a,c){return e=new N3(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(i),e}function E3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dk(e){if(!e)return Pr;e=e._reactInternals;e:{if(ps(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var n=e.type;if(jt(n))return dj(e,n,t)}return t}function fk(e,t,n,r,s,i,o,a,c){return e=Iv(n,r,!0,e,s,i,o,a,c),e.context=dk(null),n=e.current,r=gt(),s=Cr(n),i=Gn(r,s),i.callback=t??null,Nr(n,i,s),e.current.lanes=s,zo(e,s,r),kt(e,r),e}function ec(e,t,n,r){var s=t.current,i=gt(),o=Cr(s);return n=dk(n),t.context===null?t.context=n:t.pendingContext=n,t=Gn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Nr(s,t,o),e!==null&&(pn(e,s,o,i),$a(e,s,o)),o}function wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Px(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mv(e,t){Px(e,t),(e=e.alternate)&&Px(e,t)}function C3(){return null}var hk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Av(e){this._internalRoot=e}tc.prototype.render=Av.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));ec(e,t,null,null)};tc.prototype.unmount=Av.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;us(function(){ec(null,e,null,null)}),t[Xn]=null}};function tc(e){this._internalRoot=e}tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=WS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mr.length&&t!==0&&t<mr[n].priority;n++);mr.splice(n,0,e),n===0&&US(e)}};function Pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Dx(){}function R3(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=wl(o);i.call(u)}}var o=fk(t,r,e,0,null,!1,!1,"",Dx);return e._reactRootContainer=o,e[Xn]=o.current,vo(e.nodeType===8?e.parentNode:e),us(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=wl(c);a.call(u)}}var c=Iv(e,0,!1,null,null,!1,!1,"",Dx);return e._reactRootContainer=c,e[Xn]=c.current,vo(e.nodeType===8?e.parentNode:e),us(function(){ec(t,c,n,r)}),c}function rc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=wl(o);a.call(c)}}ec(t,o,e,s)}else o=R3(n,t,e,s,r);return wl(o)}BS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qi(t.pendingLanes);n!==0&&(Jg(t,n|1),kt(t,qe()),!(he&6)&&(ti=qe()+500,zr()))}break;case 13:us(function(){var r=Qn(e,1);if(r!==null){var s=gt();pn(r,e,1,s)}}),Mv(e,1)}};ev=function(e){if(e.tag===13){var t=Qn(e,134217728);if(t!==null){var n=gt();pn(t,e,134217728,n)}Mv(e,134217728)}};HS=function(e){if(e.tag===13){var t=Cr(e),n=Qn(e,t);if(n!==null){var r=gt();pn(n,e,t,r)}Mv(e,t)}};WS=function(){return xe};VS=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};Lm=function(e,t,n){switch(t){case"input":if(Tm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Gl(r);if(!s)throw Error(V(90));_S(r),Tm(r,s)}}}break;case"textarea":jS(e,n);break;case"select":t=n.value,t!=null&&qs(e,!!n.multiple,t,!1)}};IS=Ev;MS=us;var T3={usingClientEntryPoint:!1,Events:[$o,Ts,Gl,RS,TS,Ev]},Ri={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I3={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=DS(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||C3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ga.isDisabled&&ga.supportsFiber)try{Hl=ga.inject(I3),Rn=ga}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T3;Lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pv(t))throw Error(V(200));return E3(e,t,null,n)};Lt.createRoot=function(e,t){if(!Pv(e))throw Error(V(299));var n=!1,r="",s=hk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Iv(e,1,!1,null,null,n,!1,r,s),e[Xn]=t.current,vo(e.nodeType===8?e.parentNode:e),new Av(t)};Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=DS(t),e=e===null?null:e.stateNode,e};Lt.flushSync=function(e){return us(e)};Lt.hydrate=function(e,t,n){if(!nc(t))throw Error(V(200));return rc(null,e,t,!0,n)};Lt.hydrateRoot=function(e,t,n){if(!Pv(e))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fk(t,null,e,1,n??null,s,!1,i,o),e[Xn]=t.current,vo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new tc(t)};Lt.render=function(e,t,n){if(!nc(t))throw Error(V(200));return rc(null,e,t,!1,n)};Lt.unmountComponentAtNode=function(e){if(!nc(e))throw Error(V(40));return e._reactRootContainer?(us(function(){rc(null,null,e,!1,function(){e._reactRootContainer=null,e[Xn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Ev;Lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return rc(e,t,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function pk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pk)}catch(e){console.error(e)}}pk(),pS.exports=Lt;var Ls=pS.exports,Ox=Ls;Sm.createRoot=Ox.createRoot,Sm.hydrateRoot=Ox.hydrateRoot;function Et(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Et(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var mk={exports:{}},gk={},vk={exports:{}},yk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=m;function M3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var A3=typeof Object.is=="function"?Object.is:M3,P3=ni.useState,D3=ni.useEffect,O3=ni.useLayoutEffect,L3=ni.useDebugValue;function z3(e,t){var n=t(),r=P3({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return O3(function(){s.value=n,s.getSnapshot=t,hu(s)&&i({inst:s})},[e,n,t]),D3(function(){return hu(s)&&i({inst:s}),e(function(){hu(s)&&i({inst:s})})},[e]),L3(n),n}function hu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!A3(e,n)}catch{return!0}}function q3(e,t){return t()}var $3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q3:z3;yk.useSyncExternalStore=ni.useSyncExternalStore!==void 0?ni.useSyncExternalStore:$3;vk.exports=yk;var F3=vk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=m,B3=F3;function H3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W3=typeof Object.is=="function"?Object.is:H3,V3=B3.useSyncExternalStore,U3=sc.useRef,G3=sc.useEffect,K3=sc.useMemo,Y3=sc.useDebugValue;gk.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=U3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=K3(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),s!==void 0&&o.hasValue){var x=o.value;if(s(x,p))return f=x}return f=p}if(x=f,W3(d,p))return x;var v=r(p);return s!==void 0&&s(x,v)?(d=p,x):(d=p,f=v)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,s]);var a=V3(e,i[0],i[1]);return G3(function(){o.hasValue=!0,o.value=a},[a]),Y3(a),a};mk.exports=gk;var X3=mk.exports;const Q3=$g(X3),Z3={},Lx=e=>{let t;const n=new Set,r=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,p))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Z3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},J3=e=>e?Lx(e):Lx,{useDebugValue:e5}=B,{useSyncExternalStoreWithSelector:t5}=Q3,n5=e=>e;function xk(e,t=n5,n){const r=t5(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return e5(r),r}const zx=(e,t)=>{const n=J3(e),r=(s,i=t)=>xk(n,s,i);return Object.assign(r,n),r},r5=(e,t)=>e?zx(e,t):zx;function dt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var s5={value:()=>{}};function ic(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ga(n)}function Ga(e){this._=e}function i5(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ga.prototype=ic.prototype={constructor:Ga,on:function(e,t){var n=this._,r=i5(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=o5(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=qx(n[s],e.name,t);else if(t==null)for(s in n)n[s]=qx(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ga(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function o5(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function qx(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=s5,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gg="http://www.w3.org/1999/xhtml";const $x={svg:"http://www.w3.org/2000/svg",xhtml:gg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$x.hasOwnProperty(t)?{space:$x[t],local:e}:e}function a5(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gg&&t.documentElement.namespaceURI===gg?t.createElement(e):t.createElementNS(n,e)}}function l5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function bk(e){var t=oc(e);return(t.local?l5:a5)(t)}function c5(){}function Dv(e){return e==null?c5:function(){return this.querySelector(e)}}function u5(e){typeof e!="function"&&(e=Dv(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Ot(r,this._parents)}function d5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function f5(){return[]}function wk(e){return e==null?f5:function(){return this.querySelectorAll(e)}}function h5(e){return function(){return d5(e.apply(this,arguments))}}function p5(e){typeof e=="function"?e=h5(e):e=wk(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),s.push(c));return new Ot(r,s)}function _k(e){return function(){return this.matches(e)}}function Sk(e){return function(t){return t.matches(e)}}var m5=Array.prototype.find;function g5(e){return function(){return m5.call(this.children,e)}}function v5(){return this.firstElementChild}function y5(e){return this.select(e==null?v5:g5(typeof e=="function"?e:Sk(e)))}var x5=Array.prototype.filter;function b5(){return Array.from(this.children)}function w5(e){return function(){return x5.call(this.children,e)}}function _5(e){return this.selectAll(e==null?b5:w5(typeof e=="function"?e:Sk(e)))}function S5(e){typeof e!="function"&&(e=_k(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ot(r,this._parents)}function jk(e){return new Array(e.length)}function j5(){return new Ot(this._enter||this._groups.map(jk),this._parents)}function _l(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_l.prototype={constructor:_l,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function k5(e){return function(){return e}}function N5(e,t,n,r,s,i){for(var o=0,a,c=t.length,u=i.length;o<u;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new _l(e,i[o]);for(;o<c;++o)(a=t[o])&&(s[o]=a)}function E5(e,t,n,r,s,i,o){var a,c,u=new Map,d=t.length,f=i.length,h=new Array(d),p;for(a=0;a<d;++a)(c=t[a])&&(h[a]=p=o.call(c,c.__data__,a,t)+"",u.has(p)?s[a]=c:u.set(p,c));for(a=0;a<f;++a)p=o.call(e,i[a],a,i)+"",(c=u.get(p))?(r[a]=c,c.__data__=i[a],u.delete(p)):n[a]=new _l(e,i[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(h[a])===c&&(s[a]=c)}function C5(e){return e.__data__}function R5(e,t){if(!arguments.length)return Array.from(this,C5);var n=t?E5:N5,r=this._parents,s=this._groups;typeof e!="function"&&(e=k5(e));for(var i=s.length,o=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var d=r[u],f=s[u],h=f.length,p=T5(e.call(d,d&&d.__data__,u,r)),x=p.length,v=a[u]=new Array(x),_=o[u]=new Array(x),g=c[u]=new Array(h);n(d,f,v,_,g,p,t);for(var y=0,b=0,w,S;y<x;++y)if(w=v[y]){for(y>=b&&(b=y+1);!(S=_[b])&&++b<x;);w._next=S||null}}return o=new Ot(o,r),o._enter=a,o._exit=c,o}function T5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function I5(){return new Ot(this._exit||this._groups.map(jk),this._parents)}function M5(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function A5(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),c=0;c<o;++c)for(var u=n[c],d=r[c],f=u.length,h=a[c]=new Array(f),p,x=0;x<f;++x)(p=u[x]||d[x])&&(h[x]=p);for(;c<s;++c)a[c]=n[c];return new Ot(a,this._parents)}function P5(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function D5(e){e||(e=O5);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,c=s[i]=new Array(a),u,d=0;d<a;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Ot(s,this._parents).order()}function O5(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function L5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function z5(){return Array.from(this)}function q5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function $5(){let e=0;for(const t of this)++e;return e}function F5(){return!this.node()}function B5(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function H5(e){return function(){this.removeAttribute(e)}}function W5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function V5(e,t){return function(){this.setAttribute(e,t)}}function U5(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function G5(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function K5(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Y5(e,t){var n=oc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?W5:H5:typeof t=="function"?n.local?K5:G5:n.local?U5:V5)(n,t))}function kk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X5(e){return function(){this.style.removeProperty(e)}}function Q5(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Z5(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function J5(e,t,n){return arguments.length>1?this.each((t==null?X5:typeof t=="function"?Z5:Q5)(e,t,n??"")):ri(this.node(),e)}function ri(e,t){return e.style.getPropertyValue(t)||kk(e).getComputedStyle(e,null).getPropertyValue(t)}function eT(e){return function(){delete this[e]}}function tT(e,t){return function(){this[e]=t}}function nT(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rT(e,t){return arguments.length>1?this.each((t==null?eT:typeof t=="function"?nT:tT)(e,t)):this.node()[e]}function Nk(e){return e.trim().split(/^|\s+/)}function Ov(e){return e.classList||new Ek(e)}function Ek(e){this._node=e,this._names=Nk(e.getAttribute("class")||"")}Ek.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ck(e,t){for(var n=Ov(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Rk(e,t){for(var n=Ov(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function sT(e){return function(){Ck(this,e)}}function iT(e){return function(){Rk(this,e)}}function oT(e,t){return function(){(t.apply(this,arguments)?Ck:Rk)(this,e)}}function aT(e,t){var n=Nk(e+"");if(arguments.length<2){for(var r=Ov(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?oT:t?sT:iT)(n,t))}function lT(){this.textContent=""}function cT(e){return function(){this.textContent=e}}function uT(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dT(e){return arguments.length?this.each(e==null?lT:(typeof e=="function"?uT:cT)(e)):this.node().textContent}function fT(){this.innerHTML=""}function hT(e){return function(){this.innerHTML=e}}function pT(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mT(e){return arguments.length?this.each(e==null?fT:(typeof e=="function"?pT:hT)(e)):this.node().innerHTML}function gT(){this.nextSibling&&this.parentNode.appendChild(this)}function vT(){return this.each(gT)}function yT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xT(){return this.each(yT)}function bT(e){var t=typeof e=="function"?e:bk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wT(){return null}function _T(e,t){var n=typeof e=="function"?e:bk(e),r=t==null?wT:typeof t=="function"?t:Dv(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ST(){var e=this.parentNode;e&&e.removeChild(this)}function jT(){return this.each(ST)}function kT(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ET(e){return this.select(e?NT:kT)}function CT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function RT(e){return function(t){e.call(this,t,this.__data__)}}function TT(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function IT(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function MT(e,t,n){return function(){var r=this.__on,s,i=RT(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function AT(e,t,n){var r=TT(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(s=0,d=a[c];s<i;++s)if((o=r[s]).type===d.type&&o.name===d.name)return d.value}return}for(a=t?MT:IT,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function Tk(e,t,n){var r=kk(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function PT(e,t){return function(){return Tk(this,e,t)}}function DT(e,t){return function(){return Tk(this,e,t.apply(this,arguments))}}function OT(e,t){return this.each((typeof t=="function"?DT:PT)(e,t))}function*LT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var Ik=[null];function Ot(e,t){this._groups=e,this._parents=t}function Bo(){return new Ot([[document.documentElement]],Ik)}function zT(){return this}Ot.prototype=Bo.prototype={constructor:Ot,select:u5,selectAll:p5,selectChild:y5,selectChildren:_5,filter:S5,data:R5,enter:j5,exit:I5,join:M5,merge:A5,selection:zT,order:P5,sort:D5,call:L5,nodes:z5,node:q5,size:$5,empty:F5,each:B5,attr:Y5,style:J5,property:rT,classed:aT,text:dT,html:mT,raise:vT,lower:xT,append:bT,insert:_T,remove:jT,clone:ET,datum:CT,on:AT,dispatch:OT,[Symbol.iterator]:LT};function Gt(e){return typeof e=="string"?new Ot([[document.querySelector(e)]],[document.documentElement]):new Ot([[e]],Ik)}function qT(e){let t;for(;t=e.sourceEvent;)e=t;return e}function un(e,t){if(e=qT(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const $T={passive:!1},No={capture:!0,passive:!1};function pu(e){e.stopImmediatePropagation()}function Vs(e){e.preventDefault(),e.stopImmediatePropagation()}function Mk(e){var t=e.document.documentElement,n=Gt(e).on("dragstart.drag",Vs,No);"onselectstart"in t?n.on("selectstart.drag",Vs,No):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ak(e,t){var n=e.document.documentElement,r=Gt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Vs,No),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const va=e=>()=>e;function vg(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}vg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function FT(e){return!e.ctrlKey&&!e.button}function BT(){return this.parentNode}function HT(e,t){return t??{x:e.x,y:e.y}}function WT(){return navigator.maxTouchPoints||"ontouchstart"in this}function VT(){var e=FT,t=BT,n=HT,r=WT,s={},i=ic("start","drag","end"),o=0,a,c,u,d,f=0;function h(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",_).on("touchmove.drag",g,$T).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,S){if(!(d||!e.call(this,w,S))){var k=b(this,t.call(this,w,S),w,S,"mouse");k&&(Gt(w.view).on("mousemove.drag",x,No).on("mouseup.drag",v,No),Mk(w.view),pu(w),u=!1,a=w.clientX,c=w.clientY,k("start",w))}}function x(w){if(Vs(w),!u){var S=w.clientX-a,k=w.clientY-c;u=S*S+k*k>f}s.mouse("drag",w)}function v(w){Gt(w.view).on("mousemove.drag mouseup.drag",null),Ak(w.view,u),Vs(w),s.mouse("end",w)}function _(w,S){if(e.call(this,w,S)){var k=w.changedTouches,j=t.call(this,w,S),N=k.length,C,T;for(C=0;C<N;++C)(T=b(this,j,w,S,k[C].identifier,k[C]))&&(pu(w),T("start",w,k[C]))}}function g(w){var S=w.changedTouches,k=S.length,j,N;for(j=0;j<k;++j)(N=s[S[j].identifier])&&(Vs(w),N("drag",w,S[j]))}function y(w){var S=w.changedTouches,k=S.length,j,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),j=0;j<k;++j)(N=s[S[j].identifier])&&(pu(w),N("end",w,S[j]))}function b(w,S,k,j,N,C){var T=i.copy(),R=un(C||k,S),D,z,E;if((E=n.call(w,new vg("beforestart",{sourceEvent:k,target:h,identifier:N,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),j))!=null)return D=E.x-R[0]||0,z=E.y-R[1]||0,function O(A,$,P){var I=R,L;switch(A){case"start":s[N]=O,L=o++;break;case"end":delete s[N],--o;case"drag":R=un(P||$,S),L=o;break}T.call(A,w,new vg(A,{sourceEvent:$,subject:E,target:h,identifier:N,active:L,x:R[0]+D,y:R[1]+z,dx:R[0]-I[0],dy:R[1]-I[1],dispatch:T}),j)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:va(!!w),h):e},h.container=function(w){return arguments.length?(t=typeof w=="function"?w:va(w),h):t},h.subject=function(w){return arguments.length?(n=typeof w=="function"?w:va(w),h):n},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:va(!!w),h):r},h.on=function(){var w=i.on.apply(i,arguments);return w===i?h:w},h.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,h):Math.sqrt(f)},h}function Lv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ho(){}var Eo=.7,Sl=1/Eo,Us="\\s*([+-]?\\d+)\\s*",Co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",In="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UT=/^#([0-9a-f]{3,8})$/,GT=new RegExp(`^rgb\\(${Us},${Us},${Us}\\)$`),KT=new RegExp(`^rgb\\(${In},${In},${In}\\)$`),YT=new RegExp(`^rgba\\(${Us},${Us},${Us},${Co}\\)$`),XT=new RegExp(`^rgba\\(${In},${In},${In},${Co}\\)$`),QT=new RegExp(`^hsl\\(${Co},${In},${In}\\)$`),ZT=new RegExp(`^hsla\\(${Co},${In},${In},${Co}\\)$`),Fx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lv(Ho,Ro,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bx,formatHex:Bx,formatHex8:JT,formatHsl:eI,formatRgb:Hx,toString:Hx});function Bx(){return this.rgb().formatHex()}function JT(){return this.rgb().formatHex8()}function eI(){return Dk(this).formatHsl()}function Hx(){return this.rgb().formatRgb()}function Ro(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UT.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wx(t):n===3?new _t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ya(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ya(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=GT.exec(e))?new _t(t[1],t[2],t[3],1):(t=KT.exec(e))?new _t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YT.exec(e))?ya(t[1],t[2],t[3],t[4]):(t=XT.exec(e))?ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=QT.exec(e))?Gx(t[1],t[2]/100,t[3]/100,1):(t=ZT.exec(e))?Gx(t[1],t[2]/100,t[3]/100,t[4]):Fx.hasOwnProperty(e)?Wx(Fx[e]):e==="transparent"?new _t(NaN,NaN,NaN,0):null}function Wx(e){return new _t(e>>16&255,e>>8&255,e&255,1)}function ya(e,t,n,r){return r<=0&&(e=t=n=NaN),new _t(e,t,n,r)}function tI(e){return e instanceof Ho||(e=Ro(e)),e?(e=e.rgb(),new _t(e.r,e.g,e.b,e.opacity)):new _t}function yg(e,t,n,r){return arguments.length===1?tI(e):new _t(e,t,n,r??1)}function _t(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Lv(_t,yg,Pk(Ho,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eo:Math.pow(Eo,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _t(ss(this.r),ss(this.g),ss(this.b),jl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vx,formatHex:Vx,formatHex8:nI,formatRgb:Ux,toString:Ux}));function Vx(){return`#${Jr(this.r)}${Jr(this.g)}${Jr(this.b)}`}function nI(){return`#${Jr(this.r)}${Jr(this.g)}${Jr(this.b)}${Jr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ux(){const e=jl(this.opacity);return`${e===1?"rgb(":"rgba("}${ss(this.r)}, ${ss(this.g)}, ${ss(this.b)}${e===1?")":`, ${e})`}`}function jl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ss(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jr(e){return e=ss(e),(e<16?"0":"")+e.toString(16)}function Gx(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fn(e,t,n,r)}function Dk(e){if(e instanceof fn)return new fn(e.h,e.s,e.l,e.opacity);if(e instanceof Ho||(e=Ro(e)),!e)return new fn;if(e instanceof fn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,c=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?i+s:2-i-s,o*=60):a=c>0&&c<1?0:o,new fn(o,a,c,e.opacity)}function rI(e,t,n,r){return arguments.length===1?Dk(e):new fn(e,t,n,r??1)}function fn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Lv(fn,rI,Pk(Ho,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new fn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eo:Math.pow(Eo,e),new fn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new _t(mu(e>=240?e-240:e+120,s,r),mu(e,s,r),mu(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new fn(Kx(this.h),xa(this.s),xa(this.l),jl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jl(this.opacity);return`${e===1?"hsl(":"hsla("}${Kx(this.h)}, ${xa(this.s)*100}%, ${xa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kx(e){return e=(e||0)%360,e<0?e+360:e}function xa(e){return Math.max(0,Math.min(1,e||0))}function mu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ok=e=>()=>e;function sI(e,t){return function(n){return e+n*t}}function iI(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function oI(e){return(e=+e)==1?Lk:function(t,n){return n-t?iI(t,n,e):Ok(isNaN(t)?n:t)}}function Lk(e,t){var n=t-e;return n?sI(e,n):Ok(isNaN(e)?t:e)}const Yx=function e(t){var n=oI(t);function r(s,i){var o=n((s=yg(s)).r,(i=yg(i)).r),a=n(s.g,i.g),c=n(s.b,i.b),u=Lk(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=a(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function fr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var xg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gu=new RegExp(xg.source,"g");function aI(e){return function(){return e}}function lI(e){return function(t){return e(t)+""}}function cI(e,t){var n=xg.lastIndex=gu.lastIndex=0,r,s,i,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=xg.exec(e))&&(s=gu.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:fr(r,s)})),n=gu.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?lI(c[0].x):aI(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)a[(f=c[d]).i]=f.x(u);return a.join("")})}var Xx=180/Math.PI,bg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zk(e,t,n,r,s,i){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*Xx,skewX:Math.atan(c)*Xx,scaleX:o,scaleY:a}}var ba;function uI(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bg:zk(t.a,t.b,t.c,t.d,t.e,t.f)}function dI(e){return e==null||(ba||(ba=document.createElementNS("http://www.w3.org/2000/svg","g")),ba.setAttribute("transform",e),!(e=ba.transform.baseVal.consolidate()))?bg:(e=e.matrix,zk(e.a,e.b,e.c,e.d,e.e,e.f))}function qk(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function i(u,d,f,h,p,x){if(u!==f||d!==h){var v=p.push("translate(",null,t,null,n);x.push({i:v-4,x:fr(u,f)},{i:v-2,x:fr(d,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function o(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(s(f)+"rotate(",null,r)-2,x:fr(u,d)})):d&&f.push(s(f)+"rotate("+d+r)}function a(u,d,f,h){u!==d?h.push({i:f.push(s(f)+"skewX(",null,r)-2,x:fr(u,d)}):d&&f.push(s(f)+"skewX("+d+r)}function c(u,d,f,h,p,x){if(u!==f||d!==h){var v=p.push(s(p)+"scale(",null,",",null,")");x.push({i:v-4,x:fr(u,f)},{i:v-2,x:fr(d,h)})}else(f!==1||h!==1)&&p.push(s(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,h),o(u.rotate,d.rotate,f,h),a(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var x=-1,v=h.length,_;++x<v;)f[(_=h[x]).i]=_.x(p);return f.join("")}}}var fI=qk(uI,"px, ","px)","deg)"),hI=qk(dI,", ",")",")"),pI=1e-12;function Qx(e){return((e=Math.exp(e))+1/e)/2}function mI(e){return((e=Math.exp(e))-1/e)/2}function gI(e){return((e=Math.exp(2*e))-1)/(e+1)}const vI=function e(t,n,r){function s(i,o){var a=i[0],c=i[1],u=i[2],d=o[0],f=o[1],h=o[2],p=d-a,x=f-c,v=p*p+x*x,_,g;if(v<pI)g=Math.log(h/u)/t,_=function(j){return[a+j*p,c+j*x,u*Math.exp(t*j*g)]};else{var y=Math.sqrt(v),b=(h*h-u*u+r*v)/(2*u*n*y),w=(h*h-u*u-r*v)/(2*h*n*y),S=Math.log(Math.sqrt(b*b+1)-b),k=Math.log(Math.sqrt(w*w+1)-w);g=(k-S)/t,_=function(j){var N=j*g,C=Qx(S),T=u/(n*y)*(C*gI(t*N+S)-mI(S));return[a+T*p,c+T*x,u*C/Qx(t*N+S)]}}return _.duration=g*1e3*t/Math.SQRT2,_}return s.rho=function(i){var o=Math.max(.001,+i),a=o*o,c=a*a;return e(o,a,c)},s}(Math.SQRT2,2,4);var si=0,Fi=0,Ti=0,$k=1e3,kl,Bi,Nl=0,ds=0,ac=0,To=typeof performance=="object"&&performance.now?performance:Date,Fk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zv(){return ds||(Fk(yI),ds=To.now()+ac)}function yI(){ds=0}function El(){this._call=this._time=this._next=null}El.prototype=Bk.prototype={constructor:El,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zv():+n)+(t==null?0:+t),!this._next&&Bi!==this&&(Bi?Bi._next=this:kl=this,Bi=this),this._call=e,this._time=n,wg()},stop:function(){this._call&&(this._call=null,this._time=1/0,wg())}};function Bk(e,t,n){var r=new El;return r.restart(e,t,n),r}function xI(){zv(),++si;for(var e=kl,t;e;)(t=ds-e._time)>=0&&e._call.call(void 0,t),e=e._next;--si}function Zx(){ds=(Nl=To.now())+ac,si=Fi=0;try{xI()}finally{si=0,wI(),ds=0}}function bI(){var e=To.now(),t=e-Nl;t>$k&&(ac-=t,Nl=e)}function wI(){for(var e,t=kl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:kl=n);Bi=e,wg(r)}function wg(e){if(!si){Fi&&(Fi=clearTimeout(Fi));var t=e-ds;t>24?(e<1/0&&(Fi=setTimeout(Zx,e-To.now()-ac)),Ti&&(Ti=clearInterval(Ti))):(Ti||(Nl=To.now(),Ti=setInterval(bI,$k)),si=1,Fk(Zx))}}function Jx(e,t,n){var r=new El;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var _I=ic("start","end","cancel","interrupt"),SI=[],Hk=0,e0=1,_g=2,Ka=3,t0=4,Sg=5,Ya=6;function lc(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;jI(e,n,{name:t,index:r,group:s,on:_I,tween:SI,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Hk})}function qv(e,t){var n=vn(e,t);if(n.state>Hk)throw new Error("too late; already scheduled");return n}function Pn(e,t){var n=vn(e,t);if(n.state>Ka)throw new Error("too late; already running");return n}function vn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jI(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Bk(i,0,n.time);function i(u){n.state=e0,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,f,h,p;if(n.state!==e0)return c();for(d in r)if(p=r[d],p.name===n.name){if(p.state===Ka)return Jx(o);p.state===t0?(p.state=Ya,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[d]):+d<t&&(p.state=Ya,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[d])}if(Jx(function(){n.state===Ka&&(n.state=t0,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=_g,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_g){for(n.state=Ka,s=new Array(h=n.tween.length),d=0,f=-1;d<h;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=p);s.length=f+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Sg,1),f=-1,h=s.length;++f<h;)s[f].call(e,d);n.state===Sg&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Ya,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Xa(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>_g&&r.state<Sg,r.state=Ya,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function kI(e){return this.each(function(){Xa(this,e)})}function NI(e,t){var n,r;return function(){var s=Pn(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function EI(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=Pn(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=a;break}c===u&&s.push(a)}i.tween=s}}function CI(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=vn(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?NI:EI)(n,e,t))}function $v(e,t,n){var r=e._id;return e.each(function(){var s=Pn(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return vn(s,r).value[t]}}function Wk(e,t){var n;return(typeof t=="number"?fr:t instanceof Ro?Yx:(n=Ro(t))?(t=n,Yx):cI)(e,t)}function RI(e){return function(){this.removeAttribute(e)}}function TI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function II(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function MI(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function AI(e,t,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a)))}}function PI(e,t,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a)))}}function DI(e,t){var n=oc(e),r=n==="transform"?hI:Wk;return this.attrTween(e,typeof t=="function"?(n.local?PI:AI)(n,r,$v(this,"attr."+e,t)):t==null?(n.local?TI:RI)(n):(n.local?MI:II)(n,r,t))}function OI(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function LI(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function zI(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&LI(e,i)),n}return s._value=t,s}function qI(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&OI(e,i)),n}return s._value=t,s}function $I(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=oc(e);return this.tween(n,(r.local?zI:qI)(r,t))}function FI(e,t){return function(){qv(this,e).delay=+t.apply(this,arguments)}}function BI(e,t){return t=+t,function(){qv(this,e).delay=t}}function HI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FI:BI)(t,e)):vn(this.node(),t).delay}function WI(e,t){return function(){Pn(this,e).duration=+t.apply(this,arguments)}}function VI(e,t){return t=+t,function(){Pn(this,e).duration=t}}function UI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?WI:VI)(t,e)):vn(this.node(),t).duration}function GI(e,t){if(typeof t!="function")throw new Error;return function(){Pn(this,e).ease=t}}function KI(e){var t=this._id;return arguments.length?this.each(GI(t,e)):vn(this.node(),t).ease}function YI(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pn(this,e).ease=n}}function XI(e){if(typeof e!="function")throw new Error;return this.each(YI(this._id,e))}function QI(e){typeof e!="function"&&(e=_k(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Jn(r,this._parents,this._name,this._id)}function ZI(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],d=c.length,f=o[a]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;a<r;++a)o[a]=t[a];return new Jn(o,this._parents,this._name,this._id)}function JI(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function eM(e,t,n){var r,s,i=JI(t)?qv:Pn;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function tM(e,t){var n=this._id;return arguments.length<2?vn(this.node(),n).on.on(e):this.each(eM(n,e,t))}function nM(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function rM(){return this.on("end.remove",nM(this._id))}function sM(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dv(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],c=a.length,u=i[o]=new Array(c),d,f,h=0;h<c;++h)(d=a[h])&&(f=e.call(d,d.__data__,h,a))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,lc(u[h],t,n,h,u,vn(d,n)));return new Jn(i,this._parents,t,n)}function iM(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wk(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,x=vn(d,n),v=0,_=h.length;v<_;++v)(p=h[v])&&lc(p,t,n,v,h,x);i.push(h),o.push(d)}return new Jn(i,o,t,n)}var oM=Bo.prototype.constructor;function aM(){return new oM(this._groups,this._parents)}function lM(e,t){var n,r,s;return function(){var i=ri(this,e),o=(this.style.removeProperty(e),ri(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function Vk(e){return function(){this.style.removeProperty(e)}}function cM(e,t,n){var r,s=n+"",i;return function(){var o=ri(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function uM(e,t,n){var r,s,i;return function(){var o=ri(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),ri(this,e))),o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a))}}function dM(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var c=Pn(this,e),u=c.on,d=c.value[i]==null?a||(a=Vk(t)):void 0;(u!==n||s!==d)&&(r=(n=u).copy()).on(o,s=d),c.on=r}}function fM(e,t,n){var r=(e+="")=="transform"?fI:Wk;return t==null?this.styleTween(e,lM(e,r)).on("end.style."+e,Vk(e)):typeof t=="function"?this.styleTween(e,uM(e,r,$v(this,"style."+e,t))).each(dM(this._id,e)):this.styleTween(e,cM(e,r,t),n).on("end.style."+e,null)}function hM(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function pM(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&hM(e,o,n)),r}return i._value=t,i}function mM(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,pM(e,t,n??""))}function gM(e){return function(){this.textContent=e}}function vM(e){return function(){var t=e(this);this.textContent=t??""}}function yM(e){return this.tween("text",typeof e=="function"?vM($v(this,"text",e)):gM(e==null?"":e+""))}function xM(e){return function(t){this.textContent=e.call(this,t)}}function bM(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&xM(s)),t}return r._value=e,r}function wM(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bM(e))}function _M(){for(var e=this._name,t=this._id,n=Uk(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var d=vn(c,t);lc(c,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Jn(r,this._parents,e,n)}function SM(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var u=Pn(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),s===0&&i()})}var jM=0;function Jn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Uk(){return++jM}var On=Bo.prototype;Jn.prototype={constructor:Jn,select:sM,selectAll:iM,selectChild:On.selectChild,selectChildren:On.selectChildren,filter:QI,merge:ZI,selection:aM,transition:_M,call:On.call,nodes:On.nodes,node:On.node,size:On.size,empty:On.empty,each:On.each,on:tM,attr:DI,attrTween:$I,style:fM,styleTween:mM,text:yM,textTween:wM,remove:rM,tween:CI,delay:HI,duration:UI,ease:KI,easeVarying:XI,end:SM,[Symbol.iterator]:On[Symbol.iterator]};function kM(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var NM={time:null,delay:0,duration:250,ease:kM};function EM(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function CM(e){var t,n;e instanceof Jn?(t=e._id,e=e._name):(t=Uk(),(n=NM).time=zv(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&lc(c,e,t,u,o,n||EM(c,t));return new Jn(r,this._parents,e,t)}Bo.prototype.interrupt=kI;Bo.prototype.transition=CM;const wa=e=>()=>e;function RM(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Wn(e,t,n){this.k=e,this.x=t,this.y=n}Wn.prototype={constructor:Wn,scale:function(e){return e===1?this:new Wn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new Wn(1,0,0);Wn.prototype;function vu(e){e.stopImmediatePropagation()}function Ii(e){e.preventDefault(),e.stopImmediatePropagation()}function TM(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function IM(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function n0(){return this.__zoom||Kn}function MM(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function AM(){return navigator.maxTouchPoints||"ontouchstart"in this}function PM(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Gk(){var e=TM,t=IM,n=PM,r=MM,s=AM,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=vI,u=ic("start","zoom","end"),d,f,h,p=500,x=150,v=0,_=10;function g(E){E.property("__zoom",n0).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",T).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(E,O,A,$){var P=E.selection?E.selection():E;P.property("__zoom",n0),E!==P?S(E,O,A,$):P.interrupt().each(function(){k(this,arguments).event($).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},g.scaleBy=function(E,O,A,$){g.scaleTo(E,function(){var P=this.__zoom.k,I=typeof O=="function"?O.apply(this,arguments):O;return P*I},A,$)},g.scaleTo=function(E,O,A,$){g.transform(E,function(){var P=t.apply(this,arguments),I=this.__zoom,L=A==null?w(P):typeof A=="function"?A.apply(this,arguments):A,M=I.invert(L),q=typeof O=="function"?O.apply(this,arguments):O;return n(b(y(I,q),L,M),P,o)},A,$)},g.translateBy=function(E,O,A,$){g.transform(E,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),o)},null,$)},g.translateTo=function(E,O,A,$,P){g.transform(E,function(){var I=t.apply(this,arguments),L=this.__zoom,M=$==null?w(I):typeof $=="function"?$.apply(this,arguments):$;return n(Kn.translate(M[0],M[1]).scale(L.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof A=="function"?-A.apply(this,arguments):-A),I,o)},$,P)};function y(E,O){return O=Math.max(i[0],Math.min(i[1],O)),O===E.k?E:new Wn(O,E.x,E.y)}function b(E,O,A){var $=O[0]-A[0]*E.k,P=O[1]-A[1]*E.k;return $===E.x&&P===E.y?E:new Wn(E.k,$,P)}function w(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function S(E,O,A,$){E.on("start.zoom",function(){k(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event($).end()}).tween("zoom",function(){var P=this,I=arguments,L=k(P,I).event($),M=t.apply(P,I),q=A==null?w(M):typeof A=="function"?A.apply(P,I):A,F=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),W=P.__zoom,G=typeof O=="function"?O.apply(P,I):O,Z=c(W.invert(q).concat(F/W.k),G.invert(q).concat(F/G.k));return function(Q){if(Q===1)Q=G;else{var te=Z(Q),ne=F/te[2];Q=new Wn(ne,q[0]-te[0]*ne,q[1]-te[1]*ne)}L.zoom(null,Q)}})}function k(E,O,A){return!A&&E.__zooming||new j(E,O)}function j(E,O){this.that=E,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,O),this.taps=0}j.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,O){return this.mouse&&E!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var O=Gt(this.that).datum();u.call(E,this.that,new RM(E,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:u}),O)}};function N(E,...O){if(!e.apply(this,arguments))return;var A=k(this,O).event(E),$=this.__zoom,P=Math.max(i[0],Math.min(i[1],$.k*Math.pow(2,r.apply(this,arguments)))),I=un(E);if(A.wheel)(A.mouse[0][0]!==I[0]||A.mouse[0][1]!==I[1])&&(A.mouse[1]=$.invert(A.mouse[0]=I)),clearTimeout(A.wheel);else{if($.k===P)return;A.mouse=[I,$.invert(I)],Xa(this),A.start()}Ii(E),A.wheel=setTimeout(L,x),A.zoom("mouse",n(b(y($,P),A.mouse[0],A.mouse[1]),A.extent,o));function L(){A.wheel=null,A.end()}}function C(E,...O){if(h||!e.apply(this,arguments))return;var A=E.currentTarget,$=k(this,O,!0).event(E),P=Gt(E.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",F,!0),I=un(E,A),L=E.clientX,M=E.clientY;Mk(E.view),vu(E),$.mouse=[I,this.__zoom.invert(I)],Xa(this),$.start();function q(W){if(Ii(W),!$.moved){var G=W.clientX-L,Z=W.clientY-M;$.moved=G*G+Z*Z>v}$.event(W).zoom("mouse",n(b($.that.__zoom,$.mouse[0]=un(W,A),$.mouse[1]),$.extent,o))}function F(W){P.on("mousemove.zoom mouseup.zoom",null),Ak(W.view,$.moved),Ii(W),$.event(W).end()}}function T(E,...O){if(e.apply(this,arguments)){var A=this.__zoom,$=un(E.changedTouches?E.changedTouches[0]:E,this),P=A.invert($),I=A.k*(E.shiftKey?.5:2),L=n(b(y(A,I),$,P),t.apply(this,O),o);Ii(E),a>0?Gt(this).transition().duration(a).call(S,L,$,E):Gt(this).call(g.transform,L,$,E)}}function R(E,...O){if(e.apply(this,arguments)){var A=E.touches,$=A.length,P=k(this,O,E.changedTouches.length===$).event(E),I,L,M,q;for(vu(E),L=0;L<$;++L)M=A[L],q=un(M,this),q=[q,this.__zoom.invert(q),M.identifier],P.touch0?!P.touch1&&P.touch0[2]!==q[2]&&(P.touch1=q,P.taps=0):(P.touch0=q,I=!0,P.taps=1+!!d);d&&(d=clearTimeout(d)),I&&(P.taps<2&&(f=q[0],d=setTimeout(function(){d=null},p)),Xa(this),P.start())}}function D(E,...O){if(this.__zooming){var A=k(this,O).event(E),$=E.changedTouches,P=$.length,I,L,M,q;for(Ii(E),I=0;I<P;++I)L=$[I],M=un(L,this),A.touch0&&A.touch0[2]===L.identifier?A.touch0[0]=M:A.touch1&&A.touch1[2]===L.identifier&&(A.touch1[0]=M);if(L=A.that.__zoom,A.touch1){var F=A.touch0[0],W=A.touch0[1],G=A.touch1[0],Z=A.touch1[1],Q=(Q=G[0]-F[0])*Q+(Q=G[1]-F[1])*Q,te=(te=Z[0]-W[0])*te+(te=Z[1]-W[1])*te;L=y(L,Math.sqrt(Q/te)),M=[(F[0]+G[0])/2,(F[1]+G[1])/2],q=[(W[0]+Z[0])/2,(W[1]+Z[1])/2]}else if(A.touch0)M=A.touch0[0],q=A.touch0[1];else return;A.zoom("touch",n(b(L,M,q),A.extent,o))}}function z(E,...O){if(this.__zooming){var A=k(this,O).event(E),$=E.changedTouches,P=$.length,I,L;for(vu(E),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),I=0;I<P;++I)L=$[I],A.touch0&&A.touch0[2]===L.identifier?delete A.touch0:A.touch1&&A.touch1[2]===L.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(L=un(L,this),Math.hypot(f[0]-L[0],f[1]-L[1])<_)){var M=Gt(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return g.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:wa(+E),g):r},g.filter=function(E){return arguments.length?(e=typeof E=="function"?E:wa(!!E),g):e},g.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:wa(!!E),g):s},g.extent=function(E){return arguments.length?(t=typeof E=="function"?E:wa([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),g):t},g.scaleExtent=function(E){return arguments.length?(i[0]=+E[0],i[1]=+E[1],g):[i[0],i[1]]},g.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(E){return arguments.length?(n=E,g):n},g.duration=function(E){return arguments.length?(a=+E,g):a},g.interpolate=function(E){return arguments.length?(c=E,g):c},g.on=function(){var E=u.on.apply(u,arguments);return E===u?g:E},g.clickDistance=function(E){return arguments.length?(v=(E=+E)*E,g):Math.sqrt(v)},g.tapDistance=function(E){return arguments.length?(_=+E,g):_},g}const cc=m.createContext(null),DM=cc.Provider,er={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Kk=er.error001();function Te(e,t){const n=m.useContext(cc);if(n===null)throw new Error(Kk);return xk(n,e,t)}const et=()=>{const e=m.useContext(cc);if(e===null)throw new Error(Kk);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},OM=e=>e.userSelectionActive?"none":"all";function Tr({position:e,children:t,className:n,style:r,...s}){const i=Te(OM),o=`${e}`.split("-");return B.createElement("div",{className:Et(["react-flow__panel",n,...o]),style:{...r,pointerEvents:i},...s},t)}function LM({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:B.createElement(Tr,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},B.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const zM=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d})=>{const f=m.useRef(null),[h,p]=m.useState({x:0,y:0,width:0,height:0}),x=Et(["react-flow__edge-textwrapper",u]);return m.useEffect(()=>{if(f.current){const v=f.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:B.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...d},s&&B.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),B.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:r},n),c)};var qM=m.memo(zM);const Fv=e=>({width:e.offsetWidth,height:e.offsetHeight}),ii=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Bv=(e={x:0,y:0},t)=>({x:ii(e.x,t[0][0],t[1][0]),y:ii(e.y,t[0][1],t[1][1])}),r0=(e,t,n)=>e<t?ii(Math.abs(e-t),1,50)/50:e>n?-ii(Math.abs(e-n),1,50)/50:0,Yk=(e,t)=>{const n=r0(e.x,35,t.width-35)*20,r=r0(e.y,35,t.height-35)*20;return[n,r]},Xk=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Qk=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Io=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Zk=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),s0=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),$M=(e,t)=>Zk(Qk(Io(e),Io(t))),jg=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},FM=e=>Yt(e.width)&&Yt(e.height)&&Yt(e.x)&&Yt(e.y),Yt=e=>!isNaN(e)&&isFinite(e),Le=Symbol.for("internals"),Jk=["Enter"," ","Escape"],BM=(e,t)=>{},HM=e=>"nativeEvent"in e;function kg(e){var s,i;const t=HM(e)?e.nativeEvent:e,n=((i=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const eN=e=>"clientX"in e,Ir=(e,t)=>{var i,o;const n=eN(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},Cl=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Wo=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>B.createElement(B.Fragment,null,B.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&B.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),s&&Yt(n)&&Yt(r)?B.createElement(qM,{x:n,y:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Wo.displayName="BaseEdge";function Mi(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(i=>i.id===e);s&&n(r,{...s})}}function tN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[i,a,s,o]}function nN({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:a}){const c=e*.125+s*.375+o*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var fs;(function(e){e.Strict="strict",e.Loose="loose"})(fs||(fs={}));var es;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(es||(es={}));var Mo;(function(e){e.Partial="partial",e.Full="full"})(Mo||(Mo={}));var vr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vr||(vr={}));var Rl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Rl||(Rl={}));var ee;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ee||(ee={}));function i0({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===ee.Left||e===ee.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function rN({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:s,targetPosition:i=ee.Top}){const[o,a]=i0({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,u]=i0({pos:i,x1:r,y1:s,x2:e,y2:t}),[d,f,h,p]=nN({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${r},${s}`,d,f,h,p]}const Hv=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=ee.Bottom,targetPosition:i=ee.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:x,interactionWidth:v})=>{const[_,g,y]=rN({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i});return B.createElement(Wo,{path:_,labelX:g,labelY:y,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:x,interactionWidth:v})});Hv.displayName="SimpleBezierEdge";const o0={[ee.Left]:{x:-1,y:0},[ee.Right]:{x:1,y:0},[ee.Top]:{x:0,y:-1},[ee.Bottom]:{x:0,y:1}},WM=({source:e,sourcePosition:t=ee.Bottom,target:n})=>t===ee.Left||t===ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},a0=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function VM({source:e,sourcePosition:t=ee.Bottom,target:n,targetPosition:r=ee.Top,center:s,offset:i}){const o=o0[t],a=o0[r],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},d=WM({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],x,v;const _={x:0,y:0},g={x:0,y:0},[y,b,w,S]=tN({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*a[f]===-1){x=s.x??y,v=s.y??b;const j=[{x,y:c.y},{x,y:u.y}],N=[{x:c.x,y:v},{x:u.x,y:v}];o[f]===h?p=f==="x"?j:N:p=f==="x"?N:j}else{const j=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(f==="x"?p=o.x===h?N:j:p=o.y===h?j:N,t===r){const z=Math.abs(e[f]-n[f]);if(z<=i){const E=Math.min(i-1,i-z);o[f]===h?_[f]=(c[f]>e[f]?-1:1)*E:g[f]=(u[f]>n[f]?-1:1)*E}}if(t!==r){const z=f==="x"?"y":"x",E=o[f]===a[z],O=c[z]>u[z],A=c[z]<u[z];(o[f]===1&&(!E&&O||E&&A)||o[f]!==1&&(!E&&A||E&&O))&&(p=f==="x"?j:N)}const C={x:c.x+_.x,y:c.y+_.y},T={x:u.x+g.x,y:u.y+g.y},R=Math.max(Math.abs(C.x-p[0].x),Math.abs(T.x-p[0].x)),D=Math.max(Math.abs(C.y-p[0].y),Math.abs(T.y-p[0].y));R>=D?(x=(C.x+T.x)/2,v=p[0].y):(x=p[0].x,v=(C.y+T.y)/2)}return[[e,{x:c.x+_.x,y:c.y+_.y},...p,{x:u.x+g.x,y:u.y+g.y},n],x,v,w,S]}function UM(e,t,n,r){const s=Math.min(a0(e,t)/2,a0(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+s*u},${o}Q ${i},${o} ${i},${o+s*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+s*c}Q ${i},${o} ${i+s*a},${o}`}function Ng({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:s,targetPosition:i=ee.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[d,f,h,p,x]=VM({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:a,y:c},offset:u});return[d.reduce((_,g,y)=>{let b="";return y>0&&y<d.length-1?b=UM(d[y-1],g,d[y+1],o):b=`${y===0?"M":"L"}${g.x} ${g.y}`,_+=b,_},""),f,h,p,x]}const uc=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=ee.Bottom,targetPosition:h=ee.Top,markerEnd:p,markerStart:x,pathOptions:v,interactionWidth:_})=>{const[g,y,b]=Ng({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:h,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return B.createElement(Wo,{path:g,labelX:y,labelY:b,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:x,interactionWidth:_})});uc.displayName="SmoothStepEdge";const Wv=m.memo(e=>{var t;return B.createElement(uc,{...e,pathOptions:m.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Wv.displayName="StepEdge";function GM({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,a]=tN({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,a]}const Vv=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[x,v,_]=GM({sourceX:e,sourceY:t,targetX:n,targetY:r});return B.createElement(Wo,{path:x,labelX:v,labelY:_,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});Vv.displayName="StraightEdge";function _a(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function l0({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case ee.Left:return[t-_a(t-r,i),n];case ee.Right:return[t+_a(r-t,i),n];case ee.Top:return[t,n-_a(n-s,i)];case ee.Bottom:return[t,n+_a(s-n,i)]}}function sN({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:s,targetPosition:i=ee.Top,curvature:o=.25}){const[a,c]=l0({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[u,d]=l0({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[f,h,p,x]=nN({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${r},${s}`,f,h,p,x]}const Tl=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=ee.Bottom,targetPosition:i=ee.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:x,pathOptions:v,interactionWidth:_})=>{const[g,y,b]=sN({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i,curvature:v==null?void 0:v.curvature});return B.createElement(Wo,{path:g,labelX:y,labelY:b,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:x,interactionWidth:_})});Tl.displayName="BezierEdge";const Uv=m.createContext(null),KM=Uv.Provider;Uv.Consumer;const YM=()=>m.useContext(Uv),XM=e=>"id"in e&&"source"in e&&"target"in e,QM=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Eg=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,ZM=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),JM=(e,t)=>{if(!e.source||!e.target)return t;let n;return XM(e)?n={...e}:n={...e,id:QM(e)},ZM(n,t)?t:t.concat(n)},Cg=({x:e,y:t},[n,r,s],i,[o,a])=>{const c={x:(e-n)/s,y:(t-r)/s};return i?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},iN=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),is=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},dc=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:i,y:o}=is(s,t).positionAbsolute;return Qk(r,Io({x:i,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Zk(n)},oN=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1,a=[0,0])=>{const c={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:x=!1}=d;if(o&&!p||x)return!1;const{positionAbsolute:v}=is(d,a),_={x:v.x,y:v.y,width:f||0,height:h||0},g=jg(c,_),y=typeof f>"u"||typeof h>"u"||f===null||h===null,b=i&&g>0,w=(f||0)*(h||0);(y||b||g>=w||d.dragging)&&u.push(d)}),u},aN=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},lN=(e,t,n,r,s,i=.1)=>{const o=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(o,a),u=ii(c,r,s),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=n/2-f*u;return{x:h,y:p,zoom:u}},Kr=(e,t=0)=>e.transition().duration(t);function c0(e,t,n,r){return(t[n]||[]).reduce((s,i)=>{var o,a;return`${e.id}-${i.id}-${n}`!==r&&s.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+i.y+i.height/2}),s},[])}function eA(e,t,n,r,s,i){const{x:o,y:a}=Ir(e),u=t.elementsFromPoint(o,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const v=Gv(void 0,u),_=u.getAttribute("data-handleid"),g=i({nodeId:x,id:_,type:v});if(g){const y=s.find(b=>b.nodeId===x&&b.type===v&&b.id===_);return{handle:{id:_,type:v,nodeId:x,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:g}}}}let d=[],f=1/0;if(s.forEach(x=>{const v=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(v<=r){const _=i(x);v<=f&&(v<f?d=[{handle:x,validHandleResult:_}]:v===f&&d.push({handle:x,validHandleResult:_}),f=v)}}),!d.length)return{handle:null,validHandleResult:cN()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:x})=>x.isValid),p=d.some(({handle:x})=>x.type==="target");return d.find(({handle:x,validHandleResult:v})=>p?x.type==="target":h?v.isValid:!0)||d[0]}const tA={source:null,target:null,sourceHandle:null,targetHandle:null},cN=()=>({handleDomNode:null,isValid:!1,connection:tA,endHandle:null});function uN(e,t,n,r,s,i,o){const a=s==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...cN(),handleDomNode:c};if(c){const d=Gv(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),v={source:a?f:n,sourceHandle:a?h:r,target:a?n:f,targetHandle:a?r:h};u.connection=v,p&&x&&(t===fs.Strict?a&&d==="source"||!a&&d==="target":f!==n||h!==r)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=i(v))}return u}function nA({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,i)=>{if(i[Le]){const{handleBounds:o}=i[Le];let a=[],c=[];o&&(a=c0(i,o,"source",`${t}-${n}-${r}`),c=c0(i,o,"target",`${t}-${n}-${r}`)),s.push(...a,...c)}return s},[])}function Gv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function yu(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function rA(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function dN({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:i,setState:o,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const d=Xk(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:x,onConnectStart:v,panBy:_,getNodes:g,cancelConnection:y}=i();let b=0,w;const{x:S,y:k}=Ir(e),j=d==null?void 0:d.elementFromPoint(S,k),N=Gv(c,j),C=h==null?void 0:h.getBoundingClientRect();if(!C||!N)return;let T,R=Ir(e,C),D=!1,z=null,E=!1,O=null;const A=nA({nodes:g(),nodeId:n,handleId:t,handleType:N}),$=()=>{if(!p)return;const[L,M]=Yk(R,C);_({x:L,y:M}),b=requestAnimationFrame($)};o({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:t,type:N},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:N});function P(L){const{transform:M}=i();R=Ir(L,C);const{handle:q,validHandleResult:F}=eA(L,d,Cg(R,M,!1,[1,1]),x,A,W=>uN(W,f,n,t,s?"target":"source",a,d));if(w=q,D||($(),D=!0),O=F.handleDomNode,z=F.connection,E=F.isValid,o({connectionPosition:w&&E?iN({x:w.x,y:w.y},M):R,connectionStatus:rA(!!w,E),connectionEndHandle:F.endHandle}),!w&&!E&&!O)return yu(T);z.source!==z.target&&O&&(yu(T),T=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",E),O.classList.toggle("react-flow__handle-valid",E))}function I(L){var M,q;(w||O)&&z&&E&&(r==null||r(z)),(q=(M=i()).onConnectEnd)==null||q.call(M,L),c&&(u==null||u(L)),yu(T),y(),cancelAnimationFrame(b),D=!1,E=!1,z=null,O=null,d.removeEventListener("mousemove",P),d.removeEventListener("mouseup",I),d.removeEventListener("touchmove",P),d.removeEventListener("touchend",I)}d.addEventListener("mousemove",P),d.addEventListener("mouseup",I),d.addEventListener("touchmove",P),d.addEventListener("touchend",I)}const u0=()=>!0,sA=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),iA=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:o}=r;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},fN=m.forwardRef(({type:e="source",position:t=ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var C,T;const x=o||null,v=e==="target",_=et(),g=YM(),{connectOnClick:y,noPanClassName:b}=Te(sA,dt),{connecting:w,clickConnecting:S}=Te(iA(g,x,e),dt);g||(T=(C=_.getState()).onError)==null||T.call(C,"010",er.error010());const k=R=>{const{defaultEdgeOptions:D,onConnect:z,hasDefaultEdges:E}=_.getState(),O={...D,...R};if(E){const{edges:A,setEdges:$}=_.getState();$(JM(O,A))}z==null||z(O),a==null||a(O)},j=R=>{if(!g)return;const D=eN(R);s&&(D&&R.button===0||!D)&&dN({event:R,handleId:x,nodeId:g,onConnect:k,isTarget:v,getState:_.getState,setState:_.setState,isValidConnection:n||_.getState().isValidConnection||u0}),D?d==null||d(R):f==null||f(R)},N=R=>{const{onClickConnectStart:D,onClickConnectEnd:z,connectionClickStartHandle:E,connectionMode:O,isValidConnection:A}=_.getState();if(!g||!E&&!s)return;if(!E){D==null||D(R,{nodeId:g,handleId:x,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:x}});return}const $=Xk(R.target),P=n||A||u0,{connection:I,isValid:L}=uN({nodeId:g,id:x,type:e},O,E.nodeId,E.handleId||null,E.type,P,$);L&&k(I),z==null||z(R),_.setState({connectionClickStartHandle:null})};return B.createElement("div",{"data-handleid":x,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${x}-${e}`,className:Et(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!v,target:v,connectable:r,connectablestart:s,connectableend:i,connecting:S,connectionindicator:r&&(s&&!w||i&&w)}]),onMouseDown:j,onTouchStart:j,onClick:y?N:void 0,ref:p,...h},c)});fN.displayName="Handle";var Mn=m.memo(fN);const hN=({data:e,isConnectable:t,targetPosition:n=ee.Top,sourcePosition:r=ee.Bottom})=>B.createElement(B.Fragment,null,B.createElement(Mn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,B.createElement(Mn,{type:"source",position:r,isConnectable:t}));hN.displayName="DefaultNode";var Rg=m.memo(hN);const pN=({data:e,isConnectable:t,sourcePosition:n=ee.Bottom})=>B.createElement(B.Fragment,null,e==null?void 0:e.label,B.createElement(Mn,{type:"source",position:n,isConnectable:t}));pN.displayName="InputNode";var mN=m.memo(pN);const gN=({data:e,isConnectable:t,targetPosition:n=ee.Top})=>B.createElement(B.Fragment,null,B.createElement(Mn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);gN.displayName="OutputNode";var vN=m.memo(gN);const Kv=()=>null;Kv.displayName="GroupNode";const oA=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Sa=e=>e.id;function aA(e,t){return dt(e.selectedNodes.map(Sa),t.selectedNodes.map(Sa))&&dt(e.selectedEdges.map(Sa),t.selectedEdges.map(Sa))}const yN=m.memo(({onSelectionChange:e})=>{const t=et(),{selectedNodes:n,selectedEdges:r}=Te(oA,aA);return m.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChange.forEach(i=>i(s))},[n,r,e]),null});yN.displayName="SelectionListener";const lA=e=>!!e.onSelectionChange;function cA({onSelectionChange:e}){const t=Te(lA);return e||t?B.createElement(yN,{onSelectionChange:e}):null}const uA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function ws(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function oe(e,t,n){m.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const dA=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:i,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:v,maxZoom:_,nodeExtent:g,onNodesChange:y,onEdgesChange:b,elementsSelectable:w,connectionMode:S,snapGrid:k,snapToGrid:j,translateExtent:N,connectOnClick:C,defaultEdgeOptions:T,fitView:R,fitViewOptions:D,onNodesDelete:z,onEdgesDelete:E,onNodeDrag:O,onNodeDragStart:A,onNodeDragStop:$,onSelectionDrag:P,onSelectionDragStart:I,onSelectionDragStop:L,noPanClassName:M,nodeOrigin:q,rfId:F,autoPanOnConnect:W,autoPanOnNodeDrag:G,onError:Z,connectionRadius:Q,isValidConnection:te,nodeDragThreshold:ne})=>{const{setNodes:X,setEdges:ve,setDefaultNodesAndEdges:ae,setMinZoom:me,setMaxZoom:de,setTranslateExtent:U,setNodeExtent:re,reset:Y}=Te(uA,dt),K=et();return m.useEffect(()=>{const H=r==null?void 0:r.map(pe=>({...pe,...T}));return ae(n,H),()=>{Y()}},[]),oe("defaultEdgeOptions",T,K.setState),oe("connectionMode",S,K.setState),oe("onConnect",s,K.setState),oe("onConnectStart",i,K.setState),oe("onConnectEnd",o,K.setState),oe("onClickConnectStart",a,K.setState),oe("onClickConnectEnd",c,K.setState),oe("nodesDraggable",u,K.setState),oe("nodesConnectable",d,K.setState),oe("nodesFocusable",f,K.setState),oe("edgesFocusable",h,K.setState),oe("edgesUpdatable",p,K.setState),oe("elementsSelectable",w,K.setState),oe("elevateNodesOnSelect",x,K.setState),oe("snapToGrid",j,K.setState),oe("snapGrid",k,K.setState),oe("onNodesChange",y,K.setState),oe("onEdgesChange",b,K.setState),oe("connectOnClick",C,K.setState),oe("fitViewOnInit",R,K.setState),oe("fitViewOnInitOptions",D,K.setState),oe("onNodesDelete",z,K.setState),oe("onEdgesDelete",E,K.setState),oe("onNodeDrag",O,K.setState),oe("onNodeDragStart",A,K.setState),oe("onNodeDragStop",$,K.setState),oe("onSelectionDrag",P,K.setState),oe("onSelectionDragStart",I,K.setState),oe("onSelectionDragStop",L,K.setState),oe("noPanClassName",M,K.setState),oe("nodeOrigin",q,K.setState),oe("rfId",F,K.setState),oe("autoPanOnConnect",W,K.setState),oe("autoPanOnNodeDrag",G,K.setState),oe("onError",Z,K.setState),oe("connectionRadius",Q,K.setState),oe("isValidConnection",te,K.setState),oe("nodeDragThreshold",ne,K.setState),ws(e,X),ws(t,ve),ws(v,me),ws(_,de),ws(N,U),ws(g,re),null},d0={display:"none"},fA={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},xN="react-flow__node-desc",bN="react-flow__edge-desc",hA="react-flow__aria-live",pA=e=>e.ariaLiveMessage;function mA({rfId:e}){const t=Te(pA);return B.createElement("div",{id:`${hA}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:fA},t)}function gA({rfId:e,disableKeyboardA11y:t}){return B.createElement(B.Fragment,null,B.createElement("div",{id:`${xN}-${e}`,style:d0},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),B.createElement("div",{id:`${bN}-${e}`,style:d0},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&B.createElement(mA,{rfId:e}))}var Ao=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=m.useState(!1),s=m.useRef(!1),i=m.useRef(new Set([])),[o,a]=m.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return m.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&kg(p))return!1;const v=h0(p.code,a);i.current.add(p[v]),f0(o,i.current,!1)&&(p.preventDefault(),r(!0))},f=p=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&kg(p))return!1;const v=h0(p.code,a);f0(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(p[v]),p.key==="Meta"&&i.current.clear(),s.current=!1},h=()=>{i.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,r]),n};function f0(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function h0(e,t){return t.includes(e)?"code":"key"}function wN(e,t,n,r){var a,c;const s=e.parentNode||e.parentId;if(!s)return n;const i=t.get(s),o=is(i,r);return wN(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=i[Le])==null?void 0:a.z)??0)>(n.z??0)?((c=i[Le])==null?void 0:c.z)??0:n.z??0},r)}function _N(e,t,n){e.forEach(r=>{var i;const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:o,y:a,z:c}=wN(r,e,{...r.position,z:((i=r[Le])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:a},r[Le].z=c,n!=null&&n[r.id]&&(r[Le].isParent=!0)}})}function xu(e,t,n,r){const s=new Map,i={},o=r?1e3:0;return e.forEach(a=>{var p;const c=(Yt(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(i[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,Le,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Le])==null?void 0:p.handleBounds,z:c}}),s.set(a.id,d)}),_N(s,n,i),s}function SN(e,t={}){const{getNodes:n,width:r,height:s,minZoom:i,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(a&&c&&(h||!t.initial)){const x=n().filter(_=>{var y;const g=t.includeHiddenNodes?_.width&&_.height:!_.hidden;return(y=t.nodes)!=null&&y.length?g&&t.nodes.some(b=>b.id===_.id):g}),v=x.every(_=>_.width&&_.height);if(x.length>0&&v){const _=dc(x,f),{x:g,y,zoom:b}=lN(_,r,s,t.minZoom??i,t.maxZoom??o,t.padding??.1),w=Kn.translate(g,y).scale(b);return typeof t.duration=="number"&&t.duration>0?a.transform(Kr(c,t.duration),w):a.transform(c,w),!0}}return!1}function vA(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Le]:r[Le],selected:n.selected})}),new Map(t)}function yA(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function ja({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:i,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:vA(e,s)}),o==null||o(e)),t!=null&&t.length&&(u&&r({edges:yA(t,i)}),a==null||a(t))}const _s=()=>{},xA={zoomIn:_s,zoomOut:_s,zoomTo:_s,getZoom:()=>1,setViewport:_s,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:_s,fitBounds:_s,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},bA=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),wA=()=>{const e=et(),{d3Zoom:t,d3Selection:n}=Te(bA,dt);return m.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(Kr(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(Kr(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,i)=>t.scaleTo(Kr(n,i==null?void 0:i.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,i)=>{const[o,a,c]=e.getState().transform,u=Kn.translate(s.x??o,s.y??a).scale(s.zoom??c);t.transform(Kr(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[s,i,o]=e.getState().transform;return{x:s,y:i,zoom:o}},fitView:s=>SN(e.getState,s),setCenter:(s,i,o)=>{const{width:a,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=a/2-s*d,h=c/2-i*d,p=Kn.translate(f,h).scale(d);t.transform(Kr(n,o==null?void 0:o.duration),p)},fitBounds:(s,i)=>{const{width:o,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=lN(s,o,a,c,u,(i==null?void 0:i.padding)??.1),p=Kn.translate(d,f).scale(h);t.transform(Kr(n,i==null?void 0:i.duration),p)},project:s=>{const{transform:i,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Cg(s,i,o,a)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return s;const{x:u,y:d}=c.getBoundingClientRect(),f={x:s.x-u,y:s.y-d};return Cg(f,i,o,a)},flowToScreenPosition:s=>{const{transform:i,domNode:o}=e.getState();if(!o)return s;const{x:a,y:c}=o.getBoundingClientRect(),u=iN(s,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:xA,[t,n])};function fc(){const e=wA(),t=et(),n=m.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),r=m.useCallback(v=>t.getState().nodeInternals.get(v),[]),s=m.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(_=>({..._}))},[]),i=m.useCallback(v=>{const{edges:_=[]}=t.getState();return _.find(g=>g.id===v)},[]),o=m.useCallback(v=>{const{getNodes:_,setNodes:g,hasDefaultNodes:y,onNodesChange:b}=t.getState(),w=_(),S=typeof v=="function"?v(w):v;if(y)g(S);else if(b){const k=S.length===0?w.map(j=>({type:"remove",id:j.id})):S.map(j=>({item:j,type:"reset"}));b(k)}},[]),a=m.useCallback(v=>{const{edges:_=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:b}=t.getState(),w=typeof v=="function"?v(_):v;if(y)g(w);else if(b){const S=w.length===0?_.map(k=>({type:"remove",id:k.id})):w.map(k=>({item:k,type:"reset"}));b(S)}},[]),c=m.useCallback(v=>{const _=Array.isArray(v)?v:[v],{getNodes:g,setNodes:y,hasDefaultNodes:b,onNodesChange:w}=t.getState();if(b){const k=[...g(),..._];y(k)}else if(w){const S=_.map(k=>({item:k,type:"add"}));w(S)}},[]),u=m.useCallback(v=>{const _=Array.isArray(v)?v:[v],{edges:g=[],setEdges:y,hasDefaultEdges:b,onEdgesChange:w}=t.getState();if(b)y([...g,..._]);else if(w){const S=_.map(k=>({item:k,type:"add"}));w(S)}},[]),d=m.useCallback(()=>{const{getNodes:v,edges:_=[],transform:g}=t.getState(),[y,b,w]=g;return{nodes:v().map(S=>({...S})),edges:_.map(S=>({...S})),viewport:{x:y,y:b,zoom:w}}},[]),f=m.useCallback(({nodes:v,edges:_})=>{const{nodeInternals:g,getNodes:y,edges:b,hasDefaultNodes:w,hasDefaultEdges:S,onNodesDelete:k,onEdgesDelete:j,onNodesChange:N,onEdgesChange:C}=t.getState(),T=(v||[]).map(O=>O.id),R=(_||[]).map(O=>O.id),D=y().reduce((O,A)=>{const $=A.parentNode||A.parentId,P=!T.includes(A.id)&&$&&O.find(L=>L.id===$);return(typeof A.deletable=="boolean"?A.deletable:!0)&&(T.includes(A.id)||P)&&O.push(A),O},[]),z=b.filter(O=>typeof O.deletable=="boolean"?O.deletable:!0),E=z.filter(O=>R.includes(O.id));if(D||E){const O=aN(D,z),A=[...E,...O],$=A.reduce((P,I)=>(P.includes(I.id)||P.push(I.id),P),[]);if((S||w)&&(S&&t.setState({edges:b.filter(P=>!$.includes(P.id))}),w&&(D.forEach(P=>{g.delete(P.id)}),t.setState({nodeInternals:new Map(g)}))),$.length>0&&(j==null||j(A),C&&C($.map(P=>({id:P,type:"remove"})))),D.length>0&&(k==null||k(D),N)){const P=D.map(I=>({id:I.id,type:"remove"}));N(P)}}},[]),h=m.useCallback(v=>{const _=FM(v),g=_?null:t.getState().nodeInternals.get(v.id);return!_&&!g?[null,null,_]:[_?v:s0(g),g,_]},[]),p=m.useCallback((v,_=!0,g)=>{const[y,b,w]=h(v);return y?(g||t.getState().getNodes()).filter(S=>{if(!w&&(S.id===b.id||!S.positionAbsolute))return!1;const k=s0(S),j=jg(k,y);return _&&j>0||j>=y.width*y.height}):[]},[]),x=m.useCallback((v,_,g=!0)=>{const[y]=h(v);if(!y)return!1;const b=jg(y,_);return g&&b>0||b>=y.width*y.height},[]);return m.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:i,setNodes:o,setEdges:a,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:x}),[e,n,r,s,i,o,a,c,u,d,f,p,x])}const _A={actInsideInputWithModifier:!1};var SA=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=et(),{deleteElements:r}=fc(),s=Ao(e,_A),i=Ao(t);m.useEffect(()=>{if(s){const{edges:o,getNodes:a}=n.getState(),c=a().filter(d=>d.selected),u=o.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),m.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function jA(e){const t=et();m.useEffect(()=>{let n;const r=()=>{var i,o;if(!e.current)return;const s=Fv(e.current);(s.height===0||s.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",er.error004())),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Yv={position:"absolute",width:"100%",height:"100%",top:0,left:0},kA=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ka=e=>({x:e.x,y:e.y,zoom:e.k}),Ss=(e,t)=>e.target.closest(`.${t}`),p0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),m0=e=>{const t=e.ctrlKey&&Cl()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},NA=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),EA=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=es.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:x,maxZoom:v,zoomActivationKeyCode:_,preventScrolling:g=!0,children:y,noWheelClassName:b,noPanClassName:w})=>{const S=m.useRef(),k=et(),j=m.useRef(!1),N=m.useRef(!1),C=m.useRef(null),T=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:D,d3ZoomHandler:z,userSelectionActive:E}=Te(NA,dt),O=Ao(_),A=m.useRef(0),$=m.useRef(!1),P=m.useRef();return jA(C),m.useEffect(()=>{if(C.current){const I=C.current.getBoundingClientRect(),L=Gk().scaleExtent([x,v]).translateExtent(p),M=Gt(C.current).call(L),q=Kn.translate(h.x,h.y).scale(ii(h.zoom,x,v)),F=[[0,0],[I.width,I.height]],W=L.constrain()(q,F,p);L.transform(M,W),L.wheelDelta(m0),k.setState({d3Zoom:L,d3Selection:M,d3ZoomHandler:M.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:C.current.closest(".react-flow")})}},[]),m.useEffect(()=>{D&&R&&(o&&!O&&!E?D.on("wheel.zoom",I=>{if(Ss(I,b))return!1;I.preventDefault(),I.stopImmediatePropagation();const L=D.property("__zoom").k||1;if(I.ctrlKey&&i){const te=un(I),ne=m0(I),X=L*Math.pow(2,ne);R.scaleTo(D,X,te,I);return}const M=I.deltaMode===1?20:1;let q=c===es.Vertical?0:I.deltaX*M,F=c===es.Horizontal?0:I.deltaY*M;!Cl()&&I.shiftKey&&c!==es.Vertical&&(q=I.deltaY*M,F=0),R.translateBy(D,-(q/L)*a,-(F/L)*a,{internal:!0});const W=ka(D.property("__zoom")),{onViewportChangeStart:G,onViewportChange:Z,onViewportChangeEnd:Q}=k.getState();clearTimeout(P.current),$.current||($.current=!0,t==null||t(I,W),G==null||G(W)),$.current&&(e==null||e(I,W),Z==null||Z(W),P.current=setTimeout(()=>{n==null||n(I,W),Q==null||Q(W),$.current=!1},150))},{passive:!1}):typeof z<"u"&&D.on("wheel.zoom",function(I,L){if(!g&&I.type==="wheel"&&!I.ctrlKey||Ss(I,b))return null;I.preventDefault(),z.call(this,I,L)},{passive:!1}))},[E,o,c,D,R,z,O,i,g,b,t,e,n]),m.useEffect(()=>{R&&R.on("start",I=>{var q,F;if(!I.sourceEvent||I.sourceEvent.internal)return null;A.current=(q=I.sourceEvent)==null?void 0:q.button;const{onViewportChangeStart:L}=k.getState(),M=ka(I.transform);j.current=!0,T.current=M,((F=I.sourceEvent)==null?void 0:F.type)==="mousedown"&&k.setState({paneDragging:!0}),L==null||L(M),t==null||t(I.sourceEvent,M)})},[R,t]),m.useEffect(()=>{R&&(E&&!j.current?R.on("zoom",null):E||R.on("zoom",I=>{var M;const{onViewportChange:L}=k.getState();if(k.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),N.current=!!(r&&p0(f,A.current??0)),(e||L)&&!((M=I.sourceEvent)!=null&&M.internal)){const q=ka(I.transform);L==null||L(q),e==null||e(I.sourceEvent,q)}}))},[E,R,e,f,r]),m.useEffect(()=>{R&&R.on("end",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;const{onViewportChangeEnd:L}=k.getState();if(j.current=!1,k.setState({paneDragging:!1}),r&&p0(f,A.current??0)&&!N.current&&r(I.sourceEvent),N.current=!1,(n||L)&&kA(T.current,I.transform)){const M=ka(I.transform);T.current=M,clearTimeout(S.current),S.current=setTimeout(()=>{L==null||L(M),n==null||n(I.sourceEvent,M)},o?150:0)}})},[R,o,f,n,r]),m.useEffect(()=>{R&&R.filter(I=>{const L=O||s,M=i&&I.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&I.button===1&&I.type==="mousedown"&&(Ss(I,"react-flow__node")||Ss(I,"react-flow__edge")))return!0;if(!f&&!L&&!o&&!u&&!i||E||!u&&I.type==="dblclick"||Ss(I,b)&&I.type==="wheel"||Ss(I,w)&&(I.type!=="wheel"||o&&I.type==="wheel"&&!O)||!i&&I.ctrlKey&&I.type==="wheel"||!L&&!o&&!M&&I.type==="wheel"||!f&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(f)&&!f.includes(I.button)&&I.type==="mousedown")return!1;const q=Array.isArray(f)&&f.includes(I.button)||!I.button||I.button<=1;return(!I.ctrlKey||I.type==="wheel")&&q})},[E,R,s,i,o,u,f,d,O]),B.createElement("div",{className:"react-flow__renderer",ref:C,style:Yv},y)},CA=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function RA(){const{userSelectionActive:e,userSelectionRect:t}=Te(CA,dt);return e&&t?B.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function g0(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(s>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),i>0&&(r.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function jN(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const i=e.filter(a=>a.id===s.id);if(i.length===0)return r.push(s),r;const o={...s};for(const a of i)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&g0(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&g0(r,o);break}case"remove":return r}return r.push(o),r},n)}function kN(e,t){return jN(e,t)}function TA(e,t){return jN(e,t)}const hr=(e,t)=>({id:e,type:"select",selected:t});function zs(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(hr(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(hr(r.id,!1))),n},[])}const bu=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},IA=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),NN=m.memo(({isSelecting:e,selectionMode:t=Mo.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=m.useRef(null),p=et(),x=m.useRef(0),v=m.useRef(0),_=m.useRef(),{userSelectionActive:g,elementsSelectable:y,dragging:b}=Te(IA,dt),w=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,v.current=0},S=z=>{i==null||i(z),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},k=z=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){z.preventDefault();return}o==null||o(z)},j=a?z=>a(z):void 0,N=z=>{const{resetSelectedElements:E,domNode:O}=p.getState();if(_.current=O==null?void 0:O.getBoundingClientRect(),!y||!e||z.button!==0||z.target!==h.current||!_.current)return;const{x:A,y:$}=Ir(z,_.current);E(),p.setState({userSelectionRect:{width:0,height:0,startX:A,startY:$,x:A,y:$}}),r==null||r(z)},C=z=>{const{userSelectionRect:E,nodeInternals:O,edges:A,transform:$,onNodesChange:P,onEdgesChange:I,nodeOrigin:L,getNodes:M}=p.getState();if(!e||!_.current||!E)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const q=Ir(z,_.current),F=E.startX??0,W=E.startY??0,G={...E,x:q.x<F?q.x:F,y:q.y<W?q.y:W,width:Math.abs(q.x-F),height:Math.abs(q.y-W)},Z=M(),Q=oN(O,G,$,t===Mo.Partial,!0,L),te=aN(Q,A).map(X=>X.id),ne=Q.map(X=>X.id);if(x.current!==ne.length){x.current=ne.length;const X=zs(Z,ne);X.length&&(P==null||P(X))}if(v.current!==te.length){v.current=te.length;const X=zs(A,te);X.length&&(I==null||I(X))}p.setState({userSelectionRect:G})},T=z=>{if(z.button!==0)return;const{userSelectionRect:E}=p.getState();!g&&E&&z.target===h.current&&(S==null||S(z)),p.setState({nodesSelectionActive:x.current>0}),w(),s==null||s(z)},R=z=>{g&&(p.setState({nodesSelectionActive:x.current>0}),s==null||s(z)),w()},D=y&&(e||g);return B.createElement("div",{className:Et(["react-flow__pane",{dragging:b,selection:e}]),onClick:D?void 0:bu(S,h),onContextMenu:bu(k,h),onWheel:bu(j,h),onMouseEnter:D?void 0:c,onMouseDown:D?N:void 0,onMouseMove:D?C:u,onMouseUp:D?T:void 0,onMouseLeave:D?R:d,ref:h,style:Yv},f,B.createElement(RA,null))});NN.displayName="Pane";function EN(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:EN(r,t):!1}function v0(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function MA(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!EN(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var i,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=s.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function AA(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function CN(e,t,n,r,s=[0,0],i){const o=AA(e,e.extent||r);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:h,y:p}=is(f,s).positionAbsolute;a=f&&Yt(h)&&Yt(p)&&Yt(f.width)&&Yt(f.height)?[[h+e.width*s[0],p+e.height*s[1]],[h+f.width-e.width+e.width*s[0],p+f.height-e.height+e.height*s[1]]]:a}else i==null||i("005",er.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:h,y:p}=is(f,s).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=n.get(c);u=is(f,s).positionAbsolute}const d=a&&a!=="parent"?Bv(t,a):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function wu({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const y0=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const i=Array.from(s),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...Fv(c)}})};function Ai(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function Tg({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",er.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([e])}function PA(){const e=et();return m.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:i?s[0]*Math.round(c.x/s[0]):c.x,ySnapped:i?s[1]*Math.round(c.y/s[1]):c.y,...c}},[])}function _u(e){return(t,n,r)=>e==null?void 0:e(t,r)}function RN({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,selectNodesOnDrag:o}){const a=et(),[c,u]=m.useState(!1),d=m.useRef([]),f=m.useRef({x:null,y:null}),h=m.useRef(0),p=m.useRef(null),x=m.useRef({x:0,y:0}),v=m.useRef(null),_=m.useRef(!1),g=m.useRef(!1),y=m.useRef(!1),b=PA();return m.useEffect(()=>{if(e!=null&&e.current){const w=Gt(e.current),S=({x:N,y:C})=>{const{nodeInternals:T,onNodeDrag:R,onSelectionDrag:D,updateNodePositions:z,nodeExtent:E,snapGrid:O,snapToGrid:A,nodeOrigin:$,onError:P}=a.getState();f.current={x:N,y:C};let I=!1,L={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&E){const q=dc(d.current,$);L=Io(q)}if(d.current=d.current.map(q=>{const F={x:N-q.distance.x,y:C-q.distance.y};A&&(F.x=O[0]*Math.round(F.x/O[0]),F.y=O[1]*Math.round(F.y/O[1]));const W=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];d.current.length>1&&E&&!q.extent&&(W[0][0]=q.positionAbsolute.x-L.x+E[0][0],W[1][0]=q.positionAbsolute.x+(q.width??0)-L.x2+E[1][0],W[0][1]=q.positionAbsolute.y-L.y+E[0][1],W[1][1]=q.positionAbsolute.y+(q.height??0)-L.y2+E[1][1]);const G=CN(q,F,T,W,$,P);return I=I||q.position.x!==G.position.x||q.position.y!==G.position.y,q.position=G.position,q.positionAbsolute=G.positionAbsolute,q}),!I)return;z(d.current,!0,!0),u(!0);const M=s?R:_u(D);if(M&&v.current){const[q,F]=wu({nodeId:s,dragItems:d.current,nodeInternals:T});M(v.current,q,F)}},k=()=>{if(!p.current)return;const[N,C]=Yk(x.current,p.current);if(N!==0||C!==0){const{transform:T,panBy:R}=a.getState();f.current.x=(f.current.x??0)-N/T[2],f.current.y=(f.current.y??0)-C/T[2],R({x:N,y:C})&&S(f.current)}h.current=requestAnimationFrame(k)},j=N=>{var $;const{nodeInternals:C,multiSelectionActive:T,nodesDraggable:R,unselectNodesAndEdges:D,onNodeDragStart:z,onSelectionDragStart:E}=a.getState();g.current=!0;const O=s?z:_u(E);(!o||!i)&&!T&&s&&(($=C.get(s))!=null&&$.selected||D()),s&&i&&o&&Tg({id:s,store:a,nodeRef:e});const A=b(N);if(f.current=A,d.current=MA(C,R,A,s),O&&d.current){const[P,I]=wu({nodeId:s,dragItems:d.current,nodeInternals:C});O(N.sourceEvent,P,I)}};if(t)w.on(".drag",null);else{const N=VT().on("start",C=>{const{domNode:T,nodeDragThreshold:R}=a.getState();R===0&&j(C),y.current=!1;const D=b(C);f.current=D,p.current=(T==null?void 0:T.getBoundingClientRect())||null,x.current=Ir(C.sourceEvent,p.current)}).on("drag",C=>{var z,E;const T=b(C),{autoPanOnNodeDrag:R,nodeDragThreshold:D}=a.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!_.current&&g.current&&R&&(_.current=!0,k()),!g.current){const O=T.xSnapped-(((z=f==null?void 0:f.current)==null?void 0:z.x)??0),A=T.ySnapped-(((E=f==null?void 0:f.current)==null?void 0:E.y)??0);Math.sqrt(O*O+A*A)>D&&j(C)}(f.current.x!==T.xSnapped||f.current.y!==T.ySnapped)&&d.current&&g.current&&(v.current=C.sourceEvent,x.current=Ir(C.sourceEvent,p.current),S(T))}}).on("end",C=>{if(!(!g.current||y.current)&&(u(!1),_.current=!1,g.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:T,nodeInternals:R,onNodeDragStop:D,onSelectionDragStop:z}=a.getState(),E=s?D:_u(z);if(T(d.current,!1,!1),E){const[O,A]=wu({nodeId:s,dragItems:d.current,nodeInternals:R});E(C.sourceEvent,O,A)}}}).filter(C=>{const T=C.target;return!C.button&&(!n||!v0(T,`.${n}`,e))&&(!r||v0(T,r,e))});return w.call(N),()=>{w.on(".drag",null)}}}},[e,t,n,r,i,a,s,o,b]),c}function TN(){const e=et();return m.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:i,getNodes:o,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(y=>y.selected&&(y.draggable||d&&typeof y.draggable>"u")),h=a?c[0]:5,p=a?c[1]:5,x=n.isShiftPressed?4:1,v=n.x*h*x,_=n.y*p*x,g=f.map(y=>{if(y.positionAbsolute){const b={x:y.positionAbsolute.x+v,y:y.positionAbsolute.y+_};a&&(b.x=c[0]*Math.round(b.x/c[0]),b.y=c[1]*Math.round(b.y/c[1]));const{positionAbsolute:w,position:S}=CN(y,b,r,s,void 0,u);y.position=S,y.positionAbsolute=w}return y});i(g,!0,!1)},[])}const Gs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Pi=e=>{const t=({id:n,type:r,data:s,xPos:i,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:x,onDoubleClick:v,style:_,className:g,isDraggable:y,isSelectable:b,isConnectable:w,isFocusable:S,selectNodesOnDrag:k,sourcePosition:j,targetPosition:N,hidden:C,resizeObserver:T,dragHandle:R,zIndex:D,isParent:z,noDragClassName:E,noPanClassName:O,initialized:A,disableKeyboardA11y:$,ariaLabel:P,rfId:I,hasHandleBounds:L})=>{const M=et(),q=m.useRef(null),F=m.useRef(null),W=m.useRef(j),G=m.useRef(N),Z=m.useRef(r),Q=b||y||d||f||h||p,te=TN(),ne=Ai(n,M.getState,f),X=Ai(n,M.getState,h),ve=Ai(n,M.getState,p),ae=Ai(n,M.getState,x),me=Ai(n,M.getState,v),de=Y=>{const{nodeDragThreshold:K}=M.getState();if(b&&(!k||!y||K>0)&&Tg({id:n,store:M,nodeRef:q}),d){const H=M.getState().nodeInternals.get(n);H&&d(Y,{...H})}},U=Y=>{if(!kg(Y)&&!$)if(Jk.includes(Y.key)&&b){const K=Y.key==="Escape";Tg({id:n,store:M,unselect:K,nodeRef:q})}else y&&u&&Object.prototype.hasOwnProperty.call(Gs,Y.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${Y.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),te({x:Gs[Y.key].x,y:Gs[Y.key].y,isShiftPressed:Y.shiftKey}))};m.useEffect(()=>()=>{F.current&&(T==null||T.unobserve(F.current),F.current=null)},[]),m.useEffect(()=>{if(q.current&&!C){const Y=q.current;(!A||!L||F.current!==Y)&&(F.current&&(T==null||T.unobserve(F.current)),T==null||T.observe(Y),F.current=Y)}},[C,A,L]),m.useEffect(()=>{const Y=Z.current!==r,K=W.current!==j,H=G.current!==N;q.current&&(Y||K||H)&&(Y&&(Z.current=r),K&&(W.current=j),H&&(G.current=N),M.getState().updateNodeDimensions([{id:n,nodeElement:q.current,forceUpdate:!0}]))},[n,r,j,N]);const re=RN({nodeRef:q,disabled:C||!y,noDragClassName:E,handleSelector:R,nodeId:n,isSelectable:b,selectNodesOnDrag:k});return C?null:B.createElement("div",{className:Et(["react-flow__node",`react-flow__node-${r}`,{[O]:y},g,{selected:u,selectable:b,parent:z,dragging:re}]),ref:q,style:{zIndex:D,transform:`translate(${a}px,${c}px)`,pointerEvents:Q?"all":"none",visibility:A?"visible":"hidden",..._},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ne,onMouseMove:X,onMouseLeave:ve,onContextMenu:ae,onClick:de,onDoubleClick:me,onKeyDown:S?U:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":$?void 0:`${xN}-${I}`,"aria-label":P},B.createElement(KM,{value:n},B.createElement(e,{id:n,data:s,type:r,xPos:i,yPos:o,selected:u,isConnectable:w,sourcePosition:j,targetPosition:N,dragging:re,dragHandle:R,zIndex:D})))};return t.displayName="NodeWrapper",m.memo(t)};const DA=e=>{const t=e.getNodes().filter(n=>n.selected);return{...dc(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function OA({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=et(),{width:s,height:i,x:o,y:a,transformString:c,userSelectionActive:u}=Te(DA,dt),d=TN(),f=m.useRef(null);if(m.useEffect(()=>{var x;n||(x=f.current)==null||x.focus({preventScroll:!0})},[n]),RN({nodeRef:f}),u||!s||!i)return null;const h=e?x=>{const v=r.getState().getNodes().filter(_=>_.selected);e(x,v)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(Gs,x.key)&&d({x:Gs[x.key].x,y:Gs[x.key].y,isShiftPressed:x.shiftKey})};return B.createElement("div",{className:Et(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},B.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:s,height:i,top:a,left:o}}))}var LA=m.memo(OA);const zA=e=>e.nodesSelectionActive,IN=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:_,panActivationKeyCode:g,zoomActivationKeyCode:y,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:S,panOnScroll:k,panOnScrollSpeed:j,panOnScrollMode:N,zoomOnDoubleClick:C,panOnDrag:T,defaultViewport:R,translateExtent:D,minZoom:z,maxZoom:E,preventScrolling:O,onSelectionContextMenu:A,noWheelClassName:$,noPanClassName:P,disableKeyboardA11y:I})=>{const L=Te(zA),M=Ao(f),q=Ao(g),F=q||T,W=q||k,G=M||h&&F!==!0;return SA({deleteKeyCode:a,multiSelectionKeyCode:_}),B.createElement(EA,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:S,panOnScroll:W,panOnScrollSpeed:j,panOnScrollMode:N,zoomOnDoubleClick:C,panOnDrag:!M&&F,defaultViewport:R,translateExtent:D,minZoom:z,maxZoom:E,zoomActivationKeyCode:y,preventScrolling:O,noWheelClassName:$,noPanClassName:P},B.createElement(NN,{onSelectionStart:x,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:F,isSelecting:!!G,selectionMode:p},e,L&&B.createElement(LA,{onSelectionContextMenu:A,noPanClassName:P,disableKeyboardA11y:I})))};IN.displayName="FlowRenderer";var qA=m.memo(IN);function $A(e){return Te(m.useCallback(n=>e?oN(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function FA(e){const t={input:Pi(e.input||mN),default:Pi(e.default||Rg),output:Pi(e.output||vN),group:Pi(e.group||Kv)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=Pi(e[i]||Rg),s),n);return{...t,...r}}const BA=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},HA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),MN=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:i,onError:o}=Te(HA,dt),a=$A(e.onlyRenderVisibleElements),c=m.useRef(),u=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));i(h)});return c.current=d,d},[]);return m.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),B.createElement("div",{className:"react-flow__nodes",style:Yv},a.map(d=>{var S,k,j;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",er.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),x=!!(d.selectable||s&&typeof d.selectable>"u"),v=!!(d.connectable||n&&typeof d.connectable>"u"),_=!!(d.focusable||r&&typeof d.focusable>"u"),g=e.nodeExtent?Bv(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,y=(g==null?void 0:g.x)??0,b=(g==null?void 0:g.y)??0,w=BA({x:y,y:b,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return B.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||ee.Bottom,targetPosition:d.targetPosition||ee.Top,hidden:d.hidden,xPos:y,yPos:b,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:x,isConnectable:v,isFocusable:_,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((S=d[Le])==null?void 0:S.z)??0,isParent:!!((k=d[Le])!=null&&k.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((j=d[Le])!=null&&j.handleBounds)})}))};MN.displayName="NodeRenderer";var WA=m.memo(MN);const VA=(e,t,n)=>n===ee.Left?e-t:n===ee.Right?e+t:e,UA=(e,t,n)=>n===ee.Top?e-t:n===ee.Bottom?e+t:e,x0="react-flow__edgeupdater",b0=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:a})=>B.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:Et([x0,`${x0}-${a}`]),cx:VA(t,r,e),cy:UA(n,r,e),r,stroke:"transparent",fill:"transparent"}),GA=()=>!0;var js=e=>{const t=({id:n,className:r,type:s,data:i,onClick:o,onEdgeDoubleClick:a,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:v,style:_,source:g,target:y,sourceX:b,sourceY:w,targetX:S,targetY:k,sourcePosition:j,targetPosition:N,elementsSelectable:C,hidden:T,sourceHandleId:R,targetHandleId:D,onContextMenu:z,onMouseEnter:E,onMouseMove:O,onMouseLeave:A,reconnectRadius:$,onReconnect:P,onReconnectStart:I,onReconnectEnd:L,markerEnd:M,markerStart:q,rfId:F,ariaLabel:W,isFocusable:G,isReconnectable:Z,pathOptions:Q,interactionWidth:te,disableKeyboardA11y:ne})=>{const X=m.useRef(null),[ve,ae]=m.useState(!1),[me,de]=m.useState(!1),U=et(),re=m.useMemo(()=>`url('#${Eg(q,F)}')`,[q,F]),Y=m.useMemo(()=>`url('#${Eg(M,F)}')`,[M,F]);if(T)return null;const K=_e=>{var $t;const{edges:nt,addSelectedEdges:Ye,unselectNodesAndEdges:rt,multiSelectionActive:rn}=U.getState(),qt=nt.find(ir=>ir.id===n);qt&&(C&&(U.setState({nodesSelectionActive:!1}),qt.selected&&rn?(rt({nodes:[],edges:[qt]}),($t=X.current)==null||$t.blur()):Ye([n])),o&&o(_e,qt))},H=Mi(n,U.getState,a),pe=Mi(n,U.getState,z),be=Mi(n,U.getState,E),ye=Mi(n,U.getState,O),we=Mi(n,U.getState,A),je=(_e,nt)=>{if(_e.button!==0)return;const{edges:Ye,isValidConnection:rt}=U.getState(),rn=nt?y:g,qt=(nt?D:R)||null,$t=nt?"target":"source",ir=rt||GA,xi=nt,$r=Ye.find(ze=>ze.id===n);de(!0),I==null||I(_e,$r,$t);const bi=ze=>{de(!1),L==null||L(ze,$r,$t)};dN({event:_e,handleId:qt,nodeId:rn,onConnect:ze=>P==null?void 0:P($r,ze),isTarget:xi,getState:U.getState,setState:U.setState,isValidConnection:ir,edgeUpdaterType:$t,onReconnectEnd:bi})},Rt=_e=>je(_e,!0),tn=_e=>je(_e,!1),tt=()=>ae(!0),Fe=()=>ae(!1),ft=!C&&!o,nn=_e=>{var nt;if(!ne&&Jk.includes(_e.key)&&C){const{unselectNodesAndEdges:Ye,addSelectedEdges:rt,edges:rn}=U.getState();_e.key==="Escape"?((nt=X.current)==null||nt.blur(),Ye({edges:[rn.find($t=>$t.id===n)]})):rt([n])}};return B.createElement("g",{className:Et(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:c,animated:u,inactive:ft,updating:ve}]),onClick:K,onDoubleClick:H,onContextMenu:pe,onMouseEnter:be,onMouseMove:ye,onMouseLeave:we,onKeyDown:G?nn:void 0,tabIndex:G?0:void 0,role:G?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${g} to ${y}`,"aria-describedby":G?`${bN}-${F}`:void 0,ref:X},!me&&B.createElement(e,{id:n,source:g,target:y,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:v,data:i,style:_,sourceX:b,sourceY:w,targetX:S,targetY:k,sourcePosition:j,targetPosition:N,sourceHandleId:R,targetHandleId:D,markerStart:re,markerEnd:Y,pathOptions:Q,interactionWidth:te}),Z&&B.createElement(B.Fragment,null,(Z==="source"||Z===!0)&&B.createElement(b0,{position:j,centerX:b,centerY:w,radius:$,onMouseDown:Rt,onMouseEnter:tt,onMouseOut:Fe,type:"source"}),(Z==="target"||Z===!0)&&B.createElement(b0,{position:N,centerX:S,centerY:k,radius:$,onMouseDown:tn,onMouseEnter:tt,onMouseOut:Fe,type:"target"})))};return t.displayName="EdgeWrapper",m.memo(t)};function KA(e){const t={default:js(e.default||Tl),straight:js(e.bezier||Vv),step:js(e.step||Wv),smoothstep:js(e.step||uc),simplebezier:js(e.simplebezier||Hv)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=js(e[i]||Tl),s),n);return{...t,...r}}function w0(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case ee.Top:return{x:r+i/2,y:s};case ee.Right:return{x:r+i,y:s+o/2};case ee.Bottom:return{x:r+i/2,y:s+o};case ee.Left:return{x:r,y:s+o/2}}}function _0(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const YA=(e,t,n,r,s,i)=>{const o=w0(n,e,t),a=w0(i,r,s);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function XA({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:i,width:o,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Io({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function S0(e){var r,s,i,o,a;const t=((r=e==null?void 0:e[Le])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const QA=[{level:0,isMaxLevel:!0,edges:[]}];function ZA(e,t,n=!1){let r=-1;const s=e.reduce((o,a)=>{var d,f;const c=Yt(a.zIndex);let u=c?a.zIndex:0;if(n){const h=t.get(a.target),p=t.get(a.source),x=a.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),v=Math.max(((d=p==null?void 0:p[Le])==null?void 0:d.z)||0,((f=h==null?void 0:h[Le])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(x?v:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),i=Object.entries(s).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===r}});return i.length===0?QA:i}function JA(e,t,n){const r=Te(m.useCallback(s=>e?s.edges.filter(i=>{const o=t.get(i.source),a=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&XA({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return ZA(r,t,n)}const eP=({color:e="none",strokeWidth:t=1})=>B.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),tP=({color:e="none",strokeWidth:t=1})=>B.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),j0={[Rl.Arrow]:eP,[Rl.ArrowClosed]:tP};function nP(e){const t=et();return m.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(j0,e)?j0[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",er.error009(e)),null)},[e])}const rP=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=nP(t);return c?B.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},B.createElement(c,{color:n,strokeWidth:o})):null},sP=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Eg(o,t);r.includes(a)||(s.push({id:a,color:o.color||e,...o}),r.push(a))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},AN=({defaultColor:e,rfId:t})=>{const n=Te(m.useCallback(sP({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((i,o)=>i.id!==s[o].id)));return B.createElement("defs",null,n.map(r=>B.createElement(rP,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};AN.displayName="MarkerDefinitions";var iP=m.memo(AN);const oP=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),PN=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:v,children:_,disableKeyboardA11y:g})=>{const{edgesFocusable:y,edgesUpdatable:b,elementsSelectable:w,width:S,height:k,connectionMode:j,nodeInternals:N,onError:C}=Te(oP,dt),T=JA(t,N,n);return S?B.createElement(B.Fragment,null,T.map(({level:R,edges:D,isMaxLevel:z})=>B.createElement("svg",{key:R,style:{zIndex:R},width:S,height:k,className:"react-flow__edges react-flow__container"},z&&B.createElement(iP,{defaultColor:e,rfId:r}),B.createElement("g",null,D.map(E=>{const[O,A,$]=S0(N.get(E.source)),[P,I,L]=S0(N.get(E.target));if(!$||!L)return null;let M=E.type||"default";s[M]||(C==null||C("011",er.error011(M)),M="default");const q=s[M]||s.default,F=j===fs.Strict?I.target:(I.target??[]).concat(I.source??[]),W=_0(A.source,E.sourceHandle),G=_0(F,E.targetHandle),Z=(W==null?void 0:W.position)||ee.Bottom,Q=(G==null?void 0:G.position)||ee.Top,te=!!(E.focusable||y&&typeof E.focusable>"u"),ne=E.reconnectable||E.updatable,X=typeof h<"u"&&(ne||b&&typeof ne>"u");if(!W||!G)return C==null||C("008",er.error008(W,E)),null;const{sourceX:ve,sourceY:ae,targetX:me,targetY:de}=YA(O,W,Z,P,G,Q);return B.createElement(q,{key:E.id,id:E.id,className:Et([E.className,i]),type:M,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:ve,sourceY:ae,targetX:me,targetY:de,sourcePosition:Z,targetPosition:Q,elementsSelectable:w,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:v,rfId:r,ariaLabel:E.ariaLabel,isFocusable:te,isReconnectable:X,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth,disableKeyboardA11y:g})})))),_):null};PN.displayName="EdgeRenderer";var aP=m.memo(PN);const lP=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function cP({children:e}){const t=Te(lP);return B.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function uP(e){const t=fc(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const dP={[ee.Left]:ee.Right,[ee.Right]:ee.Left,[ee.Top]:ee.Bottom,[ee.Bottom]:ee.Top},DN=({nodeId:e,handleType:t,style:n,type:r=vr.Bezier,CustomComponent:s,connectionStatus:i})=>{var k,j,N;const{fromNode:o,handleId:a,toX:c,toY:u,connectionMode:d}=Te(m.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),dt),f=(k=o==null?void 0:o[Le])==null?void 0:k.handleBounds;let h=f==null?void 0:f[t];if(d===fs.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const p=a?h.find(C=>C.id===a):h[0],x=p?p.x+p.width/2:(o.width??0)/2,v=p?p.y+p.height/2:o.height??0,_=(((j=o.positionAbsolute)==null?void 0:j.x)??0)+x,g=(((N=o.positionAbsolute)==null?void 0:N.y)??0)+v,y=p==null?void 0:p.position,b=y?dP[y]:null;if(!y||!b)return null;if(s)return B.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:_,fromY:g,toX:c,toY:u,fromPosition:y,toPosition:b,connectionStatus:i});let w="";const S={sourceX:_,sourceY:g,sourcePosition:y,targetX:c,targetY:u,targetPosition:b};return r===vr.Bezier?[w]=sN(S):r===vr.Step?[w]=Ng({...S,borderRadius:0}):r===vr.SmoothStep?[w]=Ng(S):r===vr.SimpleBezier?[w]=rN(S):w=`M${_},${g} ${c},${u}`,B.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};DN.displayName="ConnectionLine";const fP=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function hP({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:i,nodesConnectable:o,width:a,height:c,connectionStatus:u}=Te(fP,dt);return!(s&&i&&a&&o)?null:B.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},B.createElement("g",{className:Et(["react-flow__connection",u])},B.createElement(DN,{nodeId:s,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function k0(e,t){return m.useRef(null),et(),m.useMemo(()=>t(e),[e])}const ON=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:i,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:v,onSelectionEnd:_,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:b,connectionLineContainerStyle:w,selectionKeyCode:S,selectionOnDrag:k,selectionMode:j,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:T,deleteKeyCode:R,onlyRenderVisibleElements:D,elementsSelectable:z,selectNodesOnDrag:E,defaultViewport:O,translateExtent:A,minZoom:$,maxZoom:P,preventScrolling:I,defaultMarkerColor:L,zoomOnScroll:M,zoomOnPinch:q,panOnScroll:F,panOnScrollSpeed:W,panOnScrollMode:G,zoomOnDoubleClick:Z,panOnDrag:Q,onPaneClick:te,onPaneMouseEnter:ne,onPaneMouseMove:X,onPaneMouseLeave:ve,onPaneScroll:ae,onPaneContextMenu:me,onEdgeContextMenu:de,onEdgeMouseEnter:U,onEdgeMouseMove:re,onEdgeMouseLeave:Y,onReconnect:K,onReconnectStart:H,onReconnectEnd:pe,reconnectRadius:be,noDragClassName:ye,noWheelClassName:we,noPanClassName:je,elevateEdgesOnSelect:Rt,disableKeyboardA11y:tn,nodeOrigin:tt,nodeExtent:Fe,rfId:ft})=>{const nn=k0(e,FA),_e=k0(t,KA);return uP(i),B.createElement(qA,{onPaneClick:te,onPaneMouseEnter:ne,onPaneMouseMove:X,onPaneMouseLeave:ve,onPaneContextMenu:me,onPaneScroll:ae,deleteKeyCode:R,selectionKeyCode:S,selectionOnDrag:k,selectionMode:j,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:T,elementsSelectable:z,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:M,zoomOnPinch:q,zoomOnDoubleClick:Z,panOnScroll:F,panOnScrollSpeed:W,panOnScrollMode:G,panOnDrag:Q,defaultViewport:O,translateExtent:A,minZoom:$,maxZoom:P,onSelectionContextMenu:x,preventScrolling:I,noDragClassName:ye,noWheelClassName:we,noPanClassName:je,disableKeyboardA11y:tn},B.createElement(cP,null,B.createElement(aP,{edgeTypes:_e,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:D,onEdgeContextMenu:de,onEdgeMouseEnter:U,onEdgeMouseMove:re,onEdgeMouseLeave:Y,onReconnect:K,onReconnectStart:H,onReconnectEnd:pe,reconnectRadius:be,defaultMarkerColor:L,noPanClassName:je,elevateEdgesOnSelect:!!Rt,disableKeyboardA11y:tn,rfId:ft},B.createElement(hP,{style:y,type:g,component:b,containerStyle:w})),B.createElement("div",{className:"react-flow__edgelabel-renderer"}),B.createElement(WA,{nodeTypes:nn,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:E,onlyRenderVisibleElements:D,noPanClassName:je,noDragClassName:ye,disableKeyboardA11y:tn,nodeOrigin:tt,nodeExtent:Fe,rfId:ft})))};ON.displayName="GraphView";var pP=m.memo(ON);const Ig=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],lr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ig,nodeExtent:Ig,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:fs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:BM,isValidConnection:void 0},mP=()=>r5((e,t)=>({...lr,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:i}=t();e({nodeInternals:xu(n,r,s,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",i=typeof r<"u",o=s?xu(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?r:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((v,_)=>{const g=s.get(_.id);if(g!=null&&g.hidden)s.set(g.id,{...g,[Le]:{...g[Le],handleBounds:void 0}});else if(g){const y=Fv(_.nodeElement);!!(y.width&&y.height&&(g.width!==y.width||g.height!==y.height||_.forceUpdate))&&(s.set(g.id,{...g,[Le]:{...g[Le],handleBounds:{source:y0(".source",_.nodeElement,h,u),target:y0(".target",_.nodeElement,h,u)}},...y}),v.push({id:g.id,type:"dimensions",dimensions:y}))}return v},[]);_N(s,u);const x=o||i&&!o&&SN(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(a=>{const c={id:a.id,type:"position",dragging:s};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(i){const u=kN(n,a()),d=xu(u,s,o,c);e({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,a=null;r?o=n.map(c=>hr(c,!0)):(o=zs(i(),n),a=zs(s,[])),ja({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,a=null;r?o=n.map(c=>hr(c,!0)):(o=zs(s,n),a=zs(i(),[])),ja({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:i}=t(),o=n||i(),a=r||s,c=o.map(d=>(d.selected=!1,hr(d.id,!1))),u=a.map(d=>hr(d.id,!1));ja({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r==null||r.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r==null||r.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(a=>a.selected).map(a=>hr(a.id,!1)),o=n.filter(a=>a.selected).map(a=>hr(a.id,!1));ja({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=Bv(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:i,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!n.x&&!n.y)return!1;const u=Kn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[s,i]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:lr.connectionNodeId,connectionHandleId:lr.connectionHandleId,connectionHandleType:lr.connectionHandleType,connectionStatus:lr.connectionStatus,connectionStartHandle:lr.connectionStartHandle,connectionEndHandle:lr.connectionEndHandle}),reset:()=>e({...lr})}),Object.is),hc=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=mP()),B.createElement(DM,{value:t.current},e)};hc.displayName="ReactFlowProvider";const LN=({children:e})=>m.useContext(cc)?B.createElement(B.Fragment,null,e):B.createElement(hc,null,e);LN.displayName="ReactFlowWrapper";const gP={input:mN,default:Rg,output:vN,group:Kv},vP={default:Tl,straight:Vv,step:Wv,smoothstep:uc,simplebezier:Hv},yP=[0,0],xP=[15,15],bP={x:0,y:0,zoom:1},wP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Xv=m.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i=gP,edgeTypes:o=vP,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:x,onConnectEnd:v,onClickConnectStart:_,onClickConnectEnd:g,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:k,onNodeDragStart:j,onNodeDrag:N,onNodeDragStop:C,onNodesDelete:T,onEdgesDelete:R,onSelectionChange:D,onSelectionDragStart:z,onSelectionDrag:E,onSelectionDragStop:O,onSelectionContextMenu:A,onSelectionStart:$,onSelectionEnd:P,connectionMode:I=fs.Strict,connectionLineType:L=vr.Bezier,connectionLineStyle:M,connectionLineComponent:q,connectionLineContainerStyle:F,deleteKeyCode:W="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:Z=!1,selectionMode:Q=Mo.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:ne=Cl()?"Meta":"Control",zoomActivationKeyCode:X=Cl()?"Meta":"Control",snapToGrid:ve=!1,snapGrid:ae=xP,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:de=!0,nodesDraggable:U,nodesConnectable:re,nodesFocusable:Y,nodeOrigin:K=yP,edgesFocusable:H,edgesUpdatable:pe,elementsSelectable:be,defaultViewport:ye=bP,minZoom:we=.5,maxZoom:je=2,translateExtent:Rt=Ig,preventScrolling:tn=!0,nodeExtent:tt,defaultMarkerColor:Fe="#b1b1b7",zoomOnScroll:ft=!0,zoomOnPinch:nn=!0,panOnScroll:_e=!1,panOnScrollSpeed:nt=.5,panOnScrollMode:Ye=es.Free,zoomOnDoubleClick:rt=!0,panOnDrag:rn=!0,onPaneClick:qt,onPaneMouseEnter:$t,onPaneMouseMove:ir,onPaneMouseLeave:xi,onPaneScroll:$r,onPaneContextMenu:bi,children:We,onEdgeContextMenu:ze,onEdgeDoubleClick:ht,onEdgeMouseEnter:bn,onEdgeMouseMove:xt,onEdgeMouseLeave:pt,onEdgeUpdate:Ft,onEdgeUpdateStart:or,onEdgeUpdateEnd:Ve,onReconnect:wn,onReconnectStart:Bt,onReconnectEnd:sn,reconnectRadius:Fr=10,edgeUpdaterRadius:Br=10,onNodesChange:_n,onEdgesChange:Hr,noDragClassName:wi="nodrag",noWheelClassName:HC="nowheel",noPanClassName:ky="nopan",fitView:WC=!1,fitViewOptions:VC,connectOnClick:UC=!0,attributionPosition:GC,proOptions:KC,defaultEdgeOptions:YC,elevateNodesOnSelect:XC=!0,elevateEdgesOnSelect:QC=!1,disableKeyboardA11y:Ny=!1,autoPanOnConnect:ZC=!0,autoPanOnNodeDrag:JC=!0,connectionRadius:e4=20,isValidConnection:t4,onError:n4,style:r4,id:Ey,nodeDragThreshold:s4,...i4},o4)=>{const $c=Ey||"1";return B.createElement("div",{...i4,style:{...r4,...wP},ref:o4,className:Et(["react-flow",s]),"data-testid":"rf__wrapper",id:Ey},B.createElement(LN,null,B.createElement(pP,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:k,nodeTypes:i,edgeTypes:o,connectionLineType:L,connectionLineStyle:M,connectionLineComponent:q,connectionLineContainerStyle:F,selectionKeyCode:G,selectionOnDrag:Z,selectionMode:Q,deleteKeyCode:W,multiSelectionKeyCode:ne,panActivationKeyCode:te,zoomActivationKeyCode:X,onlyRenderVisibleElements:me,selectNodesOnDrag:de,defaultViewport:ye,translateExtent:Rt,minZoom:we,maxZoom:je,preventScrolling:tn,zoomOnScroll:ft,zoomOnPinch:nn,zoomOnDoubleClick:rt,panOnScroll:_e,panOnScrollSpeed:nt,panOnScrollMode:Ye,panOnDrag:rn,onPaneClick:qt,onPaneMouseEnter:$t,onPaneMouseMove:ir,onPaneMouseLeave:xi,onPaneScroll:$r,onPaneContextMenu:bi,onSelectionContextMenu:A,onSelectionStart:$,onSelectionEnd:P,onEdgeContextMenu:ze,onEdgeDoubleClick:ht,onEdgeMouseEnter:bn,onEdgeMouseMove:xt,onEdgeMouseLeave:pt,onReconnect:wn??Ft,onReconnectStart:Bt??or,onReconnectEnd:sn??Ve,reconnectRadius:Fr??Br,defaultMarkerColor:Fe,noDragClassName:wi,noWheelClassName:HC,noPanClassName:ky,elevateEdgesOnSelect:QC,rfId:$c,disableKeyboardA11y:Ny,nodeOrigin:K,nodeExtent:tt}),B.createElement(dA,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:x,onConnectEnd:v,onClickConnectStart:_,onClickConnectEnd:g,nodesDraggable:U,nodesConnectable:re,nodesFocusable:Y,edgesFocusable:H,edgesUpdatable:pe,elementsSelectable:be,elevateNodesOnSelect:XC,minZoom:we,maxZoom:je,nodeExtent:tt,onNodesChange:_n,onEdgesChange:Hr,snapToGrid:ve,snapGrid:ae,connectionMode:I,translateExtent:Rt,connectOnClick:UC,defaultEdgeOptions:YC,fitView:WC,fitViewOptions:VC,onNodesDelete:T,onEdgesDelete:R,onNodeDragStart:j,onNodeDrag:N,onNodeDragStop:C,onSelectionDrag:E,onSelectionDragStart:z,onSelectionDragStop:O,noPanClassName:ky,nodeOrigin:K,rfId:$c,autoPanOnConnect:ZC,autoPanOnNodeDrag:JC,onError:n4,connectionRadius:e4,isValidConnection:t4,nodeDragThreshold:s4}),B.createElement(cA,{onSelectionChange:D}),We,B.createElement(LM,{proOptions:KC,position:GC}),B.createElement(gA,{rfId:$c,disableKeyboardA11y:Ny})))});Xv.displayName="ReactFlow";function zN(e){return t=>{const[n,r]=m.useState(t),s=m.useCallback(i=>r(o=>e(i,o)),[]);return[n,r,s]}}const qN=zN(kN),$N=zN(TA),FN=({id:e,x:t,y:n,width:r,height:s,style:i,color:o,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:h,selected:p})=>{const{background:x,backgroundColor:v}=i||{},_=o||x||v;return B.createElement("rect",{className:Et(["react-flow__minimap-node",{selected:p},u]),x:t,y:n,rx:d,ry:d,width:r,height:s,fill:_,stroke:a,strokeWidth:c,shapeRendering:f,onClick:h?g=>h(g,e):void 0})};FN.displayName="MiniMapNode";var _P=m.memo(FN);const SP=e=>e.nodeOrigin,jP=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Su=e=>e instanceof Function?e:()=>e;function kP({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s=2,nodeComponent:i=_P,onClick:o}){const a=Te(jP,dt),c=Te(SP),u=Su(t),d=Su(e),f=Su(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return B.createElement(B.Fragment,null,a.map(p=>{const{x,y:v}=is(p,c).positionAbsolute;return B.createElement(i,{key:p.id,x,y:v,width:p.width,height:p.height,style:p.style,selected:p.selected,className:f(p),color:u(p),borderRadius:r,strokeColor:d(p),strokeWidth:s,shapeRendering:h,onClick:o,id:p.id})}))}var NP=m.memo(kP);const EP=200,CP=150,RP=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?$M(dc(t,e.nodeOrigin),n):n,rfId:e.rfId}},TP="react-flow__minimap-desc";function BN({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:x=!1,zoomable:v=!1,ariaLabel:_="React Flow mini map",inversePan:g=!1,zoomStep:y=10,offsetScale:b=5}){const w=et(),S=m.useRef(null),{boundingRect:k,viewBB:j,rfId:N}=Te(RP,dt),C=(e==null?void 0:e.width)??EP,T=(e==null?void 0:e.height)??CP,R=k.width/C,D=k.height/T,z=Math.max(R,D),E=z*C,O=z*T,A=b*z,$=k.x-(E-k.width)/2-A,P=k.y-(O-k.height)/2-A,I=E+A*2,L=O+A*2,M=`${TP}-${N}`,q=m.useRef(0);q.current=z,m.useEffect(()=>{if(S.current){const G=Gt(S.current),Z=ne=>{const{transform:X,d3Selection:ve,d3Zoom:ae}=w.getState();if(ne.sourceEvent.type!=="wheel"||!ve||!ae)return;const me=-ne.sourceEvent.deltaY*(ne.sourceEvent.deltaMode===1?.05:ne.sourceEvent.deltaMode?1:.002)*y,de=X[2]*Math.pow(2,me);ae.scaleTo(ve,de)},Q=ne=>{const{transform:X,d3Selection:ve,d3Zoom:ae,translateExtent:me,width:de,height:U}=w.getState();if(ne.sourceEvent.type!=="mousemove"||!ve||!ae)return;const re=q.current*Math.max(1,X[2])*(g?-1:1),Y={x:X[0]-ne.sourceEvent.movementX*re,y:X[1]-ne.sourceEvent.movementY*re},K=[[0,0],[de,U]],H=Kn.translate(Y.x,Y.y).scale(X[2]),pe=ae.constrain()(H,K,me);ae.transform(ve,pe)},te=Gk().on("zoom",x?Q:null).on("zoom.wheel",v?Z:null);return G.call(te),()=>{G.on("zoom",null)}}},[x,v,g,y]);const F=h?G=>{const Z=un(G);h(G,{x:Z[0],y:Z[1]})}:void 0,W=p?(G,Z)=>{const Q=w.getState().nodeInternals.get(Z);p(G,Q)}:void 0;return B.createElement(Tr,{position:f,style:e,className:Et(["react-flow__minimap",t]),"data-testid":"rf__minimap"},B.createElement("svg",{width:C,height:T,viewBox:`${$} ${P} ${I} ${L}`,role:"img","aria-labelledby":M,ref:S,onClick:F},_&&B.createElement("title",{id:M},_),B.createElement(NP,{onClick:W,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:a}),B.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-A},${P-A}h${I+A*2}v${L+A*2}h${-I-A*2}z
        M${j.x},${j.y}h${j.width}v${j.height}h${-j.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}BN.displayName="MiniMap";var HN=m.memo(BN);const Na={active:"#f59e0b",complete:"#10b981",queued:"#64748b"},IP=180,MP=400,AP=260,PP=48;function DP(e){if(!e)return"";try{const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}}function OP({projects:e,selectedId:t,onSelectProject:n,onNewProject:r,showArchived:s,onToggleShowArchived:i,userSection:o}){const[a,c]=m.useState(!1),[u,d]=m.useState(AP),[f,h]=m.useState(!1),p=m.useRef(null),x=m.useRef(null);m.useEffect(()=>{x.current&&x.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[t]);const v=m.useMemo(()=>Object.values(e).sort((S,k)=>{const j=(S.name||"").localeCompare(k.name||"");return j!==0?j:(S.projectId||"").localeCompare(k.projectId||"")}),[e]),_=()=>{r()},g=m.useCallback(S=>{S.preventDefault(),h(!0)},[]),y=m.useCallback(S=>{if(!f)return;const k=Math.min(MP,Math.max(IP,S.clientX));d(k)},[f]),b=m.useCallback(()=>{h(!1)},[]);m.useEffect(()=>(f?(document.addEventListener("mousemove",y),document.addEventListener("mouseup",b),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b),document.body.style.cursor="",document.body.style.userSelect=""}),[f,y,b]);const w=a?PP:u;return l.jsxs("div",{ref:p,className:"h-full flex flex-col relative",style:{width:w,minWidth:w,background:"var(--bg-panel)",borderRight:"1px solid var(--border-panel)",transition:f?"none":"width 0.2s ease"},children:[l.jsxs("div",{className:"p-3 border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[!a&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Projects"}),l.jsx("button",{onClick:i,className:"p-1 rounded hover:bg-white/10 transition-colors",style:{color:s?"#f59e0b":"var(--text-muted)"},title:s?"Hide archived":"Show archived",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 8v13H3V8M1 3h22v5H1zM10 12h4"})})})]}),l.jsx("button",{onClick:()=>c(!a),className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},title:a?"Expand sidebar":"Collapse sidebar",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{transform:a?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:l.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),!a&&l.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:v.map(S=>{const k=t===S.id;return l.jsxs("div",{ref:k?x:null,onClick:()=>n(S.id),className:"p-3 rounded-lg mb-2 cursor-pointer transition-all",style:{background:k?"var(--state-active-bg)":"transparent",border:k?"1px solid var(--state-active-bg)":"1px solid transparent",boxShadow:k?"0 0 12px rgba(245, 158, 11, 0.3)":"none"},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:k?"#ffffff":Na[S.status]||Na.queued}}),l.jsx("span",{className:"text-sm font-medium truncate flex-1",style:{color:k?"#ffffff":"var(--text-primary)"},children:S.name}),S.isArchived&&l.jsx("svg",{className:"w-3.5 h-3.5 flex-shrink-0",style:{color:k?"rgba(255,255,255,0.7)":"var(--text-muted)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",title:"Archived",children:l.jsx("path",{d:"M21 8v13H3V8M1 3h22v5H1zM10 12h4"})})]}),l.jsxs("div",{className:"flex items-center justify-between mt-0.5 ml-4",children:[l.jsx("span",{className:"text-[10px] font-mono",style:{color:k?"rgba(255,255,255,0.8)":"var(--text-muted)"},children:S.projectId}),l.jsx("span",{className:"text-[10px]",style:{color:k?"rgba(255,255,255,0.8)":"var(--text-muted)"},children:DP(S.createdAt)})]})]},S.id)})}),a&&l.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:v.map(S=>l.jsx("div",{onClick:()=>n(S.id),className:"flex items-center justify-center py-2 cursor-pointer hover:bg-white/5",title:S.name,children:l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:Na[S.status]||Na.queued,boxShadow:t===S.id?"0 0 0 2px var(--bg-panel), 0 0 0 4px var(--border-node)":"none"}})},S.id))}),!a&&l.jsx("div",{className:"p-3 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsxs("button",{onClick:_,className:"w-full py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",style:{background:"#10b981",color:"white"},children:[l.jsx("span",{style:{fontSize:18,lineHeight:1},children:"+"}),l.jsx("span",{children:"New Project"})]})}),a&&l.jsx("div",{className:"p-2 border-t flex justify-center",style:{borderColor:"var(--border-panel)"},children:l.jsx("button",{onClick:_,className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"#10b981",color:"white"},title:"New Project",children:l.jsx("span",{style:{fontSize:18,lineHeight:1},children:"+"})})}),o,!a&&l.jsx("div",{onMouseDown:g,className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-emerald-500/50 transition-colors",style:{background:f?"var(--state-active-bg)":"transparent"}})]})}function LP({stations:e}){return e!=null&&e.length?l.jsx("div",{className:"flex items-center gap-0.5 mt-2",children:e.map((t,n)=>{const r=t.state==="complete"?"var(--state-stabilized-bg)":t.state==="active"?"var(--state-active-bg)":"var(--state-queued-bg)",s=t.state==="complete"?"var(--state-stabilized-bg)":"var(--state-queued-bg)",i=t.state==="active"?"var(--state-active-text)":"var(--text-muted)";return l.jsxs(B.Fragment,{children:[n>0&&l.jsx("div",{className:"w-4 h-0.5",style:{background:s}}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:`w-3 h-3 rounded-full${t.state==="active"?" station-active":""}`,style:{background:r}}),l.jsx("span",{className:"text-[7px] mt-0.5",style:{color:i,fontWeight:t.state==="active"?500:400},children:t.label})]})]},t.id)})}):null}const N0={light:{stabilized:"#10b981",active:"#6366f1",queued:"#cbd5e1"},industrial:{stabilized:"#10b981",active:"#f59e0b",queued:"#334155"},blueprint:{stabilized:"#ffffff",active:"#fbbf24",queued:"#d4e8f8"}},WN=(e,t)=>{var n;return((n=N0[t])==null?void 0:n[e])||N0.industrial.queued},an={EPICS_PER_ROW:3,EPIC_WIDTH:220,EPIC_HEIGHT:70,EPIC_GAP_X:50,EPIC_GAP_Y:100,EPIC_OFFSET_X:80,EPIC_OFFSET_Y:80},so={GAP:8,WIDTH:280},ju=["pgc","asm","draft","qa","done"],yr=["industrial","light","blueprint"];function zP({questions:e,nodeWidth:t,onSubmit:n,onClose:r,onZoomComplete:s}){const[i,o]=m.useState({}),a=e.filter(c=>c.required).every(c=>i[c.id]);return m.useEffect(()=>{if(s){const c=setTimeout(()=>s(),150);return()=>clearTimeout(c)}},[s]),l.jsxs("div",{className:"absolute top-0 border border-amber-500/50 rounded-lg shadow-2xl tray-slide",style:{left:t+so.GAP,width:so.WIDTH,boxShadow:"0 0 30px rgba(0,0,0,0.5)",zIndex:1e3,background:"var(--bg-sidecar)"},children:[l.jsx("div",{className:"absolute border-t-2 border-dashed border-amber-500/60",style:{top:14,right:"100%",width:so.GAP}}),l.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-amber-500",style:{top:11,right:"100%",marginRight:-4}}),l.jsxs("div",{className:"bg-amber-500/10 border-b border-amber-500/30 px-3 py-2 flex justify-between items-center",children:[l.jsx("span",{className:"text-[9px] font-semibold text-amber-600 uppercase tracking-wide",children:"Operator Input Required"}),l.jsx("button",{onClick:r,style:{color:"var(--text-sidecar-muted)"},className:"hover:opacity-70 text-sm leading-none",children:""})]}),l.jsx("div",{className:"p-3 space-y-3 max-h-64 overflow-y-auto",children:e.map(c=>l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] mb-1",style:{color:"var(--text-sidecar-muted)"},children:[c.text," ",c.required&&l.jsx("span",{className:"text-amber-600",children:"*"})]}),l.jsx("input",{type:"text",className:"w-full rounded px-2 py-1.5 text-xs border",style:{background:"var(--bg-input)",borderColor:"var(--border-input)",color:"var(--text-sidecar)"},value:i[c.id]||"",onChange:u=>o(d=>({...d,[c.id]:u.target.value}))})]},c.id))}),l.jsx("div",{className:"p-3",style:{borderTop:"1px solid var(--border-node)"},children:l.jsx("button",{className:`w-full py-2 rounded text-xs font-medium transition-colors ${a?"bg-amber-500 text-slate-900 hover:bg-amber-400":"subway-button cursor-not-allowed"}`,disabled:!a,onClick:()=>n(i),children:"Submit & Continue"})})]})}function qP({features:e,epicName:t,nodeWidth:n,onClose:r,onZoomComplete:s}){const i=e.length>6,o=i?240:320;return m.useEffect(()=>{if(s){const a=setTimeout(()=>s(),150);return()=>clearTimeout(a)}},[s]),l.jsxs("div",{className:"absolute top-0 border border-indigo-500/50 rounded-lg shadow-2xl tray-slide",style:{left:n+so.GAP,width:o,boxShadow:"0 0 30px rgba(0,0,0,0.5)",zIndex:1e3,background:"var(--bg-sidecar)"},children:[l.jsx("div",{className:"absolute border-t-2 border-dashed border-indigo-500/60",style:{top:14,right:"100%",width:so.GAP}}),l.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-indigo-500",style:{top:11,right:"100%",marginRight:-4}}),l.jsxs("div",{className:"bg-indigo-500/10 border-b border-indigo-500/30 px-3 py-2 flex justify-between items-center",children:[l.jsxs("span",{className:"text-[9px] font-semibold uppercase tracking-wide",style:{color:"var(--text-sidecar-muted)"},children:["Features - ",t]}),l.jsx("button",{onClick:r,style:{color:"var(--text-sidecar-muted)"},className:"hover:opacity-70 text-sm leading-none",children:""})]}),l.jsx("div",{className:`p-3 max-h-64 overflow-y-auto ${i?"":"grid grid-cols-2 gap-2"}`,children:e.map(a=>{const c=a.state==="complete"?"var(--state-stabilized-bg)":a.state==="active"?"var(--state-active-bg)":"var(--state-queued-bg)";return l.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded cursor-pointer hover:opacity-80 ${i?"mb-1":""}`,children:[l.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:c}}),l.jsx("span",{className:"text-[10px] truncate",style:{color:"var(--text-sidecar)"},children:a.name})]},a.id)})}),l.jsxs("div",{className:"px-3 py-2 text-[9px]",style:{borderTop:"1px solid var(--border-node)",color:"var(--text-sidecar-muted)"},children:[e.length," features"]})]})}const Qv="/api/v1";class $P extends Error{constructor(t,n,r){super(t),this.name="ApiError",this.status=n,this.data=r}}function FP(){const e=document.cookie.match(/(?:^|;\s*)csrf=([^;]*)/);return e?decodeURIComponent(e[1]):null}async function Me(e,t={}){const n=`${Qv}${e}`,r={headers:{"Content-Type":"application/json",...t.headers},credentials:"same-origin",...t},s=await fetch(n,r);if(!s.ok){const i=await s.json().catch(()=>({}));throw new $P(i.detail||`Request failed: ${s.status}`,s.status,i)}return s.status===204?null:s.json()}const $e={getMe:()=>fetch("/api/me",{credentials:"same-origin"}).then(e=>{if(e.status===401)return null;if(!e.ok)throw new Error(`Request failed: ${e.status}`);return e.json()}).catch(e=>(console.error("Auth check failed:",e),null)),logout:()=>fetch("/auth/logout",{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":FP()||""}}),getProjects:(e={})=>{const t=new URLSearchParams;e.search&&t.set("search",e.search),e.includeArchived&&t.set("include_archived","true");const n=t.toString();return Me(`/projects${n?"?"+n:""}`)},getProject:e=>Me(`/projects/${e}`),getProjectTree:e=>Me(`/projects/${e}/tree`),createProject:e=>Me("/projects",{method:"POST",body:JSON.stringify(e)}),updateProject:(e,t)=>Me(`/projects/${e}`,{method:"PATCH",body:JSON.stringify(t)}),archiveProject:e=>Me(`/projects/${e}/archive`,{method:"POST"}),unarchiveProject:e=>Me(`/projects/${e}/unarchive`,{method:"POST"}),deleteProject:e=>Me(`/projects/${e}`,{method:"DELETE"}),getProductionStatus:e=>Me(`/production/status?project_id=${e}`),startProduction:(e,t=null)=>{const n=new URLSearchParams({project_id:e});return t&&n.set("document_type",t),Me(`/production/start?${n}`,{method:"POST"})},getProjectInterrupts:e=>Me(`/projects/${e}/interrupts`),resolveInterrupt:(e,t)=>Me(`/interrupts/${e}/resolve`,{method:"POST",body:JSON.stringify(t)}),startWorkflow:(e,t,n=null)=>Me("/document-workflows/start",{method:"POST",body:JSON.stringify({project_id:e,document_type:t,initial_context:n})}),submitWorkflowInput:(e,t,n=null)=>Me(`/document-workflows/executions/${e}/input`,{method:"POST",body:JSON.stringify({user_input:t,selected_option_id:n})}),getExecutionStatus:e=>Me(`/document-workflows/executions/${e}`),getPgcAnswers:e=>Me(`/document-workflows/executions/${e}/pgc-answers`),getDocument:(e,t)=>Me(`/projects/${e}/documents/${t}`),getDocumentRenderModel:(e,t)=>Me(`/projects/${e}/documents/${t}/render-model`),startIntake:()=>Me("/intake/start",{method:"POST"}),getIntakeState:e=>Me(`/intake/${e}`),submitIntakeMessage:(e,t)=>Me(`/intake/${e}/message`,{method:"POST",body:JSON.stringify({content:t})}),updateIntakeField:(e,t,n)=>Me(`/intake/${e}/field/${t}`,{method:"PATCH",body:JSON.stringify({value:n})}),initializeIntake:e=>Me(`/intake/${e}/initialize`,{method:"POST"})};function BP(e){const t=`${Qv}/production/events?project_id=${e}`;return new EventSource(t)}function HP(e){const t=`${Qv}/intake/${e}/events`;return new EventSource(t)}function WP(e){return`/auth/login/${e}`}function VP({block:e}){const{data:t}=e,n=t.content||t.value||"";return n?l.jsxs("div",{style:{marginBottom:12},children:[l.jsx("p",{style:{margin:0,fontSize:14,lineHeight:1.6,color:"#374151",whiteSpace:"pre-line"},children:n}),t.detail_ref&&l.jsx("a",{href:"#",style:{fontSize:12,color:"#6366f1",textDecoration:"none",marginTop:4,display:"inline-block"},children:"View details "})]}):null}function E0({block:e}){const{data:t}=e,n=t.items||[],r=t.style||"bullet";if(n.length===0)return null;const s=r==="numbered"?"decimal":"disc";return l.jsxs("div",{style:{marginBottom:12},children:[t.title&&l.jsx("h4",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:t.title}),l.jsx("ul",{style:{margin:0,paddingLeft:r==="check"?0:20,listStyle:r==="check"?"none":s},children:n.map((i,o)=>l.jsxs("li",{style:{fontSize:14,lineHeight:1.6,color:"#374151",marginBottom:4,display:r==="check"?"flex":"list-item",alignItems:"flex-start",gap:8},children:[r==="check"&&l.jsx("span",{style:{color:"#10b981"},children:""}),typeof i=="string"?i:(i==null?void 0:i.value)||(i==null?void 0:i.text)||(i==null?void 0:i.question)||(i==null?void 0:i.description)||JSON.stringify(i)]},o))})]})}function UP({block:e}){const{data:t}=e,n=t.value||"unknown",r=t.label,i={low:{bg:"#d1fae5",text:"#065f46"},medium:{bg:"#fef3c7",text:"#92400e"},high:{bg:"#fee2e2",text:"#991b1b"},critical:{bg:"#fecaca",text:"#7f1d1d"},none:{bg:"#e5e7eb",text:"#374151"},external:{bg:"#dbeafe",text:"#1e40af"},qualified:{bg:"#d1fae5",text:"#065f46"},not_ready:{bg:"#fef3c7",text:"#92400e"}}[n.toLowerCase()]||{bg:"#f3f4f6",text:"#374151"};return l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:8,marginBottom:12},children:[r&&l.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:500},children:[r,":"]}),l.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:20,background:i.bg,color:i.text,fontSize:12,fontWeight:500,textTransform:"capitalize"},children:n})]})}function VN({block:e}){const{data:t}=e,{id:n,text:r,blocking:s,why_it_matters:i,priority:o,tags:a,options:c}=t,u={must:{bg:"#fee2e2",text:"#991b1b"},should:{bg:"#fef3c7",text:"#92400e"},could:{bg:"#e5e7eb",text:"#374151"}},d=u[o]||u.should;return l.jsx("div",{style:{padding:"12px 16px",background:s?"#fef2f2":"#f8fafc",borderRadius:8,border:`1px solid ${s?"#fecaca":"#e2e8f0"}`,marginBottom:12},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:"#6b7280",background:"#e5e7eb",padding:"2px 6px",borderRadius:4,flexShrink:0},children:n}),l.jsxs("div",{style:{flex:1},children:[l.jsx("p",{style:{margin:0,fontSize:14,fontWeight:500,color:"#111827",marginBottom:6},children:r}),i&&l.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280",fontStyle:"italic"},children:i}),l.jsxs("div",{style:{display:"flex",gap:6,marginTop:8,flexWrap:"wrap"},children:[s&&l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:"#fee2e2",color:"#991b1b",fontWeight:600},children:"BLOCKING"}),o&&l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:d.bg,color:d.text,textTransform:"uppercase"},children:o}),a==null?void 0:a.map((f,h)=>l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:"#e0e7ff",color:"#3730a3"},children:f},h))]}),c&&c.length>0&&l.jsxs("div",{style:{marginTop:8},children:[l.jsx("span",{style:{fontSize:11,color:"#6b7280"},children:"Options: "}),c.map((f,h)=>l.jsx("span",{style:{fontSize:11,color:"#374151",marginLeft:h>0?8:4},children:f},h))]})]})]})})}function GP({block:e}){const{data:t}=e,n=t.items||[],r=t.total_count||n.length,s=t.blocking_count||n.filter(i=>i.blocking).length;return n.length===0?l.jsx("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:8,border:"1px solid #bbf7d0",textAlign:"center",color:"#166534",fontSize:14},children:"No open questions"}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,padding:"8px 12px",background:"#f8fafc",borderRadius:6,fontSize:12},children:[l.jsxs("span",{style:{color:"#6b7280"},children:[l.jsx("strong",{style:{color:"#374151"},children:r})," questions"]}),s>0&&l.jsxs("span",{style:{color:"#dc2626"},children:[l.jsx("strong",{children:s})," blocking"]})]}),n.map((i,o)=>l.jsx(VN,{block:{type:"schema:OpenQuestionV1",data:i}},i.id||o))]})}function C0({block:e}){const{data:t}=e,n=t.items||[],r=t.title;if(n.length===0)return null;const s={low:{bg:"#d1fae5",text:"#065f46",border:"#a7f3d0"},medium:{bg:"#fef3c7",text:"#92400e",border:"#fde68a"},high:{bg:"#fee2e2",text:"#991b1b",border:"#fecaca"},critical:{bg:"#fecaca",text:"#7f1d1d",border:"#f87171"}};return l.jsxs("div",{style:{marginBottom:12},children:[r&&l.jsx("h4",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:r}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:n.map((i,o)=>{const a=i.severity||i.likelihood||"medium",c=s[a]||s.medium;return l.jsx("div",{style:{padding:"10px 14px",background:c.bg,borderRadius:6,border:`1px solid ${c.border}`},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[i.id&&l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:c.text,background:"rgba(255,255,255,0.5)",padding:"2px 6px",borderRadius:4,flexShrink:0},children:i.id}),l.jsxs("div",{style:{flex:1},children:[l.jsx("p",{style:{margin:0,fontSize:13,color:c.text,fontWeight:500},children:i.description||i.reason||JSON.stringify(i)}),i.impact&&l.jsxs("p",{style:{margin:"4px 0 0",fontSize:12,color:c.text,opacity:.8},children:["Impact: ",i.impact]}),i.mitigation&&l.jsxs("p",{style:{margin:"4px 0 0",fontSize:12,color:c.text,opacity:.8},children:["Mitigation: ",i.mitigation]})]}),l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:"rgba(255,255,255,0.5)",color:c.text,textTransform:"uppercase",fontWeight:600},children:a})]})},i.id||o)})})]})}function KP({block:e}){const{data:t}=e,r=Object.entries({problem_understanding:"Problem Understanding",architectural_intent:"Architectural Intent",scope_pressure_points:"Scope Pressure Points",proposed_system_shape:"Proposed System Shape",overall_intent:"Overall Intent",mvp_definition:"MVP Definition"}).filter(([s])=>t[s]&&typeof t[s]=="string").map(([s,i])=>({title:i,content:t[s]}));return r.length===0?null:l.jsx("div",{style:{marginBottom:12},children:r.map((s,i)=>l.jsxs("div",{style:{marginBottom:i<r.length-1?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:6,textTransform:"uppercase",letterSpacing:"0.05em"},children:s.title}),l.jsx("div",{style:{padding:"12px 16px",background:"#f8fafc",borderRadius:6,borderLeft:"3px solid #6366f1"},children:l.jsx("p",{style:{margin:0,fontSize:14,lineHeight:1.6,color:"#374151",whiteSpace:"pre-line"},children:s.content})})]},i))})}function R0({block:e}){const{data:t}=e,{epic_id:n,title:r,name:s,intent:i,phase:o,mvp_phase:a,risk_level:c,stories:u,detail_ref:d}=t,f=o||a,h=r||s,p={low:{bg:"#d1fae5",text:"#065f46"},medium:{bg:"#fef3c7",text:"#92400e"},high:{bg:"#fee2e2",text:"#991b1b"}},x=p[c]||p.medium,v={mvp:{bg:"#dbeafe",text:"#1e40af"},"later-phase":{bg:"#e5e7eb",text:"#374151"},later:{bg:"#e5e7eb",text:"#374151"}},_=v[f]||v.mvp;return l.jsxs("div",{style:{padding:"14px 16px",background:"#ffffff",borderRadius:8,border:"1px solid #e2e8f0",marginBottom:12,boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:12},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[n&&l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:"#6366f1",background:"#eef2ff",padding:"2px 6px",borderRadius:4},children:n}),l.jsx("h4",{style:{margin:0,fontSize:14,fontWeight:600,color:"#111827"},children:h})]}),i&&l.jsx("p",{style:{margin:0,fontSize:13,color:"#6b7280",lineHeight:1.5},children:i}),u&&u.length>0&&l.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#6b7280"},children:[u.length," stories"]})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,alignItems:"flex-end"},children:[f&&l.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:_.bg,color:_.text,textTransform:"uppercase",fontWeight:500},children:f==="later-phase"?"LATER":f}),c&&l.jsxs("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:x.bg,color:x.text,textTransform:"uppercase",fontWeight:500},children:[c," risk"]})]})]}),d&&l.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid #f3f4f6"},children:l.jsx("a",{href:"#",style:{fontSize:12,color:"#6366f1",textDecoration:"none"},children:"View epic details "})})]})}function YP({block:e}){const{data:t}=e,{story_id:n,title:r,intent:s,phase:i,risk_level:o,detail_ref:a}=t,u={low:{bg:"#d1fae5",text:"#065f46"},medium:{bg:"#fef3c7",text:"#92400e"},high:{bg:"#fee2e2",text:"#991b1b"}}[o]||null,d={mvp:{bg:"#dbeafe",text:"#1e40af"},later:{bg:"#e5e7eb",text:"#374151"}},f=d[i]||d.mvp;return l.jsx("div",{style:{padding:"10px 14px",background:"#fafafa",borderRadius:6,border:"1px solid #e5e7eb",marginBottom:8},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:10},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[n&&l.jsx("span",{style:{fontSize:10,fontFamily:"monospace",color:"#059669",background:"#ecfdf5",padding:"1px 5px",borderRadius:3},children:n}),l.jsx("span",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:r})]}),s&&l.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280",lineHeight:1.4},children:s})]}),l.jsxs("div",{style:{display:"flex",gap:4},children:[i&&l.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:f.bg,color:f.text,textTransform:"uppercase",fontWeight:500},children:i}),u&&l.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:u.bg,color:u.text,textTransform:"uppercase",fontWeight:500},children:o})]})]})})}function XP({block:e}){const{type:t,data:n}=e;return l.jsxs("div",{style:{padding:"12px 16px",background:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0",marginBottom:12},children:[l.jsx("div",{style:{fontSize:10,color:"#94a3b8",marginBottom:8,fontFamily:"monospace"},children:t}),l.jsx("pre",{style:{fontSize:12,color:"#475569",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(n,null,2)})]})}function QP({block:e}){const{data:t}=e,n=t.items||[],[r,s]=m.useState({});if(n.length===0)return null;const i=o=>{s(a=>({...a,[o]:!a[o]}))};return l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:n.map((o,a)=>{const c=r[a],u=o.why_it_matters||o.impact_if_unresolved;return l.jsxs("div",{style:{background:"#fefce8",border:"1px solid #fef08a",borderRadius:6,borderLeft:"3px solid #eab308",overflow:"hidden"},children:[l.jsxs("button",{onClick:()=>u&&i(a),style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",cursor:u?"pointer":"default",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8,textAlign:"left"},children:[l.jsx("span",{style:{fontSize:13,fontWeight:500,color:"#854d0e",lineHeight:1.4},children:o.question||o.value||o.text||"Unknown"}),u&&l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"#a16207",strokeWidth:"2",style:{flexShrink:0,marginTop:2,transform:c?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.15s"},children:l.jsx("path",{d:"M3 5l4 4 4-4"})})]}),c&&u&&l.jsxs("div",{style:{padding:"0 12px 12px",borderTop:"1px solid #fde68a",marginTop:0},children:[o.why_it_matters&&l.jsxs("div",{style:{marginTop:10},children:[l.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#a16207",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:3},children:"Why it matters"}),l.jsx("div",{style:{fontSize:12,color:"#713f12",lineHeight:1.5},children:o.why_it_matters})]}),o.impact_if_unresolved&&l.jsxs("div",{style:{marginTop:10},children:[l.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#a16207",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:3},children:"Impact if unresolved"}),l.jsx("div",{style:{fontSize:12,color:"#713f12",lineHeight:1.5},children:o.impact_if_unresolved})]})]})]},a)})})}function ZP({block:e}){const{data:t}=e,{description:n,user_statement:r}=t;return l.jsxs("div",{style:{marginBottom:12},children:[n&&l.jsx("div",{style:{paddingLeft:16,borderLeft:"4px solid #8b5cf6",color:"#374151",marginBottom:16,fontSize:14,lineHeight:1.6},children:n}),r&&l.jsxs("blockquote",{style:{paddingLeft:16,borderLeft:"4px solid #d1d5db",color:"#6b7280",fontStyle:"italic",margin:0,fontSize:13,lineHeight:1.5},children:['"',r,'"']})]})}function JP({block:e}){const{data:t}=e,{category:n,confidence:r,rationale:s}=t;return l.jsxs("div",{style:{marginBottom:12},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[l.jsx("span",{style:{padding:"4px 12px",borderRadius:16,fontSize:13,fontWeight:500,background:"#ede9fe",color:"#6d28d9"},children:n}),r&&l.jsxs("span",{style:{fontSize:13,color:"#6b7280"},children:["Confidence: ",r]})]}),s&&l.jsx("p",{style:{margin:0,fontSize:13,color:"#6b7280",lineHeight:1.5},children:s})]})}function e6({block:e}){const{data:t}=e,{explicit:n=[],inferred:r=[]}=t,s=n&&n.length>0,i=r&&r.length>0;return!s&&!i?null:l.jsxs("div",{style:{marginBottom:12},children:[s&&l.jsxs("div",{style:{marginBottom:i?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Explicit"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:n.map((o,a)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#f59e0b"},children:""}),l.jsx("span",{children:o})]},a))})]}),i&&l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Inferred"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:r.map((o,a)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#3b82f6"},children:""}),l.jsx("span",{children:o})]},a))})]})]})}function t6({block:e}){const{data:t}=e,{questions:n=[],missing_context:r=[],assumptions_made:s=[]}=t,i=n&&n.length>0,o=r&&r.length>0,a=s&&s.length>0;return!i&&!o&&!a?null:l.jsxs("div",{style:{marginBottom:12},children:[i&&l.jsxs("div",{style:{marginBottom:o||a?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Questions"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:n.map((c,u)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#3b82f6"},children:""}),l.jsx("span",{children:c})]},u))})]}),o&&l.jsxs("div",{style:{marginBottom:a?16:0},children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Missing Context"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:r.map((c,u)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#f59e0b"},children:""}),l.jsx("span",{children:c})]},u))})]}),a&&l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:12,fontWeight:500,color:"#6b7280",marginBottom:8,marginTop:0},children:"Assumptions"}),l.jsx("ul",{style:{margin:0,paddingLeft:20,listStyle:"none"},children:s.map((c,u)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,marginBottom:6,fontSize:13,color:"#374151"},children:[l.jsx("span",{style:{color:"#6b7280"},children:""}),l.jsx("span",{children:c})]},u))})]})]})}function n6({block:e}){const{data:t}=e,{status:n,rationale:r,next_action:s}=t,o={qualified:{bg:"#d1fae5",text:"#065f46"},not_ready:{bg:"#fef3c7",text:"#92400e"},out_of_scope:{bg:"#fee2e2",text:"#991b1b"},redirect:{bg:"#e0e7ff",text:"#3730a3"}}[n]||{bg:"#f3f4f6",text:"#374151"};return l.jsxs("div",{style:{marginBottom:12},children:[n&&l.jsx("div",{style:{marginBottom:12},children:l.jsx("span",{style:{padding:"4px 12px",borderRadius:16,fontSize:13,fontWeight:500,background:o.bg,color:o.text},children:n})}),r&&l.jsx("p",{style:{margin:0,marginBottom:s?12:0,fontSize:13,color:"#6b7280",lineHeight:1.5},children:r}),s&&l.jsx("div",{style:{padding:12,borderRadius:8,background:"#ecfdf5",border:"1px solid #a7f3d0"},children:l.jsxs("span",{style:{fontSize:13,fontWeight:500,color:"#065f46"},children:["Next: ",s]})})]})}const r6={"schema:ParagraphBlockV1":VP,"schema:StringListBlockV1":E0,"schema:IndicatorBlockV1":UP,"schema:OpenQuestionV1":VN,"schema:OpenQuestionsBlockV1":GP,"schema:RisksBlockV1":C0,"schema:DependenciesBlockV1":C0,"schema:SummaryBlockV1":KP,"schema:EpicSummaryBlockV1":R0,"schema:StorySummaryBlockV1":YP,"schema:EpicStoriesCardBlockV1":R0,"schema:StoriesBlockV1":E0,"schema:UnknownsBlockV1":QP,"schema:IntakeSummaryBlockV1":ZP,"schema:IntakeProjectTypeBlockV1":JP,"schema:IntakeConstraintsBlockV1":e6,"schema:IntakeOpenGapsBlockV1":t6,"schema:IntakeOutcomeBlockV1":n6};function s6(e){return r6[e]||XP}function i6(e,t){const n=s6(e.type);return l.jsx(n,{block:e},e.key||t)}function UN({renderModel:e,variant:t="full",hideHeader:n=!1,onSectionClick:r,className:s=""}){var _;const[i,o]=m.useState(new Set(((_=e==null?void 0:e.sections)==null?void 0:_.map(g=>g.section_id))||[]));if(!e)return l.jsx("div",{style:{padding:20,textAlign:"center",color:"#6b7280"},children:"No render model available"});const{title:a,subtitle:c,sections:u=[],metadata:d}=e;if(d!=null&&d.fallback&&e.raw_content)return l.jsx(a6,{title:a,content:e.raw_content,reason:d.reason});const f=g=>{o(y=>{const b=new Set(y);return b.has(g)?b.delete(g):b.add(g),b})},h=t==="compact"||t==="sidecar",x=t==="sidecar"?u.filter(g=>g.viewer_tab==="overview"||!g.viewer_tab):u,v=(()=>{if(!a)return"Document";const g=a.indexOf(": ");return g>-1?a.slice(g+2):a})();return l.jsxs("div",{className:s,children:[t==="full"&&!n&&l.jsxs("div",{style:{marginBottom:24},children:[l.jsx("h1",{style:{margin:0,fontSize:24,fontWeight:700,color:"#111827"},children:v}),c&&l.jsx("p",{style:{margin:"8px 0 0",fontSize:14,color:"#6b7280"},children:c})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:h?12:20},children:x.map(g=>l.jsx(o6,{section:g,isExpanded:i.has(g.section_id),onToggle:()=>f(g.section_id),onClick:()=>r==null?void 0:r(g),variant:t},g.section_id))}),x.length===0&&l.jsx("div",{style:{padding:32,textAlign:"center",color:"#9ca3af",background:"#f9fafb",borderRadius:8},children:"No content sections available"})]})}function o6({section:e,isExpanded:t,onToggle:n,onClick:r,variant:s}){const{section_id:i,title:o,description:a,blocks:c=[],sidecar_max_items:u}=e,d=s==="compact"||s==="sidecar",f=s==="sidecar";if(c.length===0)return null;const h=f&&u&&c.length>u?c.slice(0,u):c,p=f&&u&&c.length>u;return l.jsxs("div",{style:{background:"#ffffff",borderRadius:8,border:"1px solid #e5e7eb",overflow:"hidden"},children:[l.jsxs("button",{onClick:n,style:{width:"100%",padding:d?"10px 14px":"14px 18px",background:"#f9fafb",border:"none",borderBottom:t?"1px solid #e5e7eb":"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left"},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{margin:0,fontSize:d?13:15,fontWeight:600,color:"#111827"},children:[o,p&&l.jsxs("span",{style:{fontWeight:400,color:"#6b7280",marginLeft:6},children:["(showing ",u," of ",c.length,")"]})]}),a&&!d&&l.jsx("p",{style:{margin:"4px 0 0",fontSize:12,color:"#6b7280"},children:a})]}),l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#9ca3af",transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:l.jsx("path",{d:"M4 6l4 4 4-4"})})]}),t&&l.jsxs("div",{style:{padding:d?12:18},children:[h.map((x,v)=>i6(x,v)),p&&l.jsxs("div",{style:{marginTop:8,padding:"8px 12px",background:"#f3f4f6",borderRadius:4,fontSize:12,color:"#6b7280",textAlign:"center"},children:["+",c.length-u," more in full view"]})]})]})}function a6({title:e,content:t,reason:n}){return l.jsxs("div",{children:[l.jsxs("div",{style:{padding:"12px 16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:8,marginBottom:16,fontSize:12,color:"#92400e"},children:["Displaying raw content (reason: ",n||"unknown",")"]}),l.jsx("div",{style:{background:"#f8fafc",borderRadius:8,padding:16,overflow:"auto"},children:l.jsx("pre",{style:{margin:0,fontSize:12,color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:JSON.stringify(t,null,2)})})]})}function l6({renderModel:e,projectCode:t,documentName:n,isExpanded:r,onToggleExpand:s,onClose:i,onViewFull:o,nodeWidth:a=280}){const h=r?900:520,p=r?900:600,x=`${t||"DOC"} - ${n||"Document"}`,v=_=>{_.stopPropagation()};return l.jsxs("div",{className:"absolute top-0 tray-slide",style:{left:a+30,width:h,zIndex:1e3,transition:"width 0.2s ease"},onMouseDown:v,onPointerDown:v,children:[l.jsx("div",{className:"absolute",style:{top:40,right:"100%",width:30,height:3,background:"#10b981"}}),l.jsx("div",{className:"absolute rounded-full",style:{top:36,right:"100%",marginRight:26,width:10,height:10,background:"#10b981"}}),l.jsxs("div",{style:{background:"#ffffff",borderRadius:2,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",minHeight:p,transition:"min-height 0.2s ease",display:"flex",flexDirection:"column"},children:[l.jsx("div",{style:{padding:"24px 32px 16px",borderBottom:"2px solid #10b981",background:"linear-gradient(to bottom, #ffffff, #fafafa)"},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:10,letterSpacing:"0.15em",color:"#10b981",fontWeight:600,marginBottom:4},children:"STABILIZED DOCUMENT"}),l.jsx("h1",{style:{fontSize:20,fontFamily:"Georgia, serif",fontWeight:700,color:"#1a1a1a",margin:0},children:(()=>{const _=(e==null?void 0:e.title)||"DOCUMENT",g=_.indexOf(": ");return(g>-1?_.slice(g+2):_).toUpperCase()})()}),l.jsx("div",{style:{fontSize:11,color:"#666",marginTop:4,fontFamily:"monospace"},children:x})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:s,title:r?"Contract":"Expand",style:{color:"#666",fontSize:16,lineHeight:1,padding:6,background:"none",border:"1px solid #e5e5e5",borderRadius:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:r?l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M9 1v4h4M5 13v-4H1M9 5L13 1M5 9L1 13"})}):l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M13 5V1h-4M1 9v4h4M13 1L9 5M1 13l4-4"})})}),l.jsx("button",{onClick:i,title:"Close",style:{color:"#999",fontSize:24,lineHeight:1,padding:4,background:"none",border:"none",cursor:"pointer"},children:""})]})]})}),l.jsx("div",{style:{flex:1,padding:"16px 24px",overflowY:"auto",maxHeight:r?600:400},children:l.jsx(UN,{renderModel:e,variant:"sidecar"})}),l.jsx("div",{style:{padding:"16px 32px 24px",borderTop:"1px solid #e5e5e5",background:"#fafafa"},children:l.jsxs("button",{onClick:o,style:{width:"100%",padding:"10px 16px",background:"#10b981",color:"white",border:"none",borderRadius:4,fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[l.jsx("span",{children:"View Full Document"}),l.jsx("span",{style:{fontSize:14},children:""})]})})]})]})}function c6({document:e,projectId:t,projectCode:n,nodeWidth:r,onClose:s,onZoomComplete:i,onViewFull:o}){const[a,c]=m.useState(null),[u,d]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1);return m.useEffect(()=>{if(i){const v=setTimeout(()=>i(),150);return()=>clearTimeout(v)}},[i]),m.useEffect(()=>{async function v(){var _;if(!t||!e.id){h(!1);return}try{h(!0);try{const y=await $e.getDocumentRenderModel(t,e.id);if(y&&y.sections&&y.sections.length>0){c(y),d(null);return}if((_=y==null?void 0:y.metadata)!=null&&_.fallback&&y.raw_content){c(null),d(y.raw_content);return}}catch(y){console.log("RenderModel not available, falling back to raw document:",y.message)}const g=await $e.getDocument(t,e.id);c(null),d((g==null?void 0:g.content)||null)}catch(g){console.error("Failed to fetch document for sidecar:",g)}finally{h(!1)}}v()},[t,e.id]),f?null:a?l.jsx(l6,{renderModel:a,projectCode:n,documentName:e.name,isExpanded:p,onToggleExpand:()=>x(!p),onClose:s,onViewFull:()=>o==null?void 0:o(e.id),nodeWidth:r}):l.jsx(u6,{document:e,projectCode:n,rawContent:u,nodeWidth:r,isExpanded:p,onToggleExpand:()=>x(!p),onClose:s,onViewFull:()=>o==null?void 0:o(e.id)})}function u6({document:e,projectCode:t,rawContent:n,nodeWidth:r,isExpanded:s,onToggleExpand:i,onClose:o,onViewFull:a}){var _;const h=s?900:520,p=s?900:600,x=`${t||"DOC"} - ${e.name||"Document"}`,v=g=>{g.stopPropagation()};return l.jsxs("div",{className:"absolute top-0 tray-slide",style:{left:r+30,width:h,zIndex:1e3,transition:"width 0.2s ease"},onMouseDown:v,onPointerDown:v,children:[l.jsx("div",{className:"absolute",style:{top:40,right:"100%",width:30,height:3,background:"#10b981"}}),l.jsx("div",{className:"absolute rounded-full",style:{top:36,right:"100%",marginRight:26,width:10,height:10,background:"#10b981"}}),l.jsxs("div",{style:{background:"#ffffff",borderRadius:2,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",minHeight:p,transition:"min-height 0.2s ease",display:"flex",flexDirection:"column"},children:[l.jsx("div",{style:{padding:"24px 32px 16px",borderBottom:"2px solid #10b981",background:"linear-gradient(to bottom, #ffffff, #fafafa)"},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:10,letterSpacing:"0.15em",color:"#10b981",fontWeight:600,marginBottom:4},children:"PRODUCED DOCUMENT"}),l.jsx("h1",{style:{fontSize:20,fontFamily:"Georgia, serif",fontWeight:700,color:"#1a1a1a",margin:0},children:((_=e.name)==null?void 0:_.toUpperCase())||"DOCUMENT"}),l.jsx("div",{style:{fontSize:11,color:"#666",marginTop:4,fontFamily:"monospace"},children:x})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:i,title:s?"Contract":"Expand",style:{color:"#666",fontSize:16,lineHeight:1,padding:6,background:"none",border:"1px solid #e5e5e5",borderRadius:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:s?l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M9 1v4h4M5 13v-4H1M9 5L13 1M5 9L1 13"})}):l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M13 5V1h-4M1 9v4h4M13 1L9 5M1 13l4-4"})})}),l.jsx("button",{onClick:o,title:"Close",style:{color:"#999",fontSize:24,lineHeight:1,padding:4,background:"none",border:"none",cursor:"pointer"},children:""})]})]})}),l.jsxs("div",{style:{flex:1,padding:"16px 24px",overflowY:"auto",maxHeight:s?600:400},children:[l.jsx("div",{style:{padding:"12px 16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:8,marginBottom:16,fontSize:12,color:"#92400e"},children:"No view definition configured - displaying raw content"}),l.jsx("div",{style:{background:"#f8fafc",borderRadius:8,padding:16,overflow:"auto"},children:l.jsx("pre",{style:{margin:0,fontSize:11,color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace",lineHeight:1.5},children:JSON.stringify(n,null,2)})})]}),l.jsx("div",{style:{padding:"16px 32px 24px",borderTop:"1px solid #e5e5e5",background:"#fafafa"},children:l.jsxs("button",{onClick:a,style:{width:"100%",padding:"10px 16px",background:"#10b981",color:"white",border:"none",borderRadius:4,fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[l.jsx("span",{children:"View Full Document"}),l.jsx("span",{style:{fontSize:14},children:""})]})})]})]})}const d6={produced:"Produced",in_production:"In Production",ready_for_production:"Ready",requirements_not_met:"Requirements Not Met",awaiting_operator:"Awaiting Operator",halted:"Halted",stabilized:"Produced",active:"In Production",queued:"Ready",blocked:"Requirements Not Met",ready:"Produced",waiting:"Ready"};function f6({data:e}){var w,S,k;const n=(e.level||1)===1,r=e.isExpanded,s=e.expandType,i=((w=e.questions)==null?void 0:w.length)>0,o=((S=e.features)==null?void 0:S.length)>0,a=(k=e.stations)==null?void 0:k.some(j=>j.needs_input),c=e.state||"ready_for_production",u=["produced","stabilized","ready"].includes(c),d=["in_production","active"].includes(c),f=["requirements_not_met","blocked"].includes(c),h=d&&e.stations,p=d?"node-active":"",x=n?"DOCUMENT":"EPIC",v=n?"subway-node-header-doc":"subway-node-header-epic",_=u?"var(--state-produced-bg, var(--state-stabilized-bg))":d?"var(--state-in-production-bg, var(--state-active-bg))":f?"var(--state-requirements-not-met-bg, var(--state-blocked-bg, var(--state-queued-bg)))":"var(--state-ready-bg, var(--state-queued-bg))",g=u?"var(--state-produced-text, var(--state-stabilized-text))":d?"var(--state-in-production-text, var(--state-active-text))":f?"var(--state-requirements-not-met-text, var(--state-blocked-text, var(--state-queued-text)))":"var(--state-ready-text, var(--state-queued-text))",y=d?"var(--state-in-production-bg, var(--state-active-bg))":u?"var(--state-produced-bg, var(--state-stabilized-bg))":"var(--border-node)",b=d6[c]||c;return l.jsxs("div",{className:"relative",children:[l.jsx(Mn,{type:"target",position:ee.Top,className:"!opacity-0",style:{left:"15%"}}),l.jsxs("div",{className:`subway-node rounded-lg border ${p} overflow-hidden`,style:{width:e.width,minHeight:e.height,borderColor:y},children:[l.jsxs("div",{className:`${v} border-b px-3 py-1.5 flex items-center justify-between`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase tracking-wider",style:{color:n?"var(--header-text-doc)":"var(--header-text-epic)"},children:x}),l.jsx("span",{className:"text-[10px] font-medium",style:{color:"var(--text-primary)"},children:e.name})]}),e.intent==="optional"&&l.jsx("span",{className:"subway-button text-[8px] px-1.5 py-0.5 rounded",children:"OPTIONAL"})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"rounded-full flex-shrink-0",style:{width:n?24:18,height:n?24:18,backgroundColor:_}}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide",style:{color:g},children:b}),n&&e.desc&&l.jsx("p",{className:"text-[9px] mt-0.5 truncate",style:{color:"var(--text-muted)"},children:e.desc})]})]}),h&&l.jsx(LP,{stations:e.stations}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[n&&u&&l.jsx("button",{className:"px-2 py-1 bg-emerald-500/20 rounded text-[9px] hover:bg-emerald-500/30 transition-colors",style:{color:"var(--action-success)"},onClick:j=>{var N;j.stopPropagation(),(N=e.onExpand)==null||N.call(e,e.id,"document")},children:"View Document"}),a&&i&&!r&&l.jsx("button",{className:"px-2 py-1 bg-amber-500/20 rounded text-[9px] hover:bg-amber-500/30 transition-colors amber-pulse",style:{color:"var(--action-warning)"},onClick:j=>{var N;j.stopPropagation(),(N=e.onExpand)==null||N.call(e,e.id,"questions")},children:"Answer Questions"}),!n&&o&&(r&&s==="features"?l.jsxs("span",{className:"text-[9px] text-indigo-400",children:[e.features.length," features expanded"]}):l.jsxs("button",{className:"subway-button px-2 py-1 rounded text-[9px] transition-colors flex items-center gap-1",onClick:j=>{var N;j.stopPropagation(),(N=e.onExpand)==null||N.call(e,e.id,"features")},children:[l.jsx("span",{className:"text-indigo-400",children:e.features.length}),l.jsx("span",{children:"features"}),l.jsx("span",{className:"text-indigo-400",children:""})]}))]})]})]}),r&&s==="questions"&&i&&l.jsx(zP,{questions:e.questions,nodeWidth:e.width,onSubmit:j=>{var N;return(N=e.onSubmitQuestions)==null?void 0:N.call(e,e.id,j)},onClose:()=>{var j;return(j=e.onCollapse)==null?void 0:j.call(e)},onZoomComplete:()=>{var j;return(j=e.onZoomToNode)==null?void 0:j.call(e,e.id)}}),r&&s==="features"&&o&&l.jsx(qP,{features:e.features,epicName:e.name,nodeWidth:e.width,onClose:()=>{var j;return(j=e.onCollapse)==null?void 0:j.call(e)},onZoomComplete:()=>{var j;return(j=e.onZoomToNode)==null?void 0:j.call(e,e.id)}}),r&&s==="document"&&n&&u&&l.jsx(c6,{document:e,projectId:e.projectId,projectCode:e.projectCode,nodeWidth:e.width,onClose:()=>{var j;return(j=e.onCollapse)==null?void 0:j.call(e)},onZoomComplete:()=>{var j;return(j=e.onZoomToNode)==null?void 0:j.call(e,e.id)},onViewFull:j=>{var N;return(N=e.onViewFullDocument)==null?void 0:N.call(e,j)}}),l.jsx(Mn,{type:"source",position:ee.Bottom,className:"!opacity-0",style:{left:"15%"}})]})}function h6(){return l.jsxs("div",{style:{width:1,height:1,background:"transparent"},children:[l.jsx(Mn,{type:"target",position:ee.Top,style:{opacity:0}}),l.jsx(Mn,{type:"source",position:ee.Bottom,style:{opacity:0}})]})}function p6({projectId:e,projectCode:t,docTypeId:n,onClose:r}){const[s,i]=m.useState(null),[o,a]=m.useState(null),[c,u]=m.useState(!0),[d,f]=m.useState(null);return m.useEffect(()=>{async function h(){var p;try{u(!0),f(null);try{const v=await $e.getDocumentRenderModel(e,n);if(v&&v.sections&&v.sections.length>0){i(v),a(null);return}if((p=v==null?void 0:v.metadata)!=null&&p.fallback&&v.raw_content){i(null),a(v.raw_content);return}}catch(v){console.log("RenderModel not available, falling back to raw document:",v.message)}const x=await $e.getDocument(e,n);i(null),a((x==null?void 0:x.content)||null)}catch(x){f(x.message),console.error("Failed to fetch document:",x)}finally{u(!1)}}h()},[e,n]),m.useEffect(()=>{const h=p=>{p.key==="Escape"&&r()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[r]),c?l.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",style:{background:"rgba(0,0,0,0.8)"},children:l.jsx("div",{style:{color:"white",fontSize:14},children:"Loading..."})}):l.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",style:{background:"rgba(0,0,0,0.8)"},onClick:h=>h.target===h.currentTarget&&r(),children:l.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-lg shadow-2xl",style:{background:"#ffffff"},children:[l.jsxs("div",{className:"sticky top-0 px-6 py-4 border-b flex items-center justify-between",style:{background:"#f8fafc",borderColor:"#e2e8f0"},children:[l.jsx("div",{children:t&&l.jsx("div",{style:{display:"inline-block",padding:"2px 8px",background:"#10b981",color:"white",fontSize:11,fontWeight:600,borderRadius:4,letterSpacing:"0.05em"},children:t})}),l.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-200 transition-colors",children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsxs("div",{className:"overflow-y-auto p-6",style:{maxHeight:"calc(90vh - 80px)"},children:[d&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-red-500",children:d})}),s&&l.jsx(UN,{renderModel:s,variant:"full"}),o&&!s&&l.jsx(m6,{content:o,docTypeId:n}),!s&&!o&&!d&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500",children:"No content available"})})]})]})})}function m6({content:e,docTypeId:t}){if(!e)return l.jsx("p",{className:"text-gray-500",children:"No content available"});const n=e.project_name||e.title||e.name,r=e.description||e.summary||e.preliminary_summary;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{style:{padding:"12px 16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:8,fontSize:13,color:"#92400e"},children:["No view definition configured for ",l.jsx("strong",{children:t})," - displaying raw content"]}),(n||r)&&l.jsxs("div",{style:{padding:16,background:"#f8fafc",borderRadius:8,border:"1px solid #e2e8f0"},children:[n&&l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),r&&l.jsx("p",{className:"text-gray-700 text-sm",children:r})]}),l.jsx("div",{style:{background:"#f8fafc",borderRadius:8,padding:16,overflow:"auto"},children:l.jsx("pre",{style:{margin:0,fontSize:12,color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace",lineHeight:1.6},children:JSON.stringify(e,null,2)})})]})}function Zv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ku,T0;function g6(){if(T0)return ku;T0=1;function e(){this.__data__=[],this.size=0}return ku=e,ku}var Nu,I0;function ui(){if(I0)return Nu;I0=1;function e(t,n){return t===n||t!==t&&n!==n}return Nu=e,Nu}var Eu,M0;function pc(){if(M0)return Eu;M0=1;var e=ui();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return Eu=t,Eu}var Cu,A0;function v6(){if(A0)return Cu;A0=1;var e=pc(),t=Array.prototype,n=t.splice;function r(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var a=i.length-1;return o==a?i.pop():n.call(i,o,1),--this.size,!0}return Cu=r,Cu}var Ru,P0;function y6(){if(P0)return Ru;P0=1;var e=pc();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return Ru=t,Ru}var Tu,D0;function x6(){if(D0)return Tu;D0=1;var e=pc();function t(n){return e(this.__data__,n)>-1}return Tu=t,Tu}var Iu,O0;function b6(){if(O0)return Iu;O0=1;var e=pc();function t(n,r){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,r])):s[i][1]=r,this}return Iu=t,Iu}var Mu,L0;function mc(){if(L0)return Mu;L0=1;var e=g6(),t=v6(),n=y6(),r=x6(),s=b6();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,Mu=i,Mu}var Au,z0;function w6(){if(z0)return Au;z0=1;var e=mc();function t(){this.__data__=new e,this.size=0}return Au=t,Au}var Pu,q0;function _6(){if(q0)return Pu;q0=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Pu=e,Pu}var Du,$0;function S6(){if($0)return Du;$0=1;function e(t){return this.__data__.get(t)}return Du=e,Du}var Ou,F0;function j6(){if(F0)return Ou;F0=1;function e(t){return this.__data__.has(t)}return Ou=e,Ou}var Lu,B0;function GN(){if(B0)return Lu;B0=1;var e=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo;return Lu=e,Lu}var zu,H0;function yn(){if(H0)return zu;H0=1;var e=GN(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return zu=n,zu}var qu,W0;function di(){if(W0)return qu;W0=1;var e=yn(),t=e.Symbol;return qu=t,qu}var $u,V0;function k6(){if(V0)return $u;V0=1;var e=di(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function i(o){var a=n.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var d=r.call(o);return u&&(a?o[s]=c:delete o[s]),d}return $u=i,$u}var Fu,U0;function N6(){if(U0)return Fu;U0=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Fu=n,Fu}var Bu,G0;function ms(){if(G0)return Bu;G0=1;var e=di(),t=k6(),n=N6(),r="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?s:r:i&&i in Object(a)?t(a):n(a)}return Bu=o,Bu}var Hu,K0;function Jt(){if(K0)return Hu;K0=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Hu=e,Hu}var Wu,Y0;function Vo(){if(Y0)return Wu;Y0=1;var e=ms(),t=Jt(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(a){if(!t(a))return!1;var c=e(a);return c==r||c==s||c==n||c==i}return Wu=o,Wu}var Vu,X0;function E6(){if(X0)return Vu;X0=1;var e=yn(),t=e["__core-js_shared__"];return Vu=t,Vu}var Uu,Q0;function C6(){if(Q0)return Uu;Q0=1;var e=E6(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Uu=n,Uu}var Gu,Z0;function KN(){if(Z0)return Gu;Z0=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Gu=n,Gu}var Ku,J0;function R6(){if(J0)return Ku;J0=1;var e=Vo(),t=C6(),n=Jt(),r=KN(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,c=o.toString,u=a.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||t(h))return!1;var p=e(h)?d:i;return p.test(r(h))}return Ku=f,Ku}var Yu,e1;function T6(){if(e1)return Yu;e1=1;function e(t,n){return t==null?void 0:t[n]}return Yu=e,Yu}var Xu,t1;function gs(){if(t1)return Xu;t1=1;var e=R6(),t=T6();function n(r,s){var i=t(r,s);return e(i)?i:void 0}return Xu=n,Xu}var Qu,n1;function Jv(){if(n1)return Qu;n1=1;var e=gs(),t=yn(),n=e(t,"Map");return Qu=n,Qu}var Zu,r1;function gc(){if(r1)return Zu;r1=1;var e=gs(),t=e(Object,"create");return Zu=t,Zu}var Ju,s1;function I6(){if(s1)return Ju;s1=1;var e=gc();function t(){this.__data__=e?e(null):{},this.size=0}return Ju=t,Ju}var ed,i1;function M6(){if(i1)return ed;i1=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return ed=e,ed}var td,o1;function A6(){if(o1)return td;o1=1;var e=gc(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(i){var o=this.__data__;if(e){var a=o[i];return a===t?void 0:a}return r.call(o,i)?o[i]:void 0}return td=s,td}var nd,a1;function P6(){if(a1)return nd;a1=1;var e=gc(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return nd=r,nd}var rd,l1;function D6(){if(l1)return rd;l1=1;var e=gc(),t="__lodash_hash_undefined__";function n(r,s){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&s===void 0?t:s,this}return rd=n,rd}var sd,c1;function O6(){if(c1)return sd;c1=1;var e=I6(),t=M6(),n=A6(),r=P6(),s=D6();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,sd=i,sd}var id,u1;function L6(){if(u1)return id;u1=1;var e=O6(),t=mc(),n=Jv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return id=r,id}var od,d1;function z6(){if(d1)return od;d1=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return od=e,od}var ad,f1;function vc(){if(f1)return ad;f1=1;var e=z6();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return ad=t,ad}var ld,h1;function q6(){if(h1)return ld;h1=1;var e=vc();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return ld=t,ld}var cd,p1;function $6(){if(p1)return cd;p1=1;var e=vc();function t(n){return e(this,n).get(n)}return cd=t,cd}var ud,m1;function F6(){if(m1)return ud;m1=1;var e=vc();function t(n){return e(this,n).has(n)}return ud=t,ud}var dd,g1;function B6(){if(g1)return dd;g1=1;var e=vc();function t(n,r){var s=e(this,n),i=s.size;return s.set(n,r),this.size+=s.size==i?0:1,this}return dd=t,dd}var fd,v1;function ey(){if(v1)return fd;v1=1;var e=L6(),t=q6(),n=$6(),r=F6(),s=B6();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,fd=i,fd}var hd,y1;function H6(){if(y1)return hd;y1=1;var e=mc(),t=Jv(),n=ey(),r=200;function s(i,o){var a=this.__data__;if(a instanceof e){var c=a.__data__;if(!t||c.length<r-1)return c.push([i,o]),this.size=++a.size,this;a=this.__data__=new n(c)}return a.set(i,o),this.size=a.size,this}return hd=s,hd}var pd,x1;function yc(){if(x1)return pd;x1=1;var e=mc(),t=w6(),n=_6(),r=S6(),s=j6(),i=H6();function o(a){var c=this.__data__=new e(a);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=s,o.prototype.set=i,pd=o,pd}var md,b1;function ty(){if(b1)return md;b1=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s&&n(t[r],r,t)!==!1;);return t}return md=e,md}var gd,w1;function YN(){if(w1)return gd;w1=1;var e=gs(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return gd=t,gd}var vd,_1;function xc(){if(_1)return vd;_1=1;var e=YN();function t(n,r,s){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return vd=t,vd}var yd,S1;function bc(){if(S1)return yd;S1=1;var e=xc(),t=ui(),n=Object.prototype,r=n.hasOwnProperty;function s(i,o,a){var c=i[o];(!(r.call(i,o)&&t(c,a))||a===void 0&&!(o in i))&&e(i,o,a)}return yd=s,yd}var xd,j1;function Uo(){if(j1)return xd;j1=1;var e=bc(),t=xc();function n(r,s,i,o){var a=!i;i||(i={});for(var c=-1,u=s.length;++c<u;){var d=s[c],f=o?o(i[d],r[d],d,i,r):void 0;f===void 0&&(f=r[d]),a?t(i,d,f):e(i,d,f)}return i}return xd=n,xd}var bd,k1;function W6(){if(k1)return bd;k1=1;function e(t,n){for(var r=-1,s=Array(t);++r<t;)s[r]=n(r);return s}return bd=e,bd}var wd,N1;function Dn(){if(N1)return wd;N1=1;function e(t){return t!=null&&typeof t=="object"}return wd=e,wd}var _d,E1;function V6(){if(E1)return _d;E1=1;var e=ms(),t=Dn(),n="[object Arguments]";function r(s){return t(s)&&e(s)==n}return _d=r,_d}var Sd,C1;function Go(){if(C1)return Sd;C1=1;var e=V6(),t=Dn(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(o){return t(o)&&r.call(o,"callee")&&!s.call(o,"callee")};return Sd=i,Sd}var jd,R1;function He(){if(R1)return jd;R1=1;var e=Array.isArray;return jd=e,jd}var Hi={exports:{}},kd,T1;function U6(){if(T1)return kd;T1=1;function e(){return!1}return kd=e,kd}Hi.exports;var I1;function fi(){return I1||(I1=1,function(e,t){var n=yn(),r=U6(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,a=o?n.Buffer:void 0,c=a?a.isBuffer:void 0,u=c||r;e.exports=u}(Hi,Hi.exports)),Hi.exports}var Nd,M1;function wc(){if(M1)return Nd;M1=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,s){var i=typeof r;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return Nd=n,Nd}var Ed,A1;function ny(){if(A1)return Ed;A1=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Ed=t,Ed}var Cd,P1;function G6(){if(P1)return Cd;P1=1;var e=ms(),t=ny(),n=Dn(),r="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",a="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",x="[object String]",v="[object WeakMap]",_="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",j="[object Uint8Array]",N="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]",R={};R[y]=R[b]=R[w]=R[S]=R[k]=R[j]=R[N]=R[C]=R[T]=!0,R[r]=R[s]=R[_]=R[i]=R[g]=R[o]=R[a]=R[c]=R[u]=R[d]=R[f]=R[h]=R[p]=R[x]=R[v]=!1;function D(z){return n(z)&&t(z.length)&&!!R[e(z)]}return Cd=D,Cd}var Rd,D1;function _c(){if(D1)return Rd;D1=1;function e(t){return function(n){return t(n)}}return Rd=e,Rd}var Wi={exports:{}};Wi.exports;var O1;function ry(){return O1||(O1=1,function(e,t){var n=GN(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(Wi,Wi.exports)),Wi.exports}var Td,L1;function Ko(){if(L1)return Td;L1=1;var e=G6(),t=_c(),n=ry(),r=n&&n.isTypedArray,s=r?t(r):e;return Td=s,Td}var Id,z1;function XN(){if(z1)return Id;z1=1;var e=W6(),t=Go(),n=He(),r=fi(),s=wc(),i=Ko(),o=Object.prototype,a=o.hasOwnProperty;function c(u,d){var f=n(u),h=!f&&t(u),p=!f&&!h&&r(u),x=!f&&!h&&!p&&i(u),v=f||h||p||x,_=v?e(u.length,String):[],g=_.length;for(var y in u)(d||a.call(u,y))&&!(v&&(y=="length"||p&&(y=="offset"||y=="parent")||x&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||s(y,g)))&&_.push(y);return _}return Id=c,Id}var Md,q1;function Sc(){if(q1)return Md;q1=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||e;return n===s}return Md=t,Md}var Ad,$1;function QN(){if($1)return Ad;$1=1;function e(t,n){return function(r){return t(n(r))}}return Ad=e,Ad}var Pd,F1;function K6(){if(F1)return Pd;F1=1;var e=QN(),t=e(Object.keys,Object);return Pd=t,Pd}var Dd,B1;function sy(){if(B1)return Dd;B1=1;var e=Sc(),t=K6(),n=Object.prototype,r=n.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var a in Object(i))r.call(i,a)&&a!="constructor"&&o.push(a);return o}return Dd=s,Dd}var Od,H1;function rr(){if(H1)return Od;H1=1;var e=Vo(),t=ny();function n(r){return r!=null&&t(r.length)&&!e(r)}return Od=n,Od}var Ld,W1;function qr(){if(W1)return Ld;W1=1;var e=XN(),t=sy(),n=rr();function r(s){return n(s)?e(s):t(s)}return Ld=r,Ld}var zd,V1;function Y6(){if(V1)return zd;V1=1;var e=Uo(),t=qr();function n(r,s){return r&&e(s,t(s),r)}return zd=n,zd}var qd,U1;function X6(){if(U1)return qd;U1=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return qd=e,qd}var $d,G1;function Q6(){if(G1)return $d;G1=1;var e=Jt(),t=Sc(),n=X6(),r=Object.prototype,s=r.hasOwnProperty;function i(o){if(!e(o))return n(o);var a=t(o),c=[];for(var u in o)u=="constructor"&&(a||!s.call(o,u))||c.push(u);return c}return $d=i,$d}var Fd,K1;function vs(){if(K1)return Fd;K1=1;var e=XN(),t=Q6(),n=rr();function r(s){return n(s)?e(s,!0):t(s)}return Fd=r,Fd}var Bd,Y1;function Z6(){if(Y1)return Bd;Y1=1;var e=Uo(),t=vs();function n(r,s){return r&&e(s,t(s),r)}return Bd=n,Bd}var Vi={exports:{}};Vi.exports;var X1;function ZN(){return X1||(X1=1,function(e,t){var n=yn(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===r,o=i?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var f=u.length,h=a?a(f):new u.constructor(f);return u.copy(h),h}e.exports=c}(Vi,Vi.exports)),Vi.exports}var Hd,Q1;function JN(){if(Q1)return Hd;Q1=1;function e(t,n){var r=-1,s=t.length;for(n||(n=Array(s));++r<s;)n[r]=t[r];return n}return Hd=e,Hd}var Wd,Z1;function eE(){if(Z1)return Wd;Z1=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,i=0,o=[];++r<s;){var a=t[r];n(a,r,t)&&(o[i++]=a)}return o}return Wd=e,Wd}var Vd,J1;function tE(){if(J1)return Vd;J1=1;function e(){return[]}return Vd=e,Vd}var Ud,eb;function iy(){if(eb)return Ud;eb=1;var e=eE(),t=tE(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(a){return r.call(o,a)}))}:t;return Ud=i,Ud}var Gd,tb;function J6(){if(tb)return Gd;tb=1;var e=Uo(),t=iy();function n(r,s){return e(r,t(r),s)}return Gd=n,Gd}var Kd,nb;function oy(){if(nb)return Kd;nb=1;function e(t,n){for(var r=-1,s=n.length,i=t.length;++r<s;)t[i+r]=n[r];return t}return Kd=e,Kd}var Yd,rb;function jc(){if(rb)return Yd;rb=1;var e=QN(),t=e(Object.getPrototypeOf,Object);return Yd=t,Yd}var Xd,sb;function nE(){if(sb)return Xd;sb=1;var e=oy(),t=jc(),n=iy(),r=tE(),s=Object.getOwnPropertySymbols,i=s?function(o){for(var a=[];o;)e(a,n(o)),o=t(o);return a}:r;return Xd=i,Xd}var Qd,ib;function eD(){if(ib)return Qd;ib=1;var e=Uo(),t=nE();function n(r,s){return e(r,t(r),s)}return Qd=n,Qd}var Zd,ob;function rE(){if(ob)return Zd;ob=1;var e=oy(),t=He();function n(r,s,i){var o=s(r);return t(r)?o:e(o,i(r))}return Zd=n,Zd}var Jd,ab;function sE(){if(ab)return Jd;ab=1;var e=rE(),t=iy(),n=qr();function r(s){return e(s,n,t)}return Jd=r,Jd}var ef,lb;function tD(){if(lb)return ef;lb=1;var e=rE(),t=nE(),n=vs();function r(s){return e(s,n,t)}return ef=r,ef}var tf,cb;function nD(){if(cb)return tf;cb=1;var e=gs(),t=yn(),n=e(t,"DataView");return tf=n,tf}var nf,ub;function rD(){if(ub)return nf;ub=1;var e=gs(),t=yn(),n=e(t,"Promise");return nf=n,nf}var rf,db;function iE(){if(db)return rf;db=1;var e=gs(),t=yn(),n=e(t,"Set");return rf=n,rf}var sf,fb;function sD(){if(fb)return sf;fb=1;var e=gs(),t=yn(),n=e(t,"WeakMap");return sf=n,sf}var of,hb;function hi(){if(hb)return of;hb=1;var e=nD(),t=Jv(),n=rD(),r=iE(),s=sD(),i=ms(),o=KN(),a="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",p=o(e),x=o(t),v=o(n),_=o(r),g=o(s),y=i;return(e&&y(new e(new ArrayBuffer(1)))!=h||t&&y(new t)!=a||n&&y(n.resolve())!=u||r&&y(new r)!=d||s&&y(new s)!=f)&&(y=function(b){var w=i(b),S=w==c?b.constructor:void 0,k=S?o(S):"";if(k)switch(k){case p:return h;case x:return a;case v:return u;case _:return d;case g:return f}return w}),of=y,of}var af,pb;function iD(){if(pb)return af;pb=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=r.length,i=new r.constructor(s);return s&&typeof r[0]=="string"&&t.call(r,"index")&&(i.index=r.index,i.input=r.input),i}return af=n,af}var lf,mb;function oE(){if(mb)return lf;mb=1;var e=yn(),t=e.Uint8Array;return lf=t,lf}var cf,gb;function ay(){if(gb)return cf;gb=1;var e=oE();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return cf=t,cf}var uf,vb;function oD(){if(vb)return uf;vb=1;var e=ay();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return uf=t,uf}var df,yb;function aD(){if(yb)return df;yb=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return df=t,df}var ff,xb;function lD(){if(xb)return ff;xb=1;var e=di(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(s){return n?Object(n.call(s)):{}}return ff=r,ff}var hf,bb;function aE(){if(bb)return hf;bb=1;var e=ay();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return hf=t,hf}var pf,wb;function cD(){if(wb)return pf;wb=1;var e=ay(),t=oD(),n=aD(),r=lD(),s=aE(),i="[object Boolean]",o="[object Date]",a="[object Map]",c="[object Number]",u="[object RegExp]",d="[object Set]",f="[object String]",h="[object Symbol]",p="[object ArrayBuffer]",x="[object DataView]",v="[object Float32Array]",_="[object Float64Array]",g="[object Int8Array]",y="[object Int16Array]",b="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",k="[object Uint16Array]",j="[object Uint32Array]";function N(C,T,R){var D=C.constructor;switch(T){case p:return e(C);case i:case o:return new D(+C);case x:return t(C,R);case v:case _:case g:case y:case b:case w:case S:case k:case j:return s(C,R);case a:return new D;case c:case f:return new D(C);case u:return n(C);case d:return new D;case h:return r(C)}}return pf=N,pf}var mf,_b;function lE(){if(_b)return mf;_b=1;var e=Jt(),t=Object.create,n=function(){function r(){}return function(s){if(!e(s))return{};if(t)return t(s);r.prototype=s;var i=new r;return r.prototype=void 0,i}}();return mf=n,mf}var gf,Sb;function cE(){if(Sb)return gf;Sb=1;var e=lE(),t=jc(),n=Sc();function r(s){return typeof s.constructor=="function"&&!n(s)?e(t(s)):{}}return gf=r,gf}var vf,jb;function uD(){if(jb)return vf;jb=1;var e=hi(),t=Dn(),n="[object Map]";function r(s){return t(s)&&e(s)==n}return vf=r,vf}var yf,kb;function dD(){if(kb)return yf;kb=1;var e=uD(),t=_c(),n=ry(),r=n&&n.isMap,s=r?t(r):e;return yf=s,yf}var xf,Nb;function fD(){if(Nb)return xf;Nb=1;var e=hi(),t=Dn(),n="[object Set]";function r(s){return t(s)&&e(s)==n}return xf=r,xf}var bf,Eb;function hD(){if(Eb)return bf;Eb=1;var e=fD(),t=_c(),n=ry(),r=n&&n.isSet,s=r?t(r):e;return bf=s,bf}var wf,Cb;function uE(){if(Cb)return wf;Cb=1;var e=yc(),t=ty(),n=bc(),r=Y6(),s=Z6(),i=ZN(),o=JN(),a=J6(),c=eD(),u=sE(),d=tD(),f=hi(),h=iD(),p=cD(),x=cE(),v=He(),_=fi(),g=dD(),y=Jt(),b=hD(),w=qr(),S=vs(),k=1,j=2,N=4,C="[object Arguments]",T="[object Array]",R="[object Boolean]",D="[object Date]",z="[object Error]",E="[object Function]",O="[object GeneratorFunction]",A="[object Map]",$="[object Number]",P="[object Object]",I="[object RegExp]",L="[object Set]",M="[object String]",q="[object Symbol]",F="[object WeakMap]",W="[object ArrayBuffer]",G="[object DataView]",Z="[object Float32Array]",Q="[object Float64Array]",te="[object Int8Array]",ne="[object Int16Array]",X="[object Int32Array]",ve="[object Uint8Array]",ae="[object Uint8ClampedArray]",me="[object Uint16Array]",de="[object Uint32Array]",U={};U[C]=U[T]=U[W]=U[G]=U[R]=U[D]=U[Z]=U[Q]=U[te]=U[ne]=U[X]=U[A]=U[$]=U[P]=U[I]=U[L]=U[M]=U[q]=U[ve]=U[ae]=U[me]=U[de]=!0,U[z]=U[E]=U[F]=!1;function re(Y,K,H,pe,be,ye){var we,je=K&k,Rt=K&j,tn=K&N;if(H&&(we=be?H(Y,pe,be,ye):H(Y)),we!==void 0)return we;if(!y(Y))return Y;var tt=v(Y);if(tt){if(we=h(Y),!je)return o(Y,we)}else{var Fe=f(Y),ft=Fe==E||Fe==O;if(_(Y))return i(Y,je);if(Fe==P||Fe==C||ft&&!be){if(we=Rt||ft?{}:x(Y),!je)return Rt?c(Y,s(we,Y)):a(Y,r(we,Y))}else{if(!U[Fe])return be?Y:{};we=p(Y,Fe,je)}}ye||(ye=new e);var nn=ye.get(Y);if(nn)return nn;ye.set(Y,we),b(Y)?Y.forEach(function(Ye){we.add(re(Ye,K,H,Ye,Y,ye))}):g(Y)&&Y.forEach(function(Ye,rt){we.set(rt,re(Ye,K,H,rt,Y,ye))});var _e=tn?Rt?d:u:Rt?S:w,nt=tt?void 0:_e(Y);return t(nt||Y,function(Ye,rt){nt&&(rt=Ye,Ye=Y[rt]),n(we,rt,re(Ye,K,H,rt,Y,ye))}),we}return wf=re,wf}var _f,Rb;function pD(){if(Rb)return _f;Rb=1;var e=uE(),t=4;function n(r){return e(r,t)}return _f=n,_f}var Sf,Tb;function ly(){if(Tb)return Sf;Tb=1;function e(t){return function(){return t}}return Sf=e,Sf}var jf,Ib;function mD(){if(Ib)return jf;Ib=1;function e(t){return function(n,r,s){for(var i=-1,o=Object(n),a=s(n),c=a.length;c--;){var u=a[t?c:++i];if(r(o[u],u,o)===!1)break}return n}}return jf=e,jf}var kf,Mb;function cy(){if(Mb)return kf;Mb=1;var e=mD(),t=e();return kf=t,kf}var Nf,Ab;function uy(){if(Ab)return Nf;Ab=1;var e=cy(),t=qr();function n(r,s){return r&&e(r,s,t)}return Nf=n,Nf}var Ef,Pb;function gD(){if(Pb)return Ef;Pb=1;var e=rr();function t(n,r){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var o=s.length,a=r?o:-1,c=Object(s);(r?a--:++a<o)&&i(c[a],a,c)!==!1;);return s}}return Ef=t,Ef}var Cf,Db;function kc(){if(Db)return Cf;Db=1;var e=uy(),t=gD(),n=t(e);return Cf=n,Cf}var Rf,Ob;function ys(){if(Ob)return Rf;Ob=1;function e(t){return t}return Rf=e,Rf}var Tf,Lb;function dE(){if(Lb)return Tf;Lb=1;var e=ys();function t(n){return typeof n=="function"?n:e}return Tf=t,Tf}var If,zb;function fE(){if(zb)return If;zb=1;var e=ty(),t=kc(),n=dE(),r=He();function s(i,o){var a=r(i)?e:t;return a(i,n(o))}return If=s,If}var Mf,qb;function hE(){return qb||(qb=1,Mf=fE()),Mf}var Af,$b;function vD(){if($b)return Af;$b=1;var e=kc();function t(n,r){var s=[];return e(n,function(i,o,a){r(i,o,a)&&s.push(i)}),s}return Af=t,Af}var Pf,Fb;function yD(){if(Fb)return Pf;Fb=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Pf=t,Pf}var Df,Bb;function xD(){if(Bb)return Df;Bb=1;function e(t){return this.__data__.has(t)}return Df=e,Df}var Of,Hb;function pE(){if(Hb)return Of;Hb=1;var e=ey(),t=yD(),n=xD();function r(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Of=r,Of}var Lf,Wb;function bD(){if(Wb)return Lf;Wb=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(t[r],r,t))return!0;return!1}return Lf=e,Lf}var zf,Vb;function mE(){if(Vb)return zf;Vb=1;function e(t,n){return t.has(n)}return zf=e,zf}var qf,Ub;function gE(){if(Ub)return qf;Ub=1;var e=pE(),t=bD(),n=mE(),r=1,s=2;function i(o,a,c,u,d,f){var h=c&r,p=o.length,x=a.length;if(p!=x&&!(h&&x>p))return!1;var v=f.get(o),_=f.get(a);if(v&&_)return v==a&&_==o;var g=-1,y=!0,b=c&s?new e:void 0;for(f.set(o,a),f.set(a,o);++g<p;){var w=o[g],S=a[g];if(u)var k=h?u(S,w,g,a,o,f):u(w,S,g,o,a,f);if(k!==void 0){if(k)continue;y=!1;break}if(b){if(!t(a,function(j,N){if(!n(b,N)&&(w===j||d(w,j,c,u,f)))return b.push(N)})){y=!1;break}}else if(!(w===S||d(w,S,c,u,f))){y=!1;break}}return f.delete(o),f.delete(a),y}return qf=i,qf}var $f,Gb;function wD(){if(Gb)return $f;Gb=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s,i){r[++n]=[i,s]}),r}return $f=e,$f}var Ff,Kb;function dy(){if(Kb)return Ff;Kb=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s){r[++n]=s}),r}return Ff=e,Ff}var Bf,Yb;function _D(){if(Yb)return Bf;Yb=1;var e=di(),t=oE(),n=ui(),r=gE(),s=wD(),i=dy(),o=1,a=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",x="[object Set]",v="[object String]",_="[object Symbol]",g="[object ArrayBuffer]",y="[object DataView]",b=e?e.prototype:void 0,w=b?b.valueOf:void 0;function S(k,j,N,C,T,R,D){switch(N){case y:if(k.byteLength!=j.byteLength||k.byteOffset!=j.byteOffset)return!1;k=k.buffer,j=j.buffer;case g:return!(k.byteLength!=j.byteLength||!R(new t(k),new t(j)));case c:case u:case h:return n(+k,+j);case d:return k.name==j.name&&k.message==j.message;case p:case v:return k==j+"";case f:var z=s;case x:var E=C&o;if(z||(z=i),k.size!=j.size&&!E)return!1;var O=D.get(k);if(O)return O==j;C|=a,D.set(k,j);var A=r(z(k),z(j),C,T,R,D);return D.delete(k),A;case _:if(w)return w.call(k)==w.call(j)}return!1}return Bf=S,Bf}var Hf,Xb;function SD(){if(Xb)return Hf;Xb=1;var e=sE(),t=1,n=Object.prototype,r=n.hasOwnProperty;function s(i,o,a,c,u,d){var f=a&t,h=e(i),p=h.length,x=e(o),v=x.length;if(p!=v&&!f)return!1;for(var _=p;_--;){var g=h[_];if(!(f?g in o:r.call(o,g)))return!1}var y=d.get(i),b=d.get(o);if(y&&b)return y==o&&b==i;var w=!0;d.set(i,o),d.set(o,i);for(var S=f;++_<p;){g=h[_];var k=i[g],j=o[g];if(c)var N=f?c(j,k,g,o,i,d):c(k,j,g,i,o,d);if(!(N===void 0?k===j||u(k,j,a,c,d):N)){w=!1;break}S||(S=g=="constructor")}if(w&&!S){var C=i.constructor,T=o.constructor;C!=T&&"constructor"in i&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof T=="function"&&T instanceof T)&&(w=!1)}return d.delete(i),d.delete(o),w}return Hf=s,Hf}var Wf,Qb;function jD(){if(Qb)return Wf;Qb=1;var e=yc(),t=gE(),n=_D(),r=SD(),s=hi(),i=He(),o=fi(),a=Ko(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function x(v,_,g,y,b,w){var S=i(v),k=i(_),j=S?d:s(v),N=k?d:s(_);j=j==u?f:j,N=N==u?f:N;var C=j==f,T=N==f,R=j==N;if(R&&o(v)){if(!o(_))return!1;S=!0,C=!1}if(R&&!C)return w||(w=new e),S||a(v)?t(v,_,g,y,b,w):n(v,_,j,g,y,b,w);if(!(g&c)){var D=C&&p.call(v,"__wrapped__"),z=T&&p.call(_,"__wrapped__");if(D||z){var E=D?v.value():v,O=z?_.value():_;return w||(w=new e),b(E,O,g,y,w)}}return R?(w||(w=new e),r(v,_,g,y,b,w)):!1}return Wf=x,Wf}var Vf,Zb;function vE(){if(Zb)return Vf;Zb=1;var e=jD(),t=Dn();function n(r,s,i,o,a){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:e(r,s,i,o,n,a)}return Vf=n,Vf}var Uf,Jb;function kD(){if(Jb)return Uf;Jb=1;var e=yc(),t=vE(),n=1,r=2;function s(i,o,a,c){var u=a.length,d=u,f=!c;if(i==null)return!d;for(i=Object(i);u--;){var h=a[u];if(f&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++u<d;){h=a[u];var p=h[0],x=i[p],v=h[1];if(f&&h[2]){if(x===void 0&&!(p in i))return!1}else{var _=new e;if(c)var g=c(x,v,p,i,o,_);if(!(g===void 0?t(v,x,n|r,c,_):g))return!1}}return!0}return Uf=s,Uf}var Gf,ew;function yE(){if(ew)return Gf;ew=1;var e=Jt();function t(n){return n===n&&!e(n)}return Gf=t,Gf}var Kf,tw;function ND(){if(tw)return Kf;tw=1;var e=yE(),t=qr();function n(r){for(var s=t(r),i=s.length;i--;){var o=s[i],a=r[o];s[i]=[o,a,e(a)]}return s}return Kf=n,Kf}var Yf,nw;function xE(){if(nw)return Yf;nw=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Yf=e,Yf}var Xf,rw;function ED(){if(rw)return Xf;rw=1;var e=kD(),t=ND(),n=xE();function r(s){var i=t(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Xf=r,Xf}var Qf,sw;function pi(){if(sw)return Qf;sw=1;var e=ms(),t=Dn(),n="[object Symbol]";function r(s){return typeof s=="symbol"||t(s)&&e(s)==n}return Qf=r,Qf}var Zf,iw;function fy(){if(iw)return Zf;iw=1;var e=He(),t=pi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,o){if(e(i))return!1;var a=typeof i;return a=="number"||a=="symbol"||a=="boolean"||i==null||t(i)?!0:r.test(i)||!n.test(i)||o!=null&&i in Object(o)}return Zf=s,Zf}var Jf,ow;function CD(){if(ow)return Jf;ow=1;var e=ey(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,a=s?s.apply(this,o):o[0],c=i.cache;if(c.has(a))return c.get(a);var u=r.apply(this,o);return i.cache=c.set(a,u)||c,u};return i.cache=new(n.Cache||e),i}return n.Cache=e,Jf=n,Jf}var eh,aw;function RD(){if(aw)return eh;aw=1;var e=CD(),t=500;function n(r){var s=e(r,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return eh=n,eh}var th,lw;function TD(){if(lw)return th;lw=1;var e=RD(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,a,c,u){i.push(c?u.replace(n,"$1"):a||o)}),i});return th=r,th}var nh,cw;function Nc(){if(cw)return nh;cw=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,i=Array(s);++r<s;)i[r]=n(t[r],r,t);return i}return nh=e,nh}var rh,uw;function ID(){if(uw)return rh;uw=1;var e=di(),t=Nc(),n=He(),r=pi(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(a){if(typeof a=="string")return a;if(n(a))return t(a,o)+"";if(r(a))return i?i.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return rh=o,rh}var sh,dw;function bE(){if(dw)return sh;dw=1;var e=ID();function t(n){return n==null?"":e(n)}return sh=t,sh}var ih,fw;function Ec(){if(fw)return ih;fw=1;var e=He(),t=fy(),n=TD(),r=bE();function s(i,o){return e(i)?i:t(i,o)?[i]:n(r(i))}return ih=s,ih}var oh,hw;function Yo(){if(hw)return oh;hw=1;var e=pi();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return oh=t,oh}var ah,pw;function Cc(){if(pw)return ah;pw=1;var e=Ec(),t=Yo();function n(r,s){s=e(s,r);for(var i=0,o=s.length;r!=null&&i<o;)r=r[t(s[i++])];return i&&i==o?r:void 0}return ah=n,ah}var lh,mw;function MD(){if(mw)return lh;mw=1;var e=Cc();function t(n,r,s){var i=n==null?void 0:e(n,r);return i===void 0?s:i}return lh=t,lh}var ch,gw;function AD(){if(gw)return ch;gw=1;function e(t,n){return t!=null&&n in Object(t)}return ch=e,ch}var uh,vw;function wE(){if(vw)return uh;vw=1;var e=Ec(),t=Go(),n=He(),r=wc(),s=ny(),i=Yo();function o(a,c,u){c=e(c,a);for(var d=-1,f=c.length,h=!1;++d<f;){var p=i(c[d]);if(!(h=a!=null&&u(a,p)))break;a=a[p]}return h||++d!=f?h:(f=a==null?0:a.length,!!f&&s(f)&&r(p,f)&&(n(a)||t(a)))}return uh=o,uh}var dh,yw;function _E(){if(yw)return dh;yw=1;var e=AD(),t=wE();function n(r,s){return r!=null&&t(r,s,e)}return dh=n,dh}var fh,xw;function PD(){if(xw)return fh;xw=1;var e=vE(),t=MD(),n=_E(),r=fy(),s=yE(),i=xE(),o=Yo(),a=1,c=2;function u(d,f){return r(d)&&s(f)?i(o(d),f):function(h){var p=t(h,d);return p===void 0&&p===f?n(h,d):e(f,p,a|c)}}return fh=u,fh}var hh,bw;function SE(){if(bw)return hh;bw=1;function e(t){return function(n){return n==null?void 0:n[t]}}return hh=e,hh}var ph,ww;function DD(){if(ww)return ph;ww=1;var e=Cc();function t(n){return function(r){return e(r,n)}}return ph=t,ph}var mh,_w;function OD(){if(_w)return mh;_w=1;var e=SE(),t=DD(),n=fy(),r=Yo();function s(i){return n(i)?e(r(i)):t(i)}return mh=s,mh}var gh,Sw;function sr(){if(Sw)return gh;Sw=1;var e=ED(),t=PD(),n=ys(),r=He(),s=OD();function i(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):s(o)}return gh=i,gh}var vh,jw;function jE(){if(jw)return vh;jw=1;var e=eE(),t=vD(),n=sr(),r=He();function s(i,o){var a=r(i)?e:t;return a(i,n(o,3))}return vh=s,vh}var yh,kw;function LD(){if(kw)return yh;kw=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,s){return r!=null&&t.call(r,s)}return yh=n,yh}var xh,Nw;function kE(){if(Nw)return xh;Nw=1;var e=LD(),t=wE();function n(r,s){return r!=null&&t(r,s,e)}return xh=n,xh}var bh,Ew;function zD(){if(Ew)return bh;Ew=1;var e=sy(),t=hi(),n=Go(),r=He(),s=rr(),i=fi(),o=Sc(),a=Ko(),c="[object Map]",u="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function h(p){if(p==null)return!0;if(s(p)&&(r(p)||typeof p=="string"||typeof p.splice=="function"||i(p)||a(p)||n(p)))return!p.length;var x=t(p);if(x==c||x==u)return!p.size;if(o(p))return!e(p).length;for(var v in p)if(f.call(p,v))return!1;return!0}return bh=h,bh}var wh,Cw;function NE(){if(Cw)return wh;Cw=1;function e(t){return t===void 0}return wh=e,wh}var _h,Rw;function EE(){if(Rw)return _h;Rw=1;var e=kc(),t=rr();function n(r,s){var i=-1,o=t(r)?Array(r.length):[];return e(r,function(a,c,u){o[++i]=s(a,c,u)}),o}return _h=n,_h}var Sh,Tw;function CE(){if(Tw)return Sh;Tw=1;var e=Nc(),t=sr(),n=EE(),r=He();function s(i,o){var a=r(i)?e:n;return a(i,t(o,3))}return Sh=s,Sh}var jh,Iw;function qD(){if(Iw)return jh;Iw=1;function e(t,n,r,s){var i=-1,o=t==null?0:t.length;for(s&&o&&(r=t[++i]);++i<o;)r=n(r,t[i],i,t);return r}return jh=e,jh}var kh,Mw;function $D(){if(Mw)return kh;Mw=1;function e(t,n,r,s,i){return i(t,function(o,a,c){r=s?(s=!1,o):n(r,o,a,c)}),r}return kh=e,kh}var Nh,Aw;function RE(){if(Aw)return Nh;Aw=1;var e=qD(),t=kc(),n=sr(),r=$D(),s=He();function i(o,a,c){var u=s(o)?e:r,d=arguments.length<3;return u(o,n(a,4),c,d,t)}return Nh=i,Nh}var Eh,Pw;function FD(){if(Pw)return Eh;Pw=1;var e=ms(),t=He(),n=Dn(),r="[object String]";function s(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==r}return Eh=s,Eh}var Ch,Dw;function BD(){if(Dw)return Ch;Dw=1;var e=SE(),t=e("length");return Ch=t,Ch}var Rh,Ow;function HD(){if(Ow)return Rh;Ow=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=t+n+r,i="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+s+i+"]");function c(u){return a.test(u)}return Rh=c,Rh}var Th,Lw;function WD(){if(Lw)return Th;Lw=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=t+n+r,i="\\ufe0e\\ufe0f",o="["+e+"]",a="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+a+"|"+c+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",x=u+"?",v="["+i+"]?",_="(?:"+p+"(?:"+[d,f,h].join("|")+")"+v+x+")*",g=v+x+_,y="(?:"+[d+a+"?",a,f,h,o].join("|")+")",b=RegExp(c+"(?="+c+")|"+y+g,"g");function w(S){for(var k=b.lastIndex=0;b.test(S);)++k;return k}return Th=w,Th}var Ih,zw;function VD(){if(zw)return Ih;zw=1;var e=BD(),t=HD(),n=WD();function r(s){return t(s)?n(s):e(s)}return Ih=r,Ih}var Mh,qw;function UD(){if(qw)return Mh;qw=1;var e=sy(),t=hi(),n=rr(),r=FD(),s=VD(),i="[object Map]",o="[object Set]";function a(c){if(c==null)return 0;if(n(c))return r(c)?s(c):c.length;var u=t(c);return u==i||u==o?c.size:e(c).length}return Mh=a,Mh}var Ah,$w;function GD(){if($w)return Ah;$w=1;var e=ty(),t=lE(),n=uy(),r=sr(),s=jc(),i=He(),o=fi(),a=Vo(),c=Jt(),u=Ko();function d(f,h,p){var x=i(f),v=x||o(f)||u(f);if(h=r(h,4),p==null){var _=f&&f.constructor;v?p=x?new _:[]:c(f)?p=a(_)?t(s(f)):{}:p={}}return(v?e:n)(f,function(g,y,b){return h(p,g,y,b)}),p}return Ah=d,Ah}var Ph,Fw;function KD(){if(Fw)return Ph;Fw=1;var e=di(),t=Go(),n=He(),r=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||t(i)||!!(r&&i&&i[r])}return Ph=s,Ph}var Dh,Bw;function hy(){if(Bw)return Dh;Bw=1;var e=oy(),t=KD();function n(r,s,i,o,a){var c=-1,u=r.length;for(i||(i=t),a||(a=[]);++c<u;){var d=r[c];s>0&&i(d)?s>1?n(d,s-1,i,o,a):e(a,d):o||(a[a.length]=d)}return a}return Dh=n,Dh}var Oh,Hw;function YD(){if(Hw)return Oh;Hw=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return Oh=e,Oh}var Lh,Ww;function TE(){if(Ww)return Lh;Ww=1;var e=YD(),t=Math.max;function n(r,s,i){return s=t(s===void 0?r.length-1:s,0),function(){for(var o=arguments,a=-1,c=t(o.length-s,0),u=Array(c);++a<c;)u[a]=o[s+a];a=-1;for(var d=Array(s+1);++a<s;)d[a]=o[a];return d[s]=i(u),e(r,this,d)}}return Lh=n,Lh}var zh,Vw;function XD(){if(Vw)return zh;Vw=1;var e=ly(),t=YN(),n=ys(),r=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return zh=r,zh}var qh,Uw;function QD(){if(Uw)return qh;Uw=1;var e=800,t=16,n=Date.now;function r(s){var i=0,o=0;return function(){var a=n(),c=t-(a-o);if(o=a,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return qh=r,qh}var $h,Gw;function IE(){if(Gw)return $h;Gw=1;var e=XD(),t=QD(),n=t(e);return $h=n,$h}var Fh,Kw;function Rc(){if(Kw)return Fh;Kw=1;var e=ys(),t=TE(),n=IE();function r(s,i){return n(t(s,i,e),s+"")}return Fh=r,Fh}var Bh,Yw;function ME(){if(Yw)return Bh;Yw=1;function e(t,n,r,s){for(var i=t.length,o=r+(s?1:-1);s?o--:++o<i;)if(n(t[o],o,t))return o;return-1}return Bh=e,Bh}var Hh,Xw;function ZD(){if(Xw)return Hh;Xw=1;function e(t){return t!==t}return Hh=e,Hh}var Wh,Qw;function JD(){if(Qw)return Wh;Qw=1;function e(t,n,r){for(var s=r-1,i=t.length;++s<i;)if(t[s]===n)return s;return-1}return Wh=e,Wh}var Vh,Zw;function eO(){if(Zw)return Vh;Zw=1;var e=ME(),t=ZD(),n=JD();function r(s,i,o){return i===i?n(s,i,o):e(s,t,o)}return Vh=r,Vh}var Uh,Jw;function tO(){if(Jw)return Uh;Jw=1;var e=eO();function t(n,r){var s=n==null?0:n.length;return!!s&&e(n,r,0)>-1}return Uh=t,Uh}var Gh,e_;function nO(){if(e_)return Gh;e_=1;function e(t,n,r){for(var s=-1,i=t==null?0:t.length;++s<i;)if(r(n,t[s]))return!0;return!1}return Gh=e,Gh}var Kh,t_;function rO(){if(t_)return Kh;t_=1;function e(){}return Kh=e,Kh}var Yh,n_;function sO(){if(n_)return Yh;n_=1;var e=iE(),t=rO(),n=dy(),r=1/0,s=e&&1/n(new e([,-0]))[1]==r?function(i){return new e(i)}:t;return Yh=s,Yh}var Xh,r_;function iO(){if(r_)return Xh;r_=1;var e=pE(),t=tO(),n=nO(),r=mE(),s=sO(),i=dy(),o=200;function a(c,u,d){var f=-1,h=t,p=c.length,x=!0,v=[],_=v;if(d)x=!1,h=n;else if(p>=o){var g=u?null:s(c);if(g)return i(g);x=!1,h=r,_=new e}else _=u?[]:v;e:for(;++f<p;){var y=c[f],b=u?u(y):y;if(y=d||y!==0?y:0,x&&b===b){for(var w=_.length;w--;)if(_[w]===b)continue e;u&&_.push(b),v.push(y)}else h(_,b,d)||(_!==v&&_.push(b),v.push(y))}return v}return Xh=a,Xh}var Qh,s_;function AE(){if(s_)return Qh;s_=1;var e=rr(),t=Dn();function n(r){return t(r)&&e(r)}return Qh=n,Qh}var Zh,i_;function oO(){if(i_)return Zh;i_=1;var e=hy(),t=Rc(),n=iO(),r=AE(),s=t(function(i){return n(e(i,1,r,!0))});return Zh=s,Zh}var Jh,o_;function aO(){if(o_)return Jh;o_=1;var e=Nc();function t(n,r){return e(r,function(s){return n[s]})}return Jh=t,Jh}var ep,a_;function PE(){if(a_)return ep;a_=1;var e=aO(),t=qr();function n(r){return r==null?[]:e(r,t(r))}return ep=n,ep}var tp,l_;function en(){if(l_)return tp;l_=1;var e;if(typeof Zv=="function")try{e={clone:pD(),constant:ly(),each:hE(),filter:jE(),has:kE(),isArray:He(),isEmpty:zD(),isFunction:Vo(),isUndefined:NE(),keys:qr(),map:CE(),reduce:RE(),size:UD(),transform:GD(),union:oO(),values:PE()}}catch{}return e||(e=window._),tp=e,tp}var np,c_;function py(){if(c_)return np;c_=1;var e=en();np=s;var t="\0",n="\0",r="";function s(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(d){return this._label=d,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return e.keys(this._nodes)},s.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._in[f])})},s.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._out[f])})},s.prototype.setNodes=function(d,f){var h=arguments,p=this;return e.each(d,function(x){h.length>1?p.setNode(x,f):p.setNode(x)}),this},s.prototype.setNode=function(d,f){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=n,this._children[d]={},this._children[n][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},s.prototype.node=function(d){return this._nodes[d]},s.prototype.hasNode=function(d){return e.has(this._nodes,d)},s.prototype.removeNode=function(d){var f=this;if(e.has(this._nodes,d)){var h=function(p){f.removeEdge(f._edgeObjs[p])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(p){f.setParent(p)}),delete this._children[d]),e.each(e.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},s.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},s.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},s.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==n)return f}},s.prototype.children=function(d){if(e.isUndefined(d)&&(d=n),this._isCompound){var f=this._children[d];if(f)return e.keys(f)}else{if(d===n)return this.nodes();if(this.hasNode(d))return[]}},s.prototype.predecessors=function(d){var f=this._preds[d];if(f)return e.keys(f)},s.prototype.successors=function(d){var f=this._sucs[d];if(f)return e.keys(f)},s.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return e.union(f,this.successors(d))},s.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},s.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(v,_){d(_)&&f.setNode(_,v)}),e.each(this._edgeObjs,function(v){f.hasNode(v.v)&&f.hasNode(v.w)&&f.setEdge(v,h.edge(v))});var p={};function x(v){var _=h.parent(v);return _===void 0||f.hasNode(_)?(p[v]=_,_):_ in p?p[_]:x(_)}return this._isCompound&&e.each(f.nodes(),function(v){f.setParent(v,x(v))}),f},s.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return e.values(this._edgeObjs)},s.prototype.setPath=function(d,f){var h=this,p=arguments;return e.reduce(d,function(x,v){return p.length>1?h.setEdge(x,v,f):h.setEdge(x,v),v}),this},s.prototype.setEdge=function(){var d,f,h,p,x=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(d=v.v,f=v.w,h=v.name,arguments.length===2&&(p=arguments[1],x=!0)):(d=v,f=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],x=!0)),d=""+d,f=""+f,e.isUndefined(h)||(h=""+h);var _=a(this._isDirected,d,f,h);if(e.has(this._edgeLabels,_))return x&&(this._edgeLabels[_]=p),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[_]=x?p:this._defaultEdgeLabelFn(d,f,h);var g=c(this._isDirected,d,f,h);return d=g.v,f=g.w,Object.freeze(g),this._edgeObjs[_]=g,i(this._preds[f],d),i(this._sucs[d],f),this._in[f][_]=g,this._out[d][_]=g,this._edgeCount++,this},s.prototype.edge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,d,f,h);return this._edgeLabels[p]},s.prototype.hasEdge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,d,f,h);return e.has(this._edgeLabels,p)},s.prototype.removeEdge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,d,f,h),x=this._edgeObjs[p];return x&&(d=x.v,f=x.w,delete this._edgeLabels[p],delete this._edgeObjs[p],o(this._preds[f],d),o(this._sucs[d],f),delete this._in[f][p],delete this._out[d][p],this._edgeCount--),this},s.prototype.inEdges=function(d,f){var h=this._in[d];if(h){var p=e.values(h);return f?e.filter(p,function(x){return x.v===f}):p}},s.prototype.outEdges=function(d,f){var h=this._out[d];if(h){var p=e.values(h);return f?e.filter(p,function(x){return x.w===f}):p}},s.prototype.nodeEdges=function(d,f){var h=this.inEdges(d,f);if(h)return h.concat(this.outEdges(d,f))};function i(d,f){d[f]?d[f]++:d[f]=1}function o(d,f){--d[f]||delete d[f]}function a(d,f,h,p){var x=""+f,v=""+h;if(!d&&x>v){var _=x;x=v,v=_}return x+r+v+r+(e.isUndefined(p)?t:p)}function c(d,f,h,p){var x=""+f,v=""+h;if(!d&&x>v){var _=x;x=v,v=_}var g={v:x,w:v};return p&&(g.name=p),g}function u(d,f){return a(d,f.v,f.w,f.name)}return np}var rp,u_;function lO(){return u_||(u_=1,rp="2.1.8"),rp}var sp,d_;function cO(){return d_||(d_=1,sp={Graph:py(),version:lO()}),sp}var ip,f_;function uO(){if(f_)return ip;f_=1;var e=en(),t=py();ip={write:n,read:i};function n(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:s(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function r(o){return e.map(o.nodes(),function(a){var c=o.node(a),u=o.parent(a),d={v:a};return e.isUndefined(c)||(d.value=c),e.isUndefined(u)||(d.parent=u),d})}function s(o){return e.map(o.edges(),function(a){var c=o.edge(a),u={v:a.v,w:a.w};return e.isUndefined(a.name)||(u.name=a.name),e.isUndefined(c)||(u.value=c),u})}function i(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(c){a.setNode(c.v,c.value),c.parent&&a.setParent(c.v,c.parent)}),e.each(o.edges,function(c){a.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),a}return ip}var op,h_;function dO(){if(h_)return op;h_=1;var e=en();op=t;function t(n){var r={},s=[],i;function o(a){e.has(r,a)||(r[a]=!0,i.push(a),e.each(n.successors(a),o),e.each(n.predecessors(a),o))}return e.each(n.nodes(),function(a){i=[],o(a),i.length&&s.push(i)}),s}return op}var ap,p_;function DE(){if(p_)return ap;p_=1;var e=en();ap=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var s=this._keyIndices;if(n=String(n),!e.has(s,n)){var i=this._arr,o=i.length;return s[n]=o,i.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var s=this._keyIndices[n];if(r>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[s].priority+" New: "+r);this._arr[s].priority=r,this._decrease(s)},t.prototype._heapify=function(n){var r=this._arr,s=2*n,i=s+1,o=n;s<r.length&&(o=r[s].priority<r[o].priority?s:o,i<r.length&&(o=r[i].priority<r[o].priority?i:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,s=r[n].priority,i;n!==0&&(i=n>>1,!(r[i].priority<s));)this._swap(n,i),n=i},t.prototype._swap=function(n,r){var s=this._arr,i=this._keyIndices,o=s[n],a=s[r];s[n]=a,s[r]=o,i[a.key]=n,i[o.key]=r},ap}var lp,m_;function OE(){if(m_)return lp;m_=1;var e=en(),t=DE();lp=r;var n=e.constant(1);function r(i,o,a,c){return s(i,String(o),a||n,c||function(u){return i.outEdges(u)})}function s(i,o,a,c){var u={},d=new t,f,h,p=function(x){var v=x.v!==f?x.v:x.w,_=u[v],g=a(x),y=h.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+g);y<_.distance&&(_.distance=y,_.predecessor=f,d.decrease(v,y))};for(i.nodes().forEach(function(x){var v=x===o?0:Number.POSITIVE_INFINITY;u[x]={distance:v},d.add(x,v)});d.size()>0&&(f=d.removeMin(),h=u[f],h.distance!==Number.POSITIVE_INFINITY);)c(f).forEach(p);return u}return lp}var cp,g_;function fO(){if(g_)return cp;g_=1;var e=OE(),t=en();cp=n;function n(r,s,i){return t.transform(r.nodes(),function(o,a){o[a]=e(r,a,s,i)},{})}return cp}var up,v_;function LE(){if(v_)return up;v_=1;var e=en();up=t;function t(n){var r=0,s=[],i={},o=[];function a(c){var u=i[c]={onStack:!0,lowlink:r,index:r++};if(s.push(c),n.successors(c).forEach(function(h){e.has(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(a(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var d=[],f;do f=s.pop(),i[f].onStack=!1,d.push(f);while(c!==f);o.push(d)}}return n.nodes().forEach(function(c){e.has(i,c)||a(c)}),o}return up}var dp,y_;function hO(){if(y_)return dp;y_=1;var e=en(),t=LE();dp=n;function n(r){return e.filter(t(r),function(s){return s.length>1||s.length===1&&r.hasEdge(s[0],s[0])})}return dp}var fp,x_;function pO(){if(x_)return fp;x_=1;var e=en();fp=n;var t=e.constant(1);function n(s,i,o){return r(s,i||t,o||function(a){return s.outEdges(a)})}function r(s,i,o){var a={},c=s.nodes();return c.forEach(function(u){a[u]={},a[u][u]={distance:0},c.forEach(function(d){u!==d&&(a[u][d]={distance:Number.POSITIVE_INFINITY})}),o(u).forEach(function(d){var f=d.v===u?d.w:d.v,h=i(d);a[u][f]={distance:h,predecessor:u}})}),c.forEach(function(u){var d=a[u];c.forEach(function(f){var h=a[f];c.forEach(function(p){var x=h[u],v=d[p],_=h[p],g=x.distance+v.distance;g<_.distance&&(_.distance=g,_.predecessor=v.predecessor)})})}),a}return fp}var hp,b_;function zE(){if(b_)return hp;b_=1;var e=en();hp=t,t.CycleException=n;function t(r){var s={},i={},o=[];function a(c){if(e.has(i,c))throw new n;e.has(s,c)||(i[c]=!0,s[c]=!0,e.each(r.predecessors(c),a),delete i[c],o.push(c))}if(e.each(r.sinks(),a),e.size(s)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,hp}var pp,w_;function mO(){if(w_)return pp;w_=1;var e=zE();pp=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return pp}var mp,__;function qE(){if(__)return mp;__=1;var e=en();mp=t;function t(r,s,i){e.isArray(s)||(s=[s]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],c={};return e.each(s,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,i==="post",c,o,a)}),a}function n(r,s,i,o,a,c){e.has(o,s)||(o[s]=!0,i||c.push(s),e.each(a(s),function(u){n(r,u,i,o,a,c)}),i&&c.push(s))}return mp}var gp,S_;function gO(){if(S_)return gp;S_=1;var e=qE();gp=t;function t(n,r){return e(n,r,"post")}return gp}var vp,j_;function vO(){if(j_)return vp;j_=1;var e=qE();vp=t;function t(n,r){return e(n,r,"pre")}return vp}var yp,k_;function yO(){if(k_)return yp;k_=1;var e=en(),t=py(),n=DE();yp=r;function r(s,i){var o=new t,a={},c=new n,u;function d(h){var p=h.v===u?h.w:h.v,x=c.priority(p);if(x!==void 0){var v=i(h);v<x&&(a[p]=u,c.decrease(p,v))}}if(s.nodeCount()===0)return o;e.each(s.nodes(),function(h){c.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),c.decrease(s.nodes()[0],0);for(var f=!1;c.size()>0;){if(u=c.removeMin(),e.has(a,u))o.setEdge(u,a[u]);else{if(f)throw new Error("Input graph is not connected: "+s);f=!0}s.nodeEdges(u).forEach(d)}return o}return yp}var xp,N_;function xO(){return N_||(N_=1,xp={components:dO(),dijkstra:OE(),dijkstraAll:fO(),findCycles:hO(),floydWarshall:pO(),isAcyclic:mO(),postorder:gO(),preorder:vO(),prim:yO(),tarjan:LE(),topsort:zE()}),xp}var bp,E_;function bO(){if(E_)return bp;E_=1;var e=cO();return bp={Graph:e.Graph,json:uO(),alg:xO(),version:e.version},bp}var Il;if(typeof Zv=="function")try{Il=bO()}catch{}Il||(Il=window.graphlib);var xn=Il,wp,C_;function wO(){if(C_)return wp;C_=1;var e=uE(),t=1,n=4;function r(s){return e(s,t|n)}return wp=r,wp}var _p,R_;function Tc(){if(R_)return _p;R_=1;var e=ui(),t=rr(),n=wc(),r=Jt();function s(i,o,a){if(!r(a))return!1;var c=typeof o;return(c=="number"?t(a)&&n(o,a.length):c=="string"&&o in a)?e(a[o],i):!1}return _p=s,_p}var Sp,T_;function _O(){if(T_)return Sp;T_=1;var e=Rc(),t=ui(),n=Tc(),r=vs(),s=Object.prototype,i=s.hasOwnProperty,o=e(function(a,c){a=Object(a);var u=-1,d=c.length,f=d>2?c[2]:void 0;for(f&&n(c[0],c[1],f)&&(d=1);++u<d;)for(var h=c[u],p=r(h),x=-1,v=p.length;++x<v;){var _=p[x],g=a[_];(g===void 0||t(g,s[_])&&!i.call(a,_))&&(a[_]=h[_])}return a});return Sp=o,Sp}var jp,I_;function SO(){if(I_)return jp;I_=1;var e=sr(),t=rr(),n=qr();function r(s){return function(i,o,a){var c=Object(i);if(!t(i)){var u=e(o,3);i=n(i),o=function(f){return u(c[f],f,c)}}var d=s(i,o,a);return d>-1?c[u?i[d]:d]:void 0}}return jp=r,jp}var kp,M_;function jO(){if(M_)return kp;M_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return kp=t,kp}var Np,A_;function kO(){if(A_)return Np;A_=1;var e=jO(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Np=n,Np}var Ep,P_;function NO(){if(P_)return Ep;P_=1;var e=kO(),t=Jt(),n=pi(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||o.test(u)?a(u.slice(2),f?2:8):s.test(u)?r:+u}return Ep=c,Ep}var Cp,D_;function $E(){if(D_)return Cp;D_=1;var e=NO(),t=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*n}return s===s?s:0}return Cp=r,Cp}var Rp,O_;function EO(){if(O_)return Rp;O_=1;var e=$E();function t(n){var r=e(n),s=r%1;return r===r?s?r-s:r:0}return Rp=t,Rp}var Tp,L_;function CO(){if(L_)return Tp;L_=1;var e=ME(),t=sr(),n=EO(),r=Math.max;function s(i,o,a){var c=i==null?0:i.length;if(!c)return-1;var u=a==null?0:n(a);return u<0&&(u=r(c+u,0)),e(i,t(o,3),u)}return Tp=s,Tp}var Ip,z_;function RO(){if(z_)return Ip;z_=1;var e=SO(),t=CO(),n=e(t);return Ip=n,Ip}var Mp,q_;function FE(){if(q_)return Mp;q_=1;var e=hy();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Mp=t,Mp}var Ap,$_;function TO(){if($_)return Ap;$_=1;var e=cy(),t=dE(),n=vs();function r(s,i){return s==null?s:e(s,t(i),n)}return Ap=r,Ap}var Pp,F_;function IO(){if(F_)return Pp;F_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Pp=e,Pp}var Dp,B_;function MO(){if(B_)return Dp;B_=1;var e=xc(),t=uy(),n=sr();function r(s,i){var o={};return i=n(i,3),t(s,function(a,c,u){e(o,c,i(a,c,u))}),o}return Dp=r,Dp}var Op,H_;function my(){if(H_)return Op;H_=1;var e=pi();function t(n,r,s){for(var i=-1,o=n.length;++i<o;){var a=n[i],c=r(a);if(c!=null&&(u===void 0?c===c&&!e(c):s(c,u)))var u=c,d=a}return d}return Op=t,Op}var Lp,W_;function AO(){if(W_)return Lp;W_=1;function e(t,n){return t>n}return Lp=e,Lp}var zp,V_;function PO(){if(V_)return zp;V_=1;var e=my(),t=AO(),n=ys();function r(s){return s&&s.length?e(s,n,t):void 0}return zp=r,zp}var qp,U_;function BE(){if(U_)return qp;U_=1;var e=xc(),t=ui();function n(r,s,i){(i!==void 0&&!t(r[s],i)||i===void 0&&!(s in r))&&e(r,s,i)}return qp=n,qp}var $p,G_;function DO(){if(G_)return $p;G_=1;var e=ms(),t=jc(),n=Dn(),r="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,a=i.hasOwnProperty,c=o.call(Object);function u(d){if(!n(d)||e(d)!=r)return!1;var f=t(d);if(f===null)return!0;var h=a.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==c}return $p=u,$p}var Fp,K_;function HE(){if(K_)return Fp;K_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Fp=e,Fp}var Bp,Y_;function OO(){if(Y_)return Bp;Y_=1;var e=Uo(),t=vs();function n(r){return e(r,t(r))}return Bp=n,Bp}var Hp,X_;function LO(){if(X_)return Hp;X_=1;var e=BE(),t=ZN(),n=aE(),r=JN(),s=cE(),i=Go(),o=He(),a=AE(),c=fi(),u=Vo(),d=Jt(),f=DO(),h=Ko(),p=HE(),x=OO();function v(_,g,y,b,w,S,k){var j=p(_,y),N=p(g,y),C=k.get(N);if(C){e(_,y,C);return}var T=S?S(j,N,y+"",_,g,k):void 0,R=T===void 0;if(R){var D=o(N),z=!D&&c(N),E=!D&&!z&&h(N);T=N,D||z||E?o(j)?T=j:a(j)?T=r(j):z?(R=!1,T=t(N,!0)):E?(R=!1,T=n(N,!0)):T=[]:f(N)||i(N)?(T=j,i(j)?T=x(j):(!d(j)||u(j))&&(T=s(N))):R=!1}R&&(k.set(N,T),w(T,N,b,S,k),k.delete(N)),e(_,y,T)}return Hp=v,Hp}var Wp,Q_;function zO(){if(Q_)return Wp;Q_=1;var e=yc(),t=BE(),n=cy(),r=LO(),s=Jt(),i=vs(),o=HE();function a(c,u,d,f,h){c!==u&&n(u,function(p,x){if(h||(h=new e),s(p))r(c,u,x,d,a,f,h);else{var v=f?f(o(c,x),p,x+"",c,u,h):void 0;v===void 0&&(v=p),t(c,x,v)}},i)}return Wp=a,Wp}var Vp,Z_;function qO(){if(Z_)return Vp;Z_=1;var e=Rc(),t=Tc();function n(r){return e(function(s,i){var o=-1,a=i.length,c=a>1?i[a-1]:void 0,u=a>2?i[2]:void 0;for(c=r.length>3&&typeof c=="function"?(a--,c):void 0,u&&t(i[0],i[1],u)&&(c=a<3?void 0:c,a=1),s=Object(s);++o<a;){var d=i[o];d&&r(s,d,o,c)}return s})}return Vp=n,Vp}var Up,J_;function $O(){if(J_)return Up;J_=1;var e=zO(),t=qO(),n=t(function(r,s,i){e(r,s,i)});return Up=n,Up}var Gp,e2;function WE(){if(e2)return Gp;e2=1;function e(t,n){return t<n}return Gp=e,Gp}var Kp,t2;function FO(){if(t2)return Kp;t2=1;var e=my(),t=WE(),n=ys();function r(s){return s&&s.length?e(s,n,t):void 0}return Kp=r,Kp}var Yp,n2;function BO(){if(n2)return Yp;n2=1;var e=my(),t=sr(),n=WE();function r(s,i){return s&&s.length?e(s,t(i,2),n):void 0}return Yp=r,Yp}var Xp,r2;function HO(){if(r2)return Xp;r2=1;var e=yn(),t=function(){return e.Date.now()};return Xp=t,Xp}var Qp,s2;function WO(){if(s2)return Qp;s2=1;var e=bc(),t=Ec(),n=wc(),r=Jt(),s=Yo();function i(o,a,c,u){if(!r(o))return o;a=t(a,o);for(var d=-1,f=a.length,h=f-1,p=o;p!=null&&++d<f;){var x=s(a[d]),v=c;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(d!=h){var _=p[x];v=u?u(_,x,p):void 0,v===void 0&&(v=r(_)?_:n(a[d+1])?[]:{})}e(p,x,v),p=p[x]}return o}return Qp=i,Qp}var Zp,i2;function VO(){if(i2)return Zp;i2=1;var e=Cc(),t=WO(),n=Ec();function r(s,i,o){for(var a=-1,c=i.length,u={};++a<c;){var d=i[a],f=e(s,d);o(f,d)&&t(u,n(d,s),f)}return u}return Zp=r,Zp}var Jp,o2;function UO(){if(o2)return Jp;o2=1;var e=VO(),t=_E();function n(r,s){return e(r,s,function(i,o){return t(r,o)})}return Jp=n,Jp}var em,a2;function GO(){if(a2)return em;a2=1;var e=FE(),t=TE(),n=IE();function r(s){return n(t(s,void 0,e),s+"")}return em=r,em}var tm,l2;function KO(){if(l2)return tm;l2=1;var e=UO(),t=GO(),n=t(function(r,s){return r==null?{}:e(r,s)});return tm=n,tm}var nm,c2;function YO(){if(c2)return nm;c2=1;var e=Math.ceil,t=Math.max;function n(r,s,i,o){for(var a=-1,c=t(e((s-r)/(i||1)),0),u=Array(c);c--;)u[o?c:++a]=r,r+=i;return u}return nm=n,nm}var rm,u2;function XO(){if(u2)return rm;u2=1;var e=YO(),t=Tc(),n=$E();function r(s){return function(i,o,a){return a&&typeof a!="number"&&t(i,o,a)&&(o=a=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),a=a===void 0?i<o?1:-1:n(a),e(i,o,a,s)}}return rm=r,rm}var sm,d2;function QO(){if(d2)return sm;d2=1;var e=XO(),t=e();return sm=t,sm}var im,f2;function ZO(){if(f2)return im;f2=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return im=e,im}var om,h2;function JO(){if(h2)return om;h2=1;var e=pi();function t(n,r){if(n!==r){var s=n!==void 0,i=n===null,o=n===n,a=e(n),c=r!==void 0,u=r===null,d=r===r,f=e(r);if(!u&&!f&&!a&&n>r||a&&c&&d&&!u&&!f||i&&c&&d||!s&&d||!o)return 1;if(!i&&!a&&!f&&n<r||f&&s&&o&&!i&&!a||u&&s&&o||!c&&o||!d)return-1}return 0}return om=t,om}var am,p2;function e8(){if(p2)return am;p2=1;var e=JO();function t(n,r,s){for(var i=-1,o=n.criteria,a=r.criteria,c=o.length,u=s.length;++i<c;){var d=e(o[i],a[i]);if(d){if(i>=u)return d;var f=s[i];return d*(f=="desc"?-1:1)}}return n.index-r.index}return am=t,am}var lm,m2;function t8(){if(m2)return lm;m2=1;var e=Nc(),t=Cc(),n=sr(),r=EE(),s=ZO(),i=_c(),o=e8(),a=ys(),c=He();function u(d,f,h){f.length?f=e(f,function(v){return c(v)?function(_){return t(_,v.length===1?v[0]:v)}:v}):f=[a];var p=-1;f=e(f,i(n));var x=r(d,function(v,_,g){var y=e(f,function(b){return b(v)});return{criteria:y,index:++p,value:v}});return s(x,function(v,_){return o(v,_,h)})}return lm=u,lm}var cm,g2;function n8(){if(g2)return cm;g2=1;var e=hy(),t=t8(),n=Rc(),r=Tc(),s=n(function(i,o){if(i==null)return[];var a=o.length;return a>1&&r(i,o[0],o[1])?o=[]:a>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return cm=s,cm}var um,v2;function r8(){if(v2)return um;v2=1;var e=bE(),t=0;function n(r){var s=++t;return e(r)+s}return um=n,um}var dm,y2;function s8(){if(y2)return dm;y2=1;function e(t,n,r){for(var s=-1,i=t.length,o=n.length,a={};++s<i;){var c=s<o?n[s]:void 0;r(a,t[s],c)}return a}return dm=e,dm}var fm,x2;function i8(){if(x2)return fm;x2=1;var e=bc(),t=s8();function n(r,s){return t(r||[],s||[],e)}return fm=n,fm}var Ml;if(typeof Zv=="function")try{Ml={cloneDeep:wO(),constant:ly(),defaults:_O(),each:hE(),filter:jE(),find:RO(),flatten:FE(),forEach:fE(),forIn:TO(),has:kE(),isUndefined:NE(),last:IO(),map:CE(),mapValues:MO(),max:PO(),merge:$O(),min:FO(),minBy:BO(),now:HO(),pick:KO(),range:QO(),reduce:RE(),sortBy:n8(),uniqueId:r8(),values:PE(),zipObject:i8()}}catch{}Ml||(Ml=window._);var Ie=Ml,o8=Ic;function Ic(){var e={};e._next=e._prev=e,this._sentinel=e}Ic.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return VE(t),t};Ic.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&VE(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Ic.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,a8)),n=n._prev;return"["+e.join(", ")+"]"};function VE(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function a8(e,t){if(e!=="_next"&&e!=="_prev")return t}var Vn=Ie,l8=xn.Graph,c8=o8,u8=f8,d8=Vn.constant(1);function f8(e,t){if(e.nodeCount()<=1)return[];var n=p8(e,t||d8),r=h8(n.graph,n.buckets,n.zeroIdx);return Vn.flatten(Vn.map(r,function(s){return e.outEdges(s.v,s.w)}),!0)}function h8(e,t,n){for(var r=[],s=t[t.length-1],i=t[0],o;e.nodeCount();){for(;o=i.dequeue();)hm(e,t,n,o);for(;o=s.dequeue();)hm(e,t,n,o);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){r=r.concat(hm(e,t,n,o,!0));break}}}return r}function hm(e,t,n,r,s){var i=s?[]:void 0;return Vn.forEach(e.inEdges(r.v),function(o){var a=e.edge(o),c=e.node(o.v);s&&i.push({v:o.v,w:o.w}),c.out-=a,Mg(t,n,c)}),Vn.forEach(e.outEdges(r.v),function(o){var a=e.edge(o),c=o.w,u=e.node(c);u.in-=a,Mg(t,n,u)}),e.removeNode(r.v),i}function p8(e,t){var n=new l8,r=0,s=0;Vn.forEach(e.nodes(),function(a){n.setNode(a,{v:a,in:0,out:0})}),Vn.forEach(e.edges(),function(a){var c=n.edge(a.v,a.w)||0,u=t(a),d=c+u;n.setEdge(a.v,a.w,d),s=Math.max(s,n.node(a.v).out+=u),r=Math.max(r,n.node(a.w).in+=u)});var i=Vn.range(s+r+3).map(function(){return new c8}),o=r+1;return Vn.forEach(n.nodes(),function(a){Mg(i,o,n.node(a))}),{graph:n,buckets:i,zeroIdx:o}}function Mg(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var ts=Ie,m8=u8,g8={run:v8,undo:x8};function v8(e){var t=e.graph().acyclicer==="greedy"?m8(e,n(e)):y8(e);ts.forEach(t,function(r){var s=e.edge(r);e.removeEdge(r),s.forwardName=r.name,s.reversed=!0,e.setEdge(r.w,r.v,s,ts.uniqueId("rev"))});function n(r){return function(s){return r.edge(s).weight}}}function y8(e){var t=[],n={},r={};function s(i){ts.has(r,i)||(r[i]=!0,n[i]=!0,ts.forEach(e.outEdges(i),function(o){ts.has(n,o.w)?t.push(o):s(o.w)}),delete n[i])}return ts.forEach(e.nodes(),s),t}function x8(e){ts.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ge=Ie,UE=xn.Graph,Nt={addDummyNode:GE,simplify:b8,asNonCompoundGraph:w8,successorWeights:_8,predecessorWeights:S8,intersectRect:j8,buildLayerMatrix:k8,normalizeRanks:N8,removeEmptyRanks:E8,addBorderNode:C8,maxRank:KE,partition:R8,time:T8,notime:I8};function GE(e,t,n,r){var s;do s=ge.uniqueId(r);while(e.hasNode(s));return n.dummy=t,e.setNode(s,n),s}function b8(e){var t=new UE().setGraph(e.graph());return ge.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ge.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},s=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+s.weight,minlen:Math.max(r.minlen,s.minlen)})}),t}function w8(e){var t=new UE({multigraph:e.isMultigraph()}).setGraph(e.graph());return ge.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ge.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function _8(e){var t=ge.map(e.nodes(),function(n){var r={};return ge.forEach(e.outEdges(n),function(s){r[s.w]=(r[s.w]||0)+e.edge(s).weight}),r});return ge.zipObject(e.nodes(),t)}function S8(e){var t=ge.map(e.nodes(),function(n){var r={};return ge.forEach(e.inEdges(n),function(s){r[s.v]=(r[s.v]||0)+e.edge(s).weight}),r});return ge.zipObject(e.nodes(),t)}function j8(e,t){var n=e.x,r=e.y,s=t.x-n,i=t.y-r,o=e.width/2,a=e.height/2;if(!s&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var c,u;return Math.abs(i)*o>Math.abs(s)*a?(i<0&&(a=-a),c=a*s/i,u=a):(s<0&&(o=-o),c=o,u=o*i/s),{x:n+c,y:r+u}}function k8(e){var t=ge.map(ge.range(KE(e)+1),function(){return[]});return ge.forEach(e.nodes(),function(n){var r=e.node(n),s=r.rank;ge.isUndefined(s)||(t[s][r.order]=n)}),t}function N8(e){var t=ge.min(ge.map(e.nodes(),function(n){return e.node(n).rank}));ge.forEach(e.nodes(),function(n){var r=e.node(n);ge.has(r,"rank")&&(r.rank-=t)})}function E8(e){var t=ge.min(ge.map(e.nodes(),function(i){return e.node(i).rank})),n=[];ge.forEach(e.nodes(),function(i){var o=e.node(i).rank-t;n[o]||(n[o]=[]),n[o].push(i)});var r=0,s=e.graph().nodeRankFactor;ge.forEach(n,function(i,o){ge.isUndefined(i)&&o%s!==0?--r:r&&ge.forEach(i,function(a){e.node(a).rank+=r})})}function C8(e,t,n,r){var s={width:0,height:0};return arguments.length>=4&&(s.rank=n,s.order=r),GE(e,"border",s,t)}function KE(e){return ge.max(ge.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ge.isUndefined(n))return n}))}function R8(e,t){var n={lhs:[],rhs:[]};return ge.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function T8(e,t){var n=ge.now();try{return t()}finally{console.log(e+" time: "+(ge.now()-n)+"ms")}}function I8(e,t){return t()}var YE=Ie,M8=Nt,A8={run:P8,undo:O8};function P8(e){e.graph().dummyChains=[],YE.forEach(e.edges(),function(t){D8(e,t)})}function D8(e,t){var n=t.v,r=e.node(n).rank,s=t.w,i=e.node(s).rank,o=t.name,a=e.edge(t),c=a.labelRank;if(i!==r+1){e.removeEdge(t);var u,d,f;for(f=0,++r;r<i;++f,++r)a.points=[],d={width:0,height:0,edgeLabel:a,edgeObj:t,rank:r},u=M8.addDummyNode(e,"edge",d,"_d"),r===c&&(d.width=a.width,d.height=a.height,d.dummy="edge-label",d.labelpos=a.labelpos),e.setEdge(n,u,{weight:a.weight},o),f===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,s,{weight:a.weight},o)}}function O8(e){YE.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,s;for(e.setEdge(n.edgeObj,r);n.dummy;)s=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=s,n=e.node(t)})}var Ea=Ie,Mc={longestPath:L8,slack:z8};function L8(e){var t={};function n(r){var s=e.node(r);if(Ea.has(t,r))return s.rank;t[r]=!0;var i=Ea.min(Ea.map(e.outEdges(r),function(o){return n(o.w)-e.edge(o).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),s.rank=i}Ea.forEach(e.sources(),n)}function z8(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Al=Ie,q8=xn.Graph,Pl=Mc.slack,XE=$8;function $8(e){var t=new q8({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var s,i;F8(t,e)<r;)s=B8(t,e),i=t.hasNode(s.v)?Pl(e,s):-Pl(e,s),H8(t,e,i);return t}function F8(e,t){function n(r){Al.forEach(t.nodeEdges(r),function(s){var i=s.v,o=r===i?s.w:i;!e.hasNode(o)&&!Pl(t,s)&&(e.setNode(o,{}),e.setEdge(r,o,{}),n(o))})}return Al.forEach(e.nodes(),n),e.nodeCount()}function B8(e,t){return Al.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Pl(t,n)})}function H8(e,t,n){Al.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var tr=Ie,W8=XE,V8=Mc.slack,U8=Mc.longestPath,G8=xn.alg.preorder,K8=xn.alg.postorder,Y8=Nt.simplify,X8=xs;xs.initLowLimValues=vy;xs.initCutValues=gy;xs.calcCutValue=QE;xs.leaveEdge=JE;xs.enterEdge=eC;xs.exchangeEdges=tC;function xs(e){e=Y8(e),U8(e);var t=W8(e);vy(t),gy(t,e);for(var n,r;n=JE(t);)r=eC(t,e,n),tC(t,e,n,r)}function gy(e,t){var n=K8(e,e.nodes());n=n.slice(0,n.length-1),tr.forEach(n,function(r){Q8(e,t,r)})}function Q8(e,t,n){var r=e.node(n),s=r.parent;e.edge(n,s).cutvalue=QE(e,t,n)}function QE(e,t,n){var r=e.node(n),s=r.parent,i=!0,o=t.edge(n,s),a=0;return o||(i=!1,o=t.edge(s,n)),a=o.weight,tr.forEach(t.nodeEdges(n),function(c){var u=c.v===n,d=u?c.w:c.v;if(d!==s){var f=u===i,h=t.edge(c).weight;if(a+=f?h:-h,J8(e,n,d)){var p=e.edge(n,d).cutvalue;a+=f?-p:p}}}),a}function vy(e,t){arguments.length<2&&(t=e.nodes()[0]),ZE(e,{},1,t)}function ZE(e,t,n,r,s){var i=n,o=e.node(r);return t[r]=!0,tr.forEach(e.neighbors(r),function(a){tr.has(t,a)||(n=ZE(e,t,n,a,r))}),o.low=i,o.lim=n++,s?o.parent=s:delete o.parent,n}function JE(e){return tr.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function eC(e,t,n){var r=n.v,s=n.w;t.hasEdge(r,s)||(r=n.w,s=n.v);var i=e.node(r),o=e.node(s),a=i,c=!1;i.lim>o.lim&&(a=o,c=!0);var u=tr.filter(t.edges(),function(d){return c===b2(e,e.node(d.v),a)&&c!==b2(e,e.node(d.w),a)});return tr.minBy(u,function(d){return V8(t,d)})}function tC(e,t,n,r){var s=n.v,i=n.w;e.removeEdge(s,i),e.setEdge(r.v,r.w,{}),vy(e),gy(e,t),Z8(e,t)}function Z8(e,t){var n=tr.find(e.nodes(),function(s){return!t.node(s).parent}),r=G8(e,n);r=r.slice(1),tr.forEach(r,function(s){var i=e.node(s).parent,o=t.edge(s,i),a=!1;o||(o=t.edge(i,s),a=!0),t.node(s).rank=t.node(i).rank+(a?o.minlen:-o.minlen)})}function J8(e,t,n){return e.hasEdge(t,n)}function b2(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var eL=Mc,nC=eL.longestPath,tL=XE,nL=X8,rL=sL;function sL(e){switch(e.graph().ranker){case"network-simplex":w2(e);break;case"tight-tree":oL(e);break;case"longest-path":iL(e);break;default:w2(e)}}var iL=nC;function oL(e){nC(e),tL(e)}function w2(e){nL(e)}var Ag=Ie,aL=lL;function lL(e){var t=uL(e);Ag.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),s=r.edgeObj,i=cL(e,t,s.v,s.w),o=i.path,a=i.lca,c=0,u=o[c],d=!0;n!==s.w;){if(r=e.node(n),d){for(;(u=o[c])!==a&&e.node(u).maxRank<r.rank;)c++;u===a&&(d=!1)}if(!d){for(;c<o.length-1&&e.node(u=o[c+1]).minRank<=r.rank;)c++;u=o[c]}e.setParent(n,u),n=e.successors(n)[0]}})}function cL(e,t,n,r){var s=[],i=[],o=Math.min(t[n].low,t[r].low),a=Math.max(t[n].lim,t[r].lim),c,u;c=n;do c=e.parent(c),s.push(c);while(c&&(t[c].low>o||a>t[c].lim));for(u=c,c=r;(c=e.parent(c))!==u;)i.push(c);return{path:s.concat(i.reverse()),lca:u}}function uL(e){var t={},n=0;function r(s){var i=n;Ag.forEach(e.children(s),r),t[s]={low:i,lim:n++}}return Ag.forEach(e.children(),r),t}var Un=Ie,Pg=Nt,dL={run:fL,cleanup:mL};function fL(e){var t=Pg.addDummyNode(e,"root",{},"_root"),n=hL(e),r=Un.max(Un.values(n))-1,s=2*r+1;e.graph().nestingRoot=t,Un.forEach(e.edges(),function(o){e.edge(o).minlen*=s});var i=pL(e)+1;Un.forEach(e.children(),function(o){rC(e,t,s,i,r,n,o)}),e.graph().nodeRankFactor=s}function rC(e,t,n,r,s,i,o){var a=e.children(o);if(!a.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}var c=Pg.addBorderNode(e,"_bt"),u=Pg.addBorderNode(e,"_bb"),d=e.node(o);e.setParent(c,o),d.borderTop=c,e.setParent(u,o),d.borderBottom=u,Un.forEach(a,function(f){rC(e,t,n,r,s,i,f);var h=e.node(f),p=h.borderTop?h.borderTop:f,x=h.borderBottom?h.borderBottom:f,v=h.borderTop?r:2*r,_=p!==x?1:s-i[o]+1;e.setEdge(c,p,{weight:v,minlen:_,nestingEdge:!0}),e.setEdge(x,u,{weight:v,minlen:_,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,c,{weight:0,minlen:s+i[o]})}function hL(e){var t={};function n(r,s){var i=e.children(r);i&&i.length&&Un.forEach(i,function(o){n(o,s+1)}),t[r]=s}return Un.forEach(e.children(),function(r){n(r,1)}),t}function pL(e){return Un.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function mL(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Un.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var pm=Ie,gL=Nt,vL=yL;function yL(e){function t(n){var r=e.children(n),s=e.node(n);if(r.length&&pm.forEach(r,t),pm.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var i=s.minRank,o=s.maxRank+1;i<o;++i)_2(e,"borderLeft","_bl",n,s,i),_2(e,"borderRight","_br",n,s,i)}}pm.forEach(e.children(),t)}function _2(e,t,n,r,s,i){var o={width:0,height:0,rank:i,borderType:t},a=s[t][i-1],c=gL.addDummyNode(e,"border",o,n);s[t][i]=c,e.setParent(c,r),a&&e.setEdge(a,c,{weight:1})}var Cn=Ie,xL={adjust:bL,undo:wL};function bL(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&sC(e)}function wL(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&_L(e),(t==="lr"||t==="rl")&&(SL(e),sC(e))}function sC(e){Cn.forEach(e.nodes(),function(t){S2(e.node(t))}),Cn.forEach(e.edges(),function(t){S2(e.edge(t))})}function S2(e){var t=e.width;e.width=e.height,e.height=t}function _L(e){Cn.forEach(e.nodes(),function(t){mm(e.node(t))}),Cn.forEach(e.edges(),function(t){var n=e.edge(t);Cn.forEach(n.points,mm),Cn.has(n,"y")&&mm(n)})}function mm(e){e.y=-e.y}function SL(e){Cn.forEach(e.nodes(),function(t){gm(e.node(t))}),Cn.forEach(e.edges(),function(t){var n=e.edge(t);Cn.forEach(n.points,gm),Cn.has(n,"x")&&gm(n)})}function gm(e){var t=e.x;e.x=e.y,e.y=t}var Ln=Ie,jL=kL;function kL(e){var t={},n=Ln.filter(e.nodes(),function(a){return!e.children(a).length}),r=Ln.max(Ln.map(n,function(a){return e.node(a).rank})),s=Ln.map(Ln.range(r+1),function(){return[]});function i(a){if(!Ln.has(t,a)){t[a]=!0;var c=e.node(a);s[c.rank].push(a),Ln.forEach(e.successors(a),i)}}var o=Ln.sortBy(n,function(a){return e.node(a).rank});return Ln.forEach(o,i),s}var cr=Ie,NL=EL;function EL(e,t){for(var n=0,r=1;r<t.length;++r)n+=CL(e,t[r-1],t[r]);return n}function CL(e,t,n){for(var r=cr.zipObject(n,cr.map(n,function(u,d){return d})),s=cr.flatten(cr.map(t,function(u){return cr.sortBy(cr.map(e.outEdges(u),function(d){return{pos:r[d.w],weight:e.edge(d).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var o=2*i-1;i-=1;var a=cr.map(new Array(o),function(){return 0}),c=0;return cr.forEach(s.forEach(function(u){var d=u.pos+i;a[d]+=u.weight;for(var f=0;d>0;)d%2&&(f+=a[d+1]),d=d-1>>1,a[d]+=u.weight;c+=u.weight*f})),c}var j2=Ie,RL=TL;function TL(e,t){return j2.map(t,function(n){var r=e.inEdges(n);if(r.length){var s=j2.reduce(r,function(i,o){var a=e.edge(o),c=e.node(o.v);return{sum:i.sum+a.weight*c.order,weight:i.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:n}})}var Mt=Ie,IL=ML;function ML(e,t){var n={};Mt.forEach(e,function(s,i){var o=n[s.v]={indegree:0,in:[],out:[],vs:[s.v],i};Mt.isUndefined(s.barycenter)||(o.barycenter=s.barycenter,o.weight=s.weight)}),Mt.forEach(t.edges(),function(s){var i=n[s.v],o=n[s.w];!Mt.isUndefined(i)&&!Mt.isUndefined(o)&&(o.indegree++,i.out.push(n[s.w]))});var r=Mt.filter(n,function(s){return!s.indegree});return AL(r)}function AL(e){var t=[];function n(i){return function(o){o.merged||(Mt.isUndefined(o.barycenter)||Mt.isUndefined(i.barycenter)||o.barycenter>=i.barycenter)&&PL(i,o)}}function r(i){return function(o){o.in.push(i),--o.indegree===0&&e.push(o)}}for(;e.length;){var s=e.pop();t.push(s),Mt.forEach(s.in.reverse(),n(s)),Mt.forEach(s.out,r(s))}return Mt.map(Mt.filter(t,function(i){return!i.merged}),function(i){return Mt.pick(i,["vs","i","barycenter","weight"])})}function PL(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Ui=Ie,DL=Nt,OL=LL;function LL(e,t){var n=DL.partition(e,function(d){return Ui.has(d,"barycenter")}),r=n.lhs,s=Ui.sortBy(n.rhs,function(d){return-d.i}),i=[],o=0,a=0,c=0;r.sort(zL(!!t)),c=k2(i,s,c),Ui.forEach(r,function(d){c+=d.vs.length,i.push(d.vs),o+=d.barycenter*d.weight,a+=d.weight,c=k2(i,s,c)});var u={vs:Ui.flatten(i,!0)};return a&&(u.barycenter=o/a,u.weight=a),u}function k2(e,t,n){for(var r;t.length&&(r=Ui.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function zL(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var xr=Ie,qL=RL,$L=IL,FL=OL,BL=iC;function iC(e,t,n,r){var s=e.children(t),i=e.node(t),o=i?i.borderLeft:void 0,a=i?i.borderRight:void 0,c={};o&&(s=xr.filter(s,function(x){return x!==o&&x!==a}));var u=qL(e,s);xr.forEach(u,function(x){if(e.children(x.v).length){var v=iC(e,x.v,n,r);c[x.v]=v,xr.has(v,"barycenter")&&WL(x,v)}});var d=$L(u,n);HL(d,c);var f=FL(d,r);if(o&&(f.vs=xr.flatten([o,f.vs,a],!0),e.predecessors(o).length)){var h=e.node(e.predecessors(o)[0]),p=e.node(e.predecessors(a)[0]);xr.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+p.order)/(f.weight+2),f.weight+=2}return f}function HL(e,t){xr.forEach(e,function(n){n.vs=xr.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function WL(e,t){xr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Gi=Ie,VL=xn.Graph,UL=GL;function GL(e,t,n){var r=KL(e),s=new VL({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(i){return e.node(i)});return Gi.forEach(e.nodes(),function(i){var o=e.node(i),a=e.parent(i);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(s.setNode(i),s.setParent(i,a||r),Gi.forEach(e[n](i),function(c){var u=c.v===i?c.w:c.v,d=s.edge(u,i),f=Gi.isUndefined(d)?0:d.weight;s.setEdge(u,i,{weight:e.edge(c).weight+f})}),Gi.has(o,"minRank")&&s.setNode(i,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),s}function KL(e){for(var t;e.hasNode(t=Gi.uniqueId("_root")););return t}var YL=Ie,XL=QL;function QL(e,t,n){var r={},s;YL.forEach(n,function(i){for(var o=e.parent(i),a,c;o;){if(a=e.parent(o),a?(c=r[a],r[a]=o):(c=s,s=o),c&&c!==o){t.setEdge(c,o);return}o=a}})}var Mr=Ie,ZL=jL,JL=NL,ez=BL,tz=UL,nz=XL,rz=xn.Graph,N2=Nt,sz=iz;function iz(e){var t=N2.maxRank(e),n=E2(e,Mr.range(1,t+1),"inEdges"),r=E2(e,Mr.range(t-1,-1,-1),"outEdges"),s=ZL(e);C2(e,s);for(var i=Number.POSITIVE_INFINITY,o,a=0,c=0;c<4;++a,++c){oz(a%2?n:r,a%4>=2),s=N2.buildLayerMatrix(e);var u=JL(e,s);u<i&&(c=0,o=Mr.cloneDeep(s),i=u)}C2(e,o)}function E2(e,t,n){return Mr.map(t,function(r){return tz(e,r,n)})}function oz(e,t){var n=new rz;Mr.forEach(e,function(r){var s=r.graph().root,i=ez(r,s,n,t);Mr.forEach(i.vs,function(o,a){r.node(o).order=a}),nz(r,n,i.vs)})}function C2(e,t){Mr.forEach(t,function(n){Mr.forEach(n,function(r,s){e.node(r).order=s})})}var se=Ie,az=xn.Graph,lz=Nt,cz={positionX:bz};function uz(e,t){var n={};function r(s,i){var o=0,a=0,c=s.length,u=se.last(i);return se.forEach(i,function(d,f){var h=fz(e,d),p=h?e.node(h).order:c;(h||d===u)&&(se.forEach(i.slice(a,f+1),function(x){se.forEach(e.predecessors(x),function(v){var _=e.node(v),g=_.order;(g<o||p<g)&&!(_.dummy&&e.node(x).dummy)&&oC(n,v,x)})}),a=f+1,o=p)}),i}return se.reduce(t,r),n}function dz(e,t){var n={};function r(i,o,a,c,u){var d;se.forEach(se.range(o,a),function(f){d=i[f],e.node(d).dummy&&se.forEach(e.predecessors(d),function(h){var p=e.node(h);p.dummy&&(p.order<c||p.order>u)&&oC(n,h,d)})})}function s(i,o){var a=-1,c,u=0;return se.forEach(o,function(d,f){if(e.node(d).dummy==="border"){var h=e.predecessors(d);h.length&&(c=e.node(h[0]).order,r(o,u,f,a,c),u=f,a=c)}r(o,u,o.length,c,i.length)}),o}return se.reduce(t,s),n}function fz(e,t){if(e.node(t).dummy)return se.find(e.predecessors(t),function(n){return e.node(n).dummy})}function oC(e,t,n){if(t>n){var r=t;t=n,n=r}var s=e[t];s||(e[t]=s={}),s[n]=!0}function hz(e,t,n){if(t>n){var r=t;t=n,n=r}return se.has(e[t],n)}function pz(e,t,n,r){var s={},i={},o={};return se.forEach(t,function(a){se.forEach(a,function(c,u){s[c]=c,i[c]=c,o[c]=u})}),se.forEach(t,function(a){var c=-1;se.forEach(a,function(u){var d=r(u);if(d.length){d=se.sortBy(d,function(v){return o[v]});for(var f=(d.length-1)/2,h=Math.floor(f),p=Math.ceil(f);h<=p;++h){var x=d[h];i[u]===u&&c<o[x]&&!hz(n,u,x)&&(i[x]=u,i[u]=s[u]=s[x],c=o[x])}}})}),{root:s,align:i}}function mz(e,t,n,r,s){var i={},o=gz(e,t,n,s),a=s?"borderLeft":"borderRight";function c(f,h){for(var p=o.nodes(),x=p.pop(),v={};x;)v[x]?f(x):(v[x]=!0,p.push(x),p=p.concat(h(x))),x=p.pop()}function u(f){i[f]=o.inEdges(f).reduce(function(h,p){return Math.max(h,i[p.v]+o.edge(p))},0)}function d(f){var h=o.outEdges(f).reduce(function(x,v){return Math.min(x,i[v.w]-o.edge(v))},Number.POSITIVE_INFINITY),p=e.node(f);h!==Number.POSITIVE_INFINITY&&p.borderType!==a&&(i[f]=Math.max(i[f],h))}return c(u,o.predecessors.bind(o)),c(d,o.successors.bind(o)),se.forEach(r,function(f){i[f]=i[n[f]]}),i}function gz(e,t,n,r){var s=new az,i=e.graph(),o=wz(i.nodesep,i.edgesep,r);return se.forEach(t,function(a){var c;se.forEach(a,function(u){var d=n[u];if(s.setNode(d),c){var f=n[c],h=s.edge(f,d);s.setEdge(f,d,Math.max(o(e,u,c),h||0))}c=u})}),s}function vz(e,t){return se.minBy(se.values(t),function(n){var r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return se.forIn(n,function(i,o){var a=_z(e,o)/2;r=Math.max(i+a,r),s=Math.min(i-a,s)}),r-s})}function yz(e,t){var n=se.values(t),r=se.min(n),s=se.max(n);se.forEach(["u","d"],function(i){se.forEach(["l","r"],function(o){var a=i+o,c=e[a],u;if(c!==t){var d=se.values(c);u=o==="l"?r-se.min(d):s-se.max(d),u&&(e[a]=se.mapValues(c,function(f){return f+u}))}})})}function xz(e,t){return se.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var s=se.sortBy(se.map(e,r));return(s[1]+s[2])/2})}function bz(e){var t=lz.buildLayerMatrix(e),n=se.merge(uz(e,t),dz(e,t)),r={},s;se.forEach(["u","d"],function(o){s=o==="u"?t:se.values(t).reverse(),se.forEach(["l","r"],function(a){a==="r"&&(s=se.map(s,function(f){return se.values(f).reverse()}));var c=(o==="u"?e.predecessors:e.successors).bind(e),u=pz(e,s,n,c),d=mz(e,s,u.root,u.align,a==="r");a==="r"&&(d=se.mapValues(d,function(f){return-f})),r[o+a]=d})});var i=vz(e,r);return yz(r,i),xz(r,e.graph().align)}function wz(e,t,n){return function(r,s,i){var o=r.node(s),a=r.node(i),c=0,u;if(c+=o.width/2,se.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=-o.width/2;break;case"r":u=o.width/2;break}if(u&&(c+=n?u:-u),u=0,c+=(o.dummy?t:e)/2,c+=(a.dummy?t:e)/2,c+=a.width/2,se.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(c+=n?u:-u),u=0,c}}function _z(e,t){return e.node(t).width}var Ki=Ie,aC=Nt,Sz=cz.positionX,jz=kz;function kz(e){e=aC.asNonCompoundGraph(e),Nz(e),Ki.forEach(Sz(e),function(t,n){e.node(n).x=t})}function Nz(e){var t=aC.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Ki.forEach(t,function(s){var i=Ki.max(Ki.map(s,function(o){return e.node(o).height}));Ki.forEach(s,function(o){e.node(o).y=r+i/2}),r+=i+n})}var ie=Ie,R2=g8,T2=A8,Ez=rL,Cz=Nt.normalizeRanks,Rz=aL,Tz=Nt.removeEmptyRanks,I2=dL,Iz=vL,M2=xL,Mz=sz,Az=jz,Dr=Nt,Pz=xn.Graph,Dz=Oz;function Oz(e,t){var n=t&&t.debugTiming?Dr.time:Dr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return Gz(e)});n("  runLayout",function(){Lz(r,n)}),n("  updateInputGraph",function(){zz(e,r)})})}function Lz(e,t){t("    makeSpaceForEdgeLabels",function(){Kz(e)}),t("    removeSelfEdges",function(){rq(e)}),t("    acyclic",function(){R2.run(e)}),t("    nestingGraph.run",function(){I2.run(e)}),t("    rank",function(){Ez(Dr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){Yz(e)}),t("    removeEmptyRanks",function(){Tz(e)}),t("    nestingGraph.cleanup",function(){I2.cleanup(e)}),t("    normalizeRanks",function(){Cz(e)}),t("    assignRankMinMax",function(){Xz(e)}),t("    removeEdgeLabelProxies",function(){Qz(e)}),t("    normalize.run",function(){T2.run(e)}),t("    parentDummyChains",function(){Rz(e)}),t("    addBorderSegments",function(){Iz(e)}),t("    order",function(){Mz(e)}),t("    insertSelfEdges",function(){sq(e)}),t("    adjustCoordinateSystem",function(){M2.adjust(e)}),t("    position",function(){Az(e)}),t("    positionSelfEdges",function(){iq(e)}),t("    removeBorderNodes",function(){nq(e)}),t("    normalize.undo",function(){T2.undo(e)}),t("    fixupEdgeLabelCoords",function(){eq(e)}),t("    undoCoordinateSystem",function(){M2.undo(e)}),t("    translateGraph",function(){Zz(e)}),t("    assignNodeIntersects",function(){Jz(e)}),t("    reversePoints",function(){tq(e)}),t("    acyclic.undo",function(){R2.undo(e)})}function zz(e,t){ie.forEach(e.nodes(),function(n){var r=e.node(n),s=t.node(n);r&&(r.x=s.x,r.y=s.y,t.children(n).length&&(r.width=s.width,r.height=s.height))}),ie.forEach(e.edges(),function(n){var r=e.edge(n),s=t.edge(n);r.points=s.points,ie.has(s,"x")&&(r.x=s.x,r.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var qz=["nodesep","edgesep","ranksep","marginx","marginy"],$z={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Fz=["acyclicer","ranker","rankdir","align"],Bz=["width","height"],Hz={width:0,height:0},Wz=["minlen","weight","width","height","labeloffset"],Vz={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Uz=["labelpos"];function Gz(e){var t=new Pz({multigraph:!0,compound:!0}),n=ym(e.graph());return t.setGraph(ie.merge({},$z,vm(n,qz),ie.pick(n,Fz))),ie.forEach(e.nodes(),function(r){var s=ym(e.node(r));t.setNode(r,ie.defaults(vm(s,Bz),Hz)),t.setParent(r,e.parent(r))}),ie.forEach(e.edges(),function(r){var s=ym(e.edge(r));t.setEdge(r,ie.merge({},Vz,vm(s,Wz),ie.pick(s,Uz)))}),t}function Kz(e){var t=e.graph();t.ranksep/=2,ie.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Yz(e){ie.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),s=e.node(t.w),i={rank:(s.rank-r.rank)/2+r.rank,e:t};Dr.addDummyNode(e,"edge-proxy",i,"_ep")}})}function Xz(e){var t=0;ie.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ie.max(t,r.maxRank))}),e.graph().maxRank=t}function Qz(e){ie.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Zz(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,s=0,i=e.graph(),o=i.marginx||0,a=i.marginy||0;function c(u){var d=u.x,f=u.y,h=u.width,p=u.height;t=Math.min(t,d-h/2),n=Math.max(n,d+h/2),r=Math.min(r,f-p/2),s=Math.max(s,f+p/2)}ie.forEach(e.nodes(),function(u){c(e.node(u))}),ie.forEach(e.edges(),function(u){var d=e.edge(u);ie.has(d,"x")&&c(d)}),t-=o,r-=a,ie.forEach(e.nodes(),function(u){var d=e.node(u);d.x-=t,d.y-=r}),ie.forEach(e.edges(),function(u){var d=e.edge(u);ie.forEach(d.points,function(f){f.x-=t,f.y-=r}),ie.has(d,"x")&&(d.x-=t),ie.has(d,"y")&&(d.y-=r)}),i.width=n-t+o,i.height=s-r+a}function Jz(e){ie.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),s=e.node(t.w),i,o;n.points?(i=n.points[0],o=n.points[n.points.length-1]):(n.points=[],i=s,o=r),n.points.unshift(Dr.intersectRect(r,i)),n.points.push(Dr.intersectRect(s,o))})}function eq(e){ie.forEach(e.edges(),function(t){var n=e.edge(t);if(ie.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function tq(e){ie.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function nq(e){ie.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),s=e.node(n.borderBottom),i=e.node(ie.last(n.borderLeft)),o=e.node(ie.last(n.borderRight));n.width=Math.abs(o.x-i.x),n.height=Math.abs(s.y-r.y),n.x=i.x+n.width/2,n.y=r.y+n.height/2}}),ie.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function rq(e){ie.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function sq(e){var t=Dr.buildLayerMatrix(e);ie.forEach(t,function(n){var r=0;ie.forEach(n,function(s,i){var o=e.node(s);o.order=i+r,ie.forEach(o.selfEdges,function(a){Dr.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:i+ ++r,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function iq(e){ie.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),s=r.x+r.width/2,i=r.y,o=n.x-s,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:s+2*o/3,y:i-a},{x:s+5*o/6,y:i-a},{x:s+o,y:i},{x:s+5*o/6,y:i+a},{x:s+2*o/3,y:i+a}],n.label.x=n.x,n.label.y=n.y}})}function vm(e,t){return ie.mapValues(ie.pick(e,t),Number)}function ym(e){var t={};return ie.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Ca=Ie,oq=Nt,aq=xn.Graph,lq={debugOrdering:cq};function cq(e){var t=oq.buildLayerMatrix(e),n=new aq({compound:!0,multigraph:!0}).setGraph({});return Ca.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Ca.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Ca.forEach(t,function(r,s){var i="layer"+s;n.setNode(i,{rank:"same"}),Ca.reduce(r,function(o,a){return n.setEdge(o,a,{style:"invis"}),a})}),n}var uq="0.8.5",dq={graphlib:xn,layout:Dz,debug:lq,util:{time:Nt.time,notime:Nt.notime},version:uq};const Dl=$g(dq),A2=(e,t)=>{const n=new Dl.graphlib.Graph;return n.setGraph({rankdir:"TB",align:"UL",nodesep:20,ranksep:70,marginx:100,marginy:30,ranker:"longest-path"}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:r.data.width??280,height:r.data.height??90})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),Dl.layout(n),{nodes:e.map(r=>{const s=n.node(r.id);return{...r,targetPosition:ee.Top,sourcePosition:ee.Bottom,position:{x:s.x-(r.data.width??280)/2,y:s.y-(r.data.height??90)/2}}}),edges:t}},P2=(e,t,n)=>{let r=[],s=[],i=null,o=null,a=[];const c=n.theme||"industrial";return e.forEach((u,d)=>{var x,v;if((u.level||1)!==1)return;const f=280;let h=95;u.state==="active"&&u.stations&&(h+=35);const p=t===u.id;if(r.push({id:u.id,type:"documentNode",data:{...u,width:f,height:h,isExpanded:p,...n},draggable:!1,connectable:!1,position:{x:0,y:0},zIndex:p?1e3:0}),i){const _=(x=e[d-1])==null?void 0:x.state;s.push({id:"e-"+i+"-"+u.id,source:i,target:u.id,type:"smoothstep",animated:_==="active",style:{stroke:WN(_,c),strokeWidth:3}})}((v=u.children)==null?void 0:v.length)>0&&(o=u.id,a=u.children),i=u.id}),{nodes:r,edges:s,epicBacklogId:o,epicChildren:a}},D2=(e,t,n,r,s)=>{const{nodes:i,edges:o}=e;if(!t||!n.length)return{nodes:i,edges:o};const a=i.find(b=>b.id===t);if(!a)return{nodes:i,edges:o};const c=a.position.x,u=a.position.y+(a.data.height||95),d=a.data.state,f=s.theme||"industrial",h=WN(d,f),p=d==="active",x=an.EPIC_HEIGHT+an.EPIC_GAP_Y,v=Math.ceil(n.length/an.EPICS_PER_ROW),_=c+280*.15,g=50,y={};n.forEach((b,w)=>{const S=Math.floor(w/an.EPICS_PER_ROW);y[S]||(y[S]=[]),y[S].push({epic:b,idx:w})});for(let b=0;b<v;b++){const w=y[b]||[];if(w.length===0)continue;const S=u+an.EPIC_OFFSET_Y+b*x,k=`junction-row-${b}`;i.push({id:k,type:"waypoint",position:{x:_,y:S-g},draggable:!1,connectable:!1,selectable:!1}),b===0?o.push({id:`e-spine-drop-${b}`,source:t,target:k,type:"straight",animated:p,style:{stroke:h,strokeWidth:2}}):o.push({id:`e-spine-${b-1}-to-${b}`,source:`junction-row-${b-1}`,target:k,type:"straight",animated:p,style:{stroke:h,strokeWidth:2}}),w.forEach(({epic:j,idx:N})=>{const C=N%an.EPICS_PER_ROW,T=c+an.EPIC_OFFSET_X+C*(an.EPIC_WIDTH+an.EPIC_GAP_X),R=S,D=r===j.id;i.push({id:j.id,type:"documentNode",data:{...j,width:an.EPIC_WIDTH,height:an.EPIC_HEIGHT,isExpanded:D,...s},draggable:!1,connectable:!1,position:{x:T,y:R},targetPosition:ee.Top,sourcePosition:ee.Bottom,zIndex:D?1e3:0}),o.push({id:`e-branch-${j.id}`,source:k,target:j.id,type:"smoothstep",pathOptions:{borderRadius:20},animated:p,style:{stroke:h,strokeWidth:2}})})}return{nodes:i,edges:o}},fq={produced:"produced",in_production:"in_production",ready_for_production:"ready_for_production",requirements_not_met:"requirements_not_met",awaiting_operator:"awaiting_operator",halted:"halted",queued:"ready_for_production",blocked:"requirements_not_met",assembling:"in_production",binding:"in_production",auditing:"in_production",remediating:"in_production",stabilized:"produced"},O2={pgc:"PGC",bind:"BIND",asm:"ASM",aud:"AUD",rem:"REM",done:"DONE"};function hq(e){const t={};for(const n of e.projects)t[n.id]={id:n.id,projectId:n.project_id,name:n.name,description:n.description||"",status:n.status==="active"?"active":n.is_archived?"complete":"queued",icon:n.icon,createdAt:n.created_at,isArchived:n.is_archived||!1};return t}function pq(e,t=[]){const n=[],r=[],s={};for(const i of e.tracks){const o=mq(i,t);if((i.scope||"project")==="project")r.push({...o,mayOwn:i.may_own||[],childDocType:i.child_doc_type});else{const c=i.document_type;s[c]||(s[c]=[]),s[c].push(o)}}for(const i of r)i.childDocType&&s[i.childDocType]&&(i.children=s[i.childDocType].map(o=>({...o,level:2}))),n.push(i);return n}function mq(e,t=[]){const n=fq[e.state]||"ready_for_production",r=e.state==="awaiting_operator",s=t.find(a=>a.document_type===e.document_type);let i=null;(n==="in_production"||r)&&(i=gq(e.stations,e.state,e.station));let o=null;return s&&s.questions&&(o=s.questions.map((a,c)=>({id:a.id||`q${c+1}`,text:a.question||a.text||a,required:a.required!==!1}))),{id:e.document_type,name:e.document_name||vq(e.document_type),desc:e.description||"",state:n,intent:"mandatory",level:1,stations:i,questions:o,interruptId:s==null?void 0:s.id,blockedBy:e.blocked_by||[]}}function gq(e,t,n){if(!e||e.length===0){const r=n||(t==="awaiting_operator"?"pgc":t==="in_production"?"asm":null);return ju.map(s=>({id:s,label:O2[s]||s.toUpperCase(),state:r===s?"active":ju.indexOf(s)<ju.indexOf(r)?"complete":"pending",needs_input:s==="pgc"&&t==="awaiting_operator"}))}return e.map(r=>({id:r.station,label:O2[r.station]||r.station.toUpperCase(),state:r.state||"pending",needs_input:r.needs_input||!1}))}function vq(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function yq({includeArchived:e=!1}={}){const[t,n]=m.useState({}),[r,s]=m.useState(!0),[i,o]=m.useState(null),a=m.useCallback(async()=>{s(!0),o(null);try{const u=await $e.getProjects({includeArchived:e}),d=hq(u);n(d)}catch(u){o(u.message),console.error("Failed to fetch projects:",u)}finally{s(!1)}},[e]),c=m.useCallback(async u=>{try{const d=await $e.createProject({name:u,description:""});return n(f=>({...f,[d.id]:{id:d.id,projectId:d.project_id,name:d.name,description:d.description||"",status:"active",icon:d.icon,createdAt:d.created_at}})),d}catch(d){throw o(d.message),console.error("Failed to create project:",d),d}},[]);return m.useEffect(()=>{a()},[a]),{projects:t,loading:r,error:i,addProject:c,refresh:a}}function xq(e){const[t,n]=m.useState([]),[r,s]=m.useState("idle"),[i,o]=m.useState([]),[a,c]=m.useState(!0),[u,d]=m.useState(null),[f,h]=m.useState(!1),p=m.useRef(null),x=m.useRef(null),v=m.useCallback(async()=>{if(e)try{c(!0),d(null);const[w,S]=await Promise.all([$e.getProductionStatus(e),$e.getProjectInterrupts(e).catch(()=>[])]);o(S),s(w.line_state),n(pq(w,S))}catch(w){d(w.message),console.error("Failed to fetch production status:",w)}finally{c(!1)}},[e]),_=m.useCallback(()=>{if(!e)return;p.current&&p.current.close();const w=BP(e);p.current=w,w.addEventListener("connected",()=>{h(!0),d(null),console.log(`SSE connected for project ${e}`)}),w.addEventListener("station_transition",S=>{try{const k=JSON.parse(S.data);console.log("Station transition:",k),v()}catch(k){console.error("Failed to parse station_transition:",k)}}),w.addEventListener("line_stopped",S=>{try{const k=JSON.parse(S.data);console.log("Line stopped:",k),s("stopped"),v()}catch(k){console.error("Failed to parse line_stopped:",k)}}),w.addEventListener("production_complete",S=>{try{const k=JSON.parse(S.data);console.log("Production complete:",k),s("complete"),v()}catch(k){console.error("Failed to parse production_complete:",k)}}),w.addEventListener("interrupt_resolved",S=>{try{const k=JSON.parse(S.data);console.log("Interrupt resolved:",k),v()}catch(k){console.error("Failed to parse interrupt_resolved:",k)}}),w.addEventListener("track_started",S=>{try{const k=JSON.parse(S.data);console.log("Track started:",k),s("active"),v()}catch(k){console.error("Failed to parse track_started:",k)}}),w.onerror=S=>{console.error("SSE error:",S),h(!1),d("Connection lost"),w.close(),x.current=setTimeout(()=>{console.log("Attempting SSE reconnect..."),_()},3e3)}},[e,v]),g=m.useCallback(()=>{x.current&&clearTimeout(x.current),p.current&&(p.current.close(),p.current=null),h(!1)},[]),y=m.useCallback(async(w,S)=>{try{await $e.resolveInterrupt(w,{answers:S}),await v()}catch(k){throw console.error("Failed to resolve interrupt:",k),k}},[v]),b=m.useCallback(async(w=null)=>{try{await $e.startProduction(e,w),s("active"),await v()}catch(S){throw console.error("Failed to start production:",S),S}},[e,v]);return m.useEffect(()=>(v(),_(),()=>g()),[v,_,g]),{data:t,lineState:r,interrupts:i,loading:a,error:u,connected:f,refresh:v,resolveInterrupt:y,startProduction:b}}const L2="combine-theme";function lC(e="industrial"){const[t,n]=m.useState(()=>{if(typeof window>"u")return e;const i=localStorage.getItem(L2);return i&&yr.includes(i)?i:e});m.useEffect(()=>{localStorage.setItem(L2,t)},[t]);const r=m.useCallback(i=>{yr.includes(i)&&n(i)},[]),s=m.useCallback(()=>{n(i=>{const o=yr.indexOf(i);return yr[(o+1)%yr.length]})},[]);return{theme:t,setTheme:r,cycleTheme:s}}function bq(){const[e,t]=m.useState(null),[n,r]=m.useState("idle"),[s,i]=m.useState([]),[o,a]=m.useState(null),[c,u]=m.useState(null),[d,f]=m.useState({}),[h,p]=m.useState(0),[x,v]=m.useState([]),[_,g]=m.useState(!1),[y,b]=m.useState(null),[w,S]=m.useState(null),[k,j]=m.useState(null),[N,C]=m.useState(!1),[T,R]=m.useState(!1),D=m.useRef(null),z=m.useRef(!0);m.useEffect(()=>(z.current=!0,()=>{z.current=!1,D.current&&D.current.close()}),[]);const E=m.useCallback(M=>{z.current&&(r(M.phase),i(M.messages||[]),a(M.pending_prompt),u(M.pending_choices),f(M.interpretation||{}),p(M.confidence||0),v(M.missing_fields||[]),g(M.can_initialize||!1),b(M.gate_outcome),S(M.project))},[]),O=m.useCallback(async()=>{j(null),C(!0);try{const M=await $e.startIntake();if(!z.current)return;t(M.execution_id),r(M.phase||"describe"),a(M.pending_prompt),i([]),f({}),S(null),b(null)}catch(M){if(!z.current)return;j(M.message||"Failed to start intake")}finally{z.current&&C(!1)}},[]),A=m.useCallback(async M=>{if(!e||!M.trim())return;j(null),R(!0);const q={role:"user",content:M};i(F=>[...F,q]);try{const F=await $e.submitIntakeMessage(e,M);if(!z.current)return;E(F)}catch(F){if(!z.current)return;i(W=>W.filter(G=>G!==q)),j(F.message||"Failed to submit message")}finally{z.current&&R(!1)}},[e,E]),$=m.useCallback(async(M,q)=>{if(e){j(null),f(F=>({...F,[M]:{value:q,source:"user",locked:!0}}));try{const F=await $e.updateIntakeField(e,M,q);if(!z.current)return;E(F)}catch(F){if(!z.current)return;j(F.message||"Failed to update field");const W=await $e.getIntakeState(e);z.current&&E(W)}}},[e,E]),P=m.useCallback(async()=>{if(!(!e||!_)){j(null),C(!0);try{const M=await $e.initializeIntake(e);if(!z.current)return;E(M),M.phase==="generating"&&I()}catch(M){if(!z.current)return;j(M.message||"Failed to initialize project"),C(!1)}}},[e,_,E]),I=m.useCallback(()=>{D.current&&D.current.close();const M=HP(e);D.current=M,M.addEventListener("started",q=>{if(!z.current)return;const F=JSON.parse(q.data);console.log("Intake started:",F)}),M.addEventListener("progress",q=>{if(!z.current)return;const F=JSON.parse(q.data);console.log("Intake progress:",F.current_node)}),M.addEventListener("complete",async q=>{if(!z.current)return;const F=JSON.parse(q.data);console.log("Intake complete:",F),M.close(),D.current=null,r("complete"),b(F.gate_outcome),S(F.project),C(!1)}),M.addEventListener("error",q=>{if(z.current&&M.readyState!==EventSource.CLOSED){try{const F=JSON.parse(q.data);j(F.message||"Generation failed")}catch{j("Connection lost during generation")}M.close(),D.current=null,C(!1)}}),M.onerror=()=>{z.current&&M.readyState===EventSource.CLOSED&&(D.current=null,C(!1))}},[e]),L=m.useCallback(()=>{D.current&&(D.current.close(),D.current=null),t(null),r("idle"),i([]),a(null),u(null),f({}),p(0),v([]),g(!1),b(null),S(null),j(null),C(!1),R(!1)},[]);return{executionId:e,phase:n,messages:s,pendingPrompt:o,pendingChoices:c,interpretation:d,confidence:h,missingFields:x,canInitialize:_,gateOutcome:y,project:w,error:k,loading:N,submitting:T,startIntake:O,submitMessage:A,updateField:$,lockAndGenerate:P,reset:L}}const cC=m.createContext(null);function wq({children:e}){const[t,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(null);m.useEffect(()=>{a()},[]);const a=m.useCallback(async()=>{s(!0),o(null);try{const f=await $e.getMe();f&&f.user?n(f.user):n(null)}catch(f){console.error("Auth check failed:",f),o(f.message),n(null)}finally{s(!1)}},[]),c=m.useCallback(f=>{window.location.href=WP(f)},[]),u=m.useCallback(async()=>{try{await $e.logout(),n(null),window.location.href="/"}catch(f){console.error("Logout failed:",f),n(null)}},[]),d={user:t,loading:r,error:i,isAuthenticated:!!t,isAdmin:(t==null?void 0:t.is_admin)||!1,login:c,logout:u,checkAuth:a};return l.jsx(cC.Provider,{value:d,children:e})}function mi(){const e=m.useContext(cC);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const _q="/api/v1/admin";class Sq extends Error{constructor(t,n,r){super(t),this.name="AdminApiError",this.status=n,this.data=r,this.errorCode=r==null?void 0:r.error_code}}function jq(){const e=document.cookie.match(/(?:^|;\s*)csrf=([^;]*)/);return e?decodeURIComponent(e[1]):null}async function Ce(e,t={}){var i;const n=`${_q}${e}`,r={headers:{"Content-Type":"application/json",...t.headers},credentials:"same-origin",...t};if(t.method&&t.method!=="GET"){const o=jq();o&&(r.headers["X-CSRF-Token"]=o)}const s=await fetch(n,r);if(!s.ok){const o=await s.json().catch(()=>({})),a=((i=o.detail)==null?void 0:i.message)||o.detail||`Request failed: ${s.status}`;throw new Sq(a,s.status,o.detail||o)}return s.status===204?null:s.json()}const Ee={getCurrentWorkspace:async()=>{try{return await Ce("/workspaces/current")}catch(e){if(e.status===404&&e.errorCode==="NO_WORKSPACE")return null;throw e}},createWorkspace:()=>Ce("/workspaces",{method:"POST"}),getWorkspaceState:e=>Ce(`/workspaces/${e}/state`),closeWorkspace:(e,t=!1)=>Ce(`/workspaces/${e}?force=${t}`,{method:"DELETE"}),getArtifact:(e,t)=>Ce(`/workspaces/${e}/artifacts/${t}`),writeArtifact:(e,t,n)=>Ce(`/workspaces/${e}/artifacts/${t}`,{method:"PUT",body:JSON.stringify({content:n})}),getPreview:(e,t,n="execution")=>Ce(`/workspaces/${e}/preview/${t}?mode=${n}`),getDiff:(e,t=null)=>{const n=t?`?artifact_id=${encodeURIComponent(t)}`:"";return Ce(`/workspaces/${e}/diff${n}`)},commit:(e,t)=>Ce(`/workspaces/${e}/commit`,{method:"POST",body:JSON.stringify({message:t})}),discard:e=>Ce(`/workspaces/${e}/discard`,{method:"POST"}),getDocumentTypes:()=>Ce("/workbench/document-types"),getDocumentType:(e,t=null)=>{const n=t?`?version=${t}`:"";return Ce(`/workbench/document-types/${e}${n}`)},getDocumentTypeVersions:e=>Ce(`/workbench/document-types/${e}/versions`),getRoles:()=>Ce("/workbench/roles"),getTemplates:()=>Ce("/workbench/templates"),getRole:(e,t=null)=>{const n=t?`?version=${t}`:"";return Ce(`/workbench/roles/${e}${n}`)},getTemplate:(e,t=null)=>{const n=t?`?version=${t}`:"";return Ce(`/workbench/templates/${e}${n}`)},getWorkflows:()=>Ce("/workbench/workflows"),getOrchestrationWorkflows:()=>Ce("/workbench/orchestration-workflows"),getWorkflow:(e,t=null)=>{const n=t?`?version=${t}`:"";return Ce(`/workbench/workflows/${e}${n}`)},createOrchestrationWorkflow:(e,t)=>Ce(`/workspaces/${e}/orchestration-workflows`,{method:"POST",body:JSON.stringify(t)}),deleteOrchestrationWorkflow:(e,t)=>Ce(`/workspaces/${e}/orchestration-workflows/${t}`,{method:"DELETE"}),getActiveReleases:()=>Ce("/workbench/active-releases"),invalidateCache:()=>Ce("/workbench/cache/invalidate",{method:"POST"})};function kq(){const[e,t]=m.useState(null),[n,r]=m.useState(null),[s,i]=m.useState(!0),[o,a]=m.useState(null),c=m.useCallback(async()=>{i(!0),a(null);try{let d=await Ee.getCurrentWorkspace();d||(d=await Ee.createWorkspace()),t(d.workspace_id),r(d.branch)}catch(d){a(d.message),console.error("Failed to initialize workspace:",d)}finally{i(!1)}},[]),u=m.useCallback(async(d=!1)=>{if(e)try{await Ee.closeWorkspace(e,d),t(null),r(null)}catch(f){throw f}},[e]);return m.useEffect(()=>{c()},[c]),{workspaceId:e,branch:n,loading:s,error:o,closeWorkspace:u,reinitialize:c}}function Nq(e,t=1e4){var d,f;const[n,r]=m.useState(null),[s,i]=m.useState(!0),[o,a]=m.useState(null),c=m.useRef(null),u=m.useCallback(async()=>{if(!e){r(null),i(!1);return}try{const h=await Ee.getWorkspaceState(e);r(h),a(null)}catch(h){a(h.message),console.error("Failed to fetch workspace state:",h)}finally{i(!1)}},[e]);return m.useEffect(()=>{e&&(i(!0),u())},[e,u]),m.useEffect(()=>{if(!(!e||!t))return c.current=setInterval(u,t),()=>{c.current&&clearInterval(c.current)}},[e,t,u]),{state:n,loading:s,error:o,refresh:u,isDirty:(n==null?void 0:n.is_dirty)??!1,modifiedArtifacts:(n==null?void 0:n.modified_artifacts)??[],tier1Passed:((d=n==null?void 0:n.tier1)==null?void 0:d.passed)??!0,tier1Results:((f=n==null?void 0:n.tier1)==null?void 0:f.results)??[],expiresAt:n!=null&&n.expires_at?new Date(n.expires_at):null}}function Eq(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{r(!0),i(null);try{const a=await Ee.getDocumentTypes();t(a.document_types||[])}catch(a){i(a.message),console.error("Failed to fetch document types:",a)}finally{r(!1)}},[]);return m.useEffect(()=>{o()},[o]),{documentTypes:e,loading:n,error:s,refresh:o}}function Cq(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{r(!0),i(null);try{const a=await Ee.getRoles();t(a.roles||[])}catch(a){i(a.message),console.error("Failed to fetch roles:",a)}finally{r(!1)}},[]);return m.useEffect(()=>{o()},[o]),{roles:e,loading:n,error:s,refresh:o}}function yy(e,t,{debounceMs:n=500,onSave:r}={}){const[s,i]=m.useState(""),[o,a]=m.useState(""),[c,u]=m.useState(!0),[d,f]=m.useState(null),[h,p]=m.useState(!1),[x,v]=m.useState(null),_=m.useRef(null),g=m.useRef(null),y=m.useCallback(async()=>{if(!e||!t){i(""),a(""),u(!1);return}u(!0),f(null);try{const N=await Ee.getArtifact(e,t);i(N.content),a(N.content)}catch(N){f(N.message),console.error("Failed to load artifact:",N)}finally{u(!1)}},[e,t]),b=m.useCallback(async N=>{if(!(!e||!t)){p(!0),f(null);try{const C=await Ee.writeArtifact(e,t,N);v(C),a(N),r&&r(C)}catch(C){f(C.message),console.error("Failed to save artifact:",C)}finally{p(!1)}}},[e,t,r]),w=m.useCallback(N=>{g.current=N,_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{g.current!==null&&(b(g.current),g.current=null)},n)},[b,n]),S=m.useCallback(N=>{i(N),N!==o&&w(N)},[o,w]),k=m.useCallback(()=>{_.current&&clearTimeout(_.current),g.current=null,i(o)},[o]),j=m.useCallback(()=>{_.current&&clearTimeout(_.current),s!==o&&b(s)},[s,o,b]);return m.useEffect(()=>(y(),()=>{_.current&&clearTimeout(_.current)}),[y]),{content:s,originalContent:o,loading:c,error:d,saving:h,lastSaveResult:x,isDirty:s!==o,updateContent:S,reset:k,saveNow:j,reload:y}}const Rq={documentNode:f6,waypoint:h6},Tq={industrial:"Industrial",light:"Light",blueprint:"Blueprint"};function Iq({projectId:e,projectCode:t,projectName:n,isArchived:r,autoExpandNodeId:s,theme:i,onThemeChange:o,onProjectUpdate:a,onProjectArchive:c,onProjectUnarchive:u,onProjectDelete:d}){const{data:f,lineState:h,loading:p,error:x,connected:v,resolveInterrupt:_}=xq(e),[g,y]=m.useState([]),[b,w]=m.useState(null),[S,k]=m.useState(null),[j,N]=m.useState(null),[C,T]=m.useState(!1),[R,D]=m.useState(""),[z,E]=m.useState(!1),[O,A]=m.useState(!1),$=fc();m.useEffect(()=>{f.length>0&&y(f)},[f]),m.useEffect(()=>{s&&g.length>0&&setTimeout(()=>{w(s),k("questions")},300)},[s,g.length]),m.useEffect(()=>{w(null),k(null)},[e]);const P=m.useCallback(()=>{const U=yr.indexOf(i);o(yr[(U+1)%yr.length])},[i,o]),I=m.useCallback(()=>{D(n||""),T(!0)},[n]),L=m.useCallback(async()=>{if(!R.trim()||R===n){T(!1);return}A(!0);try{await a(e,{name:R.trim()}),T(!1)}catch(U){console.error("Failed to update name:",U)}finally{A(!1)}},[R,n,e,a]),M=m.useCallback(()=>{T(!1),D("")},[]),q=m.useCallback(async()=>{A(!0);try{r?await u(e):await c(e)}catch(U){console.error("Failed to toggle archive:",U)}finally{A(!1)}},[e,r,c,u]),F=m.useCallback(async()=>{A(!0);try{await d(e),E(!1)}catch(U){console.error("Failed to delete:",U)}finally{A(!1)}},[e,d]),W=m.useCallback(U=>{const re=$.getNode(U);if(re){const K=window.innerWidth,H=-re.position.x*.9+K/2-400,pe=-re.position.y*.9+120;$.setViewport({x:H,y:pe,zoom:.9},{duration:800})}},[$]),G=m.useMemo(()=>({onExpand:(U,re)=>{w(U),k(re)},onCollapse:()=>{w(null),k(null),setTimeout(()=>$.fitView({padding:.2,duration:300}),50)},onViewFullDocument:U=>{N(U)},onSubmitQuestions:async(U,re)=>{console.log("Submitted:",U,re);const Y=g.find(K=>K.id===U);if(Y!=null&&Y.interruptId)try{await _(Y.interruptId,re)}catch(K){console.error("Failed to submit answers:",K)}w(null),k(null),y(K=>{const H=pe=>pe.map(be=>be.id===U&&be.stations?{...be,stations:be.stations.map(ye=>ye.id==="pgc"?{...ye,state:"complete",needs_input:!1}:ye.id==="asm"?{...ye,state:"active"}:ye)}:be.children?{...be,children:H(be.children)}:be);return H(K)})}}),[$,g,_]),{layoutNodes:Z,layoutEdges:Q}=m.useMemo(()=>{if(g.length===0)return{layoutNodes:[],layoutEdges:[]};const U={...G,expandType:S,theme:i,onZoomToNode:W,projectId:e,projectCode:t},{nodes:re,edges:Y,epicBacklogId:K,epicChildren:H}=P2(g,b,U),pe=A2(re,Y),{nodes:be,edges:ye}=D2(pe,K,H,b,U);return{layoutNodes:be.map(je=>({...je,data:{...je.data,expandType:je.id===b?S:null}})),layoutEdges:ye}},[g,b,S,G,i,W,e,t]),[te,ne,X]=qN(Z),[ve,ae,me]=$N(Q);m.useEffect(()=>{if(g.length===0)return;const U={...G,expandType:S,theme:i,onZoomToNode:W,projectId:e,projectCode:t},{nodes:re,edges:Y,epicBacklogId:K,epicChildren:H}=P2(g,b,U),pe=A2(re,Y),{nodes:be,edges:ye}=D2(pe,K,H,b,U),we=be.map(je=>({...je,data:{...je.data,expandType:je.id===b?S:null}}));ne(we),ae(ye)},[g,b,S,G,ne,ae,i,W,e,t]);const de=m.useCallback((U,re)=>{},[]);return p&&g.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/logo-light.png",alt:"The Combine",className:"h-12 mx-auto mb-4 animate-pulse"}),l.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading production line..."})]})}):x&&g.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",style:{background:"var(--bg-canvas)"},children:l.jsx("div",{className:"text-center p-6 rounded-lg",style:{background:"var(--bg-panel)"},children:l.jsx("p",{className:"text-red-500 mb-4",children:x})})}):l.jsxs("div",{className:"w-full h-full",children:[l.jsxs(Xv,{nodes:te,edges:ve,onNodesChange:X,onEdgesChange:me,onNodeClick:de,nodeTypes:Rq,nodesDraggable:!1,nodesConnectable:!1,edgesUpdatable:!1,edgesFocusable:!1,elementsSelectable:!1,fitView:!0,fitViewOptions:{padding:.2},minZoom:.3,maxZoom:1.5,style:{background:"var(--bg-canvas)"},proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"smoothstep"},children:[l.jsx(Tr,{position:"top-left",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"subway-panel backdrop-blur rounded-lg px-4 py-3 border",children:l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:"Production Line"}),l.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:[h==="active"&&l.jsx("span",{className:"text-amber-500",children:" Active"}),h==="stopped"&&l.jsx("span",{className:"text-red-500",children:" Stopped"}),h==="complete"&&l.jsx("span",{className:"text-emerald-500",children:" Complete"}),h==="idle"&&l.jsx("span",{children:" Idle"}),!v&&l.jsx("span",{className:"ml-2 text-red-400",children:"(Disconnected)"})]})]}),l.jsx("button",{onClick:P,className:"subway-button px-3 py-1.5 rounded-md text-xs font-medium transition-colors",children:Tq[i]})]})}),l.jsx("div",{className:"subway-panel backdrop-blur rounded-lg px-4 py-3 border",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--state-active-bg)"},children:l.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"text-xs font-mono",style:{color:"var(--text-muted)"},children:t||"No Project"}),C?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("input",{type:"text",value:R,onChange:U=>D(U.target.value),onKeyDown:U=>{U.key==="Enter"&&L(),U.key==="Escape"&&M()},className:"flex-1 px-2 py-1 text-sm rounded border bg-transparent",style:{color:"var(--text-primary)",borderColor:"var(--border-panel)"},autoFocus:!0,disabled:O}),l.jsx("button",{onClick:L,disabled:O,className:"p-1 rounded hover:bg-white/10",title:"Save",children:l.jsx("svg",{className:"w-4 h-4 text-emerald-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("button",{onClick:M,disabled:O,className:"p-1 rounded hover:bg-white/10",title:"Cancel",children:l.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-muted)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}):l.jsx("p",{className:"text-sm font-semibold truncate",style:{color:"var(--text-primary)"},children:n||"Untitled Project"})]}),!C&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:I,className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},title:"Edit name",children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),l.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),l.jsx("button",{onClick:q,disabled:O,className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:r?"#f59e0b":"var(--text-muted)"},title:r?"Unarchive project":"Archive project",children:l.jsxs("svg",{className:"w-4 h-4 relative",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 8v13H3V8M1 3h22v5H1zM10 12h4"}),r&&l.jsx("path",{d:"M4 20L20 4",strokeWidth:"2.5",stroke:"currentColor"})]})}),l.jsx("button",{onClick:()=>E(!0),disabled:O||!r,className:`p-1.5 rounded transition-colors ${r?"hover:bg-red-500/20":""}`,style:{color:"var(--text-muted)",opacity:r?1:.3,cursor:r?"pointer":"not-allowed"},title:r?"Delete project":"Archive project first to delete",children:l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]})]})})]})}),l.jsx(HN,{position:"top-right",nodeColor:U=>{var Y;const re=(Y=U.data)==null?void 0:Y.state;return["produced","stabilized","ready"].includes(re)?"#10b981":["in_production","active"].includes(re)?"#f59e0b":["requirements_not_met","blocked"].includes(re)?"#ef4444":"#475569"},maskColor:"rgba(11, 17, 32, 0.85)",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)",borderRadius:8},pannable:!0,zoomable:!0}),l.jsx(Tr,{position:"bottom-left",children:l.jsxs("div",{className:"subway-panel flex gap-4 text-[10px] backdrop-blur px-4 py-2.5 rounded-lg border",children:[l.jsx("span",{style:{color:"var(--text-muted)"},className:"font-medium",children:"STATE:"}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--state-stabilized-bg)"}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:"Produced"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--state-active-bg)"}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:"In Production"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"var(--state-queued-bg)"}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:"Ready"})]})]})}),l.jsx(Tr,{position:"bottom-right",children:l.jsx("div",{className:"subway-panel text-[10px] px-2 py-1 rounded",style:{color:"var(--text-muted)"},children:"Scroll to zoom | Drag to pan"})})]}),j&&l.jsx(p6,{projectId:e,projectCode:t,docTypeId:j,onClose:()=>N(null)}),z&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:l.jsxs("div",{className:"rounded-lg p-6 max-w-sm mx-4",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Delete Project?"}),l.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:["This will permanently delete ",l.jsx("strong",{children:n})," and all its documents. This action cannot be undone."]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx("button",{onClick:()=>E(!1),disabled:O,className:"px-4 py-2 rounded text-sm font-medium transition-colors",style:{color:"var(--text-muted)"},children:"Cancel"}),l.jsx("button",{onClick:F,disabled:O,className:"px-4 py-2 rounded text-sm font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:O?"Deleting...":"Delete"})]})]})})]})}function Ra({messages:e,pendingPrompt:t}){const n=m.useRef(null);return m.useEffect(()=>{var r;(r=n.current)==null||r.scrollIntoView({behavior:"smooth"})},[e,t]),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.map((r,s)=>l.jsx("div",{className:`flex ${r.role==="user"?"justify-end":"justify-start"}`,children:l.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm ${r.role==="user"?"bg-emerald-500/20 text-emerald-100 rounded-br-sm":"bg-violet-500/20 text-violet-100 rounded-bl-sm"}`,children:r.content})},s)),t&&l.jsx("div",{className:"flex justify-start",children:l.jsx("div",{className:"max-w-[85%] rounded-lg px-3 py-2 text-sm bg-violet-500/20 text-violet-100 rounded-bl-sm",children:t})}),l.jsx("div",{ref:n})]})}function Mq({onSubmit:e,disabled:t,placeholder:n}){const[r,s]=m.useState(""),i=m.useRef(null);m.useEffect(()=>{var c;t||(c=i.current)==null||c.focus()},[t]);const o=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),r.trim()&&!t&&(e(r.trim()),s("")))},a=()=>{r.trim()&&!t&&(e(r.trim()),s(""))};return l.jsxs("div",{className:"p-3 border-t",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{ref:i,value:r,onChange:c=>s(c.target.value),onKeyDown:o,disabled:t,placeholder:n||"Type your message...",rows:2,className:"flex-1 rounded-lg px-3 py-2 text-sm resize-none",style:{background:"var(--bg-input)",border:"1px solid var(--border-input)",color:"var(--text-primary)"}}),l.jsx("button",{onClick:a,disabled:t||!r.trim(),className:`px-4 rounded-lg font-medium text-sm transition-colors ${t||!r.trim()?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-violet-500 text-white hover:bg-violet-400"}`,children:"Send"})]}),l.jsx("p",{className:"text-[10px] mt-1",style:{color:"var(--text-muted)"},children:"Press Enter to send, Shift+Enter for newline"})]})}const Aq={project_name:"Project Name",problem_statement:"Problem Statement",project_type:"Project Type"},Pq=["project_name","problem_statement","project_type"];function Dq({interpretation:e,missingFields:t,canInitialize:n,onUpdateField:r,onInitialize:s,loading:i}){const[o,a]=m.useState(null),[c,u]=m.useState(""),d=(p,x)=>{a(p),u(x)},f=async()=>{o&&c.trim()&&(await r(o,c.trim()),a(null),u(""))},h=()=>{a(null),u("")};return l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Review & Lock"}),t.length>0&&l.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-amber-500/20 text-amber-400",children:[t.length," missing"]})]}),Pq.map(p=>{const x=e[p];if(!x)return null;const v=x.locked,_=t.includes(p),g=o===p;return l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("label",{className:"text-[10px] font-medium",style:{color:"var(--text-muted)"},children:[Aq[p]||p,_&&l.jsx("span",{className:"text-amber-400 ml-1",children:"*"})]}),v&&l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:"locked"})]}),g?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:c,onChange:y=>u(y.target.value),onKeyDown:y=>{y.key==="Enter"&&f(),y.key==="Escape"&&h()},autoFocus:!0,className:"flex-1 rounded px-2 py-1.5 text-xs",style:{background:"var(--bg-input)",border:"1px solid var(--border-input)",color:"var(--text-primary)"}}),l.jsx("button",{onClick:f,className:"px-2 py-1 rounded text-xs bg-emerald-500 text-white",children:"Save"}),l.jsx("button",{onClick:h,className:"px-2 py-1 rounded text-xs",style:{background:"var(--bg-button)",color:"var(--text-muted)"},children:"Cancel"})]}):l.jsx("div",{onClick:()=>!v&&d(p,x.value),className:`rounded px-2 py-1.5 text-xs ${v?"cursor-default":"cursor-pointer hover:bg-white/5"} ${_?"border border-amber-500/50":""}`,style:{background:"var(--bg-input)",color:x.value?"var(--text-primary)":"var(--text-muted)"},children:x.value||"Click to edit..."})]},p)}),l.jsx("button",{onClick:s,disabled:!n||i,className:`w-full py-2.5 rounded-lg text-sm font-medium transition-colors ${n&&!i?"bg-violet-500 text-white hover:bg-violet-400":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:i?"Initializing...":"Lock & Initialize Project"}),!n&&l.jsx("p",{className:"text-[10px] text-center",style:{color:"var(--text-muted)"},children:"Fill all required fields to continue"})]})}function Oq(){return l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[l.jsxs("div",{className:"relative w-16 h-16 mb-4",children:[l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-violet-500/20"}),l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-violet-500 border-r-transparent border-b-transparent border-l-transparent animate-spin"}),l.jsx("div",{className:"absolute inset-3 rounded-full bg-violet-500/20 animate-pulse"})]}),l.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-primary)"},children:"Generating Project"}),l.jsx("p",{className:"text-xs text-center max-w-[200px]",style:{color:"var(--text-muted)"},children:"Creating intake document and running quality checks..."}),l.jsxs("div",{className:"flex gap-1 mt-4",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-bounce",style:{animationDelay:"0ms"}}),l.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-bounce",style:{animationDelay:"150ms"}}),l.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-bounce",style:{animationDelay:"300ms"}})]})]})}const z2={qualified:{icon:"check",iconBg:"bg-emerald-500/20",iconColor:"text-emerald-400",title:"Project Created",description:"Your project is ready for PM Discovery."},not_ready:{icon:"warning",iconBg:"bg-amber-500/20",iconColor:"text-amber-400",title:"Not Ready",description:"Additional information is needed before proceeding."},out_of_scope:{icon:"x",iconBg:"bg-slate-500/20",iconColor:"text-slate-400",title:"Out of Scope",description:"This request is outside the scope of The Combine."},redirect:{icon:"arrow",iconBg:"bg-blue-500/20",iconColor:"text-blue-400",title:"Redirected",description:"This request has been redirected to a different engagement type."},blocked:{icon:"warning",iconBg:"bg-amber-500/20",iconColor:"text-amber-400",title:"Blocked",description:"The workflow could not complete due to validation issues."}};function Lq({type:e,className:t}){switch(e){case"check":return l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})});case"warning":return l.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 9v4M12 17h.01"}),l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"})]});case"x":return l.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});case"arrow":return l.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]});default:return null}}function zq({gateOutcome:e,project:t,onViewProject:n,onClose:r}){const s=z2[e]||z2.blocked,i=e==="qualified";return l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:`w-16 h-16 rounded-full ${s.iconBg} flex items-center justify-center mx-auto mb-4`,children:l.jsx(Lq,{type:s.icon,className:`w-8 h-8 ${s.iconColor}`})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:s.title}),l.jsx("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:s.description}),i&&t&&l.jsxs("div",{className:"rounded-lg p-3 mb-4",style:{background:"var(--bg-input)"},children:[l.jsx("p",{className:"text-xs font-mono mb-1",style:{color:"var(--text-muted)"},children:t.project_id}),l.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:t.name})]}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[i&&t&&l.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg text-sm font-medium bg-emerald-500 text-white hover:bg-emerald-400 transition-colors",children:"View Project"}),l.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"var(--bg-button)",color:"var(--text-muted)"},children:"Close"})]})]})}function qq({onClose:e,onComplete:t}){const{phase:n,messages:r,pendingPrompt:s,interpretation:i,missingFields:o,canInitialize:a,gateOutcome:c,project:u,error:d,loading:f,submitting:h,startIntake:p,submitMessage:x,updateField:v,lockAndGenerate:_,reset:g}=bq();m.useEffect(()=>(p(),()=>g()),[]);const y=()=>{g(),e()},b=()=>{u&&t&&t(u),y()},w=()=>{const k=[{id:"describe",label:"Describe"},{id:"review",label:"Review"},{id:"generating",label:"Generate"},{id:"complete",label:"Done"}],j=k.findIndex(N=>N.id===n);return l.jsx("div",{className:"flex items-center gap-1 text-[10px]",children:k.map((N,C)=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:`px-2 py-0.5 rounded ${C===j?"bg-violet-500/30 text-violet-300":C<j?"text-emerald-400":"text-slate-500"}`,children:N.label}),C<k.length-1&&l.jsx("span",{className:"mx-1 text-slate-600",children:"/"})]},N.id))})},S=()=>{if(f&&n==="idle")return l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"w-8 h-8 border-2 border-t-violet-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})});switch(n){case"describe":return l.jsxs(l.Fragment,{children:[l.jsx(Ra,{messages:r,pendingPrompt:s}),l.jsx(Mq,{onSubmit:x,disabled:h,placeholder:"Describe what you want to build..."})]});case"review":return l.jsxs(l.Fragment,{children:[l.jsx(Ra,{messages:r}),l.jsx("div",{className:"border-t",style:{borderColor:"var(--border-panel)"},children:l.jsx(Dq,{interpretation:i,missingFields:o,canInitialize:a,onUpdateField:v,onInitialize:_,loading:f})})]});case"generating":return l.jsxs(l.Fragment,{children:[l.jsx(Ra,{messages:r}),l.jsx(Oq,{})]});case"complete":return l.jsxs(l.Fragment,{children:[l.jsx(Ra,{messages:r}),l.jsx(zq,{gateOutcome:c,project:u,onViewProject:b,onClose:y})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.6)"},children:l.jsxs("div",{className:"flex flex-col w-full max-w-lg h-[80vh] rounded-xl shadow-2xl tray-slide",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-500/20 flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-violet-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"New Project"}),w()]})]}),l.jsx("button",{onClick:y,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),d&&l.jsx("div",{className:"px-4 py-2 bg-red-500/20 text-red-300 text-sm",children:d}),S()]})})}function $q({onClose:e}){const{user:t,logout:n,isAdmin:r}=mi(),[s,i]=m.useState(null),[o,a]=m.useState([]),[c,u]=m.useState(!1),[d,f]=m.useState(null);m.useEffect(()=>{s==="linked"&&h()},[s]);const h=async()=>{try{u(!0);const S=await fetch("/auth/accounts",{credentials:"include"});if(S.ok){const k=await S.json();a(k.identities||[])}}catch(S){console.error("Failed to load accounts:",S)}finally{u(!1)}},p=S=>{window.location.href=`/auth/accounts/link/${S}`},x=async S=>{var k;if(o.length<=1){f({type:"error",text:"Cannot unlink your only account"});return}if(confirm(`Unlink your ${S} account?`))try{const j=(k=document.cookie.split("; ").find(C=>C.startsWith("csrf=")||C.startsWith("__Host-csrf=")))==null?void 0:k.split("=")[1],N=await fetch(`/auth/accounts/${S}`,{method:"DELETE",credentials:"include",headers:{"X-CSRF-Token":j||""}});if(N.ok)f({type:"success",text:"Account unlinked"}),await h();else{const C=await N.json();throw new Error(C.detail||"Failed to unlink")}}catch(j){f({type:"error",text:j.message})}},v=async()=>{await n(),e()},_=S=>{i(s===S?null:S),f(null)},g={google:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),microsoft:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 23 23",children:[l.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),l.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),l.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),l.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]})},y=[{id:"account",label:"Account",icon:"user",future:!1},{id:"linked",label:"Linked Accounts",icon:"link",future:!1},{id:"team",label:"Team / Org",icon:"users",future:!0},{id:"billing",label:"Billing",icon:"credit-card",future:!0},{id:"preferences",label:"Preferences",icon:"settings",future:!0}],b=S=>{const k={user:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),link:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),l.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),users:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"credit-card":l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),l.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),settings:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})};return k[S]||k.user},w=S=>{switch(S){case"account":return l.jsxs("div",{className:"px-4 py-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Email"}),l.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-primary)"},children:(t==null?void 0:t.email)||"-"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Member since"}),l.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-primary)"},children:t!=null&&t.user_created_at?new Date(t.user_created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"-"})]})]});case"linked":return l.jsxs("div",{className:"px-4 py-3",children:[d&&l.jsx("div",{className:`mb-3 px-3 py-2 rounded text-xs ${d.type==="error"?"bg-red-500/20 text-red-300":"bg-emerald-500/20 text-emerald-300"}`,children:d.text}),c?l.jsx("div",{className:"flex items-center justify-center py-4",children:l.jsx("div",{className:"w-5 h-5 border-2 border-t-blue-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-2 mb-4",children:o.map(k=>l.jsxs("div",{className:"flex items-center justify-between p-2 rounded",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[g[k.provider_id],l.jsx("span",{className:"text-xs",style:{color:"var(--text-primary)"},children:k.provider_email})]}),l.jsx("button",{onClick:()=>x(k.provider_id),disabled:o.length<=1,className:`text-xs px-2 py-1 rounded ${o.length<=1?"text-slate-600 cursor-not-allowed":"text-red-400 hover:bg-red-500/20"}`,children:"Unlink"})]},k.provider_id))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide mb-2",style:{color:"var(--text-muted)"},children:"Link another"}),l.jsxs("button",{onClick:()=>p("google"),className:"w-full flex items-center gap-2 p-2 rounded text-xs hover:bg-white/5",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},children:[g.google,"Google"]}),l.jsxs("button",{onClick:()=>p("microsoft"),className:"w-full flex items-center gap-2 p-2 rounded text-xs hover:bg-white/5",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},children:[g.microsoft,"Microsoft"]})]})]})]});default:return l.jsx("div",{className:"px-4 py-3 text-xs",style:{color:"var(--text-muted)"},children:"Coming soon"})}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",style:{background:"rgba(0, 0, 0, 0.3)"},onClick:e}),l.jsxs("div",{className:"fixed top-12 bottom-0 z-50 w-72 flex flex-col shadow-2xl",style:{left:"240px",background:"var(--bg-panel)",borderRight:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"px-4 py-4 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t!=null&&t.avatar_url?l.jsx("img",{src:t.avatar_url,alt:t.name,className:"w-10 h-10 rounded-full"}):l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--text-muted)"},children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("div",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:(t==null?void 0:t.name)||"User"}),l.jsx("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:(t==null?void 0:t.email)||""})]}),l.jsx("button",{onClick:e,className:"p-1.5 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsx("div",{className:"text-xs px-2 py-1 rounded inline-block",style:{background:"var(--bg-canvas)",color:"var(--text-muted)"},children:"Plan: Individual"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r&&l.jsxs("div",{style:{borderBottom:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"px-4 py-2",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{className:"text-[10px] uppercase tracking-wide font-medium",style:{color:"var(--text-muted)"},children:"Administration"})}),l.jsxs("a",{href:"/admin",className:"w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-white/5",style:{color:"var(--text-primary)",textDecoration:"none"},children:[l.jsx("span",{style:{color:"var(--amber-400, #fbbf24)"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"})]})}),l.jsx("span",{className:"text-sm",children:"Admin Panel"})]}),l.jsxs("a",{href:"/admin/workbench",className:"w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-white/5",style:{color:"var(--text-primary)",textDecoration:"none"},children:[l.jsx("span",{style:{color:"var(--purple-400, #a78bfa)"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),l.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),l.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]})}),l.jsx("span",{className:"text-sm",children:"Prompt Workbench"})]})]}),y.map(S=>l.jsxs("div",{style:{borderBottom:"1px solid var(--border-panel)"},children:[l.jsxs("button",{onClick:()=>!S.future&&_(S.id),className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${S.future?"cursor-not-allowed opacity-50":"hover:bg-white/5"}`,style:{color:"var(--text-primary)"},disabled:S.future,children:[l.jsx("span",{style:{color:"var(--text-muted)"},children:b(S.icon)}),l.jsx("span",{className:"flex-1 text-sm text-left",children:S.label}),S.future?l.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{background:"var(--bg-canvas)",color:"var(--text-muted)"},children:"Soon"}):l.jsx("svg",{className:"w-4 h-4 transition-transform",style:{color:"var(--text-muted)",transform:s===S.id?"rotate(90deg)":"rotate(0deg)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),s===S.id&&!S.future&&l.jsx("div",{style:{background:"var(--bg-canvas)",borderTop:"1px solid var(--border-panel)"},children:w(S.id)})]},S.id))]}),l.jsx("div",{className:"p-4 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsxs("button",{onClick:v,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded text-sm transition-colors hover:bg-white/5",style:{color:"var(--text-muted)"},children:[l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})})]})]})}const fe={bg:"#0f172a",bgElevated:"#1e293b",border:"#334155",textPrimary:"#f8fafc",textSecondary:"#94a3b8",textMuted:"#64748b",textSubtle:"#475569",accent:"#3b82f6",accentHover:"#2563eb"};function Fq(){return l.jsx("header",{className:"h-16 flex items-center justify-center border-b",style:{background:fe.bg,borderColor:fe.border},children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo-dark.png",alt:"The Combine",className:"h-8"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-bold tracking-[0.2em]",style:{color:fe.textPrimary},children:"THE COMBINE"}),l.jsx("span",{className:"text-xs tracking-wide ml-4",style:{color:fe.textMuted},children:"Industrial AI for Knowledge Work"})]})]})})}function Bq(){return l.jsxs("section",{className:"text-center max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-semibold mb-6 leading-tight",style:{color:fe.textPrimary},children:"Turn complex intent into governed, repeatable artifacts."}),l.jsx("p",{className:"text-lg leading-relaxed mb-6",style:{color:fe.textSecondary},children:"The Combine applies manufacturing discipline to AI knowledge work. Every output is traceable. Every decision is auditable. Production over prompting."}),l.jsxs("a",{href:"/learn",className:"text-sm transition-colors inline-flex items-center gap-1",style:{color:fe.textMuted},onMouseOver:e=>e.currentTarget.style.color=fe.textSecondary,onMouseOut:e=>e.currentTarget.style.color=fe.textMuted,children:["Learn how The Combine works",l.jsx("span",{"aria-hidden":"true",children:""})]})]})}function Hq(){const e=[{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Express Intent",description:"Describe what you need"},{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Line Assembles",description:"Stations configure"},{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Gates Enforce",description:"Validation required"},{icon:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z",strokeLinecap:"round",strokeLinejoin:"round"})}),title:"Artifacts Stabilize",description:"Versioned, ready"}];return l.jsx("section",{className:"max-w-4xl mx-auto",children:l.jsx("div",{className:"flex items-start justify-between gap-4",children:e.map((t,n)=>l.jsxs("div",{className:"flex-1 text-center group",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full mb-3",style:{background:fe.bgElevated,border:`1px solid ${fe.border}`,color:fe.textMuted},children:t.icon}),l.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:fe.textPrimary},children:t.title}),l.jsx("p",{className:"text-xs",style:{color:fe.textMuted},children:t.description}),n<e.length-1&&l.jsx("div",{className:"absolute top-5 -right-2 hidden md:block",style:{color:fe.border}})]},n))})})}function Wq(){const e=["Auditable outputs","Traceable decisions","Validated delivery","Human accountability"];return l.jsx("section",{className:"text-center",children:l.jsx("div",{className:"flex flex-wrap justify-center gap-x-6 gap-y-2",children:e.map((t,n)=>l.jsx("span",{className:"text-xs",style:{color:fe.textMuted},children:t},n))})})}function Vq({onLogin:e}){return l.jsxs("section",{className:"text-center",children:[l.jsx("p",{className:"text-sm font-medium mb-4",style:{color:fe.textSecondary},children:"Ready?"}),l.jsxs("div",{className:"inline-flex flex-col gap-3",children:[l.jsxs("button",{onClick:()=>e("google"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:fe.accent,color:"#ffffff"},onMouseOver:t=>t.currentTarget.style.background=fe.accentHover,onMouseOut:t=>t.currentTarget.style.background=fe.accent,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#ffffff",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#ffffff",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#ffffff",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#ffffff",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsxs("button",{onClick:()=>e("microsoft"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:fe.bg,border:`1px solid ${fe.border}`,color:fe.textPrimary},onMouseOver:t=>t.currentTarget.style.background=fe.bgElevated,onMouseOut:t=>t.currentTarget.style.background=fe.bg,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",children:[l.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),l.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),l.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),l.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]}),"Continue with Microsoft"]})]})]})}function Uq(){return l.jsxs("footer",{className:"py-6 flex items-center justify-center gap-6",children:[l.jsx("a",{href:"/terms",className:"text-xs transition-colors",style:{color:fe.textSubtle},onMouseOver:e=>e.currentTarget.style.color=fe.textMuted,onMouseOut:e=>e.currentTarget.style.color=fe.textSubtle,children:"Terms"}),l.jsx("a",{href:"/privacy",className:"text-xs transition-colors",style:{color:fe.textSubtle},onMouseOver:e=>e.currentTarget.style.color=fe.textMuted,onMouseOut:e=>e.currentTarget.style.color=fe.textSubtle,children:"Privacy"}),l.jsx("span",{className:"text-xs",style:{color:fe.border},children:" 2026 The Combine"})]})}function Gq(){const{login:e}=mi();return l.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:fe.bg},children:[l.jsx(Fq,{}),l.jsx("main",{className:"flex-1 flex flex-col justify-center px-8 py-12",children:l.jsxs("div",{className:"space-y-12",children:[l.jsx(Bq,{}),l.jsx(Hq,{}),l.jsx(Wq,{}),l.jsx(Vq,{onLogin:e})]})}),l.jsx(Uq,{})]})}const ce={bg:"#0f172a",bgElevated:"#1e293b",border:"#334155",textPrimary:"#f8fafc",textSecondary:"#94a3b8",textMuted:"#64748b",textSubtle:"#475569",accent:"#3b82f6",accentHover:"#2563eb"};function Kq(){return l.jsxs("header",{className:"h-16 flex items-center justify-between px-6 border-b",style:{background:ce.bg,borderColor:ce.border},children:[l.jsxs("a",{href:"/",className:"flex items-center gap-3 transition-colors",style:{color:ce.textMuted},onMouseOver:e=>e.currentTarget.style.color=ce.textSecondary,onMouseOut:e=>e.currentTarget.style.color=ce.textMuted,children:[l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("span",{className:"text-sm",children:"Back"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo-dark.png",alt:"The Combine",className:"h-6"}),l.jsx("span",{className:"text-sm font-bold tracking-[0.15em]",style:{color:ce.textPrimary},children:"THE COMBINE"})]}),l.jsx("div",{className:"w-16"})," "]})}function Wr({title:e,children:t}){return l.jsxs("section",{className:"mb-16",children:[e&&l.jsx("h2",{className:"text-xl font-semibold mb-6",style:{color:ce.textPrimary},children:e}),t]})}function Xe({children:e,className:t=""}){return l.jsx("p",{className:`text-base leading-relaxed mb-4 ${t}`,style:{color:ce.textSecondary},children:e})}function Di({children:e}){return l.jsx("p",{className:"text-base leading-relaxed mb-4 pl-4",style:{color:ce.textPrimary,borderLeft:`2px solid ${ce.border}`},children:e})}function Ta({items:e}){return l.jsx("ul",{className:"space-y-2 mb-4",children:e.map((t,n)=>l.jsxs("li",{className:"text-base flex items-start gap-3",style:{color:ce.textSecondary},children:[l.jsx("span",{style:{color:ce.textMuted},children:"-"}),t]},n))})}function Ia({number:e,title:t,children:n}){return l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[l.jsxs("span",{className:"text-sm font-mono",style:{color:ce.textMuted},children:[e,"."]}),l.jsx("h3",{className:"text-base font-medium",style:{color:ce.textPrimary},children:t})]}),l.jsx("div",{className:"pl-7",children:l.jsx(Xe,{children:n})})]})}function Ma({title:e,children:t}){return l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-base font-medium mb-2",style:{color:ce.textPrimary},children:e}),l.jsx(Xe,{className:"mb-0",children:t})]})}function Yq({onLogin:e}){return l.jsxs("section",{className:"text-center py-12 rounded-lg",style:{background:ce.bgElevated,border:`1px solid ${ce.border}`},children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:ce.textPrimary},children:"When You're Ready"}),l.jsx(Xe,{className:"max-w-md mx-auto mb-2",children:"You don't need to prepare anything."}),l.jsx(Xe,{className:"max-w-md mx-auto mb-2",children:"You don't need to know the workflow in advance."}),l.jsx(Xe,{className:"max-w-md mx-auto mb-8",children:"You start by stating intent  the system handles the rest."}),l.jsxs("div",{className:"inline-flex flex-col gap-3",children:[l.jsxs("button",{onClick:()=>e("google"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:ce.accent,color:"#ffffff"},onMouseOver:t=>t.currentTarget.style.background=ce.accentHover,onMouseOut:t=>t.currentTarget.style.background=ce.accent,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#ffffff",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#ffffff",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#ffffff",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#ffffff",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsxs("button",{onClick:()=>e("microsoft"),className:"w-64 flex items-center justify-center gap-3 px-4 py-3 rounded font-medium transition-colors",style:{background:ce.bg,border:`1px solid ${ce.border}`,color:ce.textPrimary},onMouseOver:t=>t.currentTarget.style.background=ce.bgElevated,onMouseOut:t=>t.currentTarget.style.background=ce.bg,children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",children:[l.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),l.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),l.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),l.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]}),"Continue with Microsoft"]})]})]})}function Xq(){return l.jsxs("footer",{className:"py-8 text-center",children:[l.jsx("p",{className:"text-sm mb-6",style:{color:ce.textMuted},children:"The Combine does not replace human judgment. It makes it visible."}),l.jsxs("div",{className:"flex items-center justify-center gap-6",children:[l.jsx("a",{href:"/terms",className:"text-xs transition-colors",style:{color:ce.textSubtle},onMouseOver:e=>e.currentTarget.style.color=ce.textMuted,onMouseOut:e=>e.currentTarget.style.color=ce.textSubtle,children:"Terms"}),l.jsx("a",{href:"/privacy",className:"text-xs transition-colors",style:{color:ce.textSubtle},onMouseOver:e=>e.currentTarget.style.color=ce.textMuted,onMouseOut:e=>e.currentTarget.style.color=ce.textSubtle,children:"Privacy"}),l.jsx("span",{className:"text-xs",style:{color:ce.border},children:" 2026 The Combine"})]})]})}function Qq(){const{login:e}=mi();return l.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:ce.bg},children:[l.jsx(Kq,{}),l.jsx("main",{className:"flex-1 px-6 py-12",children:l.jsxs("article",{className:"max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-semibold mb-12 text-center",style:{color:ce.textPrimary},children:"Learn More"}),l.jsxs(Wr,{title:"What The Combine Is",children:[l.jsx(Xe,{children:"The Combine is an AI-assisted production system for knowledge work."}),l.jsx(Xe,{children:"It applies manufacturing discipline to work that is normally informal, fragile, and difficult to audit  system design, architecture, requirements, analysis, and planning."}),l.jsx(Di,{children:"Instead of prompts and chat history, The Combine produces governed artifacts."}),l.jsx(Di,{children:"Instead of experimentation without memory, it runs repeatable production lines."})]}),l.jsxs(Wr,{title:"Why It Exists",children:[l.jsx(Xe,{children:"Most AI tools optimize for speed and creativity. That works well for drafts and exploration."}),l.jsx(Xe,{children:"It breaks down when the work must be:"}),l.jsx(Ta,{items:["Auditable","Traceable","Reviewed","Approved","Reused","Defended"]}),l.jsx(Xe,{children:"The Combine exists for situations where quality, accountability, and repeatability matter more than cleverness."})]}),l.jsxs(Wr,{title:'Why "The Combine"',children:[l.jsx(Xe,{children:"The Combine takes its name from the combine harvester  one of the most important industrial inventions of the 20th century."}),l.jsx(Xe,{children:"Before the combine, harvesting was fragmented, manual, and inconsistent. Separate steps. Separate tools. High variability. Heavy dependence on individual skill."}),l.jsx(Xe,{children:"The combine harvester changed that by integrating many steps into a single, governed production line  increasing consistency, traceability, and scale without removing human oversight."}),l.jsx(Xe,{children:"The Combine applies the same philosophy to AI-driven knowledge work."}),l.jsx(Xe,{children:"Instead of scattered prompts, fragile documents, and unrepeatable decisions, it assembles intent through a structured line:"}),l.jsx(Ta,{items:["Inputs are clarified","Work moves through defined stations","Quality gates enforce discipline","Outputs stabilize into reusable artifacts"]}),l.jsx(Xe,{children:"This is not automation for speed. It is industrialization for reliability."}),l.jsx(Di,{children:"As with the original combine, the breakthrough is not intelligence, but integration."})]}),l.jsxs(Wr,{title:"How It Works",children:[l.jsx(Ia,{number:1,title:"You express intent",children:"You describe what you want to build. The system listens, asks clarifying questions, and confirms scope and constraints."}),l.jsx(Ia,{number:2,title:"A production line is assembled",children:"Based on your intent, The Combine configures a sequence of specialized stations  each responsible for producing a specific artifact."}),l.jsx(Ia,{number:3,title:"Quality gates enforce discipline",children:"Artifacts move forward only when they meet defined criteria. Nothing proceeds without validation."}),l.jsx(Ia,{number:4,title:"Outputs stabilize",children:"Approved artifacts are versioned, bound, and ready for use  not just today, but later."})]}),l.jsxs(Wr,{title:"What Makes It Different",children:[l.jsx(Ma,{title:"Production over prompting",children:"Work progresses through defined stages, not conversations."}),l.jsx(Ma,{title:"Human accountability remains central",children:"AI assists, but humans approve. Nothing ships without oversight."}),l.jsx(Ma,{title:"Every decision is traceable",children:"Why something exists, who approved it, and what assumptions were made are always visible."}),l.jsx(Ma,{title:"Designed for real-world constraints",children:"Compliance, audits, handoffs, and change management are first-class concerns."})]}),l.jsxs(Wr,{title:"What The Combine Is Not",children:[l.jsx(Ta,{items:["A chat interface","A creative writing tool","An autonomous agent that acts without approval","A system that hides its reasoning or decisions"]}),l.jsx(Xe,{children:"If you want improvisation, there are better tools."}),l.jsx(Di,{children:"If you need defensible outcomes, this is what The Combine is built for."})]}),l.jsxs(Wr,{title:"Who It's For",children:[l.jsx(Xe,{children:"The Combine is designed for people responsible for outcomes, including:"}),l.jsx(Ta,{items:["Architects and technical leaders","Product and delivery leaders","Compliance-conscious teams","Organizations that need repeatable, explainable AI support"]}),l.jsx(Di,{children:`If the phrase "nothing ships without validation" resonates, you're in the right place.`})]}),l.jsx(Yq,{onLogin:e})]})}),l.jsx(Xq,{})]})}function Zq(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{r(!0),i(null);try{const a=await Ee.getTemplates();t(a.templates||[])}catch(a){i(a.message),console.error("Failed to fetch templates:",a)}finally{r(!1)}},[]);return m.useEffect(()=>{o()},[o]),{templates:e,loading:n,error:s,refresh:o}}function Jq(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),o=m.useCallback(async()=>{r(!0),i(null);try{const a=await Ee.getOrchestrationWorkflows();t(a.workflows||[])}catch(a){i(a.message),console.error("Failed to fetch orchestration workflows:",a)}finally{r(!1)}},[]);return m.useEffect(()=>{o()},[o]),{workflows:e,loading:n,error:s,refresh:o}}function e$({documentTypes:e=[],roles:t=[],templates:n=[],workflows:r=[],loading:s=!1,rolesLoading:i=!1,templatesLoading:o=!1,workflowsLoading:a=!1,selectedDocType:c=null,selectedRole:u=null,selectedTemplate:d=null,selectedWorkflow:f=null,onSelectDocType:h,onSelectRole:p,onSelectTemplate:x,onSelectWorkflow:v,onCreateWorkflow:_}){const[g,y]=m.useState(!1),[b,w]=m.useState(""),[S,k]=m.useState(!1),j=e.reduce((R,D)=>{const z=D.category||"other";return R[z]||(R[z]=[]),R[z].push(D),R},{}),N=["intake","architecture","planning","other"],C=Object.keys(j).sort((R,D)=>{const z=N.indexOf(R),E=N.indexOf(D);return z===-1&&E===-1?R.localeCompare(D):z===-1?1:E===-1?-1:z-E}),T=async()=>{const R=b.trim().toLowerCase().replace(/\s+/g,"_");if(!(!R||!/^[a-z][a-z0-9_]*$/.test(R))){k(!0);try{await(_==null?void 0:_({workflow_id:R})),w(""),y(!1)}catch{}finally{k(!1)}}};return l.jsxs("div",{className:"w-60 flex flex-col border-r h-full",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Document Types"})}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:s?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):e.length===0?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"No document types found"}):C.map(R=>l.jsxs("div",{className:"py-2",children:[l.jsx("div",{className:"px-4 py-1 text-xs font-medium uppercase tracking-wider",style:{color:"var(--text-muted)"},children:R}),j[R].map(D=>l.jsxs("button",{onClick:()=>{h==null||h(D)},className:"w-full px-4 py-2 text-left text-sm hover:opacity-80 transition-opacity",style:{background:(c==null?void 0:c.doc_type_id)===D.doc_type_id?"var(--bg-selected)":"transparent",color:(c==null?void 0:c.doc_type_id)===D.doc_type_id?"var(--text-primary)":"var(--text-secondary)",borderLeft:(c==null?void 0:c.doc_type_id)===D.doc_type_id?"2px solid var(--action-primary)":"2px solid transparent"},children:[l.jsx("div",{className:"font-medium truncate",children:D.display_name}),l.jsxs("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:["v",D.active_version,D.authority_level&&`  ${D.authority_level}`]})]},D.doc_type_id))]},R))}),l.jsx("div",{className:"px-4 py-3 border-t border-b",style:{borderColor:"var(--border-panel)"},children:l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Roles"})}),l.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"150px"},children:i?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):t.length===0?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"No roles found"}):l.jsx("div",{className:"py-2",children:t.map(R=>l.jsxs("button",{onClick:()=>{p==null||p(R)},className:"w-full px-4 py-2 text-left text-sm hover:opacity-80 transition-opacity",style:{background:(u==null?void 0:u.role_id)===R.role_id?"var(--bg-selected)":"transparent",color:(u==null?void 0:u.role_id)===R.role_id?"var(--text-primary)":"var(--text-secondary)",borderLeft:(u==null?void 0:u.role_id)===R.role_id?"2px solid var(--action-primary)":"2px solid transparent"},children:[l.jsx("div",{className:"font-medium truncate",children:R.role_id.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase())}),l.jsxs("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:["v",R.active_version]})]},R.role_id))})}),l.jsx("div",{className:"px-4 py-3 border-t border-b",style:{borderColor:"var(--border-panel)"},children:l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Templates"})}),l.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"150px"},children:o?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):n.length===0?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"No templates found"}):l.jsx("div",{className:"py-2",children:n.map(R=>l.jsxs("button",{onClick:()=>{x==null||x(R)},className:"w-full px-4 py-2 text-left text-sm hover:opacity-80 transition-opacity",style:{background:(d==null?void 0:d.template_id)===R.template_id?"var(--bg-selected)":"transparent",color:(d==null?void 0:d.template_id)===R.template_id?"var(--text-primary)":"var(--text-secondary)",borderLeft:(d==null?void 0:d.template_id)===R.template_id?"2px solid var(--action-primary)":"2px solid transparent"},children:[l.jsx("div",{className:"font-medium truncate",children:R.template_id.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase())}),l.jsxs("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:["v",R.active_version]})]},R.template_id))})}),l.jsxs("div",{className:"px-4 py-3 border-t border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Workflows"}),_&&l.jsx("button",{onClick:()=>y(!g),className:"text-xs hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},title:"Create new workflow",children:"+ New"})]}),g&&l.jsxs("div",{className:"px-4 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-canvas)"},children:[l.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),onKeyDown:R=>{R.key==="Enter"&&T(),R.key==="Escape"&&(y(!1),w(""))},placeholder:"workflow_id (snake_case)",autoFocus:!0,disabled:S,className:"w-full text-xs px-2 py-1.5 rounded mb-1.5",style:{background:"var(--bg-input, var(--bg-panel))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",outline:"none"}}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:T,disabled:S||!b.trim(),className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",fontWeight:600,border:"none",cursor:S?"wait":"pointer",opacity:!b.trim()||S?.5:1},children:S?"Creating...":"Create"}),l.jsx("button",{onClick:()=>{y(!1),w("")},className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{background:"transparent",color:"var(--text-muted)",border:"none",cursor:"pointer"},children:"Cancel"})]})]}),l.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"150px"},children:a?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):r.length===0?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"No workflows found"}):l.jsx("div",{className:"py-2",children:r.map(R=>l.jsxs("button",{onClick:()=>{v==null||v(R)},className:"w-full px-4 py-2 text-left text-sm hover:opacity-80 transition-opacity",style:{background:(f==null?void 0:f.workflow_id)===R.workflow_id?"var(--bg-selected)":"transparent",color:(f==null?void 0:f.workflow_id)===R.workflow_id?"var(--text-primary)":"var(--text-secondary)",borderLeft:(f==null?void 0:f.workflow_id)===R.workflow_id?"2px solid var(--action-primary)":"2px solid transparent"},children:[l.jsx("div",{className:"font-medium truncate",children:R.workflow_id.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase())}),l.jsxs("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:["v",R.active_version,R.step_count!=null&&`  ${R.step_count} steps`]})]},R.workflow_id))})})]})}function Yr({content:e,onChange:t,loading:n=!1,saving:r=!1,isDirty:s=!1,error:i=null,readOnly:o=!1,placeholder:a="Enter prompt content...",isJson:c=!1}){const u=m.useCallback(()=>{if(!(!e||!c))try{const d=JSON.parse(e),f=JSON.stringify(d,null,2);t==null||t(f)}catch(d){console.warn("Invalid JSON, cannot format:",d.message)}},[e,c,t]);return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[o&&l.jsx("span",{className:"px-2 py-0.5 rounded",style:{background:"var(--border-panel)",color:"var(--text-muted)"},children:"Read-only"}),!o&&s&&l.jsx("span",{style:{color:"var(--text-muted)"},children:"Modified"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[c&&!o&&l.jsx("button",{onClick:u,className:"px-2 py-0.5 rounded text-xs hover:opacity-80",style:{background:"var(--bg-button)",color:"var(--text-muted)"},children:"Format JSON"}),n&&l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading..."}),r&&l.jsx("span",{style:{color:"var(--state-active-text)"},children:"Saving..."}),!r&&!n&&s&&l.jsx("span",{style:{color:"var(--action-success)"},children:"Saved"}),i&&l.jsxs("span",{style:{color:"var(--state-error-text)"},children:["Error: ",i]})]})]}),l.jsx("div",{className:"flex-1 relative",children:n?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading content..."})}):l.jsx("textarea",{value:e,onChange:d=>t==null?void 0:t(d.target.value),placeholder:a,readOnly:o,className:"w-full h-full p-4 resize-none font-mono text-sm",style:{background:"var(--bg-canvas)",color:"var(--text-primary)",border:"none",outline:"none"},spellCheck:!1})})]})}function t$({workspaceId:e,artifactId:t}){const[n,r]=m.useState(null),[s,i]=m.useState(!0),[o,a]=m.useState(null);return m.useEffect(()=>{if(!e||!t){r(null),i(!1);return}(async()=>{i(!0),a(null);try{const u=await Ee.getPreview(e,t);r(u)}catch(u){a(u.message),console.error("Failed to load preview:",u)}finally{i(!1)}})()},[e,t]),l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"px-3 py-2 text-xs border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Resolved Prompt (for execution)"}),l.jsx("span",{className:"px-2 py-0.5 rounded",style:{background:"var(--border-panel)",color:"var(--text-muted)"},children:"Read-only"})]}),(n==null?void 0:n.provenance)&&l.jsxs("div",{className:"space-y-1 font-mono",style:{color:"var(--text-muted)"},children:[n.provenance.role&&l.jsxs("div",{children:["Role: ",n.provenance.role]}),n.provenance.schema&&l.jsxs("div",{children:["Schema: ",n.provenance.schema]}),n.provenance.package&&l.jsxs("div",{children:["Package: ",n.provenance.package]})]})]}),l.jsx("div",{className:"flex-1 relative overflow-auto",children:s?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading preview..."})}):o?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-4 rounded",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--state-error-bg)"},children:[l.jsx("div",{className:"font-medium mb-2",style:{color:"var(--state-error-text)"},children:"Preview Failed"}),l.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:o})]})}):l.jsx("pre",{className:"p-4 font-mono text-sm whitespace-pre-wrap",style:{background:"var(--bg-canvas)",color:"var(--text-primary)",margin:0},children:(n==null?void 0:n.resolved_prompt)||"No preview available"})})]})}function n$({workspaceId:e,docType:t,roles:n=[],onSave:r}){const[s,i]=m.useState(null),[o,a]=m.useState(!1),[c,u]=m.useState(!1),[d,f]=m.useState(null),[h,p]=m.useState(!1);m.useEffect(()=>{var b,w,S;t&&(i({display_name:t.display_name||"",description:t.description||"",authority_level:t.authority_level||"elaborative",creation_mode:t.creation_mode||"llm_generated",production_mode:t.production_mode||"",scope:t.scope||"project",role_prompt_ref:t.role_prompt_ref||"",template_ref:t.template_ref||"",required_inputs:t.required_inputs||[],optional_inputs:t.optional_inputs||[],creates_children:t.creates_children||[],parent_doc_type:t.parent_doc_type||"",ui_icon:((b=t.ui)==null?void 0:b.icon)||"",ui_category:((w=t.ui)==null?void 0:w.category)||"",ui_display_order:((S=t.ui)==null?void 0:S.display_order)||0}),p(!1),f(null))},[t]);const x=m.useCallback((b,w)=>{i(S=>({...S,[b]:w})),p(!0)},[]),v=m.useCallback((b,w)=>{const S=w.split(",").map(k=>k.trim()).filter(k=>k);i(k=>({...k,[b]:S})),p(!0)},[]),_=m.useCallback(b=>{if(!b)return"";const w=n.find(S=>S.role_id===b);return w?`prompt:role:${b}:${w.active_version}`:""},[n]),g=m.useCallback(b=>{if(!b)return"";const w=b.split(":");return w.length>=3&&w[0]==="prompt"&&w[1]==="role"?w[2]:""},[]),y=m.useCallback(async()=>{if(!(!e||!t||!s)){u(!0),f(null);try{const b=t.version||t.active_version,w=`doctype:${t.doc_type_id}:${b}:manifest`,S=r$(t.doc_type_id,b,s),k=await Ee.writeArtifact(e,w,S);p(!1),r==null||r(w,k)}catch(b){console.error("Failed to save package:",b),f(b.message)}finally{u(!1)}}},[e,t,s,r]);return!t||!s?l.jsx("div",{className:"flex items-center justify-center h-full",style:{color:"var(--text-muted)"},children:"Loading package configuration..."}):l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsx("div",{className:"flex items-center gap-2",children:h&&l.jsx("span",{style:{color:"var(--text-muted)"},children:"Modified"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[c&&l.jsx("span",{style:{color:"var(--state-active-text)"},children:"Saving..."}),d&&l.jsxs("span",{style:{color:"var(--state-error-text)"},children:["Error: ",d]}),l.jsx("button",{onClick:y,disabled:!h||c,className:"px-3 py-1 rounded text-xs",style:{background:h?"var(--action-primary)":"var(--bg-panel)",color:h?"#000":"var(--text-muted)",opacity:h&&!c?1:.5},children:"Save Package"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"max-w-2xl space-y-6",children:[l.jsxs(Oi,{title:"Identity",children:[l.jsx(Tt,{label:"Display Name",children:l.jsx("input",{type:"text",value:s.display_name,onChange:b=>x("display_name",b.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(Tt,{label:"Description",children:l.jsx("textarea",{value:s.description,onChange:b=>x("description",b.target.value),rows:3,className:"w-full px-3 py-2 rounded text-sm resize-none",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})})]}),l.jsxs(Oi,{title:"Classification",children:[l.jsx(Tt,{label:"Authority Level",children:l.jsxs("select",{value:s.authority_level,onChange:b=>x("authority_level",b.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"descriptive",children:"Descriptive"}),l.jsx("option",{value:"prescriptive",children:"Prescriptive"}),l.jsx("option",{value:"constructive",children:"Constructive"}),l.jsx("option",{value:"elaborative",children:"Elaborative"})]})}),l.jsx(Tt,{label:"Creation Mode",children:l.jsxs("select",{value:s.creation_mode,onChange:b=>x("creation_mode",b.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"llm_generated",children:"LLM Generated"}),l.jsx("option",{value:"constructed",children:"Constructed"}),l.jsx("option",{value:"extracted",children:"Extracted"})]})}),l.jsx(Tt,{label:"Scope",children:l.jsxs("select",{value:s.scope,onChange:b=>x("scope",b.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"project",children:"Project"}),l.jsx("option",{value:"epic",children:"Epic"}),l.jsx("option",{value:"feature",children:"Feature"})]})})]}),l.jsx(Oi,{title:"Shared References",children:l.jsxs(Tt,{label:"Role Prompt",children:[l.jsxs("select",{value:g(s.role_prompt_ref),onChange:b=>x("role_prompt_ref",_(b.target.value)),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"",children:"None"}),n.map(b=>l.jsx("option",{value:b.role_id,children:b.role_id.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase())},b.role_id))]}),s.role_prompt_ref&&l.jsx("div",{className:"mt-1 text-xs",style:{color:"var(--text-muted)"},children:s.role_prompt_ref})]})}),l.jsxs(Oi,{title:"Dependencies",children:[l.jsx(Tt,{label:"Required Inputs",hint:"Comma-separated doc type IDs",children:l.jsx("input",{type:"text",value:s.required_inputs.join(", "),onChange:b=>v("required_inputs",b.target.value),placeholder:"e.g., project_discovery, technical_architecture",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(Tt,{label:"Optional Inputs",hint:"Comma-separated doc type IDs",children:l.jsx("input",{type:"text",value:s.optional_inputs.join(", "),onChange:b=>v("optional_inputs",b.target.value),placeholder:"e.g., technical_architecture",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(Tt,{label:"Parent Doc Type",children:l.jsx("input",{type:"text",value:s.parent_doc_type,onChange:b=>x("parent_doc_type",b.target.value),placeholder:"e.g., implementation_plan",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(Tt,{label:"Creates Children",hint:"Comma-separated doc type IDs",children:l.jsx("input",{type:"text",value:s.creates_children.join(", "),onChange:b=>v("creates_children",b.target.value),placeholder:"e.g., feature, story",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})})]}),l.jsxs(Oi,{title:"UI Configuration",children:[l.jsx(Tt,{label:"Icon",children:l.jsx("input",{type:"text",value:s.ui_icon,onChange:b=>x("ui_icon",b.target.value),placeholder:"e.g., search, package, map",className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})}),l.jsx(Tt,{label:"Category",children:l.jsxs("select",{value:s.ui_category,onChange:b=>x("ui_category",b.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"},children:[l.jsx("option",{value:"",children:"Select category..."}),l.jsx("option",{value:"intake",children:"Intake"}),l.jsx("option",{value:"architecture",children:"Architecture"}),l.jsx("option",{value:"planning",children:"Planning"}),l.jsx("option",{value:"execution",children:"Execution"})]})}),l.jsx(Tt,{label:"Display Order",children:l.jsx("input",{type:"number",value:s.ui_display_order,onChange:b=>x("ui_display_order",parseInt(b.target.value)||0),className:"w-full px-3 py-2 rounded text-sm",style:{background:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-panel)"}})})]})]})})]})}function Oi({title:e,children:t}){return l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold mb-3 uppercase tracking-wide",style:{color:"var(--text-muted)"},children:e}),l.jsx("div",{className:"space-y-4",children:t})]})}function Tt({label:e,hint:t,children:n}){return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&l.jsxs("span",{className:"ml-2 text-xs",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),n]})}function r$(e,t,n){return[`# ${n.display_name} Package`,`# Version ${t}`,"",`doc_type_id: ${e}`,`display_name: "${n.display_name}"`,`version: "${t}"`,"description: >",`  ${n.description.replace(/\n/g,`
  `)}`,"","# Classification",`authority_level: ${n.authority_level}`,`creation_mode: ${n.creation_mode}`,n.production_mode?`production_mode: ${n.production_mode}`:"production_mode: null",`scope: ${n.scope}`,"","# Dependencies",`required_inputs: [${n.required_inputs.map(s=>`"${s}"`).join(", ")}]`,`optional_inputs: [${n.optional_inputs.map(s=>`"${s}"`).join(", ")}]`,`creates_children: [${n.creates_children.map(s=>`"${s}"`).join(", ")}]`,`parent_doc_type: ${n.parent_doc_type?`"${n.parent_doc_type}"`:"null"}`,"","# Shared artifact references",`role_prompt_ref: ${n.role_prompt_ref?`"${n.role_prompt_ref}"`:"null"}`,`template_ref: ${n.template_ref?`"${n.template_ref}"`:"null"}`,"","# Packaged artifacts","artifacts:",'  task_prompt: "prompts/task.prompt.txt"',"  qa_prompt: null","  reflection_prompt: null","  pgc_context: null","  questions_prompt: null",'  schema: "schemas/output.schema.json"',"","# Tests","tests:","  fixtures: []","  golden_traces: []","","# Gating rules","gating_rules:","  lifecycle_states: []","  design_status: []","  acceptance_required: false","  accepted_by: []","","# UI configuration","ui:",`  icon: ${n.ui_icon||"file"}`,`  category: ${n.ui_category||"other"}`,`  display_order: ${n.ui_display_order||0}`,""].join(`
`)}function uC(e,t,{debounceMs:n=1e3,onSave:r}={}){const[s,i]=m.useState(null),[o,a]=m.useState(null),[c,u]=m.useState(!0),[d,f]=m.useState(null),[h,p]=m.useState(!1),[x,v]=m.useState(null),_=m.useRef(null),g=m.useRef(null),y=m.useCallback(async()=>{if(!e||!t){i(null),a(null),u(!1);return}u(!0),f(null);try{const j=await Ee.getArtifact(e,t),N=JSON.parse(j.content);i(N),a(N)}catch(j){f(j.message),console.error("Failed to load workflow artifact:",j)}finally{u(!1)}},[e,t]),b=m.useCallback(async j=>{if(!(!e||!t)){p(!0),f(null);try{const N=JSON.stringify(j,null,2),C=await Ee.writeArtifact(e,t,N);v(C),a(j),r&&r(C)}catch(N){f(N.message),console.error("Failed to save workflow:",N)}finally{p(!1)}}},[e,t,r]),w=m.useCallback(j=>{g.current=j,_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{g.current!==null&&(b(g.current),g.current=null)},n)},[b,n]),S=m.useCallback(j=>{i(j),w(j)},[w]),k=m.useCallback(()=>{_.current&&clearTimeout(_.current),s&&b(s)},[s,b]);return m.useEffect(()=>(y(),()=>{_.current&&clearTimeout(_.current)}),[y]),{workflowJson:s,originalJson:o,loading:c,error:d,saving:h,lastSaveResult:x,isDirty:s!==o,updateWorkflow:S,saveNow:k,reload:y}}function s$({data:e,selected:t}){const{config:n,isEntry:r}=e,s=e.type==="end";return l.jsxs("div",{style:{background:n.bgColor,border:`2px solid ${t?n.color:n.borderColor}`,borderRadius:8,padding:"8px 12px",minWidth:180,maxWidth:220,boxShadow:t?`0 0 12px ${n.color}40`:"none",transition:"box-shadow 0.2s"},children:[l.jsx(Mn,{type:"target",position:ee.Top,style:{background:n.color,width:8,height:8,border:"none"}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[l.jsx("span",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",color:n.color,letterSpacing:"0.05em"},children:n.label}),r&&l.jsx("span",{style:{fontSize:8,padding:"1px 5px",borderRadius:3,background:n.color,color:"#fff",fontWeight:700,letterSpacing:"0.05em"},children:"ENTRY"})]}),l.jsx("div",{style:{fontSize:12,fontWeight:600,color:"var(--text-primary)",marginBottom:2},children:e.node_id}),e.description&&l.jsx("div",{style:{fontSize:10,color:"var(--text-muted)",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"14px",maxHeight:"28px"},children:e.description}),l.jsxs("div",{style:{display:"flex",gap:4,marginTop:4,flexWrap:"wrap"},children:[e.produces&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:"rgba(59,130,246,0.2)",color:"#3b82f6"},children:e.produces}),e.terminal_outcome&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:e.terminal_outcome==="stabilized"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:e.terminal_outcome==="stabilized"?"#10b981":"#ef4444"},children:e.terminal_outcome}),e.requires_qa&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:"rgba(139,92,246,0.2)",color:"#8b5cf6"},children:"QA"}),e.qa_mode&&l.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,background:"rgba(139,92,246,0.1)",color:"#8b5cf6"},children:e.qa_mode})]}),!s&&l.jsx(Mn,{type:"source",position:ee.Bottom,style:{background:n.color,width:8,height:8,border:"none"}})]})}const i$=m.memo(s$),Ol={intake_gate:{color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.15)",borderColor:"rgba(245, 158, 11, 0.5)",label:"Intake Gate"},task:{color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"rgba(59, 130, 246, 0.5)",label:"Task"},qa:{color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.5)",label:"QA"},pgc:{color:"#06b6d4",bgColor:"rgba(6, 182, 212, 0.15)",borderColor:"rgba(6, 182, 212, 0.5)",label:"PGC"},gate:{color:"#f97316",bgColor:"rgba(249, 115, 22, 0.15)",borderColor:"rgba(249, 115, 22, 0.5)",label:"Gate"},end:{color:"#10b981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"rgba(16, 185, 129, 0.5)",label:"End"}},o$={color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"rgba(239, 68, 68, 0.5)",label:"End"},q2=220,$2=110;function F2(e){if(!e||!e.nodes)return{nodes:[],edges:[]};const t=e.entry_node_ids||[],n=e.nodes.map(s=>{const i=Ol[s.type]||Ol.task,a=s.type==="end"&&["blocked","abandoned"].includes(s.terminal_outcome)?o$:i;return{id:s.node_id,type:"workflowNode",position:s._position||{x:0,y:0},data:{...s,config:a,isEntry:t.includes(s.node_id)}}}),r=(e.edges||[]).map(s=>{const i=s.non_advancing||!s.to_node_id,o=s.conditions&&s.conditions.length>0;let a=s.label||s.outcome;if(o){const c=s.conditions[0],u={eq:"=",ne:"!=",lt:"<",lte:"<=",gt:">",gte:">="}[c.operator]||c.operator;a=`${a} (${c.type} ${u} ${c.value})`}return{id:s.edge_id,source:s.from_node_id,target:s.to_node_id||s.from_node_id,type:"smoothstep",animated:i,label:a,data:{...s},style:{stroke:i?"#6b7280":"#64748b",strokeWidth:2,strokeDasharray:i?"5,5":void 0},labelStyle:{fontSize:10,fill:"var(--text-muted)"},labelBgStyle:{fill:"var(--bg-panel)",fillOpacity:.9},markerEnd:s.to_node_id?{type:"arrowclosed",color:"#64748b"}:void 0}});return{nodes:n,edges:r}}function B2(e,t,n="TB"){const r=new Dl.graphlib.Graph;return r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:n,nodesep:60,ranksep:80,marginx:40,marginy:40}),e.forEach(s=>{r.setNode(s.id,{width:q2,height:$2})}),t.forEach(s=>{s.target!==s.source&&r.setEdge(s.source,s.target)}),Dl.layout(r),e.map(s=>{const i=r.node(s.id);return i?{...s,position:{x:i.x-q2/2,y:i.y-$2/2}}:s})}function a$(e,t){const n=new Set(t.map(i=>i.id||i.node_id));let r=1,s=`${e}_${r}`;for(;n.has(s);)r++,s=`${e}_${r}`;return s}function l$(e,t,n){const r=new Set(n.map(o=>o.id||o.edge_id));let s=1,i=`${e}_to_${t}`;for(;r.has(i);)s++,i=`${e}_to_${t}_${s}`;return i}function c$(e,t={x:100,y:100}){const r={node_id:e+"_new",type:e,description:""};return e==="end"&&(r.terminal_outcome="stabilized"),(e==="task"||e==="pgc")&&(r.task_ref="",r.includes={}),e==="qa"&&(r.requires_qa=!0,r.qa_mode="semantic"),r}const u$={workflowNode:i$},d$=[{value:"task",label:"Task"},{value:"qa",label:"QA"},{value:"pgc",label:"PGC"},{value:"gate",label:"Gate"},{value:"end",label:"End"},{value:"intake_gate",label:"Intake Gate"}];function f$({workflowJson:e,onWorkflowChange:t,selectedNodeId:n,selectedEdgeId:r,onNodeSelect:s,onEdgeSelect:i}){const o=fc(),[a,c,u]=qN([]),[d,f,h]=$N([]),[p,x]=m.useState(!1),v=m.useRef(!1);m.useEffect(()=>{if(!e){c([]),f([]);return}let{nodes:C,edges:T}=F2(e);(!C.some(D=>D.position.x!==0||D.position.y!==0)||!v.current)&&(C=B2(C,T),v.current=!0),c(C),f(T)},[e,c,f]);const _=m.useCallback(C=>{if(!e)return;const R={edge_id:l$(C.source,C.target,e.edges||[]),from_node_id:C.source,to_node_id:C.target,outcome:"success",label:"",kind:"auto"},D={...e,edges:[...e.edges||[],R]};t(D)},[e,t]),g=m.useCallback((C,T)=>{if(!e)return;const R=e.nodes.map(D=>D.node_id===T.id?{...D,_position:T.position}:D);t({...e,nodes:R})},[e,t]),y=m.useCallback((C,T)=>{s==null||s(T.id)},[s]),b=m.useCallback((C,T)=>{i==null||i(T.id)},[i]),w=m.useCallback(()=>{s==null||s(null),i==null||i(null)},[s,i]),S=m.useCallback(C=>{if(C.key==="Delete"||C.key==="Backspace"){if(n&&e){const T={...e,nodes:e.nodes.filter(R=>R.node_id!==n),edges:e.edges.filter(R=>R.from_node_id!==n&&R.to_node_id!==n),entry_node_ids:(e.entry_node_ids||[]).filter(R=>R!==n)};t(T),s==null||s(null)}else if(r&&e){const T={...e,edges:e.edges.filter(R=>R.edge_id!==r)};t(T),i==null||i(null)}}},[n,r,e,t,s,i]),k=m.useCallback(C=>{if(!e)return;const T=a$(C,e.nodes||[]),R=c$(C);R.node_id=T;const D=o.getViewport(),z=(-D.x+window.innerWidth/2)/D.zoom,E=(-D.y+window.innerHeight/2)/D.zoom;R._position={x:z-110,y:E-50};const O={...e,nodes:[...e.nodes||[],R]};t(O),x(!1),s==null||s(T)},[e,t,o,s]),j=m.useCallback(()=>{if(!e)return;let{nodes:C,edges:T}=F2(e);C=B2(C,T);const R=e.nodes.map(D=>{const z=C.find(E=>E.id===D.node_id);return z?{...D,_position:z.position}:D});t({...e,nodes:R}),setTimeout(()=>{o.fitView({padding:.2,duration:300})},50)},[e,t,o]),N=m.useCallback(()=>{o.fitView({padding:.2,duration:300})},[o]);return l.jsx("div",{className:"flex-1 relative",onKeyDown:S,tabIndex:0,style:{outline:"none"},children:l.jsxs(Xv,{nodes:a,edges:d,onNodesChange:u,onEdgesChange:h,onConnect:_,onNodeDragStop:g,onNodeClick:y,onEdgeClick:b,onPaneClick:w,nodeTypes:u$,fitView:!0,fitViewOptions:{padding:.2},minZoom:.2,maxZoom:2,style:{background:"var(--bg-canvas)"},proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"smoothstep"},deleteKeyCode:null,children:[l.jsx(Tr,{position:"top-left",children:l.jsxs("div",{className:"flex gap-2 px-3 py-2 rounded-lg border backdrop-blur",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>x(!p),className:"px-2.5 py-1.5 rounded text-xs font-medium transition-colors hover:opacity-80",style:{background:"var(--action-primary)",color:"#000"},children:"+ Add Node"}),p&&l.jsx("div",{className:"absolute top-full left-0 mt-1 rounded-lg border shadow-xl z-10",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)",minWidth:140},children:d$.map(C=>{const T=Ol[C.value]||{};return l.jsxs("button",{onClick:()=>k(C.value),className:"w-full px-3 py-2 text-left text-xs hover:opacity-80 transition-colors flex items-center gap-2",style:{color:"var(--text-primary)"},children:[l.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{background:T.color}}),C.label]},C.value)})})]}),l.jsx("button",{onClick:j,className:"px-2.5 py-1.5 rounded text-xs transition-colors",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Auto Layout"}),l.jsx("button",{onClick:N,className:"px-2.5 py-1.5 rounded text-xs transition-colors",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Fit View"})]})}),l.jsx(HN,{position:"bottom-right",nodeColor:C=>{var R;const T=(R=C.data)==null?void 0:R.config;return(T==null?void 0:T.color)||"#475569"},maskColor:"rgba(11, 17, 32, 0.85)",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)",borderRadius:8},pannable:!0,zoomable:!0}),l.jsx(Tr,{position:"bottom-left",children:l.jsx("div",{className:"flex gap-3 text-[10px] px-3 py-2 rounded-lg border backdrop-blur",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)"},children:Object.entries(Ol).map(([C,T])=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{background:T.color}}),l.jsx("span",{style:{color:"var(--text-muted)"},children:T.label})]},C))})}),l.jsx(Tr,{position:"top-right",children:l.jsx("div",{className:"text-[10px] px-2 py-1 rounded",style:{color:"var(--text-muted)"},children:"Drag to connect | Delete to remove | Scroll to zoom"})})]})})}const h$=[{value:"intake_gate",label:"Intake Gate"},{value:"task",label:"Task"},{value:"qa",label:"QA"},{value:"pgc",label:"PGC"},{value:"gate",label:"Gate"},{value:"end",label:"End"}],p$=["semantic","structural","hybrid"],m$=["stabilized","blocked","abandoned"],jn={width:"100%",padding:"6px 8px",borderRadius:4,fontSize:12,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},zn={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"};function g$({node:e,onChange:t,onDelete:n}){const[r,s]=m.useState(e);m.useEffect(()=>{s(e)},[e]);const i=(u,d)=>{const f={...r,[u]:d};s(f),t(f)},o=(u,d)=>{const f={...r.includes,[u]:d},h={...r,includes:f};s(h),t(h)},a=u=>{const d={...r.includes};delete d[u];const f={...r,includes:d};s(f),t(f)},c=()=>{const u={...r.includes,NEW_KEY:""},d={...r,includes:u};s(d),t(d)};return r?l.jsxs("div",{className:"w-64 border-l overflow-y-auto flex-shrink-0",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Node Properties"}),l.jsx("button",{onClick:()=>n(r.node_id),className:"p-1 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444"},title:"Delete node",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),l.jsxs("div",{className:"p-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Node ID"}),l.jsx("input",{type:"text",value:r.node_id||"",onChange:u=>i("node_id",u.target.value),style:jn})]}),l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Type"}),l.jsx("select",{value:r.type||"task",onChange:u=>i("type",u.target.value),style:jn,children:h$.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Description"}),l.jsx("textarea",{value:r.description||"",onChange:u=>i("description",u.target.value),rows:3,style:{...jn,resize:"vertical"}})]}),["task","qa","pgc","intake_gate"].includes(r.type)&&l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Task Ref"}),l.jsx("input",{type:"text",value:r.task_ref||"",onChange:u=>i("task_ref",u.target.value),placeholder:"tasks/Name v1.0",style:jn})]}),["task","intake_gate"].includes(r.type)&&l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Produces"}),l.jsx("input",{type:"text",value:r.produces||"",onChange:u=>i("produces",u.target.value),placeholder:"document_type",style:jn})]}),r.type==="qa"&&l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"QA Mode"}),l.jsx("select",{value:r.qa_mode||"semantic",onChange:u=>i("qa_mode",u.target.value),style:jn,children:p$.map(u=>l.jsx("option",{value:u,children:u},u))})]}),r.type==="end"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Terminal Outcome"}),l.jsx("select",{value:r.terminal_outcome||"stabilized",onChange:u=>i("terminal_outcome",u.target.value),style:jn,children:m$.map(u=>l.jsx("option",{value:u,children:u},u))})]}),l.jsxs("div",{children:[l.jsx("label",{style:zn,children:"Gate Outcome"}),l.jsx("input",{type:"text",value:r.gate_outcome||"",onChange:u=>i("gate_outcome",u.target.value),placeholder:"e.g., complete, failed",style:jn})]})]}),l.jsxs("div",{className:"flex gap-4",children:[r.type==="qa"&&l.jsxs("label",{className:"flex items-center gap-1.5 text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("input",{type:"checkbox",checked:r.requires_qa||!1,onChange:u=>i("requires_qa",u.target.checked)}),"Requires QA"]}),l.jsxs("label",{className:"flex items-center gap-1.5 text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("input",{type:"checkbox",checked:r.non_advancing||!1,onChange:u=>i("non_advancing",u.target.checked)}),"Non-advancing"]})]}),["task","pgc"].includes(r.type)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{style:zn,children:"Includes"}),l.jsx("button",{onClick:c,className:"text-xs px-1.5 py-0.5 rounded hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent"},children:"+ Add"})]}),l.jsx("div",{className:"space-y-2",children:Object.entries(r.includes||{}).map(([u,d])=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("input",{type:"text",value:u,onChange:f=>{const h={...r.includes};delete h[u],h[f.target.value]=d;const p={...r,includes:h};s(p),t(p)},style:{...jn,width:"35%",fontSize:10},placeholder:"KEY"}),l.jsx("input",{type:"text",value:d,onChange:f=>o(u,f.target.value),style:{...jn,flex:1,fontSize:10},placeholder:"path/to/file"}),l.jsx("button",{onClick:()=>a(u),className:"text-xs px-1",style:{color:"#ef4444"},children:"x"})]},u))})]})]})]}):null}const v$=["auto","user_choice"],y$=["eq","ne","lt","lte","gt","gte"],qn={width:"100%",padding:"6px 8px",borderRadius:4,fontSize:12,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)"},Vr={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"};function x$({edge:e,nodeIds:t,onChange:n,onDelete:r}){const[s,i]=m.useState(e);m.useEffect(()=>{i(e)},[e]);const o=(d,f)=>{const h={...s,[d]:f};i(h),n(h)},a=()=>{const d=[...s.conditions||[],{type:"retry_count",operator:"lt",value:2}];o("conditions",d)},c=(d,f,h)=>{const p=[...s.conditions||[]];p[d]={...p[d],[f]:h},o("conditions",p)},u=d=>{const f=(s.conditions||[]).filter((h,p)=>p!==d);o("conditions",f)};return s?l.jsxs("div",{className:"w-64 border-l overflow-y-auto flex-shrink-0",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",style:{borderColor:"var(--border-panel)"},children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Edge Properties"}),l.jsx("button",{onClick:()=>r(s.edge_id),className:"p-1 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444"},title:"Delete edge",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),l.jsxs("div",{className:"p-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{style:Vr,children:"Edge ID"}),l.jsx("input",{type:"text",value:s.edge_id||"",onChange:d=>o("edge_id",d.target.value),style:qn})]}),l.jsxs("div",{children:[l.jsx("label",{style:Vr,children:"From Node"}),l.jsx("select",{value:s.from_node_id||"",onChange:d=>o("from_node_id",d.target.value),style:qn,children:t.map(d=>l.jsx("option",{value:d,children:d},d))})]}),l.jsxs("div",{children:[l.jsx("label",{style:Vr,children:"To Node"}),l.jsxs("select",{value:s.to_node_id||"",onChange:d=>o("to_node_id",d.target.value||null),style:qn,children:[l.jsx("option",{value:"",children:"(none - non-advancing)"}),t.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{style:Vr,children:"Outcome"}),l.jsx("input",{type:"text",value:s.outcome||"",onChange:d=>o("outcome",d.target.value),placeholder:"success, failed, etc.",style:qn})]}),l.jsxs("div",{children:[l.jsx("label",{style:Vr,children:"Label"}),l.jsx("input",{type:"text",value:s.label||"",onChange:d=>o("label",d.target.value),placeholder:"Human-readable label",style:qn})]}),l.jsxs("div",{children:[l.jsx("label",{style:Vr,children:"Kind"}),l.jsx("select",{value:s.kind||"auto",onChange:d=>o("kind",d.target.value),style:qn,children:v$.map(d=>l.jsx("option",{value:d,children:d},d))})]}),l.jsxs("label",{className:"flex items-center gap-1.5 text-xs",style:{color:"var(--text-muted)"},children:[l.jsx("input",{type:"checkbox",checked:s.non_advancing||!1,onChange:d=>o("non_advancing",d.target.checked)}),"Non-advancing"]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{style:Vr,children:"Conditions"}),l.jsx("button",{onClick:a,className:"text-xs px-1.5 py-0.5 rounded hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent"},children:"+ Add"})]}),l.jsx("div",{className:"space-y-2",children:(s.conditions||[]).map((d,f)=>l.jsx("div",{className:"p-2 rounded space-y-1",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)"},children:l.jsxs("div",{className:"flex gap-1 items-center",children:[l.jsx("input",{type:"text",value:d.type||"",onChange:h=>c(f,"type",h.target.value),placeholder:"retry_count",style:{...qn,flex:1,fontSize:10}}),l.jsx("select",{value:d.operator||"lt",onChange:h=>c(f,"operator",h.target.value),style:{...qn,width:"auto",fontSize:10},children:y$.map(h=>l.jsx("option",{value:h,children:h},h))}),l.jsx("input",{type:"text",value:d.value??"",onChange:h=>{const p=isNaN(h.target.value)?h.target.value:Number(h.target.value);c(f,"value",p)},placeholder:"value",style:{...qn,width:50,fontSize:10}}),l.jsx("button",{onClick:()=>u(f),className:"text-xs px-1",style:{color:"#ef4444"},children:"x"})]})},f))})]})]})]}):null}const b$={padding:"6px 14px",fontSize:12,fontWeight:600,border:"none",cursor:"pointer",transition:"opacity 0.15s",background:"transparent"};function w$({workspaceId:e,artifactId:t,onArtifactSave:n}){var P,I,L;const[r,s]=m.useState("canvas"),[i,o]=m.useState(null),[a,c]=m.useState(null),[u,d]=m.useState(""),[f,h]=m.useState(null),{workflowJson:p,loading:x,error:v,saving:_,lastSaveResult:g,updateWorkflow:y}=uC(e,t,{onSave:M=>{n==null||n(t,M)}}),b=m.useMemo(()=>{var M;return!i||!p?null:((M=p.nodes)==null?void 0:M.find(q=>q.node_id===i))||null},[i,p]),w=m.useMemo(()=>{var M;return!a||!p?null:((M=p.edges)==null?void 0:M.find(q=>q.edge_id===a))||null},[a,p]),S=m.useMemo(()=>p!=null&&p.nodes?p.nodes.map(M=>M.node_id):[],[p]),k=m.useCallback(M=>{y(M)},[y]),j=m.useCallback(M=>{if(!p)return;const q=p.nodes.map(G=>G.node_id===i?M:G);let F=p.edges,W=p.entry_node_ids||[];M.node_id!==i&&(F=p.edges.map(G=>({...G,from_node_id:G.from_node_id===i?M.node_id:G.from_node_id,to_node_id:G.to_node_id===i?M.node_id:G.to_node_id})),W=W.map(G=>G===i?M.node_id:G),o(M.node_id)),y({...p,nodes:q,edges:F,entry_node_ids:W})},[p,i,y]),N=m.useCallback(M=>{if(!p)return;const q=p.edges.map(F=>F.edge_id===a?M:F);M.edge_id!==a&&c(M.edge_id),y({...p,edges:q})},[p,a,y]),C=m.useCallback(M=>{p&&(y({...p,nodes:p.nodes.filter(q=>q.node_id!==M),edges:p.edges.filter(q=>q.from_node_id!==M&&q.to_node_id!==M),entry_node_ids:(p.entry_node_ids||[]).filter(q=>q!==M)}),o(null))},[p,y]),T=m.useCallback(M=>{p&&(y({...p,edges:p.edges.filter(q=>q.edge_id!==M)}),c(null))},[p,y]),R=m.useCallback(M=>{o(M),M&&c(null)},[]),D=m.useCallback(M=>{c(M),M&&o(null)},[]),z=m.useCallback(M=>{M==="json"&&p&&(d(JSON.stringify(p,null,2)),h(null)),s(M)},[p]),E=m.useCallback(M=>{const q=M.target.value;d(q);try{const F=JSON.parse(q);h(null),y(F)}catch(F){h(F.message)}},[y]),O=((P=g==null?void 0:g.tier1_report)==null?void 0:P.results)||[],A=O.filter(M=>M.severity==="error").length,$=O.filter(M=>M.severity==="warning").length;return l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"flex items-center justify-between px-4 py-1.5 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsxs("div",{className:"flex items-center gap-3",children:[_&&l.jsx("span",{className:"text-xs",style:{color:"var(--action-primary)"},children:"Saving..."}),v&&l.jsx("span",{className:"text-xs",style:{color:"#ef4444"},children:v}),!_&&!v&&p&&l.jsxs("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:[((I=p.nodes)==null?void 0:I.length)||0," nodes, ",((L=p.edges)==null?void 0:L.length)||0," edges"]})]})}),l.jsx("div",{className:"flex items-center border-b px-2",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[{id:"canvas",label:"Canvas"},{id:"json",label:"JSON"},{id:"metadata",label:"Metadata"}].map(M=>l.jsx("button",{onClick:()=>z(M.id),style:{...b$,color:r===M.id?"var(--text-primary)":"var(--text-muted)",borderBottom:r===M.id?"2px solid var(--action-primary)":"2px solid transparent"},children:M.label},M.id))}),x?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading workflow..."})}):l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r==="canvas"&&l.jsxs(l.Fragment,{children:[l.jsx(hc,{children:l.jsx(f$,{workflowJson:p,onWorkflowChange:k,selectedNodeId:i,selectedEdgeId:a,onNodeSelect:R,onEdgeSelect:D})}),b&&l.jsx(g$,{node:b,onChange:j,onDelete:C}),w&&l.jsx(x$,{edge:w,nodeIds:S,onChange:N,onDelete:T})]}),r==="json"&&l.jsxs("div",{className:"flex-1 flex flex-col p-4",children:[l.jsx("textarea",{value:u,onChange:E,className:"flex-1 font-mono text-xs p-3 rounded",style:{background:"var(--bg-input, var(--bg-canvas))",border:f?"1px solid #ef4444":"1px solid var(--border-panel)",color:"var(--text-primary)",resize:"none",outline:"none"},spellCheck:!1}),f&&l.jsxs("div",{className:"mt-2 text-xs",style:{color:"#ef4444"},children:["JSON Error: ",f]})]}),r==="metadata"&&l.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:p?l.jsx(_$,{workflow:p}):l.jsx("div",{style:{color:"var(--text-muted)"},children:"No workflow loaded"})})]}),O.length>0&&l.jsxs("div",{className:"px-4 py-1.5 border-t flex items-center gap-3 text-xs",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[A>0&&l.jsxs("span",{style:{color:"#ef4444"},children:[A," error",A!==1?"s":""]}),$>0&&l.jsxs("span",{style:{color:"#f59e0b"},children:[$," warning",$!==1?"s":""]}),A===0&&$===0&&l.jsx("span",{style:{color:"#10b981"},children:"Valid"}),l.jsx("span",{style:{color:"var(--text-muted)"},children:O.map(M=>M.message).join(" | ")})]})]})}function _$({workflow:e}){const t={fontSize:12,color:"var(--text-primary)",padding:"6px 8px",borderRadius:4,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",width:"100%"},n={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"},r=[{key:"workflow_id",label:"Workflow ID"},{key:"name",label:"Name"},{key:"version",label:"Version"},{key:"description",label:"Description"}],s=e.thread_ownership||{},i=Object.entries(s),o=e.entry_node_ids||[];return l.jsxs("div",{className:"space-y-4 max-w-lg",children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Workflow Metadata"}),r.map(a=>l.jsxs("div",{children:[l.jsx("label",{style:n,children:a.label}),l.jsx("div",{style:t,children:e[a.key]||"-"})]},a.key)),l.jsxs("div",{children:[l.jsx("label",{style:n,children:"Entry Node IDs"}),l.jsx("div",{style:t,children:o.length>0?o.join(", "):"-"})]}),i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Thread Ownership"}),i.map(([a,c])=>l.jsxs("div",{children:[l.jsx("label",{style:n,children:a}),l.jsx("div",{style:t,children:c})]},a))]})]})}function S$({workspaceId:e,docType:t,loading:n=!1,roles:r=[],onArtifactSave:s}){var re,Y,K;const[i,o]=m.useState("task_prompt"),[a,c]=m.useState("source"),[u,d]=m.useState(null),[f,h]=m.useState(!1),[p,x]=m.useState(null),[v,_]=m.useState(null),[g,y]=m.useState(!1),[b,w]=m.useState(null),[S,k]=m.useState(null),[j,N]=m.useState(!1),[C,T]=m.useState(null),[R,D]=m.useState(null),[z,E]=m.useState(!1),[O,A]=m.useState(null),$=m.useMemo(()=>{if(!(t!=null&&t.role_prompt_ref))return null;const H=t.role_prompt_ref.split(":");return H.length!==4||H[0]!=="prompt"||H[1]!=="role"?null:{roleId:H[2],version:H[3]}},[t==null?void 0:t.role_prompt_ref]),P=m.useMemo(()=>{if(!(t!=null&&t.template_ref))return null;const H=t.template_ref.split(":");return H.length!==4||H[0]!=="prompt"||H[1]!=="template"?null:{templateId:H[2],version:H[3]}},[t==null?void 0:t.template_ref]),I=m.useMemo(()=>{if(!(t!=null&&t.qa_template_ref))return null;const H=t.qa_template_ref.split(":");return H.length!==4||H[0]!=="prompt"||H[1]!=="template"?null:{templateId:H[2],version:H[3]}},[t==null?void 0:t.qa_template_ref]),L=m.useMemo(()=>{if(!(t!=null&&t.pgc_template_ref))return null;const H=t.pgc_template_ref.split(":");return H.length!==4||H[0]!=="prompt"||H[1]!=="template"?null:{templateId:H[2],version:H[3]}},[t==null?void 0:t.pgc_template_ref]);m.useEffect(()=>{if(!$){d(null);return}h(!0),x(null),Ee.getRole($.roleId,$.version).then(H=>{d(H.content)}).catch(H=>{console.error("Failed to load role:",H),x(H.message)}).finally(()=>{h(!1)})},[$]),m.useEffect(()=>{if(!P){_(null);return}y(!0),w(null),Ee.getTemplate(P.templateId,P.version).then(H=>{_(H.content)}).catch(H=>{console.error("Failed to load template:",H),w(H.message)}).finally(()=>{y(!1)})},[P]),m.useEffect(()=>{if(!I){k(null);return}N(!0),T(null),Ee.getTemplate(I.templateId,I.version).then(H=>{k(H.content)}).catch(H=>{console.error("Failed to load QA template:",H),T(H.message)}).finally(()=>{N(!1)})},[I]),m.useEffect(()=>{if(!L){D(null);return}E(!0),A(null),Ee.getTemplate(L.templateId,L.version).then(H=>{D(H.content)}).catch(H=>{console.error("Failed to load PGC template:",H),A(H.message)}).finally(()=>{E(!1)})},[L]);const M=m.useMemo(()=>{if(!t||i==="role_prompt")return null;const H=t.version||t.active_version;return`doctype:${t.doc_type_id}:${H}:${i}`},[t,i]),{content:q,loading:F,error:W,saving:G,isDirty:Z,updateContent:Q,lastSaveResult:te}=yy(e,M,{onSave:H=>{s==null||s(M,H)}}),ne=[{id:"package",label:"Package",isPackage:!0},{id:"role_prompt",label:"Role Prompt",viewOnly:!0},{id:"template",label:"Template",viewOnly:!0},{id:"task_prompt",label:"Task Prompt"},{id:"qa_prompt",label:"QA Prompt"},{id:"qa_template",label:"QA Template",viewOnly:!0},{id:"reflection_prompt",label:"Reflection"},{id:"pgc_context",label:"PGC Context"},{id:"pgc_template",label:"PGC Template",viewOnly:!0},{id:"schema",label:"Schema",isJson:!0},{id:"workflow",label:"Workflow",isWorkflow:!0}],X=m.useMemo(()=>t?ne.filter(H=>H.id==="package"?!0:H.id==="role_prompt"?!!t.role_prompt_ref:H.id==="template"?!!t.template_ref:H.id==="qa_template"?!!t.qa_template_ref:H.id==="pgc_template"?!!t.pgc_template_ref:H.id==="workflow"?!!t.workflow_ref:t.artifacts?t.artifacts[H.id]!=null:!1):[],[t]);m.useEffect(()=>{X.length>0&&!X.find(H=>H.id===i)&&o(X[0].id)},[X,i]);const ve=i==="role_prompt"||i==="template"||i==="qa_template"||i==="pgc_template",ae=i==="package",me=i==="schema",de=i==="workflow",U=!ve&&!ae&&!me&&!de;return!t&&!n?l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"No Document Type Selected"}),l.jsx("div",{className:"text-sm",children:"Select a document type from the browser to edit its prompts."})]})}):n?l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"Loading..."}),l.jsx("div",{className:"text-sm",children:"Fetching document type details..."})]})}):l.jsxs("div",{className:"flex-1 flex flex-col h-full",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:t.display_name}),l.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["v",t.version||t.active_version,t.authority_level&&`  ${t.authority_level}`]})]})})}),l.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:X.map(H=>{const pe=i===H.id;return l.jsxs("button",{onClick:()=>{o(H.id),c("source")},className:"px-4 py-2 text-sm font-medium transition-colors",style:{color:pe?"var(--text-primary)":"var(--text-muted)",background:pe?"var(--bg-selected, rgba(255,255,255,0.1))":"transparent",borderBottom:pe?"2px solid var(--action-primary)":"2px solid transparent",marginBottom:"-1px"},children:[H.label,H.viewOnly&&l.jsx("span",{className:"ml-1 text-xs font-normal",style:{color:"var(--text-muted)"},children:"(view)"})]},H.id)})}),U&&l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>c("source"),className:"px-3 py-1 text-xs font-medium rounded transition-colors",style:{background:a==="source"?"var(--action-primary)":"transparent",color:a==="source"?"var(--bg-canvas, #000)":"var(--text-muted)"},children:"Source"}),l.jsx("button",{onClick:()=>c("resolved"),className:"px-3 py-1 text-xs font-medium rounded transition-colors",style:{background:a==="resolved"?"var(--action-primary)":"transparent",color:a==="resolved"?"var(--bg-canvas, #000)":"var(--text-muted)"},children:"Resolved"})]}),a==="source"&&((re=t==null?void 0:t.artifacts)==null?void 0:re[i])&&l.jsxs("span",{className:"text-xs font-mono truncate ml-4",style:{color:"var(--text-muted)"},title:`combine-config/document_types/${t.doc_type_id}/releases/${t.version||t.active_version}/${t.artifacts[i]}`,children:["combine-config/document_types/",t.doc_type_id,"/releases/",t.version||t.active_version,"/",t.artifacts[i]]})]}),ve&&l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:[l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:i==="role_prompt"?"View Only - Edit roles in the Roles section":"View Only - Shared template"}),i==="role_prompt"&&$&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[$.roleId.replace(/_/g," ")," v",$.version]}),i==="template"&&P&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[P.templateId.replace(/_/g," ")," v",P.version]}),i==="qa_template"&&I&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[I.templateId.replace(/_/g," ")," v",I.version]}),i==="pgc_template"&&L&&l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--bg-selected)",color:"var(--text-secondary)"},children:[L.templateId.replace(/_/g," ")," v",L.version]})]}),me&&((Y=t==null?void 0:t.artifacts)==null?void 0:Y.schema)&&l.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:l.jsxs("span",{className:"text-xs font-mono truncate",style:{color:"var(--text-muted)"},title:`combine-config/document_types/${t.doc_type_id}/releases/${t.version||t.active_version}/${t.artifacts.schema}`,children:["combine-config/document_types/",t.doc_type_id,"/releases/",t.version||t.active_version,"/",t.artifacts.schema]})}),l.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:de?l.jsx(w$,{workspaceId:e,artifactId:t.workflow_ref,onArtifactSave:s}):i==="package"?l.jsx(n$,{workspaceId:e,docType:t,roles:r,onSave:s}):i==="role_prompt"?l.jsx(Yr,{content:u||"",onChange:()=>{},loading:f,saving:!1,isDirty:!1,error:p,readOnly:!0,placeholder:"No role prompt configured for this document type"}):i==="template"?l.jsx(Yr,{content:v||"",onChange:()=>{},loading:g,saving:!1,isDirty:!1,error:b,readOnly:!0,placeholder:"No template configured for this document type"}):i==="qa_template"?l.jsx(Yr,{content:S||"",onChange:()=>{},loading:j,saving:!1,isDirty:!1,error:C,readOnly:!0,placeholder:"No QA template configured for this document type"}):i==="pgc_template"?l.jsx(Yr,{content:R||"",onChange:()=>{},loading:z,saving:!1,isDirty:!1,error:O,readOnly:!0,placeholder:"No PGC template configured for this document type"}):a==="source"||me?l.jsx(Yr,{content:q,onChange:Q,loading:F,saving:G,isDirty:Z,error:W,placeholder:`Enter ${((K=X.find(H=>H.id===i))==null?void 0:K.label)||"prompt"} content...`,isJson:me}):l.jsx(t$,{workspaceId:e,artifactId:M})}),U&&(te==null?void 0:te.tier1)&&!te.tier1.passed&&l.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-panel)",background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("div",{className:"text-xs",style:{color:"var(--state-error-text)"},children:"Validation issues found - see status panel for details"})})]})}function j$({workspaceId:e,role:t,onArtifactSave:n}){const r=t?`role:${t.role_id}:${t.active_version}:role_prompt`:null,{content:s,loading:i,error:o,saving:a,isDirty:c,updateContent:u,lastSaveResult:d}=yy(e,r,{onSave:h=>{n==null||n(r,h)}});if(!t)return l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"No Role Selected"}),l.jsx("div",{className:"text-sm",children:"Select a role from the browser to edit its prompt."})]})});const f=t.role_id.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase());return l.jsxs("div",{className:"flex-1 flex flex-col h-full",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:f}),l.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["v",t.active_version,"  Role Prompt"]})]})})}),l.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"px-4 py-2 text-sm",style:{color:"var(--text-primary)",background:"var(--bg-canvas)",borderBottom:"2px solid var(--action-primary)"},children:"Role Prompt"})}),l.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:l.jsxs("span",{className:"text-xs font-mono truncate",style:{color:"var(--text-muted)"},children:["combine-config/prompts/roles/",t.role_id,"/releases/",t.active_version,"/role.prompt.txt"]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(Yr,{content:s,onChange:u,loading:i,saving:a,isDirty:c,error:o,placeholder:"Enter role prompt content..."})}),(d==null?void 0:d.tier1)&&!d.tier1.passed&&l.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-panel)",background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("div",{className:"text-xs",style:{color:"var(--state-error-text)"},children:"Validation issues found - see status panel for details"})})]})}function k$({workspaceId:e,template:t,onArtifactSave:n}){const r=t?`template:${t.template_id}:${t.active_version}:template`:null,{content:s,loading:i,error:o,saving:a,isDirty:c,updateContent:u,lastSaveResult:d}=yy(e,r,{onSave:h=>{n==null||n(r,h)}});if(!t)return l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-2",children:"No Template Selected"}),l.jsx("div",{className:"text-sm",children:"Select a template from the browser to edit its content."})]})});const f=t.template_id.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase());return l.jsxs("div",{className:"flex-1 flex flex-col h-full",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:f}),l.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["v",t.active_version,"  Shared Template"]})]})})}),l.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsx("div",{className:"px-4 py-2 text-sm",style:{color:"var(--text-primary)",background:"var(--bg-canvas)",borderBottom:"2px solid var(--action-primary)"},children:"Template"})}),l.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel-alt, var(--bg-panel))"},children:l.jsxs("span",{className:"text-xs font-mono truncate",style:{color:"var(--text-muted)"},children:["combine-config/prompts/templates/",t.template_id,"/releases/",t.active_version,"/template.txt"]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(Yr,{content:s,onChange:u,loading:i,saving:a,isDirty:c,error:o,placeholder:"Enter template content..."})}),(d==null?void 0:d.tier1)&&!d.tier1.passed&&l.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-panel)",background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("div",{className:"text-xs",style:{color:"var(--state-error-text)"},children:"Validation issues found - see status panel for details"})})]})}function N$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Ac=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gi(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function xy(e){return"nodeType"in e}function Ct(e){var t,n;return e?gi(e)?e:xy(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function by(e){const{Document:t}=Ct(e);return e instanceof t}function Xo(e){return gi(e)?!1:e instanceof Ct(e).HTMLElement}function dC(e){return e instanceof Ct(e).SVGElement}function vi(e){return e?gi(e)?e.document:xy(e)?by(e)?e:Xo(e)||dC(e)?e.ownerDocument:document:document:document}const An=Ac?m.useLayoutEffect:m.useEffect;function wy(e){const t=m.useRef(e);return An(()=>{t.current=e}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function E$(){const e=m.useRef(null),t=m.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Po(e,t){t===void 0&&(t=[e]);const n=m.useRef(e);return An(()=>{n.current!==e&&(n.current=e)},t),n}function Qo(e,t){const n=m.useRef();return m.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ll(e){const t=wy(e),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Dg(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let xm={};function Zo(e,t){return m.useMemo(()=>{if(t)return t;const n=xm[e]==null?0:xm[e]+1;return xm[e]=n,e+"-"+n},[e,t])}function fC(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[c,u]of a){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const Ks=fC(1),Do=fC(-1);function C$(e){return"clientX"in e&&"clientY"in e}function _y(e){if(!e)return!1;const{KeyboardEvent:t}=Ct(e.target);return t&&e instanceof t}function R$(e){if(!e)return!1;const{TouchEvent:t}=Ct(e.target);return t&&e instanceof t}function Og(e){if(R$(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return C$(e)?{x:e.clientX,y:e.clientY}:null}const oi=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[oi.Translate.toString(e),oi.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),H2="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function T$(e){return e.matches(H2)?e:e.querySelector(H2)}const I$={display:"none"};function M$(e){let{id:t,value:n}=e;return B.createElement("div",{id:t,style:I$},n)}function A$(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return B.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function P$(){const[e,t]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const hC=m.createContext(null);function D$(e){const t=m.useContext(hC);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function O$(){const[e]=m.useState(()=>new Set),t=m.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[m.useCallback(r=>{let{type:s,event:i}=r;e.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[e]),t]}const L$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},z$={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function q$(e){let{announcements:t=z$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=L$}=e;const{announce:i,announcement:o}=P$(),a=Zo("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),D$(m.useMemo(()=>({onDragStart(f){let{active:h}=f;i(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:p}=f;t.onDragMove&&i(t.onDragMove({active:h,over:p}))},onDragOver(f){let{active:h,over:p}=f;i(t.onDragOver({active:h,over:p}))},onDragEnd(f){let{active:h,over:p}=f;i(t.onDragEnd({active:h,over:p}))},onDragCancel(f){let{active:h,over:p}=f;i(t.onDragCancel({active:h,over:p}))}}),[i,t])),!c)return null;const d=B.createElement(B.Fragment,null,B.createElement(M$,{id:r,value:s.draggable}),B.createElement(A$,{id:a,announcement:o}));return n?Ls.createPortal(d,n):d}var Ge;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ge||(Ge={}));function zl(){}function ql(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function pC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const gn=Object.freeze({x:0,y:0});function mC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function gC(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function $$(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function W2(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function vC(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function V2(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const yC=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=V2(t,t.left,t.top),i=[];for(const o of r){const{id:a}=o,c=n.get(a);if(c){const u=mC(V2(c),s);i.push({id:a,data:{droppableContainer:o,value:u}})}}return i.sort(gC)},F$=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=W2(t),i=[];for(const o of r){const{id:a}=o,c=n.get(a);if(c){const u=W2(c),d=s.reduce((h,p,x)=>h+mC(u[x],p),0),f=Number((d/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:f}})}}return i.sort(gC)};function B$(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=s-r,a=i-n;if(r<s&&n<i){const c=t.width*t.height,u=e.width*e.height,d=o*a,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const H$=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const c=B$(a,t);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort($$)};function W$(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function xC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:gn}function V$(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+e*a.y,bottom:o.bottom+e*a.y,left:o.left+e*a.x,right:o.right+e*a.x}),{...n})}}const U$=V$(1);function G$(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function K$(e,t,n){const r=G$(t);if(!r)return e;const{scaleX:s,scaleY:i,x:o,y:a}=r,c=e.left-o-(1-s)*parseFloat(n),u=e.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const Y$={ignoreTransform:!1};function yi(e,t){t===void 0&&(t=Y$);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Ct(e).getComputedStyle(e);u&&(n=K$(n,u,d))}const{top:r,left:s,width:i,height:o,bottom:a,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:c}}function U2(e){return yi(e,{ignoreTransform:!0})}function X$(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Q$(e,t){return t===void 0&&(t=Ct(e).getComputedStyle(e)),t.position==="fixed"}function Z$(e,t){t===void 0&&(t=Ct(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?n.test(i):!1})}function Pc(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(by(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Xo(s)||dC(s)||n.includes(s))return n;const i=Ct(e).getComputedStyle(s);return s!==e&&Z$(s,i)&&n.push(s),Q$(s,i)?n:r(s.parentNode)}return e?r(e):n}function bC(e){const[t]=Pc(e,1);return t??null}function bm(e){return!Ac||!e?null:gi(e)?e:xy(e)?by(e)||e===vi(e).scrollingElement?window:Xo(e)?e:null:null}function wC(e){return gi(e)?e.scrollX:e.scrollLeft}function _C(e){return gi(e)?e.scrollY:e.scrollTop}function Lg(e){return{x:wC(e),y:_C(e)}}var Ze;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ze||(Ze={}));function SC(e){return!Ac||!e?!1:e===document.scrollingElement}function jC(e){const t={x:0,y:0},n=SC(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:t}}const J$={x:.2,y:.2};function eF(e,t,n,r,s){let{top:i,left:o,right:a,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=J$);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=jC(e),p={x:0,y:0},x={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!u&&i<=t.top+v.height?(p.y=Ze.Backward,x.y=r*Math.abs((t.top+v.height-i)/v.height)):!d&&c>=t.bottom-v.height&&(p.y=Ze.Forward,x.y=r*Math.abs((t.bottom-v.height-c)/v.height)),!h&&a>=t.right-v.width?(p.x=Ze.Forward,x.x=r*Math.abs((t.right-v.width-a)/v.width)):!f&&o<=t.left+v.width&&(p.x=Ze.Backward,x.x=r*Math.abs((t.left+v.width-o)/v.width)),{direction:p,speed:x}}function tF(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function kC(e){return e.reduce((t,n)=>Ks(t,Lg(n)),gn)}function nF(e){return e.reduce((t,n)=>t+wC(n),0)}function rF(e){return e.reduce((t,n)=>t+_C(n),0)}function sF(e,t){if(t===void 0&&(t=yi),!e)return;const{top:n,left:r,bottom:s,right:i}=t(e);bC(e)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const iF=[["x",["left","right"],nF],["y",["top","bottom"],rF]];class Sy{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Pc(n),s=kC(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,a]of iF)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=a(r),d=s[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class io{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function oF(e){const{EventTarget:t}=Ct(e);return e instanceof t?e:vi(e)}function wm(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Wt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Wt||(Wt={}));function G2(e){e.preventDefault()}function aF(e){e.stopPropagation()}var ue;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ue||(ue={}));const NC={start:[ue.Space,ue.Enter],cancel:[ue.Esc],end:[ue.Space,ue.Enter,ue.Tab]},lF=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ue.Right:return{...n,x:n.x+25};case ue.Left:return{...n,x:n.x-25};case ue.Down:return{...n,y:n.y+25};case ue.Up:return{...n,y:n.y-25}}};class Dc{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new io(vi(n)),this.windowListeners=new io(Ct(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Wt.Resize,this.handleCancel),this.windowListeners.add(Wt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Wt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&sF(r),n(gn)}handleKeyDown(t){if(_y(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=NC,coordinateGetter:o=lF,scrollBehavior:a="smooth"}=s,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:gn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(t,{active:n,context:r.current,currentCoordinates:d});if(f){const h=Do(f,d),p={x:0,y:0},{scrollableAncestors:x}=r.current;for(const v of x){const _=t.code,{isTop:g,isRight:y,isLeft:b,isBottom:w,maxScroll:S,minScroll:k}=jC(v),j=tF(v),N={x:Math.min(_===ue.Right?j.right-j.width/2:j.right,Math.max(_===ue.Right?j.left:j.left+j.width/2,f.x)),y:Math.min(_===ue.Down?j.bottom-j.height/2:j.bottom,Math.max(_===ue.Down?j.top:j.top+j.height/2,f.y))},C=_===ue.Right&&!y||_===ue.Left&&!b,T=_===ue.Down&&!w||_===ue.Up&&!g;if(C&&N.x!==f.x){const R=v.scrollLeft+h.x,D=_===ue.Right&&R<=S.x||_===ue.Left&&R>=k.x;if(D&&!h.y){v.scrollTo({left:R,behavior:a});return}D?p.x=v.scrollLeft-R:p.x=_===ue.Right?v.scrollLeft-S.x:v.scrollLeft-k.x,p.x&&v.scrollBy({left:-p.x,behavior:a});break}else if(T&&N.y!==f.y){const R=v.scrollTop+h.y,D=_===ue.Down&&R<=S.y||_===ue.Up&&R>=k.y;if(D&&!h.x){v.scrollTo({top:R,behavior:a});return}D?p.y=v.scrollTop-R:p.y=_===ue.Down?v.scrollTop-S.y:v.scrollTop-k.y,p.y&&v.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Ks(Do(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dc.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=NC,onActivation:s}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function K2(e){return!!(e&&"distance"in e)}function Y2(e){return!!(e&&"delay"in e)}class jy{constructor(t,n,r){var s;r===void 0&&(r=oF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=vi(o),this.documentListeners=new io(this.document),this.listeners=new io(r),this.windowListeners=new io(Ct(o)),this.initialCoordinates=(s=Og(i))!=null?s:gn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Wt.Resize,this.handleCancel),this.windowListeners.add(Wt.DragStart,G2),this.windowListeners.add(Wt.VisibilityChange,this.handleCancel),this.windowListeners.add(Wt.ContextMenu,G2),this.documentListeners.add(Wt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Y2(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(K2(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Wt.Click,aF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Wt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const c=(n=Og(t))!=null?n:gn,u=Do(s,c);if(!r&&a){if(K2(a)){if(a.tolerance!=null&&wm(u,a.tolerance))return this.handleCancel();if(wm(u,a.distance))return this.handleStart()}if(Y2(a)&&wm(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ue.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const cF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Oc extends jy{constructor(t){const{event:n}=t,r=vi(n.target);super(t,cF,r)}}Oc.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const uF={move:{name:"mousemove"},end:{name:"mouseup"}};var zg;(function(e){e[e.RightClick=2]="RightClick"})(zg||(zg={}));class dF extends jy{constructor(t){super(t,uF,vi(t.event.target))}}dF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zg.RightClick?!1:(r==null||r({event:n}),!0)}}];const _m={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fF extends jy{constructor(t){super(t,_m)}static setup(){return window.addEventListener(_m.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(_m.move.name,t)};function t(){}}}fF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var oo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(oo||(oo={}));var $l;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($l||($l={}));function hF(e){let{acceleration:t,activator:n=oo.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=$l.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const p=mF({delta:f,disabled:!i}),[x,v]=E$(),_=m.useRef({x:0,y:0}),g=m.useRef({x:0,y:0}),y=m.useMemo(()=>{switch(n){case oo.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case oo.DraggableRect:return s}},[n,s,c]),b=m.useRef(null),w=m.useCallback(()=>{const k=b.current;if(!k)return;const j=_.current.x*g.current.x,N=_.current.y*g.current.y;k.scrollBy(j,N)},[]),S=m.useMemo(()=>a===$l.TreeOrder?[...u].reverse():u,[a,u]);m.useEffect(()=>{if(!i||!u.length||!y){v();return}for(const k of S){if((r==null?void 0:r(k))===!1)continue;const j=u.indexOf(k),N=d[j];if(!N)continue;const{direction:C,speed:T}=eF(k,N,y,t,h);for(const R of["x","y"])p[R][C[R]]||(T[R]=0,C[R]=0);if(T.x>0||T.y>0){v(),b.current=k,x(w,o),_.current=T,g.current=C;return}}_.current={x:0,y:0},g.current={x:0,y:0},v()},[t,w,r,v,i,o,JSON.stringify(y),JSON.stringify(p),x,u,S,d,JSON.stringify(h)])}const pF={x:{[Ze.Backward]:!1,[Ze.Forward]:!1},y:{[Ze.Backward]:!1,[Ze.Forward]:!1}};function mF(e){let{delta:t,disabled:n}=e;const r=Dg(t);return Qo(s=>{if(n||!r||!s)return pF;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ze.Backward]:s.x[Ze.Backward]||i.x===-1,[Ze.Forward]:s.x[Ze.Forward]||i.x===1},y:{[Ze.Backward]:s.y[Ze.Backward]||i.y===-1,[Ze.Forward]:s.y[Ze.Forward]||i.y===1}}},[n,t,r])}function gF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Qo(s=>{var i;return t==null?null:(i=r??s)!=null?i:null},[r,t])}function vF(e,t){return m.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var Oo;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Oo||(Oo={}));var qg;(function(e){e.Optimized="optimized"})(qg||(qg={}));const X2=new Map;function yF(e,t){let{dragging:n,dependencies:r,config:s}=t;const[i,o]=m.useState(null),{frequency:a,measure:c,strategy:u}=s,d=m.useRef(e),f=_(),h=Po(f),p=m.useCallback(function(g){g===void 0&&(g=[]),!h.current&&o(y=>y===null?g:y.concat(g.filter(b=>!y.includes(b))))},[h]),x=m.useRef(null),v=Qo(g=>{if(f&&!n)return X2;if(!g||g===X2||d.current!==e||i!=null){const y=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){y.set(b.id,b.rect.current);continue}const w=b.node.current,S=w?new Sy(c(w),w):null;b.rect.current=S,S&&y.set(b.id,S)}return y}return g},[e,i,n,f,c]);return m.useEffect(()=>{d.current=e},[e]),m.useEffect(()=>{f||p()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof a!="number"||x.current!==null||(x.current=setTimeout(()=>{p(),x.current=null},a))},[a,f,p,...r]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:i!=null};function _(){switch(u){case Oo.Always:return!1;case Oo.BeforeDragging:return n;default:return!n}}}function EC(e,t){return Qo(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xF(e,t){return EC(e,t)}function bF(e){let{callback:t,disabled:n}=e;const r=wy(t),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Lc(e){let{callback:t,disabled:n}=e;const r=wy(t),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function wF(e){return new Sy(yi(e),e)}function Q2(e,t,n){t===void 0&&(t=wF);const[r,s]=m.useState(null);function i(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=bF({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),a=Lc({callback:i});return An(()=>{i(),e?(a==null||a.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[e]),r}function _F(e){const t=EC(e);return xC(e,t)}const Z2=[];function SF(e){const t=m.useRef(e),n=Qo(r=>e?r&&r!==Z2&&e&&t.current&&e.parentNode===t.current.parentNode?r:Pc(e):Z2,[e]);return m.useEffect(()=>{t.current=e},[e]),n}function jF(e){const[t,n]=m.useState(null),r=m.useRef(e),s=m.useCallback(i=>{const o=bm(i.target);o&&n(a=>a?(a.set(o,Lg(o)),new Map(a)):null)},[]);return m.useEffect(()=>{const i=r.current;if(e!==i){o(i);const a=e.map(c=>{const u=bm(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Lg(u)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{o(e),o(i)};function o(a){a.forEach(c=>{const u=bm(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Ks(i,o),gn):kC(e):gn,[e,t])}function J2(e,t){t===void 0&&(t=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},t),m.useEffect(()=>{const r=e!==gn;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Do(e,n.current):gn}function kF(e){m.useEffect(()=>{if(!Ac)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function NF(e,t){return m.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,t)},n},{}),[e,t])}function CC(e){return m.useMemo(()=>e?X$(e):null,[e])}const eS=[];function EF(e,t){t===void 0&&(t=yi);const[n]=e,r=CC(n?Ct(n):null),[s,i]=m.useState(eS);function o(){i(()=>e.length?e.map(c=>SC(c)?r:new Sy(t(c),c)):eS)}const a=Lc({callback:o});return An(()=>{a==null||a.disconnect(),o(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),s}function CF(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xo(t)?t:e}function RF(e){let{measure:t}=e;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:d}of u)if(Xo(d)){r(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),i=Lc({callback:s}),o=m.useCallback(u=>{const d=CF(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[a,c]=Ll(o);return m.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const TF=[{sensor:Oc,options:{}},{sensor:Dc,options:{}}],IF={current:{}},Qa={draggable:{measure:U2},droppable:{measure:U2,strategy:Oo.WhileDragging,frequency:qg.Optimized},dragOverlay:{measure:yi}};class ao extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const MF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ao,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:zl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qa,measureDroppableContainers:zl,windowRect:null,measuringScheduled:!1},AF={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:zl,draggableNodes:new Map,over:null,measureDroppableContainers:zl},zc=m.createContext(AF),RC=m.createContext(MF);function PF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ao}}}function DF(e,t){switch(t.type){case Ge.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ge.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ge.DragEnd:case Ge.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ge.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new ao(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ge.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new ao(e.droppable.containers);return o.set(n,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case Ge.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new ao(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function OF(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(zc),i=Dg(r),o=Dg(n==null?void 0:n.id);return m.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!_y(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:c,node:u}=a;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=T$(d);if(f){f.focus();break}}})}},[r,t,s,o,i]),null}function LF(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...r}),n):n}function zF(e){return m.useMemo(()=>({draggable:{...Qa.draggable,...e==null?void 0:e.draggable},droppable:{...Qa.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Qa.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function qF(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const i=m.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;An(()=>{if(!o&&!a||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=xC(d,r);if(o||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=bC(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,o,a,r,n])}const TC=m.createContext({...gn,scaleX:1,scaleY:1});var pr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pr||(pr={}));const IC=m.memo(function(t){var n,r,s,i;let{id:o,accessibility:a,autoScroll:c=!0,children:u,sensors:d=TF,collisionDetection:f=H$,measuring:h,modifiers:p,...x}=t;const v=m.useReducer(DF,void 0,PF),[_,g]=v,[y,b]=O$(),[w,S]=m.useState(pr.Uninitialized),k=w===pr.Initialized,{draggable:{active:j,nodes:N,translate:C},droppable:{containers:T}}=_,R=j!=null?N.get(j):null,D=m.useRef({initial:null,translated:null}),z=m.useMemo(()=>{var We;return j!=null?{id:j,data:(We=R==null?void 0:R.data)!=null?We:IF,rect:D}:null},[j,R]),E=m.useRef(null),[O,A]=m.useState(null),[$,P]=m.useState(null),I=Po(x,Object.values(x)),L=Zo("DndDescribedBy",o),M=m.useMemo(()=>T.getEnabled(),[T]),q=zF(h),{droppableRects:F,measureDroppableContainers:W,measuringScheduled:G}=yF(M,{dragging:k,dependencies:[C.x,C.y],config:q.droppable}),Z=gF(N,j),Q=m.useMemo(()=>$?Og($):null,[$]),te=bi(),ne=xF(Z,q.draggable.measure);qF({activeNode:j!=null?N.get(j):null,config:te.layoutShiftCompensation,initialRect:ne,measure:q.draggable.measure});const X=Q2(Z,q.draggable.measure,ne),ve=Q2(Z?Z.parentElement:null),ae=m.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:F,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=T.getNodeFor((n=ae.current.over)==null?void 0:n.id),de=RF({measure:q.dragOverlay.measure}),U=(r=de.nodeRef.current)!=null?r:Z,re=k?(s=de.rect)!=null?s:X:null,Y=!!(de.nodeRef.current&&de.rect),K=_F(Y?null:X),H=CC(U?Ct(U):null),pe=SF(k?me??Z:null),be=EF(pe),ye=LF(p,{transform:{x:C.x-K.x,y:C.y-K.y,scaleX:1,scaleY:1},activatorEvent:$,active:z,activeNodeRect:X,containerNodeRect:ve,draggingNodeRect:re,over:ae.current.over,overlayNodeRect:de.rect,scrollableAncestors:pe,scrollableAncestorRects:be,windowRect:H}),we=Q?Ks(Q,C):null,je=jF(pe),Rt=J2(je),tn=J2(je,[X]),tt=Ks(ye,Rt),Fe=re?U$(re,ye):null,ft=z&&Fe?f({active:z,collisionRect:Fe,droppableRects:F,droppableContainers:M,pointerCoordinates:we}):null,nn=vC(ft,"id"),[_e,nt]=m.useState(null),Ye=Y?ye:Ks(ye,tn),rt=W$(Ye,(i=_e==null?void 0:_e.rect)!=null?i:null,X),rn=m.useRef(null),qt=m.useCallback((We,ze)=>{let{sensor:ht,options:bn}=ze;if(E.current==null)return;const xt=N.get(E.current);if(!xt)return;const pt=We.nativeEvent,Ft=new ht({active:E.current,activeNode:xt,event:pt,options:bn,context:ae,onAbort(Ve){if(!N.get(Ve))return;const{onDragAbort:Bt}=I.current,sn={id:Ve};Bt==null||Bt(sn),y({type:"onDragAbort",event:sn})},onPending(Ve,wn,Bt,sn){if(!N.get(Ve))return;const{onDragPending:Br}=I.current,_n={id:Ve,constraint:wn,initialCoordinates:Bt,offset:sn};Br==null||Br(_n),y({type:"onDragPending",event:_n})},onStart(Ve){const wn=E.current;if(wn==null)return;const Bt=N.get(wn);if(!Bt)return;const{onDragStart:sn}=I.current,Fr={activatorEvent:pt,active:{id:wn,data:Bt.data,rect:D}};Ls.unstable_batchedUpdates(()=>{sn==null||sn(Fr),S(pr.Initializing),g({type:Ge.DragStart,initialCoordinates:Ve,active:wn}),y({type:"onDragStart",event:Fr}),A(rn.current),P(pt)})},onMove(Ve){g({type:Ge.DragMove,coordinates:Ve})},onEnd:or(Ge.DragEnd),onCancel:or(Ge.DragCancel)});rn.current=Ft;function or(Ve){return async function(){const{active:Bt,collisions:sn,over:Fr,scrollAdjustedTranslate:Br}=ae.current;let _n=null;if(Bt&&Br){const{cancelDrop:Hr}=I.current;_n={activatorEvent:pt,active:Bt,collisions:sn,delta:Br,over:Fr},Ve===Ge.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(_n))&&(Ve=Ge.DragCancel)}E.current=null,Ls.unstable_batchedUpdates(()=>{g({type:Ve}),S(pr.Uninitialized),nt(null),A(null),P(null),rn.current=null;const Hr=Ve===Ge.DragEnd?"onDragEnd":"onDragCancel";if(_n){const wi=I.current[Hr];wi==null||wi(_n),y({type:Hr,event:_n})}})}}},[N]),$t=m.useCallback((We,ze)=>(ht,bn)=>{const xt=ht.nativeEvent,pt=N.get(bn);if(E.current!==null||!pt||xt.dndKit||xt.defaultPrevented)return;const Ft={active:pt};We(ht,ze.options,Ft)===!0&&(xt.dndKit={capturedBy:ze.sensor},E.current=bn,qt(ht,ze))},[N,qt]),ir=vF(d,$t);kF(d),An(()=>{X&&w===pr.Initializing&&S(pr.Initialized)},[X,w]),m.useEffect(()=>{const{onDragMove:We}=I.current,{active:ze,activatorEvent:ht,collisions:bn,over:xt}=ae.current;if(!ze||!ht)return;const pt={active:ze,activatorEvent:ht,collisions:bn,delta:{x:tt.x,y:tt.y},over:xt};Ls.unstable_batchedUpdates(()=>{We==null||We(pt),y({type:"onDragMove",event:pt})})},[tt.x,tt.y]),m.useEffect(()=>{const{active:We,activatorEvent:ze,collisions:ht,droppableContainers:bn,scrollAdjustedTranslate:xt}=ae.current;if(!We||E.current==null||!ze||!xt)return;const{onDragOver:pt}=I.current,Ft=bn.get(nn),or=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Ve={active:We,activatorEvent:ze,collisions:ht,delta:{x:xt.x,y:xt.y},over:or};Ls.unstable_batchedUpdates(()=>{nt(or),pt==null||pt(Ve),y({type:"onDragOver",event:Ve})})},[nn]),An(()=>{ae.current={activatorEvent:$,active:z,activeNode:Z,collisionRect:Fe,collisions:ft,droppableRects:F,draggableNodes:N,draggingNode:U,draggingNodeRect:re,droppableContainers:T,over:_e,scrollableAncestors:pe,scrollAdjustedTranslate:tt},D.current={initial:re,translated:Fe}},[z,Z,ft,Fe,N,U,re,F,T,_e,pe,tt]),hF({...te,delta:C,draggingRect:Fe,pointerCoordinates:we,scrollableAncestors:pe,scrollableAncestorRects:be});const xi=m.useMemo(()=>({active:z,activeNode:Z,activeNodeRect:X,activatorEvent:$,collisions:ft,containerNodeRect:ve,dragOverlay:de,draggableNodes:N,droppableContainers:T,droppableRects:F,over:_e,measureDroppableContainers:W,scrollableAncestors:pe,scrollableAncestorRects:be,measuringConfiguration:q,measuringScheduled:G,windowRect:H}),[z,Z,X,$,ft,ve,de,N,T,F,_e,W,pe,be,q,G,H]),$r=m.useMemo(()=>({activatorEvent:$,activators:ir,active:z,activeNodeRect:X,ariaDescribedById:{draggable:L},dispatch:g,draggableNodes:N,over:_e,measureDroppableContainers:W}),[$,ir,z,X,g,L,N,_e,W]);return B.createElement(hC.Provider,{value:b},B.createElement(zc.Provider,{value:$r},B.createElement(RC.Provider,{value:xi},B.createElement(TC.Provider,{value:rt},u)),B.createElement(OF,{disabled:(a==null?void 0:a.restoreFocus)===!1})),B.createElement(q$,{...a,hiddenTextDescribedById:L}));function bi(){const We=(O==null?void 0:O.autoScrollEnabled)===!1,ze=typeof c=="object"?c.enabled===!1:c===!1,ht=k&&!We&&!ze;return typeof c=="object"?{...c,enabled:ht}:{enabled:ht}}}),$F=m.createContext(null),tS="button",FF="Draggable";function BF(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const i=Zo(FF),{activators:o,activatorEvent:a,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=m.useContext(zc),{role:p=tS,roleDescription:x="draggable",tabIndex:v=0}=s??{},_=(c==null?void 0:c.id)===t,g=m.useContext(_?TC:$F),[y,b]=Ll(),[w,S]=Ll(),k=NF(o,t),j=Po(n);An(()=>(f.set(t,{id:t,key:i,node:y,activatorNode:w,data:j}),()=>{const C=f.get(t);C&&C.key===i&&f.delete(t)}),[f,t]);const N=m.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&p===tS?!0:void 0,"aria-roledescription":x,"aria-describedby":d.draggable}),[r,p,v,_,x,d.draggable]);return{active:c,activatorEvent:a,activeNodeRect:u,attributes:N,isDragging:_,listeners:r?void 0:k,node:y,over:h,setNodeRef:b,setActivatorNodeRef:S,transform:g}}function HF(){return m.useContext(RC)}const WF="Droppable",VF={timeout:25};function UF(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const i=Zo(WF),{active:o,dispatch:a,over:c,measureDroppableContainers:u}=m.useContext(zc),d=m.useRef({disabled:n}),f=m.useRef(!1),h=m.useRef(null),p=m.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:_}={...VF,...s},g=Po(v??r),y=m.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(g.current)?g.current:[g.current]),p.current=null},_)},[_]),b=Lc({callback:y,disabled:x||!o}),w=m.useCallback((N,C)=>{b&&(C&&(b.unobserve(C),f.current=!1),N&&b.observe(N))},[b]),[S,k]=Ll(w),j=Po(t);return m.useEffect(()=>{!b||!S.current||(b.disconnect(),f.current=!1,b.observe(S.current))},[S,b]),m.useEffect(()=>(a({type:Ge.RegisterDroppable,element:{id:r,key:i,disabled:n,node:S,rect:h,data:j}}),()=>a({type:Ge.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==d.current.disabled&&(a({type:Ge.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,a]),{active:o,rect:h,isOver:(c==null?void 0:c.id)===r,node:S,over:c,setNodeRef:k}}function qc(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function GF(e,t){return e.reduce((n,r,s)=>{const i=t.get(r);return i&&(n[s]=i),n},Array(e.length))}function Aa(e){return e!==null&&e>=0}function KF(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function YF(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const MC=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const i=qc(t,r,n),o=t[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Pa={scaleX:1,scaleY:1},AC=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=e;const a=(t=i[n])!=null?t:r;if(!a)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(a.top+a.height):u.top-a.top,...Pa}:null}const c=XF(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-c,...Pa}:s<n&&s>=o?{x:0,y:a.height+c,...Pa}:{x:0,y:0,...Pa}};function XF(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return r?n<t?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const PC="Sortable",DC=B.createContext({activeIndex:-1,containerId:PC,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:MC,disabled:{draggable:!1,droppable:!1}});function OC(e){let{children:t,id:n,items:r,strategy:s=MC,disabled:i=!1}=e;const{active:o,dragOverlay:a,droppableRects:c,over:u,measureDroppableContainers:d}=HF(),f=Zo(PC,n),h=a.rect!==null,p=m.useMemo(()=>r.map(k=>typeof k=="object"&&"id"in k?k.id:k),[r]),x=o!=null,v=o?p.indexOf(o.id):-1,_=u?p.indexOf(u.id):-1,g=m.useRef(p),y=!KF(p,g.current),b=_!==-1&&v===-1||y,w=YF(i);An(()=>{y&&x&&d(p)},[y,p,x,d]),m.useEffect(()=>{g.current=p},[p]);const S=m.useMemo(()=>({activeIndex:v,containerId:f,disabled:w,disableTransforms:b,items:p,overIndex:_,useDragOverlay:h,sortedRects:GF(p,c),strategy:s}),[v,f,w.draggable,w.droppable,b,p,_,c,h,s]);return B.createElement(DC.Provider,{value:S},t)}const QF=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return qc(n,r,s).indexOf(t)},ZF=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:c,transition:u}=e;return!u||!r||a!==i&&s===o?!1:n?!0:o!==s&&t===c},JF={duration:200,easing:"ease"},LC="transform",eB=oi.Transition.toString({property:LC,duration:0,easing:"linear"}),tB={roleDescription:"sortable"};function nB(e){let{disabled:t,index:n,node:r,rect:s}=e;const[i,o]=m.useState(null),a=m.useRef(n);return An(()=>{if(!t&&n!==a.current&&r.current){const c=s.current;if(c){const u=yi(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==a.current&&(a.current=n)},[t,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function zC(e){let{animateLayoutChanges:t=ZF,attributes:n,disabled:r,data:s,getNewIndex:i=QF,id:o,strategy:a,resizeObserverConfig:c,transition:u=JF}=e;const{items:d,containerId:f,activeIndex:h,disabled:p,disableTransforms:x,sortedRects:v,overIndex:_,useDragOverlay:g,strategy:y}=m.useContext(DC),b=rB(r,p),w=d.indexOf(o),S=m.useMemo(()=>({sortable:{containerId:f,index:w,items:d},...s}),[f,s,w,d]),k=m.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:j,node:N,isOver:C,setNodeRef:T}=UF({id:o,data:S,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...c}}),{active:R,activatorEvent:D,activeNodeRect:z,attributes:E,setNodeRef:O,listeners:A,isDragging:$,over:P,setActivatorNodeRef:I,transform:L}=BF({id:o,data:S,attributes:{...tB,...n},disabled:b.draggable}),M=N$(T,O),q=!!R,F=q&&!x&&Aa(h)&&Aa(_),W=!g&&$,G=W&&F?L:null,Q=F?G??(a??y)({rects:v,activeNodeRect:z,activeIndex:h,overIndex:_,index:w}):null,te=Aa(h)&&Aa(_)?i({id:o,items:d,activeIndex:h,overIndex:_}):w,ne=R==null?void 0:R.id,X=m.useRef({activeId:ne,items:d,newIndex:te,containerId:f}),ve=d!==X.current.items,ae=t({active:R,containerId:f,isDragging:$,isSorting:q,id:o,index:w,items:d,newIndex:X.current.newIndex,previousItems:X.current.items,previousContainerId:X.current.containerId,transition:u,wasDragging:X.current.activeId!=null}),me=nB({disabled:!ae,index:w,node:N,rect:j});return m.useEffect(()=>{q&&X.current.newIndex!==te&&(X.current.newIndex=te),f!==X.current.containerId&&(X.current.containerId=f),d!==X.current.items&&(X.current.items=d)},[q,te,f,d]),m.useEffect(()=>{if(ne===X.current.activeId)return;if(ne!=null&&X.current.activeId==null){X.current.activeId=ne;return}const U=setTimeout(()=>{X.current.activeId=ne},50);return()=>clearTimeout(U)},[ne]),{active:R,activeIndex:h,attributes:E,data:S,rect:j,index:w,newIndex:te,items:d,isOver:C,isSorting:q,isDragging:$,listeners:A,node:N,overIndex:_,over:P,setNodeRef:M,setActivatorNodeRef:I,setDroppableNodeRef:T,setDraggableNodeRef:O,transform:me??Q,transition:de()};function de(){if(me||ve&&X.current.newIndex===w)return eB;if(!(W&&!_y(D)||!u)&&(q||ae))return oi.Transition.toString({...u,property:LC})}}function rB(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Fl(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const sB=[ue.Down,ue.Right,ue.Up,ue.Left],qC=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=t;if(sB.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=s.get(f.id);if(h)switch(e.code){case ue.Down:r.top<h.top&&c.push(f);break;case ue.Up:r.top>h.top&&c.push(f);break;case ue.Left:r.left>h.left&&c.push(f);break;case ue.Right:r.left<h.left&&c.push(f);break}});const u=F$({collisionRect:r,droppableRects:s,droppableContainers:c});let d=vC(u,"id");if(d===(o==null?void 0:o.id)&&u.length>1&&(d=u[1].id),d!=null){const f=i.get(n.id),h=i.get(d),p=h?s.get(h.id):null,x=h==null?void 0:h.node.current;if(x&&p&&f&&h){const _=Pc(x).some((k,j)=>a[j]!==k),g=$C(f,h),y=iB(f,h),b=_||!g?{x:0,y:0}:{x:y?r.width-p.width:0,y:y?r.height-p.height:0},w={x:p.left,y:p.top};return b.x&&b.y?w:Do(w,b)}}}};function $C(e,t){return!Fl(e)||!Fl(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function iB(e,t){return!Fl(e)||!Fl(t)||!$C(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const oB={padding:"6px 14px",fontSize:12,fontWeight:600,border:"none",cursor:"pointer",transition:"opacity 0.15s",background:"transparent"},kn={width:"100%",padding:"5px 8px",borderRadius:4,fontSize:12,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",outline:"none"},Ht={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"},FC={step_id:"new_step",produces:"",scope:"",inputs:[]},aB={step_id:"new_iteration",iterate_over:{doc_type:"",collection_field:"",entity_type:""},scope:"",steps:[]};function lB({workspaceId:e,workflow:t,onArtifactSave:n,onDelete:r}){const[s,i]=m.useState("steps"),[o,a]=m.useState(""),[c,u]=m.useState(null),d=m.useMemo(()=>t?`workflow:${t.workflow_id}:${t.active_version}:definition`:null,[t]),{workflowJson:f,loading:h,error:p,saving:x,updateWorkflow:v}=uC(e,d,{onSave:j=>{n==null||n(d,j)}}),_=m.useCallback(j=>{j==="json"&&f&&(a(JSON.stringify(f,null,2)),u(null)),i(j)},[f]),g=m.useCallback(j=>{const N=j.target.value;a(N);try{const C=JSON.parse(N);u(null),v(C)}catch(C){u(C.message)}},[v]),y=m.useCallback((j,N)=>{if(!f)return;const C=[...f.steps];C[j]=N,v({...f,steps:C})},[f,v]),b=m.useCallback(j=>{if(!f)return;const N=f.steps.filter((C,T)=>T!==j);v({...f,steps:N})},[f,v]),w=m.useCallback(j=>{var C,T;if(!f)return;const N=j==="iteration"?{...aB,step_id:`new_iteration_${(((C=f.steps)==null?void 0:C.length)||0)+1}`}:{...FC,step_id:`new_step_${(((T=f.steps)==null?void 0:T.length)||0)+1}`};v({...f,steps:[...f.steps||[],N]})},[f,v]),S=m.useCallback((j,N)=>{if(!f)return;const C=qc(f.steps,j,N);v({...f,steps:C})},[f,v]),k=m.useCallback(()=>{!r||!t||window.confirm(`Delete workflow "${t.workflow_id}"? This cannot be undone until you discard workspace changes.`)&&r(t.workflow_id)},[r,t]);return t?l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",style:{background:"var(--bg-canvas)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:(f==null?void 0:f.name)||t.workflow_id.replace(/_/g," ").replace(/\b\w/g,j=>j.toUpperCase())}),l.jsxs("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:["v",t.active_version,(f==null?void 0:f.description)&&`  ${f.description}`]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[x&&l.jsx("span",{className:"text-xs",style:{color:"var(--action-primary)"},children:"Saving..."}),p&&l.jsx("span",{className:"text-xs",style:{color:"#ef4444"},children:p}),r&&l.jsx("button",{onClick:k,className:"p-1 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444"},title:"Delete workflow",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]})]})}),l.jsx("div",{className:"flex items-center border-b px-2",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[{id:"steps",label:"Steps"},{id:"json",label:"JSON"},{id:"metadata",label:"Metadata"}].map(j=>l.jsx("button",{onClick:()=>_(j.id),style:{...oB,color:s===j.id?"var(--text-primary)":"var(--text-muted)",borderBottom:s===j.id?"2px solid var(--action-primary)":"2px solid transparent"},children:j.label},j.id))}),h?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading workflow..."})}):l.jsxs("div",{className:"flex-1 overflow-hidden",children:[s==="steps"&&l.jsxs("div",{className:"h-full overflow-y-auto p-4",children:[l.jsx(cB,{steps:(f==null?void 0:f.steps)||[],onStepChange:y,onStepDelete:b,onReorder:S}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:()=>w("production"),className:"text-xs px-3 py-1.5 rounded hover:opacity-80",style:{background:"var(--action-primary)",color:"#000",fontWeight:600},children:"+ Production Step"}),l.jsx("button",{onClick:()=>w("iteration"),className:"text-xs px-3 py-1.5 rounded hover:opacity-80",style:{background:"transparent",color:"var(--action-primary)",border:"1px solid var(--action-primary)",fontWeight:600},children:"+ Iteration Step"})]})]}),s==="json"&&l.jsxs("div",{className:"h-full flex flex-col p-4",children:[l.jsx("textarea",{value:o,onChange:g,className:"flex-1 font-mono text-xs p-3 rounded",style:{background:"var(--bg-input, var(--bg-canvas))",border:c?"1px solid #ef4444":"1px solid var(--border-panel)",color:"var(--text-primary)",resize:"none",outline:"none"},spellCheck:!1}),c&&l.jsxs("div",{className:"mt-2 text-xs",style:{color:"#ef4444"},children:["JSON Error: ",c]})]}),s==="metadata"&&l.jsx("div",{className:"h-full overflow-y-auto p-4",children:f?l.jsx(hB,{workflow:f}):l.jsx("div",{style:{color:"var(--text-muted)"},children:"No workflow loaded"})})]})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",style:{color:"var(--text-muted)"},children:[l.jsx("div",{className:"text-lg mb-1",children:"Workflow Editor"}),l.jsx("div",{className:"text-sm",children:"Select a workflow from the sidebar to begin editing"})]})})}function cB({steps:e,onStepChange:t,onStepDelete:n,onReorder:r}){const s=pC(ql(Oc,{activationConstraint:{distance:5}}),ql(Dc,{coordinateGetter:qC})),i=m.useMemo(()=>e.map(a=>a.step_id),[e]),o=m.useCallback(a=>{const{active:c,over:u}=a;if(!u||c.id===u.id)return;const d=e.findIndex(h=>h.step_id===c.id),f=e.findIndex(h=>h.step_id===u.id);d!==-1&&f!==-1&&r(d,f)},[e,r]);return e.length===0?l.jsx("div",{className:"text-sm py-4",style:{color:"var(--text-muted)"},children:"No steps defined. Add a step to get started."}):l.jsx(IC,{sensors:s,collisionDetection:yC,onDragEnd:o,children:l.jsx(OC,{items:i,strategy:AC,children:e.map((a,c)=>l.jsx(uB,{step:a,index:c,onChange:t,onDelete:n},a.step_id))})})}function uB({step:e,index:t,onChange:n,onDelete:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:c,isDragging:u}=zC({id:e.step_id}),d={transform:oi.Transform.toString(a),transition:c,opacity:u?.5:1};return l.jsx("div",{ref:o,style:d,children:l.jsx(BC,{step:e,index:t,onChange:n,onDelete:r,dragHandleProps:{...s,...i}})})}function BC({step:e,index:t,onChange:n,onDelete:r,dragHandleProps:s,depth:i=0}){var S,k,j;const[o,a]=m.useState(e),[c,u]=m.useState(!0);m.useEffect(()=>{a(e)},[e]);const d=!!o.iterate_over,f=(N,C)=>{const T={...o,[N]:C};a(T),n(t,T)},h=(N,C)=>{const T={...o.iterate_over,[N]:C},R={...o,iterate_over:T};a(R),n(t,R)},p=()=>{const N=[...o.inputs||[],{doc_type:"",scope:""}],C={...o,inputs:N};a(C),n(t,C)},x=(N,C,T)=>{const R=[...o.inputs||[]];R[N]={...R[N],[C]:T};const D={...o,inputs:R};a(D),n(t,D)},v=N=>{const C=(o.inputs||[]).filter((R,D)=>D!==N),T={...o,inputs:C};a(T),n(t,T)},_=m.useCallback((N,C)=>{const T=[...o.steps||[]];T[N]=C;const R={...o,steps:T};a(R),n(t,R)},[o,t,n]),g=m.useCallback(N=>{const C=(o.steps||[]).filter((R,D)=>D!==N),T={...o,steps:C};a(T),n(t,T)},[o,t,n]),y=m.useCallback(()=>{var T;const N=[...o.steps||[],{...FC,step_id:`nested_step_${(((T=o.steps)==null?void 0:T.length)||0)+1}`}],C={...o,steps:N};a(C),n(t,C)},[o,t,n]),b=m.useCallback((N,C)=>{const T=qc(o.steps||[],N,C),R={...o,steps:T};a(R),n(t,R)},[o,t,n]),w={background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",borderRadius:6,marginBottom:8,marginLeft:i*20,borderLeft:d?"3px solid var(--action-primary)":"3px solid var(--border-panel)"};return l.jsxs("div",{style:w,children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",style:{borderBottom:c?"1px solid var(--border-panel)":"none",background:"var(--bg-panel)",borderRadius:c?"6px 6px 0 0":6},children:[s&&l.jsx("span",{...s,style:{cursor:"grab",color:"var(--text-muted)",lineHeight:1},title:"Drag to reorder",children:l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("circle",{cx:"5",cy:"3",r:"1.5"}),l.jsx("circle",{cx:"11",cy:"3",r:"1.5"}),l.jsx("circle",{cx:"5",cy:"8",r:"1.5"}),l.jsx("circle",{cx:"11",cy:"8",r:"1.5"}),l.jsx("circle",{cx:"5",cy:"13",r:"1.5"}),l.jsx("circle",{cx:"11",cy:"13",r:"1.5"})]})}),l.jsx("span",{className:"text-xs font-mono px-1.5 py-0.5 rounded",style:{background:d?"var(--action-primary)":"var(--bg-canvas)",color:d?"#000":"var(--action-primary)",border:"1px solid var(--border-panel)",fontSize:10,fontWeight:700},children:d?"ITER":"STEP"}),l.jsx("span",{className:"text-xs font-mono",style:{color:"var(--text-primary)",fontWeight:600},children:o.step_id}),l.jsx("span",{style:{flex:1}}),l.jsx("button",{onClick:()=>u(!c),className:"p-0.5 rounded hover:opacity-80",style:{color:"var(--text-muted)",background:"transparent",border:"none",cursor:"pointer"},title:c?"Collapse":"Expand",children:l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c?l.jsx("path",{d:"M18 15l-6-6-6 6"}):l.jsx("path",{d:"M6 9l6 6 6-6"})})}),l.jsx("button",{onClick:()=>r(t),className:"p-0.5 rounded hover:bg-red-500/20 transition-colors",style:{color:"#ef4444",background:"transparent",border:"none",cursor:"pointer"},title:"Delete step",children:l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),c&&l.jsxs("div",{className:"p-3 space-y-2",children:[l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Step ID"}),l.jsx("input",{type:"text",value:o.step_id||"",onChange:N=>f("step_id",N.target.value),style:kn})]}),d?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Doc Type"}),l.jsx("input",{type:"text",value:((S=o.iterate_over)==null?void 0:S.doc_type)||"",onChange:N=>h("doc_type",N.target.value),style:kn})]}),l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Collection Field"}),l.jsx("input",{type:"text",value:((k=o.iterate_over)==null?void 0:k.collection_field)||"",onChange:N=>h("collection_field",N.target.value),style:kn})]}),l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Entity Type"}),l.jsx("input",{type:"text",value:((j=o.iterate_over)==null?void 0:j.entity_type)||"",onChange:N=>h("entity_type",N.target.value),style:kn})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Scope"}),l.jsx("input",{type:"text",value:o.scope||"",onChange:N=>f("scope",N.target.value),style:kn})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{style:Ht,children:"Nested Steps"}),l.jsx("button",{onClick:y,className:"text-xs px-2 py-0.5 rounded hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:"+ Add"})]}),l.jsx(dB,{steps:o.steps||[],onStepChange:_,onStepDelete:g,onReorder:b})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Produces"}),l.jsx("input",{type:"text",value:o.produces||"",onChange:N=>f("produces",N.target.value),placeholder:"document_type (e.g., project_discovery)",style:kn})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Scope"}),l.jsx("input",{type:"text",value:o.scope||"",onChange:N=>f("scope",N.target.value),placeholder:"project",style:kn})]}),l.jsxs("div",{children:[l.jsx("label",{style:Ht,children:"Creates Entities"}),l.jsx("input",{type:"text",value:o.creates_entities||"",onChange:N=>f("creates_entities",N.target.value||void 0),placeholder:"e.g., epic",style:kn})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{style:Ht,children:"Inputs"}),l.jsx("button",{onClick:p,className:"text-xs hover:opacity-80",style:{color:"var(--action-primary)",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:"+ Add"})]}),(o.inputs||[]).length===0?l.jsx("div",{className:"text-xs py-1",style:{color:"var(--text-muted)"},children:"No inputs"}):l.jsx("div",{className:"space-y-1",children:(o.inputs||[]).map((N,C)=>l.jsxs("div",{className:"flex gap-1 items-end",children:[l.jsxs("div",{style:{flex:1},children:[C===0&&l.jsx("label",{style:{...Ht,fontSize:9},children:"Doc/Entity Type"}),l.jsx("input",{type:"text",value:N.doc_type||N.entity_type||"",onChange:T=>{const R=T.target.value;N.entity_type!==void 0?x(C,"entity_type",R):x(C,"doc_type",R)},placeholder:"doc_type",style:{...kn,fontSize:11}})]}),l.jsxs("div",{style:{width:"30%"},children:[C===0&&l.jsx("label",{style:{...Ht,fontSize:9},children:"Scope"}),l.jsx("input",{type:"text",value:N.scope||"",onChange:T=>x(C,"scope",T.target.value),placeholder:"scope",style:{...kn,fontSize:11}})]}),l.jsxs("label",{className:"flex items-center gap-1 text-xs pb-0.5",style:{color:"var(--text-muted)",whiteSpace:"nowrap"},children:[l.jsx("input",{type:"checkbox",checked:N.context||!1,onChange:T=>x(C,"context",T.target.checked||void 0)}),"ctx"]}),l.jsx("button",{onClick:()=>v(C),className:"pb-0.5",style:{color:"#ef4444",background:"transparent",border:"none",cursor:"pointer",fontSize:12,fontWeight:700},children:"x"})]},C))})]})]})]})]})}function dB({steps:e,onStepChange:t,onStepDelete:n,onReorder:r}){const s=pC(ql(Oc,{activationConstraint:{distance:5}}),ql(Dc,{coordinateGetter:qC})),i=m.useMemo(()=>e.map(a=>a.step_id),[e]),o=m.useCallback(a=>{const{active:c,over:u}=a;if(!u||c.id===u.id)return;const d=e.findIndex(h=>h.step_id===c.id),f=e.findIndex(h=>h.step_id===u.id);d!==-1&&f!==-1&&r(d,f)},[e,r]);return e.length===0?l.jsx("div",{className:"text-xs py-1",style:{color:"var(--text-muted)"},children:"No nested steps"}):l.jsx(IC,{sensors:s,collisionDetection:yC,onDragEnd:o,children:l.jsx(OC,{items:i,strategy:AC,children:e.map((a,c)=>l.jsx(fB,{step:a,index:c,onChange:t,onDelete:n},a.step_id))})})}function fB({step:e,index:t,onChange:n,onDelete:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:c,isDragging:u}=zC({id:e.step_id}),d={transform:oi.Transform.toString(a),transition:c,opacity:u?.5:1};return l.jsx("div",{ref:o,style:d,children:l.jsx(BC,{step:e,index:t,onChange:n,onDelete:r,dragHandleProps:{...s,...i},depth:1})})}function hB({workflow:e}){const t={fontSize:12,color:"var(--text-primary)",padding:"6px 8px",borderRadius:4,background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",width:"100%"},n={display:"block",fontSize:10,fontWeight:600,color:"var(--text-muted)",marginBottom:2,textTransform:"uppercase",letterSpacing:"0.05em"},r=[{key:"workflow_id",label:"Workflow ID"},{key:"name",label:"Name"},{key:"schema_version",label:"Schema Version"},{key:"revision",label:"Revision"},{key:"effective_date",label:"Effective Date"},{key:"description",label:"Description"}],s=e.scopes||{},i=Object.entries(s),o=e.document_types||{},a=Object.entries(o);return l.jsxs("div",{className:"space-y-4 max-w-lg",children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Workflow Metadata"}),r.map(c=>l.jsxs("div",{children:[l.jsx("label",{style:n,children:c.label}),l.jsx("div",{style:t,children:e[c.key]||"-"})]},c.key)),i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Scopes"}),i.map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{style:n,children:c}),l.jsxs("div",{style:t,children:["parent: ",u.parent||"none"]})]},c))]}),a.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide pt-2",style:{color:"var(--text-muted)"},children:"Document Types"}),a.map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{style:n,children:c}),l.jsxs("div",{style:t,children:[u.name,u.scope&&` (${u.scope})`,u.acceptance_required&&" [acceptance required]"]})]},c))]})]})}function nS({results:e,compact:t=!1}){if(!e||e.length===0)return null;const n=e.filter(s=>s.status==="fail"),r=e.filter(s=>s.status==="pass");return t?l.jsx("div",{className:"flex items-center gap-2",children:n.length>0?l.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--state-error-bg)",color:"var(--state-error-text)"},children:[n.length," error",n.length!==1?"s":""]}):l.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{background:"var(--state-success-bg)",color:"var(--state-success-text)"},children:"Valid"})}):l.jsxs("div",{className:"space-y-2",children:[n.map((s,i)=>l.jsxs("div",{className:"text-xs p-2 rounded border",style:{background:"rgba(239, 68, 68, 0.1)",borderColor:"var(--state-error-bg)",color:"var(--text-primary)"},children:[l.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[l.jsx("span",{className:"text-red-400",children:"FAIL"}),l.jsx("span",{className:"font-mono",children:s.rule_id})]}),s.message&&l.jsx("div",{className:"mt-1 opacity-80",children:s.message}),s.artifact_id&&l.jsx("div",{className:"mt-1 font-mono text-xs opacity-60",children:s.artifact_id})]},i)),r.length>0&&n.length>0&&l.jsxs("div",{className:"text-xs p-2 rounded",style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--text-muted)"},children:[r.length," rule",r.length!==1?"s":""," passed"]})]})}function pB(e,t){const n=(e||"").split(`
`),r=(t||"").split(`
`),s=[];let i=0,o=0;for(;i<n.length||o<r.length;)if(i>=n.length)s.push({type:"added",line:r[o],lineNum:o+1}),o++;else if(o>=r.length)s.push({type:"removed",line:n[i],lineNum:i+1}),i++;else if(n[i]===r[o])s.push({type:"same",line:n[i],oldLineNum:i+1,newLineNum:o+1}),i++,o++;else{let a=r.slice(o,o+5).indexOf(n[i]),c=n.slice(i,i+5).indexOf(r[o]);if(a!==-1&&(c===-1||a<=c)){for(let u=0;u<a;u++)s.push({type:"added",line:r[o+u],lineNum:o+u+1});o+=a}else if(c!==-1){for(let u=0;u<c;u++)s.push({type:"removed",line:n[i+u],lineNum:i+u+1});i+=c}else s.push({type:"removed",line:n[i],lineNum:i+1}),s.push({type:"added",line:r[o],lineNum:o+1}),i++,o++}return s}function mB({diff:e}){const[t,n]=m.useState(!0),r=pB(e.old_content,e.new_content),s={M:{bg:"rgba(245, 158, 11, 0.2)",color:"#f59e0b"},A:{bg:"rgba(34, 197, 94, 0.2)",color:"#22c55e"},D:{bg:"rgba(239, 68, 68, 0.2)",color:"#ef4444"}};return l.jsxs("div",{className:"border rounded mb-3",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 cursor-pointer",style:{background:"var(--bg-panel)"},onClick:()=>n(!t),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium",style:s[e.status]||s.M,children:e.status}),l.jsx("span",{className:"text-sm font-mono truncate",style:{color:"var(--text-primary)"},children:e.file_path})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-xs",style:{color:"var(--action-success)"},children:["+",e.additions]}),l.jsxs("span",{className:"text-xs",style:{color:"var(--state-error-text)"},children:["-",e.deletions]}),l.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:t?"":"+"})]})]}),t&&l.jsx("div",{className:"overflow-x-auto",style:{background:"var(--bg-canvas)"},children:l.jsx("pre",{className:"text-xs font-mono m-0 p-0",children:r.map((i,o)=>l.jsxs("div",{className:"flex",style:{background:i.type==="added"?"rgba(34, 197, 94, 0.1)":i.type==="removed"?"rgba(239, 68, 68, 0.1)":"transparent",borderLeft:i.type==="added"?"3px solid #22c55e":i.type==="removed"?"3px solid #ef4444":"3px solid transparent"},children:[l.jsx("span",{className:"select-none px-2 text-right",style:{color:"var(--text-muted)",minWidth:"40px",background:"rgba(0,0,0,0.1)"},children:i.type==="same"?i.oldLineNum:i.lineNum||""}),l.jsx("span",{className:"select-none px-1",style:{color:i.type==="added"?"#22c55e":i.type==="removed"?"#ef4444":"var(--text-muted)",minWidth:"16px"},children:i.type==="added"?"+":i.type==="removed"?"-":" "}),l.jsx("span",{className:"flex-1 px-2 whitespace-pre",style:{color:"var(--text-primary)"},children:i.line})]},o))})})]})}function gB({workspaceId:e,artifactId:t=null,onClose:n}){const[r,s]=m.useState([]),[i,o]=m.useState(!0),[a,c]=m.useState(null);m.useEffect(()=>{e&&(o(!0),c(null),Ee.getDiff(e,t).then(d=>{s(d.diffs||[])}).catch(d=>{c(d.message)}).finally(()=>{o(!1)}))},[e,t]);const u=d=>{d.key==="Escape"&&(n==null||n())};return l.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0, 0, 0, 0.7)"},onClick:d=>d.target===d.currentTarget&&(n==null?void 0:n()),onKeyDown:u,tabIndex:0,children:l.jsxs("div",{className:"w-full max-w-4xl max-h-[80vh] flex flex-col rounded-lg shadow-xl",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:t?"Artifact Changes":"All Changes"}),l.jsx("button",{onClick:n,className:"p-1 rounded hover:opacity-80",style:{color:"var(--text-muted)"},children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i?l.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:"Loading diff..."}):a?l.jsxs("div",{className:"text-center py-8",style:{color:"var(--state-error-text)"},children:["Error: ",a]}):r.length===0?l.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:"No changes to display"}):r.map((d,f)=>l.jsx(mB,{diff:d},d.artifact_id||f))}),l.jsx("div",{className:"flex justify-end px-4 py-3 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsx("button",{onClick:n,className:"px-4 py-2 rounded text-sm",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Close"})})]})})}function vB(e){const t=e.split(":");if(t.length!==4)return{display:e,scope:"unknown"};const[n,r,s,i]=t,o=r.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase()),a=i.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase());return{scope:n,name:r,version:s,kind:i,displayName:o,kindLabel:a,display:`${o} - ${a}`}}function yB(e){const t={doctype:{label:"Document Types",items:[]},role:{label:"Roles",items:[]},template:{label:"Templates",items:[]}};return e.forEach(n=>{const r=vB(n);t[r.scope]&&t[r.scope].items.push(r)}),Object.entries(t).filter(([n,r])=>r.items.length>0).map(([n,r])=>({scope:n,...r}))}function xB({workspaceId:e,onCommit:t,onCancel:n,loading:r=!1,modifiedArtifacts:s=[],modifiedFiles:i=[]}){const[o,a]=m.useState(""),[c,u]=m.useState(!1),d=yB(s),f=s.length,h=x=>{x.preventDefault(),o.trim()&&!r&&t(o.trim())},p=x=>{x.key==="Escape"&&!r&&n()};return l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0, 0, 0, 0.7)"},onClick:x=>x.target===x.currentTarget&&!r&&n(),onKeyDown:p,children:[l.jsxs("div",{className:"w-full max-w-lg p-6 rounded-lg shadow-xl",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Commit Changes"}),f>0&&l.jsxs("div",{className:"mb-4 p-3 rounded",style:{background:"var(--bg-canvas)",border:"1px solid var(--border-panel)"},children:[l.jsxs("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-muted)"},children:[f," ",f===1?"change":"changes"," to be committed"]}),l.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:d.map(x=>l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1",style:{color:"var(--text-secondary)"},children:x.label}),l.jsx("div",{className:"space-y-1",children:x.items.map((v,_)=>l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("span",{className:"px-1.5 py-0.5 rounded",style:{background:"var(--state-warning-bg, rgba(245, 158, 11, 0.2))",color:"var(--state-warning-text, #f59e0b)"},children:"M"}),l.jsx("span",{style:{color:"var(--text-primary)"},children:v.displayName}),l.jsx("span",{style:{color:"var(--text-muted)"},children:v.kindLabel}),l.jsxs("span",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:["v",v.version]})]},_))})]},x.scope))}),l.jsx("button",{type:"button",onClick:()=>u(!0),className:"mt-3 text-xs hover:underline",style:{color:"var(--action-primary)"},children:"View detailed changes..."})]}),l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-muted)"},children:"Commit Message"}),l.jsx("textarea",{value:o,onChange:x=>a(x.target.value),placeholder:"Describe your changes...",className:"w-full p-3 rounded text-sm resize-none",style:{background:"var(--bg-input, var(--bg-canvas))",border:"1px solid var(--border-panel)",color:"var(--text-primary)",minHeight:"80px"},autoFocus:!0,disabled:r}),l.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:'Keep it concise - describe the "why" not the "what"'})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:n,disabled:r,className:"px-4 py-2 rounded text-sm",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)"},children:"Cancel"}),l.jsx("button",{type:"submit",disabled:!o.trim()||r,className:"px-4 py-2 rounded text-sm font-medium",style:{background:o.trim()&&!r?"var(--action-success)":"var(--border-panel)",color:o.trim()&&!r?"#000":"var(--text-muted)",cursor:o.trim()&&!r?"pointer":"not-allowed"},children:r?"Committing...":"Commit"})]})]})]}),c&&e&&l.jsx(gB,{workspaceId:e,onClose:()=>u(!1)})]})}function bB(e){const t=e.split(":");if(t.length!==4)return{display:e};const[n,r,s,i]=t,o=r.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase()),a=i.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase());return{scope:n,name:r,displayName:o,kind:i,kindLabel:a,version:s,display:`${o} - ${a}`}}function wB({workspaceId:e,state:t,loading:n,onCommit:r,onDiscard:s,onClose:i,onRefresh:o}){var C,T;const[a,c]=m.useState(!1),[u,d]=m.useState(!1),[f,h]=m.useState(!1),[p,x]=m.useState(null),v=(t==null?void 0:t.is_dirty)??!1,_=(t==null?void 0:t.modified_artifacts)??[],g=((C=t==null?void 0:t.tier1)==null?void 0:C.passed)??!0,y=((T=t==null?void 0:t.tier1)==null?void 0:T.results)??[],b=(t==null?void 0:t.branch)??"",w=t!=null&&t.expires_at?new Date(t.expires_at):null,S=async R=>{d(!0),x(null);try{const D=await Ee.commit(e,R);c(!1),r==null||r(D),o==null||o()}catch(D){x(D.message)}finally{d(!1)}},k=async()=>{if(confirm("Discard all uncommitted changes? This cannot be undone.")){h(!0);try{await Ee.discard(e),s==null||s(),o==null||o()}catch(R){console.error("Discard failed:",R),alert("Failed to discard changes: "+R.message)}finally{h(!1)}}},j=async()=>{if(v){alert("Cannot close workspace with uncommitted changes. Commit or discard first.");return}if(confirm("Close this workspace? You can open a new one later."))try{await Ee.closeWorkspace(e),i==null||i()}catch(R){console.error("Close failed:",R),alert("Failed to close workspace: "+R.message)}},N=R=>{if(!R)return null;const z=R-new Date;if(z<=0)return"Expired";const E=Math.floor(z/(1e3*60*60)),O=Math.floor(z%(1e3*60*60)/(1e3*60));return E>0?`${E}h ${O}m remaining`:`${O}m remaining`};return l.jsxs("div",{className:"w-80 flex flex-col border-l h-full",style:{borderColor:"var(--border-panel)",background:"var(--bg-panel)"},children:[l.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:"var(--text-muted)"},children:"Workspace Status"})}),n?l.jsx("div",{className:"p-4 text-sm",style:{color:"var(--text-muted)"},children:"Loading..."}):l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsx("div",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Branch"}),l.jsx("div",{className:"text-sm font-mono truncate",style:{color:"var(--text-primary)"},title:b,children:b||"-"}),w&&l.jsx("div",{className:"text-xs mt-2",style:{color:"var(--text-muted)"},children:N(w)})]}),l.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Status"}),l.jsx("div",{className:"text-xs px-2 py-0.5 rounded",style:{background:v?"var(--state-warning-bg, rgba(245, 158, 11, 0.2))":"var(--state-success-bg)",color:v?"var(--state-warning-text, #f59e0b)":"var(--state-success-text)"},children:v?"Modified":"Clean"})]}),_.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:["Changed (",_.length,")"]}),l.jsx("div",{className:"space-y-1",children:_.map(R=>{const D=bB(R);return l.jsxs("div",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},title:R,children:[l.jsx("span",{style:{color:"var(--text-primary)"},children:D.displayName||R}),D.kindLabel&&l.jsxs("span",{style:{color:"var(--text-muted)"},children:[" ","- ",D.kindLabel]})]},R)})})]})]}),l.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Tier 1 Validation"}),l.jsx(nS,{results:y,compact:!0})]}),y.length>0&&!g&&l.jsx("div",{className:"mt-3",children:l.jsx(nS,{results:y})})]})]}),l.jsxs("div",{className:"px-4 py-3 border-t space-y-2",style:{borderColor:"var(--border-panel)"},children:[l.jsx("button",{onClick:()=>c(!0),disabled:!v||!g||n,className:"w-full px-4 py-2 rounded text-sm font-medium transition-opacity",style:{background:v&&g?"var(--action-success)":"var(--border-panel)",color:v&&g?"#000":"var(--text-muted)",cursor:v&&g&&!n?"pointer":"not-allowed",opacity:n?.5:1},children:"Commit Changes"}),!g&&v&&l.jsx("div",{className:"text-xs text-center",style:{color:"var(--state-error-text)"},children:"Fix validation errors to commit"}),v&&l.jsx("button",{onClick:k,disabled:f||n,className:"w-full px-4 py-2 rounded text-sm transition-opacity",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)",opacity:f||n?.5:1},children:f?"Discarding...":"Discard Changes"}),!v&&l.jsx("button",{onClick:j,disabled:n,className:"w-full px-4 py-2 rounded text-sm transition-opacity",style:{background:"transparent",border:"1px solid var(--border-panel)",color:"var(--text-muted)",opacity:n?.5:1},children:"Close Workspace"})]}),a&&l.jsx(xB,{workspaceId:e,onCommit:S,onCancel:()=>{c(!1),x(null)},loading:u,modifiedArtifacts:_,modifiedFiles:(t==null?void 0:t.modified_files)??[]}),p&&l.jsx("div",{className:"absolute bottom-4 left-4 right-4 p-3 rounded text-sm",style:{background:"rgba(239, 68, 68, 0.9)",color:"#fff"},children:p})]})}function _B(){const{isAdmin:e,loading:t}=mi(),[n,r]=m.useState(null),[s,i]=m.useState(null),[o,a]=m.useState(!1),[c,u]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState(null),{workspaceId:x,loading:v,error:_,reinitialize:g}=kq(),{state:y,loading:b,refresh:w}=Nq(x),{documentTypes:S,loading:k}=Eq(),{roles:j,loading:N}=Cq(),{templates:C,loading:T}=Zq(),{workflows:R,loading:D,refresh:z}=Jq(),E=m.useCallback(async Q=>{if(r(Q),u(null),f(null),p(null),i(null),!!Q){a(!0);try{const te=await Ee.getDocumentType(Q.doc_type_id);i(te)}catch(te){console.error("Failed to load doc type details:",te),i(Q)}finally{a(!1)}}},[]),O=m.useCallback(Q=>{u(Q),r(null),i(null),f(null),p(null)},[]),A=m.useCallback(Q=>{f(Q),r(null),i(null),u(null),p(null)},[]),$=m.useCallback(Q=>{p(Q),r(null),i(null),u(null),f(null)},[]),P=m.useCallback((Q,te)=>{w()},[w]),I=m.useCallback(Q=>{console.log("Committed:",Q.commit_hash)},[]),L=m.useCallback(()=>{r(null),i(null),u(null),f(null),p(null)},[]),M=m.useCallback(async Q=>{if(x)try{const te=await Ee.createOrchestrationWorkflow(x,Q);await z(),w(),p({workflow_id:te.workflow_id,active_version:te.version,name:Q.name||te.workflow_id.replace(/_/g," ").replace(/\b\w/g,ne=>ne.toUpperCase())}),r(null),i(null),u(null),f(null)}catch(te){console.error("Failed to create workflow:",te),alert(`Failed to create workflow: ${te.message}`)}},[x,z,w]),q=m.useCallback(async Q=>{if(x)try{await Ee.deleteOrchestrationWorkflow(x,Q),await z(),w(),p(null)}catch(te){console.error("Failed to delete workflow:",te),alert(`Failed to delete workflow: ${te.message}`)}},[x,z,w]),F=m.useCallback(()=>{g(),r(null),i(null),u(null),f(null),p(null)},[g]);if(t)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsx("span",{style:{color:"var(--text-muted)"},children:"Loading..."})});if(!e)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8 rounded-lg",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"text-lg font-semibold mb-2",style:{color:"var(--state-error-text)"},children:"Access Denied"}),l.jsx("div",{style:{color:"var(--text-muted)"},children:"Admin access required for the Workbench."})]})});if(v)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg mb-2",style:{color:"var(--text-primary)"},children:"Initializing Workspace"}),l.jsx("div",{style:{color:"var(--text-muted)"},children:"Setting up your editing environment..."})]})});if(_)return l.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-8 rounded-lg max-w-md",style:{background:"var(--bg-panel)",border:"1px solid var(--border-panel)"},children:[l.jsx("div",{className:"text-lg font-semibold mb-2",style:{color:"var(--state-error-text)"},children:"Workspace Error"}),l.jsx("div",{className:"mb-4",style:{color:"var(--text-muted)"},children:_}),l.jsx("button",{onClick:g,className:"px-4 py-2 rounded text-sm",style:{background:"var(--action-primary)",color:"#000"},children:"Retry"})]})});const W=c&&!n&&!d&&!h,G=d&&!n&&!c&&!h,Z=h&&!n&&!c&&!d;return l.jsxs("div",{className:"flex h-screen overflow-hidden",style:{background:"var(--bg-canvas)"},children:[l.jsx(e$,{documentTypes:S,roles:j,templates:C,workflows:R,loading:k,rolesLoading:N,templatesLoading:T,workflowsLoading:D,selectedDocType:n,selectedRole:c,selectedTemplate:d,selectedWorkflow:h,onSelectDocType:E,onSelectRole:O,onSelectTemplate:A,onSelectWorkflow:$,onCreateWorkflow:M}),W?l.jsx(j$,{workspaceId:x,role:c,onArtifactSave:P}):G?l.jsx(k$,{workspaceId:x,template:d,onArtifactSave:P}):Z?l.jsx(lB,{workspaceId:x,workflow:h,onArtifactSave:P,onDelete:q}):l.jsx(S$,{workspaceId:x,docType:s,loading:o,roles:j,onArtifactSave:P}),l.jsx(wB,{workspaceId:x,state:y,loading:b,onCommit:I,onDiscard:L,onClose:F,onRefresh:w})]})}function SB({user:e,onClick:t}){return l.jsx("div",{className:"p-3 border-t",style:{borderColor:"var(--border-panel)"},children:l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors",style:{color:"var(--text-primary)"},children:[e!=null&&e.avatar_url?l.jsx("img",{src:e.avatar_url,alt:e.name,className:"w-8 h-8 rounded-full"}):l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"var(--bg-canvas)"},children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),l.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[l.jsx("div",{className:"text-sm font-medium truncate",children:(e==null?void 0:e.name)||"User"}),l.jsx("div",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:(e==null?void 0:e.email)||""})]})]})})}function jB(){var R,D,z;const{user:e}=mi(),[t,n]=m.useState(!1),{projects:r,loading:s,error:i,refresh:o}=yq({includeArchived:t}),[a,c]=m.useState(null),[u,d]=m.useState(null),[f,h]=m.useState(!1),[p,x]=m.useState(!1),{theme:v,setTheme:_}=lC(),g=Object.keys(r),y=a&&r[a]?a:g[0]||null;m.useEffect(()=>{if(y&&r[y]){const E=r[y];document.title=`${E.projectId} - The Combine`}else document.title="The Combine"},[y,r]);const b=E=>{c(E),d(null)},w=()=>{h(!0)},S=async E=>{await o(),E&&E.id&&(c(E.id),d("concierge_intake")),h(!1)},k=()=>{h(!1)},j=async(E,O)=>{try{await $e.updateProject(E,O),await o()}catch(A){throw console.error("Failed to update project:",A),A}},N=async E=>{try{if(await $e.archiveProject(E),!t){const O=Object.values(r).sort((P,I)=>{const L=(P.name||"").localeCompare(I.name||"");return L!==0?L:(P.projectId||"").localeCompare(I.projectId||"")}),A=O.findIndex(P=>P.id===E),$=O[A+1]||O[A-1]||null;c(($==null?void 0:$.id)||null)}await o()}catch(O){throw console.error("Failed to archive project:",O),O}},C=async E=>{try{await $e.unarchiveProject(E),await o()}catch(O){throw console.error("Failed to unarchive project:",O),O}},T=async E=>{try{await $e.deleteProject(E);const O=Object.values(r).sort((P,I)=>{const L=(P.name||"").localeCompare(I.name||"");return L!==0?L:(P.projectId||"").localeCompare(I.projectId||"")}),A=O.findIndex(P=>P.id===E),$=O[A+1]||O[A-1]||null;c(($==null?void 0:$.id)||null),await o()}catch(O){throw console.error("Failed to delete project:",O),O}};return s?l.jsx("div",{className:`flex h-screen items-center justify-center theme-${v}`,style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/logo-light.png",alt:"The Combine",className:"h-16 mx-auto mb-4 animate-pulse"}),l.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading projects..."})]})}):i?l.jsx("div",{className:`flex h-screen items-center justify-center theme-${v}`,style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center p-6 rounded-lg",style:{background:"var(--bg-panel)"},children:[l.jsxs("p",{className:"text-red-500 mb-4",children:["Failed to load projects: ",i]}),l.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-emerald-500 text-white rounded hover:bg-emerald-600",children:"Retry"})]})}):l.jsxs("div",{className:`flex flex-col h-screen theme-${v}`,children:[l.jsxs("header",{className:"h-12 flex items-center justify-between px-4 border-b flex-shrink-0",style:{background:"var(--bg-panel)",borderColor:"var(--border-panel)"},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo-256.png",alt:"The Combine",className:"h-7 w-7"}),l.jsx("span",{className:"text-sm font-bold tracking-wide",style:{color:"var(--text-primary)"},children:"THE COMBINE"})]}),l.jsx("button",{className:"p-2 rounded hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},title:"Help",children:l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),l.jsx("path",{d:"M12 17h.01"})]})})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx(OP,{projects:r,selectedId:y,onSelectProject:b,onNewProject:w,showArchived:t,onToggleShowArchived:()=>n(E=>!E),userSection:l.jsx(SB,{user:e,onClick:()=>x(!0)})}),l.jsx("div",{className:"flex-1",children:y?l.jsx(hc,{children:l.jsx(Iq,{projectId:y,projectCode:(R=r[y])==null?void 0:R.projectId,projectName:(D=r[y])==null?void 0:D.name,isArchived:(z=r[y])==null?void 0:z.isArchived,autoExpandNodeId:u,theme:v,onThemeChange:_,onProjectUpdate:j,onProjectArchive:N,onProjectUnarchive:C,onProjectDelete:T})},y):l.jsx("div",{className:"flex items-center justify-center h-full",style:{background:"var(--bg-canvas)"},children:l.jsx("div",{className:"text-center",children:l.jsx("p",{style:{color:"var(--text-muted)"},children:"No projects yet. Create one to get started."})})})}),f&&l.jsx(qq,{onClose:k,onComplete:S}),p&&l.jsx($q,{onClose:()=>x(!1)})]})]})}function kB(){const{isAuthenticated:e,loading:t}=mi(),{theme:n}=lC(),[r,s]=m.useState(window.location.pathname);return m.useEffect(()=>{const i=()=>s(window.location.pathname);return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]),t?l.jsx("div",{className:`flex h-screen items-center justify-center theme-${n}`,style:{background:"var(--bg-canvas)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/logo-light.png",alt:"The Combine",className:"h-16 mx-auto mb-4 animate-pulse"}),l.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading..."})]})}):e?r==="/admin/workbench"?l.jsx("div",{className:`h-screen theme-${n}`,children:l.jsx(_B,{})}):l.jsx(jB,{}):r==="/learn"?l.jsx(Qq,{}):l.jsx(Gq,{})}function NB(){return l.jsx(wq,{children:l.jsx(kB,{})})}Sm.createRoot(document.getElementById("root")).render(l.jsx(B.StrictMode,{children:l.jsx(NB,{})}));
//# sourceMappingURL=index-C7PALHbO.js.map
