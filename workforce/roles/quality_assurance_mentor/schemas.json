{
  "qa_review_request": {
    "description": "Input schema describing what the QA Mentor is asked to review for a given ticket or epic.",
    "type": "object",
    "properties": {
      "epic_id": {
        "type": "string",
        "description": "High-level epic identifier, e.g. AUTH-100, PIPELINE-150."
      },
      "ticket_id": {
        "type": "string",
        "description": "Specific ticket or story ID being reviewed, if applicable."
      },
      "change_summary": {
        "type": "string",
        "description": "Human-readable summary of the proposed change, including context from BA and Developer."
      },
      "artifacts": {
        "type": "array",
        "description": "List of artifacts provided for review (e.g. spec snippets, code excerpts, test cases).",
        "items": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "Artifact type, e.g. 'spec', 'code', 'test_plan', 'api_contract', 'db_migration'."
            },
            "name": {
              "type": "string",
              "description": "Short name or label for the artifact."
            },
            "content": {
              "type": "string",
              "description": "The actual content of the artifact (or a relevant excerpt)."
            }
          },
          "required": ["type", "content"]
        }
      },
      "risk_profile": {
        "type": "string",
        "description": "Optional hint about expected risk level from the orchestrator or PO.",
        "enum": ["low", "medium", "high"]
      }
    },
    "required": ["change_summary"]
  },
  "qa_review_response": {
    "description": "Structured representation of the QA Mentor's feedback.",
    "type": "object",
    "properties": {
      "summary": {
        "type": "string",
        "description": "Short overview of the change and overall risk posture."
      },
      "functional_findings": {
        "type": "array",
        "description": "Issues or questions about behaviour and functional correctness.",
        "items": { "type": "string" }
      },
      "test_coverage_review": {
        "type": "array",
        "description": "Notes about existing tests, coverage gaps, and over- or under-testing.",
        "items": { "type": "string" }
      },
      "risk_assessment": {
        "type": "string",
        "description": "Narrative description of the key risks, including regression and data risks."
      },
      "required_changes": {
        "type": "array",
        "description": "Checklist of blocking issues that must be resolved before approval.",
        "items": { "type": "string" }
      },
      "optional_improvements": {
        "type": "array",
        "description": "Non-blocking suggestions that would improve robustness, testability, or clarity.",
        "items": { "type": "string" }
      },
      "suggested_test_cases": {
        "type": "array",
        "description": "Concrete, scenario-style test ideas the QA role or Developer can implement.",
        "items": { "type": "string" }
      },
      "verdict": {
        "type": "string",
        "description": "Overall decision from the QA Mentor.",
        "enum": ["APPROVE", "APPROVE_WITH_RESERVATIONS", "BLOCK"]
      }
    },
    "required": ["summary", "risk_assessment", "verdict"]
  }
}
